// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

Bn=function(t){if("undefined"!=typeof require)return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')};var In,Gn,_n,Pn,En,Rn,An,kn,Fn,xn,Mn,On,Dn,Ln,Bn,Nn,Wn,Vn,Tn,jn,Cn,Hn,Un,zn,Jn,qn,Xn,$n,Yn,Zn,Kn,Qn,tr,sr,er,ir,nr,rr,hr,or,ar,F,O,D,L,B="undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(Bn,{get:(t,s)=>("undefined"!=typeof require?require:t)[s]}):Bn;{let D=function(t){Mn=t},L=function(t){return t*Ln},B=function(t,s){return Math.abs(t-s)<=xn*Math.max(1,Math.abs(t),Math.abs(s))},N=function(){var t=new Mn(4);return Mn!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},W=function(t){var s=new Mn(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},V=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},j=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},H=function(t,s,e,i){var n=new Mn(4);return n[0]=t,n[1]=s,n[2]=e,n[3]=i,n},U=function(t,s,e,i,n){return t[0]=s,t[1]=e,t[2]=i,t[3]=n,t},z=function(t,s){var e;return t===s?(e=s[1],t[1]=s[2],t[2]=e):(t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3]),t},J=function(t,s){var e=s[0],i=s[1],n=s[2],r=e*(s=s[3])-n*i;return r?(t[0]=s*(r=1/r),t[1]=-i*r,t[2]=-n*r,t[3]=e*r,t):null},q=function(t,s){var e=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=e,t},X=function(t){return t[0]*t[3]-t[2]*t[1]},t=function(t,s,e){var i=s[0],n=s[1],r=s[2],s=s[3],h=e[0],o=e[1],a=e[2],e=e[3];return t[0]=i*h+r*o,t[1]=n*h+s*o,t[2]=i*a+r*e,t[3]=n*a+s*e,t},$=function(t,s,e){var i=s[0],n=s[1],r=s[2],s=s[3],h=Math.sin(e),e=Math.cos(e);return t[0]=i*e+r*h,t[1]=n*e+s*h,t[2]=i*-h+r*e,t[3]=n*-h+s*e,t},Y=function(t,s,e){var i=s[0],n=s[1],r=s[2],s=s[3],h=e[0],e=e[1];return t[0]=i*h,t[1]=n*h,t[2]=r*e,t[3]=s*e,t},Z=function(t,s){var e=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=e,t[2]=-e,t[3]=s,t},K=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},Q=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},tt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},st=function(t,s,e,i){return t[2]=i[2]/i[0],e[0]=i[0],e[1]=i[1],e[3]=i[3]-t[2]*e[1],[t,s,e]},et=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t},s=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t[3]=s[3]-e[3],t},it=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},nt=function(t,s){var e=t[0],i=t[1],n=t[2],t=t[3],r=s[0],h=s[1],o=s[2],s=s[3];return Math.abs(e-r)<=xn*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(i-h)<=xn*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(n-o)<=xn*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(t-s)<=xn*Math.max(1,Math.abs(t),Math.abs(s))},rt=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t},ht=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t[3]=s[3]+e[3]*i,t},ot=function(){var t=new Mn(6);return Mn!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},at=function(t){var s=new Mn(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},lt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},ut=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},ct=function(t,s,e,i,n,r){var h=new Mn(6);return h[0]=t,h[1]=s,h[2]=e,h[3]=i,h[4]=n,h[5]=r,h},ft=function(t,s,e,i,n,r,h){return t[0]=s,t[1]=e,t[2]=i,t[3]=n,t[4]=r,t[5]=h,t},dt=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=s[4],s=s[5],o=e*r-i*n;return o?(t[0]=r*(o=1/o),t[1]=-i*o,t[2]=-n*o,t[3]=e*o,t[4]=(n*s-r*h)*o,t[5]=(i*h-e*s)*o,t):null},pt=function(t){return t[0]*t[3]-t[1]*t[2]},e=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=s[4],s=s[5],a=e[0],l=e[1],u=e[2],c=e[3],f=e[4],e=e[5];return t[0]=i*a+r*l,t[1]=n*a+h*l,t[2]=i*u+r*c,t[3]=n*u+h*c,t[4]=i*f+r*e+o,t[5]=n*f+h*e+s,t},mt=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=s[4],s=s[5],a=Math.sin(e),e=Math.cos(e);return t[0]=i*e+r*a,t[1]=n*e+h*a,t[2]=i*-a+r*e,t[3]=n*-a+h*e,t[4]=o,t[5]=s,t},gt=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=s[4],s=s[5],a=e[0],e=e[1];return t[0]=i*a,t[1]=n*a,t[2]=r*e,t[3]=h*e,t[4]=o,t[5]=s,t},yt=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=s[4],s=s[5],a=e[0],e=e[1];return t[0]=i,t[1]=n,t[2]=r,t[3]=h,t[4]=i*a+r*e+o,t[5]=n*a+h*e+s,t},wt=function(t,s){var e=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=e,t[2]=-e,t[3]=s,t[4]=0,t[5]=0,t},St=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},bt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},vt=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},xt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},Mt=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t[4]=s[4]+e[4],t[5]=s[5]+e[5],t},i=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t[3]=s[3]-e[3],t[4]=s[4]-e[4],t[5]=s[5]-e[5],t},Tt=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*e,t[5]=s[5]*e,t},Ct=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t[3]=s[3]+e[3]*i,t[4]=s[4]+e[4]*i,t[5]=s[5]+e[5]*i,t},It=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},Gt=function(t,s){var e=t[0],i=t[1],n=t[2],r=t[3],h=t[4],t=t[5],o=s[0],a=s[1],l=s[2],u=s[3],c=s[4],s=s[5];return Math.abs(e-o)<=xn*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(i-a)<=xn*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(n-l)<=xn*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-u)<=xn*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(h-c)<=xn*Math.max(1,Math.abs(h),Math.abs(c))&&Math.abs(t-s)<=xn*Math.max(1,Math.abs(t),Math.abs(s))},n=function(){var t=new Mn(9);return Mn!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},_t=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},Pt=function(t){var s=new Mn(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},Et=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Rt=function(t,s,e,i,n,r,h,o,a){var l=new Mn(9);return l[0]=t,l[1]=s,l[2]=e,l[3]=i,l[4]=n,l[5]=r,l[6]=h,l[7]=o,l[8]=a,l},At=function(t,s,e,i,n,r,h,o,a,l){return t[0]=s,t[1]=e,t[2]=i,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t},kt=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ft=function(t,s){var e,i,n;return t===s?(e=s[1],i=s[2],n=s[5],t[1]=s[3],t[2]=s[6],t[3]=e,t[5]=s[7],t[6]=i,t[7]=n):(t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8]),t},Ot=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=(s=s[8])*h-o*l,c=-s*r+o*a,f=l*r-h*a,d=e*u+i*c+n*f;return d?(t[0]=u*(d=1/d),t[1]=(-s*i+n*l)*d,t[2]=(o*i-n*h)*d,t[3]=c*d,t[4]=(s*e-n*a)*d,t[5]=(-o*e+n*r)*d,t[6]=f*d,t[7]=(-l*e+i*a)*d,t[8]=(h*e-i*r)*d,t):null},Dt=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],s=s[8];return t[0]=h*s-o*l,t[1]=n*l-i*s,t[2]=i*o-n*h,t[3]=o*a-r*s,t[4]=e*s-n*a,t[5]=n*r-e*o,t[6]=r*l-h*a,t[7]=i*a-e*l,t[8]=e*h-i*r,t},Lt=function(t){var s=t[0],e=t[3],i=t[4],n=t[5],r=t[6],h=t[7],o=t[8];return s*(o*i-n*h)+t[1]*(-o*e+n*r)+t[2]*(h*e-i*r)},r=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=e[0],f=e[1],d=e[2],p=e[3],m=e[4],g=e[5],y=e[6],w=e[7],e=e[8];return t[0]=c*i+f*h+d*l,t[1]=c*n+f*o+d*u,t[2]=c*r+f*a+d*s,t[3]=p*i+m*h+g*l,t[4]=p*n+m*o+g*u,t[5]=p*r+m*a+g*s,t[6]=y*i+w*h+e*l,t[7]=y*n+w*o+e*u,t[8]=y*r+w*a+e*s,t},Bt=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=e[0],e=e[1];return t[0]=i,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=c*i+e*h+l,t[7]=c*n+e*o+u,t[8]=c*r+e*a+s,t},Nt=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=Math.sin(e),e=Math.cos(e);return t[0]=e*i+c*h,t[1]=e*n+c*o,t[2]=e*r+c*a,t[3]=e*h-c*i,t[4]=e*o-c*n,t[5]=e*a-c*r,t[6]=l,t[7]=u,t[8]=s,t},Wt=function(t,s,e){var i=e[0],e=e[1];return t[0]=i*s[0],t[1]=i*s[1],t[2]=i*s[2],t[3]=e*s[3],t[4]=e*s[4],t[5]=e*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Vt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},jt=function(t,s){var e=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=e,t[2]=0,t[3]=-e,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ht=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ut=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},zt=function(t,s){var e=s[0],i=s[2],n=i+i,e=e*(l=e+e),r=(h=s[1])*l,h=h*(u=h+h),o=i*l,a=i*u,l=(s=s[3])*l,u=s*u,s=s*n;return t[0]=1-h-(i=i*n),t[3]=r-s,t[6]=o+u,t[1]=r+s,t[4]=1-e-i,t[7]=a-l,t[2]=o-u,t[5]=a+l,t[8]=1-e-h,t},Jt=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=e*o-i*h,w=e*a-n*h,S=e*l-r*h,b=i*a-n*o,v=i*l-r*o,x=n*l-r*a,M=u*m-c*p,T=u*g-f*p,C=c*g-f*m;return(d=y*(f=f*(s=s[15])-d*g)-w*(c=c*s-d*m)+S*C+b*(u=u*s-d*p)-v*T+x*M)?(t[0]=(o*f-a*c+l*C)*(d=1/d),t[1]=(a*u-h*f-l*T)*d,t[2]=(h*c-o*u+l*M)*d,t[3]=(n*c-i*f-r*C)*d,t[4]=(e*f-n*u+r*T)*d,t[5]=(i*u-e*c-r*M)*d,t[6]=(m*x-g*v+s*b)*d,t[7]=(g*S-p*x-s*w)*d,t[8]=(p*v-m*S+s*y)*d,t):null},qt=function(t,s,e){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/e,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},Xt=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},$t=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Yt=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t[4]=s[4]+e[4],t[5]=s[5]+e[5],t[6]=s[6]+e[6],t[7]=s[7]+e[7],t[8]=s[8]+e[8],t},h=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t[3]=s[3]-e[3],t[4]=s[4]-e[4],t[5]=s[5]-e[5],t[6]=s[6]-e[6],t[7]=s[7]-e[7],t[8]=s[8]-e[8],t},Zt=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*e,t[5]=s[5]*e,t[6]=s[6]*e,t[7]=s[7]*e,t[8]=s[8]*e,t},Kt=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t[3]=s[3]+e[3]*i,t[4]=s[4]+e[4]*i,t[5]=s[5]+e[5]*i,t[6]=s[6]+e[6]*i,t[7]=s[7]+e[7]*i,t[8]=s[8]+e[8]*i,t},Qt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},ts=function(t,s){var e=t[0],i=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],t=t[8],u=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7],s=s[8];return Math.abs(e-u)<=xn*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(i-c)<=xn*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(n-f)<=xn*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=xn*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(h-p)<=xn*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(o-m)<=xn*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=xn*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=xn*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(t-s)<=xn*Math.max(1,Math.abs(t),Math.abs(s))},ss=function(){var t=new Mn(16);return Mn!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},es=function(t){var s=new Mn(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},is=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},ns=function(t,s,e,i,n,r,h,o,a,l,u,c,f,d,p,m){var g=new Mn(16);return g[0]=t,g[1]=s,g[2]=e,g[3]=i,g[4]=n,g[5]=r,g[6]=h,g[7]=o,g[8]=a,g[9]=l,g[10]=u,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},rs=function(t,s,e,i,n,r,h,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=e,t[2]=i,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},p=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},hs=function(t,s){var e,i,n,r,h,o;return t===s?(e=s[1],i=s[2],n=s[3],r=s[6],h=s[7],o=s[11],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=e,t[6]=s[9],t[7]=s[13],t[8]=i,t[9]=r,t[11]=s[14],t[12]=n,t[13]=h,t[14]=o):(t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15]),t},os=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=e*o-i*h,w=e*a-n*h,S=e*l-r*h,b=i*a-n*o,v=i*l-r*o,x=n*l-r*a,M=u*m-c*p,T=u*g-f*p,C=u*(s=s[15])-d*p,I=c*g-f*m,G=c*s-d*m,_=f*s-d*g,P=y*_-w*G+S*I+b*C-v*T+x*M;return P?(t[0]=(o*_-a*G+l*I)*(P=1/P),t[1]=(n*G-i*_-r*I)*P,t[2]=(m*x-g*v+s*b)*P,t[3]=(f*v-c*x-d*b)*P,t[4]=(a*C-h*_-l*T)*P,t[5]=(e*_-n*C+r*T)*P,t[6]=(g*S-p*x-s*w)*P,t[7]=(u*x-f*S+d*w)*P,t[8]=(h*G-o*C+l*M)*P,t[9]=(i*C-e*G-r*M)*P,t[10]=(p*v-m*S+s*y)*P,t[11]=(c*S-u*v-d*y)*P,t[12]=(o*T-h*I-a*M)*P,t[13]=(e*I-i*T+n*M)*P,t[14]=(m*w-p*b-g*y)*P,t[15]=(u*b-c*w+f*y)*P,t):null},as=function(t,s){var e=s[0],i=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=e*o-i*h,w=e*a-n*h,S=e*l-r*h,b=i*a-n*o,v=i*l-r*o,x=n*l-r*a,M=u*m-c*p,T=u*g-f*p,C=u*(s=s[15])-d*p,I=c*g-f*m,G=c*s-d*m,_=f*s-d*g;return t[0]=o*_-a*G+l*I,t[1]=n*G-i*_-r*I,t[2]=m*x-g*v+s*b,t[3]=f*v-c*x-d*b,t[4]=a*C-h*_-l*T,t[5]=e*_-n*C+r*T,t[6]=g*S-p*x-s*w,t[7]=u*x-f*S+d*w,t[8]=h*G-o*C+l*M,t[9]=i*C-e*G-r*M,t[10]=p*v-m*S+s*y,t[11]=c*S-u*v-d*y,t[12]=o*T-h*I-a*M,t[13]=e*I-i*T+n*M,t[14]=m*w-p*b-g*y,t[15]=u*b-c*w+f*y,t},ls=function(t){var s=t[0],e=t[1],i=t[2],n=t[4],r=t[5],h=t[6],o=t[8],a=t[9],l=t[10],u=t[12],c=t[13],f=t[14],d=s*r-e*n,p=s*h-i*n,m=e*h-i*r,g=o*c-a*u,y=o*f-l*u,w=a*f-l*c;return t[7]*(s*w-e*y+i*g)-t[3]*(n*w-r*y+h*g)+t[15]*(o*m-a*p+l*d)-t[11]*(u*m-c*p+f*d)},o=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],s=s[15],w=e[0],S=e[1],b=e[2],v=e[3];return t[0]=w*i+S*o+b*c+v*m,t[1]=w*n+S*a+b*f+v*g,t[2]=w*r+S*l+b*d+v*y,t[3]=w*h+S*u+b*p+v*s,t[4]=(w=e[4])*i+(S=e[5])*o+(b=e[6])*c+(v=e[7])*m,t[5]=w*n+S*a+b*f+v*g,t[6]=w*r+S*l+b*d+v*y,t[7]=w*h+S*u+b*p+v*s,t[8]=(w=e[8])*i+(S=e[9])*o+(b=e[10])*c+(v=e[11])*m,t[9]=w*n+S*a+b*f+v*g,t[10]=w*r+S*l+b*d+v*y,t[11]=w*h+S*u+b*p+v*s,t[12]=(w=e[12])*i+(S=e[13])*o+(b=e[14])*c+(v=e[15])*m,t[13]=w*n+S*a+b*f+v*g,t[14]=w*r+S*l+b*d+v*y,t[15]=w*h+S*u+b*p+v*s,t},us=function(t,s,e){var i,n,r,h,o,a,l,u,c,f,d,p,m=e[0],g=e[1],e=e[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*e+s[12],t[13]=s[1]*m+s[5]*g+s[9]*e+s[13],t[14]=s[2]*m+s[6]*g+s[10]*e+s[14],t[15]=s[3]*m+s[7]*g+s[11]*e+s[15]):(i=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=i,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=i*m+o*g+c*e+s[12],t[13]=n*m+a*g+f*e+s[13],t[14]=r*m+l*g+d*e+s[14],t[15]=h*m+u*g+p*e+s[15]),t},cs=function(t,s,e){var i=e[0],n=e[1],e=e[2];return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*n,t[5]=s[5]*n,t[6]=s[6]*n,t[7]=s[7]*n,t[8]=s[8]*e,t[9]=s[9]*e,t[10]=s[10]*e,t[11]=s[11]*e,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},fs=function(t,s,e,i){var n,r,h,o,a,l,u,c,f,d,p,m,g,y,w,S,b,v,x,M,T=i[0],C=i[1],i=i[2],I=Math.hypot(T,C,i);return I<xn?null:(T*=I=1/I,C*=I,i*=I,I=Math.sin(e),e=Math.cos(e),r=s[0],h=s[1],o=s[2],a=s[3],u=s[5],c=s[6],f=s[7],p=s[9],m=s[10],g=s[11],w=T*C*(n=1-e)-i*I,S=C*C*n+e,b=i*C*n+T*I,v=T*i*n+C*I,x=C*i*n-T*I,M=i*i*n+e,t[0]=r*(e=T*T*n+e)+(l=s[4])*(y=C*T*n+i*I)+(d=s[8])*(i=i*T*n-C*I),t[1]=h*e+u*y+p*i,t[2]=o*e+c*y+m*i,t[3]=a*e+f*y+g*i,t[4]=r*w+l*S+d*b,t[5]=h*w+u*S+p*b,t[6]=o*w+c*S+m*b,t[7]=a*w+f*S+g*b,t[8]=r*v+l*x+d*M,t[9]=h*v+u*x+p*M,t[10]=o*v+c*x+m*M,t[11]=a*v+f*x+g*M,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},ds=function(t,s,e){var i=Math.sin(e),e=Math.cos(e),n=s[4],r=s[5],h=s[6],o=s[7],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=n*e+a*i,t[5]=r*e+l*i,t[6]=h*e+u*i,t[7]=o*e+c*i,t[8]=a*e-n*i,t[9]=l*e-r*i,t[10]=u*e-h*i,t[11]=c*e-o*i,t},ps=function(t,s,e){var i=Math.sin(e),e=Math.cos(e),n=s[0],r=s[1],h=s[2],o=s[3],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=n*e-a*i,t[1]=r*e-l*i,t[2]=h*e-u*i,t[3]=o*e-c*i,t[8]=n*i+a*e,t[9]=r*i+l*e,t[10]=h*i+u*e,t[11]=o*i+c*e,t},ms=function(t,s,e){var i=Math.sin(e),e=Math.cos(e),n=s[0],r=s[1],h=s[2],o=s[3],a=s[4],l=s[5],u=s[6],c=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=n*e+a*i,t[1]=r*e+l*i,t[2]=h*e+u*i,t[3]=o*e+c*i,t[4]=a*e-n*i,t[5]=l*e-r*i,t[6]=u*e-h*i,t[7]=c*e-o*i,t},gs=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ys=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ws=function(t,s,e){var i,n=e[0],r=e[1],e=e[2],h=Math.hypot(n,r,e);return h<xn?null:(n*=h=1/h,r*=h,e*=h,h=Math.sin(s),s=Math.cos(s),t[0]=n*n*(i=1-s)+s,t[1]=r*n*i+e*h,t[2]=e*n*i-r*h,t[3]=0,t[4]=n*r*i-e*h,t[5]=r*r*i+s,t[6]=e*r*i+n*h,t[7]=0,t[8]=n*e*i+r*h,t[9]=r*e*i-n*h,t[10]=e*e*i+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},Ss=function(t,s){var e=Math.sin(s),s=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},bs=function(t,s){var e=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},vs=function(t,s){var e=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},f=function(t,s,e){var i=s[0],n=s[2],r=n+n,h=i*(u=i+i),o=i*(c=(l=s[1])+l),i=i*r,a=l*c,l=l*r,u=(s=s[3])*u,c=s*c,s=s*r;return t[0]=1-(a+(n=n*r)),t[1]=o+s,t[2]=i-c,t[3]=0,t[4]=o-s,t[5]=1-(h+n),t[6]=l+u,t[7]=0,t[8]=i+c,t[9]=l-u,t[10]=1-(h+a),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},xs=function(t,s){var e=new Mn(3),i=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=i*i+n*n+r*r+h*h;return 0<c?(e[0]=2*(o*h+u*i+a*r-l*n)/c,e[1]=2*(a*h+u*n+l*i-o*r)/c,e[2]=2*(l*h+u*r+o*n-a*i)/c):(e[0]=2*(o*h+u*i+a*r-l*n),e[1]=2*(a*h+u*n+l*i-o*r),e[2]=2*(l*h+u*r+o*n-a*i)),f(t,s,e),t},a=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},d=function(t,s){var e=s[0],i=s[4],n=s[5],r=s[6],h=s[8],o=s[9],a=s[10];return t[0]=Math.hypot(e,s[1],s[2]),t[1]=Math.hypot(i,n,r),t[2]=Math.hypot(h,o,a),t},l=function(t,s){var e=new Mn(3),i=(d(e,s),1/e[0]),n=s[0]*i,r=s[1]*(u=1/e[1]),h=s[2]*(e=1/e[2]),o=s[4]*i,a=s[5]*u,l=s[6]*e,i=s[8]*i,u=s[9]*u,c=0;return 0<(e=n+a+(s=s[10]*e))?(c=2*Math.sqrt(1+e),t[3]=.25*c,t[0]=(l-u)/c,t[1]=(i-h)/c,t[2]=(r-o)/c):a<n&&s<n?(c=2*Math.sqrt(1+n-a-s),t[3]=(l-u)/c,t[0]=.25*c,t[1]=(r+o)/c,t[2]=(i+h)/c):s<a?(c=2*Math.sqrt(1+a-n-s),t[3]=(i-h)/c,t[0]=(r+o)/c,t[1]=.25*c,t[2]=(l+u)/c):(c=2*Math.sqrt(1+s-n-a),t[3]=(r-o)/c,t[0]=(i+h)/c,t[1]=(l+u)/c,t[2]=.25*c),t},Ms=function(t,s,e,i){s[0]=i[12],s[1]=i[13],s[2]=i[14];var s=i[0],n=i[1],r=i[2],h=i[4],o=i[5],a=i[6],l=i[8],u=i[9],i=i[10],c=(e[0]=Math.hypot(s,n,r),e[1]=Math.hypot(h,o,a),e[2]=Math.hypot(l,u,i),1/e[0]),f=1/e[1],s=s*c,n=n*f,r=r*(e=1/e[2]),h=h*c,a=a*e,l=l*c,c=u*f,u=i*e,i=0;return 0<(f=s+(o=o*f)+u)?(i=2*Math.sqrt(1+f),t[3]=.25*i,t[0]=(a-c)/i,t[1]=(l-r)/i,t[2]=(n-h)/i):o<s&&u<s?(i=2*Math.sqrt(1+s-o-u),t[3]=(a-c)/i,t[0]=.25*i,t[1]=(n+h)/i,t[2]=(l+r)/i):u<o?(i=2*Math.sqrt(1+o-s-u),t[3]=(l-r)/i,t[0]=(n+h)/i,t[1]=.25*i,t[2]=(a+c)/i):(i=2*Math.sqrt(1+u-s-o),t[3]=(n-h)/i,t[0]=(l+r)/i,t[1]=(a+c)/i,t[2]=.25*i),t},Ts=function(t,s,e,i){var n=(h=s[0])*(u=h+h),r=h*(c=(a=s[1])+a),h=h*(f=(l=s[2])+l),o=a*c,a=a*f,l=l*f,u=(s=s[3])*u,c=s*c,s=s*f,f=i[0],d=i[1],i=i[2];return t[0]=(1-(o+l))*f,t[1]=(r+s)*f,t[2]=(h-c)*f,t[3]=0,t[4]=(r-s)*d,t[5]=(1-(n+l))*d,t[6]=(a+u)*d,t[7]=0,t[8]=(h+c)*i,t[9]=(a-u)*i,t[10]=(1-(n+o))*i,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},Cs=function(t,s,e,i,n){var r=(o=s[0])*(c=o+o),h=o*(f=(l=s[1])+l),o=o*(d=(u=s[2])+u),a=l*f,l=l*d,u=u*d,c=(s=s[3])*c,f=s*f,s=s*d,d=i[0],p=i[1],i=i[2],m=n[0],g=n[1],n=n[2],y=(1-(a+u))*d,w=(h+s)*d,d=(o-f)*d,h=(h-s)*p,s=(1-(r+u))*p,u=(l+c)*p,p=(o+f)*i,o=(l-c)*i,f=(1-(r+a))*i;return t[0]=y,t[1]=w,t[2]=d,t[3]=0,t[4]=h,t[5]=s,t[6]=u,t[7]=0,t[8]=p,t[9]=o,t[10]=f,t[11]=0,t[12]=e[0]+m-(y*m+h*g+p*n),t[13]=e[1]+g-(w*m+s*g+o*n),t[14]=e[2]+n-(d*m+u*g+f*n),t[15]=1,t},Is=function(t,s){var e=s[0],i=s[2],n=i+i,e=e*(l=e+e),r=(h=s[1])*l,h=h*(u=h+h),o=i*l,a=i*u,l=(s=s[3])*l,u=s*u,s=s*n;return t[0]=1-h-(i=i*n),t[1]=r+s,t[2]=o-u,t[3]=0,t[4]=r-s,t[5]=1-e-i,t[6]=a+l,t[7]=0,t[8]=o+u,t[9]=a-l,t[10]=1-e-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Gs=function(t,s,e,i,n,r,h){var o=1/(e-s),a=1/(n-i),l=1/(r-h);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(e+s)*o,t[9]=(n+i)*a,t[10]=(h+r)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*r*2*l,t[15]=0,t},u=function(t,s,e,i,n){return s=1/Math.tan(s/2),t[0]=s/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(t[10]=(n+i)*(e=1/(i-n)),t[14]=2*n*i*e):(t[10]=-1,t[14]=-2*i),t},_s=function(t,s,e,i,n){return s=1/Math.tan(s/2),t[0]=s/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(t[10]=n*(e=1/(i-n)),t[14]=n*i*e):(t[10]=-1,t[14]=-i),t},Ps=function(t,s,e,i){var n=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),h=Math.tan(s.leftDegrees*Math.PI/180),o=2/(h+(s=Math.tan(s.rightDegrees*Math.PI/180))),a=2/(n+r);return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=-(h-s)*o*.5,t[9]=(n-r)*a*.5,t[10]=i/(e-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*e/(e-i),t[15]=0,t},c=function(t,s,e,i,n,r,h){var o=1/(s-e),a=1/(i-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+e)*o,t[13]=(n+i)*a,t[14]=(h+r)*l,t[15]=1,t},Es=function(t,s,e,i,n,r,h){var o=1/(s-e),a=1/(i-n),h=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=h,t[11]=0,t[12]=(s+e)*o,t[13]=(n+i)*a,t[14]=r*h,t[15]=1,t},Rs=function(t,s,e,i){var n,r,h,o,a=s[0],l=s[1],s=s[2],u=i[0],c=i[1],i=i[2],f=e[0],d=e[1],e=e[2];return Math.abs(a-f)<xn&&Math.abs(l-d)<xn&&Math.abs(s-e)<xn?p(t):(f=a-f,d=l-d,e=s-e,n=c*(e*=o=1/Math.hypot(f,d,e))-i*(d*=o),i=i*(f*=o)-u*e,u=u*d-c*f,(o=Math.hypot(n,i,u))?(n*=o=1/o,i*=o,u*=o):u=i=n=0,c=d*u-e*i,r=e*n-f*u,h=f*i-d*n,(o=Math.hypot(c,r,h))?(c*=o=1/o,r*=o,h*=o):h=r=c=0,t[0]=n,t[1]=c,t[2]=f,t[3]=0,t[4]=i,t[5]=r,t[6]=d,t[7]=0,t[8]=u,t[9]=h,t[10]=e,t[11]=0,t[12]=-(n*a+i*l+u*s),t[13]=-(c*a+r*l+h*s),t[14]=-(f*a+d*l+e*s),t[15]=1,t)},As=function(t,s,e,i){var n=s[0],r=s[1],s=s[2],h=i[0],o=i[1],i=i[2],a=n-e[0],l=r-e[1],u=a*a+l*l+(e=s-e[2])*e,c=(0<u&&(a*=u=1/Math.sqrt(u),l*=u,e*=u),o*e-i*l);return 0<(u=c*c+(i=i*a-h*e)*i+(h=h*l-o*a)*h)&&(c*=u=1/Math.sqrt(u),i*=u,h*=u),t[0]=c,t[1]=i,t[2]=h,t[3]=0,t[4]=l*h-e*i,t[5]=e*c-a*h,t[6]=a*i-l*c,t[7]=0,t[8]=a,t[9]=l,t[10]=e,t[11]=0,t[12]=n,t[13]=r,t[14]=s,t[15]=1,t},ks=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Fs=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Os=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t[4]=s[4]+e[4],t[5]=s[5]+e[5],t[6]=s[6]+e[6],t[7]=s[7]+e[7],t[8]=s[8]+e[8],t[9]=s[9]+e[9],t[10]=s[10]+e[10],t[11]=s[11]+e[11],t[12]=s[12]+e[12],t[13]=s[13]+e[13],t[14]=s[14]+e[14],t[15]=s[15]+e[15],t},Ds=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t[3]=s[3]-e[3],t[4]=s[4]-e[4],t[5]=s[5]-e[5],t[6]=s[6]-e[6],t[7]=s[7]-e[7],t[8]=s[8]-e[8],t[9]=s[9]-e[9],t[10]=s[10]-e[10],t[11]=s[11]-e[11],t[12]=s[12]-e[12],t[13]=s[13]-e[13],t[14]=s[14]-e[14],t[15]=s[15]-e[15],t},Ls=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*e,t[5]=s[5]*e,t[6]=s[6]*e,t[7]=s[7]*e,t[8]=s[8]*e,t[9]=s[9]*e,t[10]=s[10]*e,t[11]=s[11]*e,t[12]=s[12]*e,t[13]=s[13]*e,t[14]=s[14]*e,t[15]=s[15]*e,t},Bs=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t[3]=s[3]+e[3]*i,t[4]=s[4]+e[4]*i,t[5]=s[5]+e[5]*i,t[6]=s[6]+e[6]*i,t[7]=s[7]+e[7]*i,t[8]=s[8]+e[8]*i,t[9]=s[9]+e[9]*i,t[10]=s[10]+e[10]*i,t[11]=s[11]+e[11]*i,t[12]=s[12]+e[12]*i,t[13]=s[13]+e[13]*i,t[14]=s[14]+e[14]*i,t[15]=s[15]+e[15]*i,t},Ns=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Ws=function(t,s){var e=t[0],i=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],t=t[15],y=s[0],w=s[1],S=s[2],b=s[3],v=s[4],x=s[5],M=s[6],T=s[7],C=s[8],I=s[9],G=s[10],_=s[11],P=s[12],E=s[13],R=s[14],s=s[15];return Math.abs(e-y)<=xn*Math.max(1,Math.abs(e),Math.abs(y))&&Math.abs(i-w)<=xn*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(n-S)<=xn*Math.max(1,Math.abs(n),Math.abs(S))&&Math.abs(r-b)<=xn*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(h-v)<=xn*Math.max(1,Math.abs(h),Math.abs(v))&&Math.abs(o-x)<=xn*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-M)<=xn*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(l-T)<=xn*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(u-C)<=xn*Math.max(1,Math.abs(u),Math.abs(C))&&Math.abs(c-I)<=xn*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(f-G)<=xn*Math.max(1,Math.abs(f),Math.abs(G))&&Math.abs(d-_)<=xn*Math.max(1,Math.abs(d),Math.abs(_))&&Math.abs(p-P)<=xn*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(m-E)<=xn*Math.max(1,Math.abs(m),Math.abs(E))&&Math.abs(g-R)<=xn*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(t-s)<=xn*Math.max(1,Math.abs(t),Math.abs(s))},m=function(){var t=new Mn(3);return Mn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},Vs=function(t){var s=new Mn(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},js=function(t){var s=t[0];return Math.hypot(s,t[1],t[2])},g=function(t,s,e){var i=new Mn(3);return i[0]=t,i[1]=s,i[2]=e,i},Hs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Us=function(t,s,e,i){return t[0]=s,t[1]=e,t[2]=i,t},zs=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t},Js=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t},qs=function(t,s,e){return t[0]=s[0]*e[0],t[1]=s[1]*e[1],t[2]=s[2]*e[2],t},Xs=function(t,s,e){return t[0]=s[0]/e[0],t[1]=s[1]/e[1],t[2]=s[2]/e[2],t},$s=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},Ys=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},Zs=function(t,s,e){return t[0]=Math.min(s[0],e[0]),t[1]=Math.min(s[1],e[1]),t[2]=Math.min(s[2],e[2]),t},Ks=function(t,s,e){return t[0]=Math.max(s[0],e[0]),t[1]=Math.max(s[1],e[1]),t[2]=Math.max(s[2],e[2]),t},Qs=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},te=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t},se=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t},ee=function(t,s){var e=s[0]-t[0];return Math.hypot(e,s[1]-t[1],s[2]-t[2])},ie=function(t,s){var e=s[0]-t[0],i=s[1]-t[1];return e*e+i*i+(s=s[2]-t[2])*s},ne=function(t){var s=t[0],e=t[1];return s*s+e*e+(t=t[2])*t},re=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},he=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},y=function(t,s){var e=s[0],i=s[1],n=s[2];return 0<(e=e*e+i*i+n*n)&&(e=1/Math.sqrt(e)),t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t},w=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},S=function(t,s,e){var i=s[0],n=s[1],s=s[2],r=e[0],h=e[1],e=e[2];return t[0]=n*e-s*h,t[1]=s*r-i*e,t[2]=i*h-n*r,t},oe=function(t,s,e,i){var n=s[0],r=s[1],s=s[2];return t[0]=n+i*(e[0]-n),t[1]=r+i*(e[1]-r),t[2]=s+i*(e[2]-s),t},ae=function(t,s,e,i){var n=Math.acos(Math.min(Math.max(w(s,e),-1),1)),r=Math.sin(n),h=Math.sin((1-i)*n)/r,i=Math.sin(i*n)/r;return t[0]=h*s[0]+i*e[0],t[1]=h*s[1]+i*e[1],t[2]=h*s[2]+i*e[2],t},le=function(t,s,e,i,n,r){var h=r*r,o=h*(2*r-3)+1,a=h*(r-2)+r,l=h*(r-1);return t[0]=s[0]*o+e[0]*a+i[0]*l+n[0]*(h=h*(3-2*r)),t[1]=s[1]*o+e[1]*a+i[1]*l+n[1]*h,t[2]=s[2]*o+e[2]*a+i[2]*l+n[2]*h,t},ue=function(t,s,e,i,n,r){var h=1-r,o=h*h,a=r*r,l=o*h;return t[0]=s[0]*l+e[0]*(o=3*r*o)+i[0]*(h=3*a*h)+n[0]*(a=a*r),t[1]=s[1]*l+e[1]*o+i[1]*h+n[1]*a,t[2]=s[2]*l+e[2]*o+i[2]*h+n[2]*a,t},ce=function(t,s){s=s||1;var e=2*On()*Math.PI,i=2*On()-1,n=Math.sqrt(1-i*i)*s;return t[0]=Math.cos(e)*n,t[1]=Math.sin(e)*n,t[2]=i*s,t},fe=function(t,s,e){var i=s[0],n=s[1],s=s[2],r=e[3]*i+e[7]*n+e[11]*s+e[15];return t[0]=(e[0]*i+e[4]*n+e[8]*s+e[12])/(r=r||1),t[1]=(e[1]*i+e[5]*n+e[9]*s+e[13])/r,t[2]=(e[2]*i+e[6]*n+e[10]*s+e[14])/r,t},de=function(t,s,e){var i=s[0],n=s[1],s=s[2];return t[0]=i*e[0]+n*e[3]+s*e[6],t[1]=i*e[1]+n*e[4]+s*e[7],t[2]=i*e[2]+n*e[5]+s*e[8],t},pe=function(t,s,e){var i=e[0],n=e[1],r=s[0],h=s[1],o=n*(s=s[2])-(c=e[2])*h,a=c*r-i*s,l=i*h-n*r,u=n*l-c*a,c=c*o-i*l,i=i*a-n*o;return a*=n=2*e[3],l*=n,c*=2,i*=2,t[0]=r+(o*=n)+(u*=2),t[1]=h+a+c,t[2]=s+l+i,t},me=function(t,s,e,i){var n=[],r=[];return n[0]=s[0]-e[0],n[1]=s[1]-e[1],n[2]=s[2]-e[2],r[0]=n[0],r[1]=n[1]*Math.cos(i)-n[2]*Math.sin(i),r[2]=n[1]*Math.sin(i)+n[2]*Math.cos(i),t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t},ge=function(t,s,e,i){var n=[],r=[];return n[0]=s[0]-e[0],n[1]=s[1]-e[1],n[2]=s[2]-e[2],r[0]=n[2]*Math.sin(i)+n[0]*Math.cos(i),r[1]=n[1],r[2]=n[2]*Math.cos(i)-n[0]*Math.sin(i),t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t},ye=function(t,s,e,i){var n=[],r=[];return n[0]=s[0]-e[0],n[1]=s[1]-e[1],n[2]=s[2]-e[2],r[0]=n[0]*Math.cos(i)-n[1]*Math.sin(i),r[1]=n[0]*Math.sin(i)+n[1]*Math.cos(i),r[2]=n[2],t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t},we=function(t,s){var e=t[0],i=t[1],n=t[2],r=s[0],h=s[1],o=s[2],i=(e=Math.sqrt((e*e+i*i+n*n)*(r*r+h*h+o*o)))&&w(t,s)/e;return Math.acos(Math.min(Math.max(i,-1),1))},Se=function(t){return t[0]=0,t[1]=0,t[2]=0,t},be=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},ve=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},xe=function(t,s){var e=t[0],i=t[1],t=t[2],n=s[0],r=s[1],s=s[2];return Math.abs(e-n)<=xn*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(i-r)<=xn*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(t-s)<=xn*Math.max(1,Math.abs(t),Math.abs(s))},b=function(){var t=new Mn(4);return Mn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},Me=function(t){var s=new Mn(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Te=function(t,s,e,i){var n=new Mn(4);return n[0]=t,n[1]=s,n[2]=e,n[3]=i,n},Ce=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},Ie=function(t,s,e,i,n){return t[0]=s,t[1]=e,t[2]=i,t[3]=n,t},Ge=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t},_e=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t[2]=s[2]-e[2],t[3]=s[3]-e[3],t},Pe=function(t,s,e){return t[0]=s[0]*e[0],t[1]=s[1]*e[1],t[2]=s[2]*e[2],t[3]=s[3]*e[3],t},Ee=function(t,s,e){return t[0]=s[0]/e[0],t[1]=s[1]/e[1],t[2]=s[2]/e[2],t[3]=s[3]/e[3],t},Re=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Ae=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},ke=function(t,s,e){return t[0]=Math.min(s[0],e[0]),t[1]=Math.min(s[1],e[1]),t[2]=Math.min(s[2],e[2]),t[3]=Math.min(s[3],e[3]),t},Fe=function(t,s,e){return t[0]=Math.max(s[0],e[0]),t[1]=Math.max(s[1],e[1]),t[2]=Math.max(s[2],e[2]),t[3]=Math.max(s[3],e[3]),t},Oe=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},De=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t},Le=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t[2]=s[2]+e[2]*i,t[3]=s[3]+e[3]*i,t},Be=function(t,s){var e=s[0]-t[0];return Math.hypot(e,s[1]-t[1],s[2]-t[2],s[3]-t[3])},Ne=function(t,s){var e=s[0]-t[0],i=s[1]-t[1],n=s[2]-t[2];return e*e+i*i+n*n+(s=s[3]-t[3])*s},v=function(t){var s=t[0];return Math.hypot(s,t[1],t[2],t[3])},x=function(t){var s=t[0],e=t[1],i=t[2];return s*s+e*e+i*i+(t=t[3])*t},We=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},Ve=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},je=function(t,s){var e=s[0],i=s[1],n=s[2],r=e*e+i*i+n*n+(s=s[3])*s;return 0<r&&(r=1/Math.sqrt(r)),t[0]=e*r,t[1]=i*r,t[2]=n*r,t[3]=s*r,t},M=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},He=function(t,s,e,i){var n=e[0]*i[1]-e[1]*i[0],r=e[0]*i[2]-e[2]*i[0],h=e[0]*i[3]-e[3]*i[0],o=e[1]*i[2]-e[2]*i[1],a=e[1]*i[3]-e[3]*i[1],e=e[2]*i[3]-e[3]*i[2],i=s[0],l=s[1],u=s[2],s=s[3];return t[0]=l*e-u*a+s*o,t[1]=-i*e+u*h-s*r,t[2]=i*a-l*h+s*n,t[3]=-i*o+l*r-u*n,t},Ue=function(t,s,e,i){var n=s[0],r=s[1],h=s[2],s=s[3];return t[0]=n+i*(e[0]-n),t[1]=r+i*(e[1]-r),t[2]=h+i*(e[2]-h),t[3]=s+i*(e[3]-s),t},ze=function(t,s){var e,i,n,r,h,o;for(s=s||1;1<=(h=(e=2*On()-1)*e+(i=2*On()-1)*i););for(;1<=(o=(n=2*On()-1)*n+(r=2*On()-1)*r););var a=Math.sqrt((1-h)/o);return t[0]=s*e,t[1]=s*i,t[2]=s*n*a,t[3]=s*r*a,t},Je=function(t,s,e){var i=s[0],n=s[1],r=s[2],s=s[3];return t[0]=e[0]*i+e[4]*n+e[8]*r+e[12]*s,t[1]=e[1]*i+e[5]*n+e[9]*r+e[13]*s,t[2]=e[2]*i+e[6]*n+e[10]*r+e[14]*s,t[3]=e[3]*i+e[7]*n+e[11]*r+e[15]*s,t},qe=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=e[0],o=e[1],a=e[2],l=(e=e[3])*i+o*r-a*n,u=e*n+a*i-h*r,c=e*r+h*n-o*i;return t[0]=l*e+(i=-h*i-o*n-a*r)*-h+u*-a-c*-o,t[1]=u*e+i*-o+c*-h-l*-a,t[2]=c*e+i*-a+l*-o-u*-h,t[3]=s[3],t},Xe=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},$e=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Ye=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Ze=function(t,s){var e=t[0],i=t[1],n=t[2],t=t[3],r=s[0],h=s[1],o=s[2],s=s[3];return Math.abs(e-r)<=xn*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(i-h)<=xn*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(n-o)<=xn*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(t-s)<=xn*Math.max(1,Math.abs(t),Math.abs(s))},T=function(){var t=new Mn(4);return Mn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Ke=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},C=function(t,s,e){e*=.5;var i=Math.sin(e);return t[0]=i*s[0],t[1]=i*s[1],t[2]=i*s[2],t[3]=Math.cos(e),t},Qe=function(t,s){var e=2*Math.acos(s[3]),i=Math.sin(e/2);return xn<i?(t[0]=s[0]/i,t[1]=s[1]/i,t[2]=s[2]/i):(t[0]=1,t[1]=0,t[2]=0),e},ti=function(t,s){return t=Jn(t,s),Math.acos(2*t*t-1)},si=function(t,s,e){var i=s[0],n=s[1],r=s[2],s=s[3],h=e[0],o=e[1],a=e[2],e=e[3];return t[0]=i*e+s*h+n*a-r*o,t[1]=n*e+s*o+r*h-i*a,t[2]=r*e+s*a+i*o-n*h,t[3]=s*e-i*h-n*o-r*a,t},I=function(t,s,e){e*=.5;var i=s[0],n=s[1],r=s[2],s=s[3],h=Math.sin(e),e=Math.cos(e);return t[0]=i*e+s*h,t[1]=n*e+r*h,t[2]=r*e-n*h,t[3]=s*e-i*h,t},G=function(t,s,e){e*=.5;var i=s[0],n=s[1],r=s[2],s=s[3],h=Math.sin(e),e=Math.cos(e);return t[0]=i*e-r*h,t[1]=n*e+s*h,t[2]=r*e+i*h,t[3]=s*e-n*h,t},_=function(t,s,e){e*=.5;var i=s[0],n=s[1],r=s[2],s=s[3],h=Math.sin(e),e=Math.cos(e);return t[0]=i*e+n*h,t[1]=n*e-i*h,t[2]=r*e+s*h,t[3]=s*e-r*h,t},ei=function(t,s){var e=s[0],i=s[1],s=s[2];return t[0]=e,t[1]=i,t[2]=s,t[3]=Math.sqrt(Math.abs(1-e*e-i*i-s*s)),t},P=function(t,s){var e=s[0],i=s[1],n=s[2],s=s[3],r=Math.sqrt(e*e+i*i+n*n),s=Math.exp(s),h=0<r?s*Math.sin(r)/r:0;return t[0]=e*h,t[1]=i*h,t[2]=n*h,t[3]=s*Math.cos(r),t},E=function(t,s){var e=s[0],i=s[1],n=s[2],s=s[3],r=0<(r=Math.sqrt(e*e+i*i+n*n))?Math.atan2(r,s)/r:0;return t[0]=e*r,t[1]=i*r,t[2]=n*r,t[3]=.5*Math.log(e*e+i*i+n*n+s*s),t},ii=function(t,s,e){return E(t,s),zn(t,t,e),P(t,t),t},R=function(t,s,e,i){var n,r,h=s[0],o=s[1],a=s[2],s=s[3],l=e[0],u=e[1],c=e[2],f=h*l+o*u+a*c+s*(e=e[3]);return f<0&&(f=-f,l=-l,u=-u,c=-c,e=-e),f=xn<1-f?(f=Math.acos(f),n=Math.sin(f),r=Math.sin((1-i)*f)/n,Math.sin(i*f)/n):(r=1-i,i),t[0]=r*h+f*l,t[1]=r*o+f*u,t[2]=r*a+f*c,t[3]=r*s+f*e,t},ni=function(t){var s=On(),e=On(),i=On(),n=Math.sqrt(1-s),s=Math.sqrt(s);return t[0]=n*Math.sin(2*Math.PI*e),t[1]=n*Math.cos(2*Math.PI*e),t[2]=s*Math.sin(2*Math.PI*i),t[3]=s*Math.cos(2*Math.PI*i),t},ri=function(t,s){var e=s[0],i=s[1],n=s[2],r=e*e+i*i+n*n+(s=s[3])*s;return t[0]=-e*(r=r?1/r:0),t[1]=-i*r,t[2]=-n*r,t[3]=s*r,t},hi=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},A=function(t,s){var e,i,n,r=s[0]+s[4]+s[8];return 0<r?(n=Math.sqrt(r+1),t[3]=.5*n,t[0]=(s[5]-s[7])*(n=.5/n),t[1]=(s[6]-s[2])*n,t[2]=(s[1]-s[3])*n):(e=(1+(r=s[3*(r=s[4]>s[0]?1:0)+r]<s[8]?2:r))%3,i=(2+r)%3,n=Math.sqrt(s[3*r+r]-s[3*e+e]-s[3*i+i]+1),t[r]=.5*n,t[3]=(s[3*e+i]-s[3*i+e])*(n=.5/n),t[e]=(s[3*e+r]+s[3*r+e])*n,t[i]=(s[3*i+r]+s[3*r+i])*n),t},oi=function(t,s,e,i){var n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:Dn,r=Math.PI/360,h=(i*=r,e*=r,Math.sin(s*=r)),o=Math.cos(s),a=Math.sin(e),l=Math.cos(e),u=Math.sin(i),c=Math.cos(i);switch(n){case"xyz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"xzy":t[0]=h*l*c-o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c+h*a*u;break;case"yxz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;case"yzx":t[0]=h*l*c+o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c-h*a*u;break;case"zxy":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"zyx":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;default:throw new Error("Unknown angle order "+n)}return t},ai=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},li=function(t,s){return Math.abs(M(t,s))>=1-xn},ui=function(){var t=new Mn(8);return Mn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},ci=function(t){var s=new Mn(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},fi=function(t,s,e,i,n,r,h,o){var a=new Mn(8);return a[0]=t,a[1]=s,a[2]=e,a[3]=i,a[4]=n,a[5]=r,a[6]=h,a[7]=o,a},di=function(t,s,e,i,n,r,h){var o=new Mn(8),n=(o[0]=t,o[1]=s,o[2]=e,o[3]=i,.5*n),r=.5*r,h=.5*h;return o[4]=n*i+r*e-h*s,o[5]=r*i+h*t-n*e,o[6]=h*i+n*s-r*t,o[7]=-n*t-r*s-h*e,o},k=function(t,s,e){var i=.5*e[0],n=.5*e[1],e=.5*e[2],r=s[0],h=s[1],o=s[2],s=s[3];return t[0]=r,t[1]=h,t[2]=o,t[3]=s,t[4]=i*s+n*o-e*h,t[5]=n*s+e*r-i*o,t[6]=e*s+i*h-n*r,t[7]=-i*r-n*h-e*o,t},pi=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},mi=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},gi=function(t,s){var e=T(),i=(l(e,s),new Mn(3));return a(i,s),k(t,e,i),t},F=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},yi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},wi=function(t,s,e,i,n,r,h,o,a){return t[0]=s,t[1]=e,t[2]=i,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t},Si=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},bi=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},vi=function(t,s){var e=s[4],i=s[5],n=s[6],r=s[7],h=-s[0],o=-s[1],a=-s[2],s=s[3];return t[0]=2*(e*s+r*h+i*a-n*o),t[1]=2*(i*s+r*o+n*h-e*a),t[2]=2*(n*s+r*a+e*o-i*h),t},xi=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=.5*e[0],a=.5*e[1],e=.5*e[2],l=s[4],u=s[5],c=s[6],s=s[7];return t[0]=i,t[1]=n,t[2]=r,t[3]=h,t[4]=h*o+n*e-r*a+l,t[5]=h*a+r*o-i*e+u,t[6]=h*e+i*a-n*o+c,t[7]=-i*o-n*a-r*e+s,t},Mi=function(t,s,e){var i=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=o*h+(d=s[7])*i+a*r-l*n,c=a*h+d*n+l*i-o*r,f=l*h+d*r+o*n-a*i,d=d*h-o*i-a*n-l*r;return I(t,s,e),i=t[0],t[4]=u*(h=t[3])+d*i+c*(r=t[2])-f*(n=t[1]),t[5]=c*h+d*n+f*i-u*r,t[6]=f*h+d*r+u*n-c*i,t[7]=d*h-u*i-c*n-f*r,t},Ti=function(t,s,e){var i=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=o*h+(d=s[7])*i+a*r-l*n,c=a*h+d*n+l*i-o*r,f=l*h+d*r+o*n-a*i,d=d*h-o*i-a*n-l*r;return G(t,s,e),i=t[0],t[4]=u*(h=t[3])+d*i+c*(r=t[2])-f*(n=t[1]),t[5]=c*h+d*n+f*i-u*r,t[6]=f*h+d*r+u*n-c*i,t[7]=d*h-u*i-c*n-f*r,t},Ci=function(t,s,e){var i=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=o*h+(d=s[7])*i+a*r-l*n,c=a*h+d*n+l*i-o*r,f=l*h+d*r+o*n-a*i,d=d*h-o*i-a*n-l*r;return _(t,s,e),i=t[0],t[4]=u*(h=t[3])+d*i+c*(r=t[2])-f*(n=t[1]),t[5]=c*h+d*n+f*i-u*r,t[6]=f*h+d*r+u*n-c*i,t[7]=d*h-u*i-c*n-f*r,t},Ii=function(t,s,e){var i=e[0],n=e[1],r=e[2],e=e[3],h=s[0],o=s[1],a=s[2],l=s[3];return t[0]=h*e+l*i+o*r-a*n,t[1]=o*e+l*n+a*i-h*r,t[2]=a*e+l*r+h*n-o*i,t[3]=l*e-h*i-o*n-a*r,t[4]=(h=s[4])*e+(l=s[7])*i+(o=s[5])*r-(a=s[6])*n,t[5]=o*e+l*n+a*i-h*r,t[6]=a*e+l*r+h*n-o*i,t[7]=l*e-h*i-o*n-a*r,t},Gi=function(t,s,e){var i=s[0],n=s[1],r=s[2],s=s[3],h=e[0],o=e[1],a=e[2],l=e[3];return t[0]=i*l+s*h+n*a-r*o,t[1]=n*l+s*o+r*h-i*a,t[2]=r*l+s*a+i*o-n*h,t[3]=s*l-i*h-n*o-r*a,t[4]=i*(l=e[7])+s*(h=e[4])+n*(a=e[6])-r*(o=e[5]),t[5]=n*l+s*o+r*h-i*a,t[6]=r*l+s*a+i*o-n*h,t[7]=s*l-i*h-n*o-r*a,t},_i=function(t,s,e,i){var n,r,h,o,a,l;return Math.abs(i)<xn?F(t,s):(l=Math.hypot(e[0],e[1],e[2]),i*=.5,n=(h=Math.sin(i))*e[0]/l,r=h*e[1]/l,h=h*e[2]/l,e=Math.cos(i),l=s[0],t[0]=l*e+(i=s[3])*n+(o=s[1])*h-(a=s[2])*r,t[1]=o*e+i*r+a*n-l*h,t[2]=a*e+i*h+l*r-o*n,t[3]=i*e-l*n-o*r-a*h,t[4]=(i=s[4])*e+(l=s[7])*n+(o=s[5])*h-(a=s[6])*r,t[5]=o*e+l*r+a*n-i*h,t[6]=a*e+l*h+i*r-o*n,t[7]=l*e-i*n-o*r-a*h,t)},Pi=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t[2]=s[2]+e[2],t[3]=s[3]+e[3],t[4]=s[4]+e[4],t[5]=s[5]+e[5],t[6]=s[6]+e[6],t[7]=s[7]+e[7],t},Ei=function(t,s,e){var i=s[0],n=s[1],r=s[2],h=s[3],o=e[4],a=e[5],l=e[6],u=e[7],c=s[4],f=s[5],d=s[6],s=s[7],p=e[0],m=e[1],g=e[2],e=e[3];return t[0]=i*e+h*p+n*g-r*m,t[1]=n*e+h*m+r*p-i*g,t[2]=r*e+h*g+i*m-n*p,t[3]=h*e-i*p-n*m-r*g,t[4]=i*u+h*o+n*l-r*a+c*e+s*p+f*g-d*m,t[5]=n*u+h*a+r*o-i*l+f*e+s*m+d*p-c*g,t[6]=r*u+h*l+i*a-n*o+d*e+s*g+c*m-f*p,t[7]=h*u-i*o-n*a-r*l+s*e-c*p-f*m-d*g,t},Ri=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*e,t[5]=s[5]*e,t[6]=s[6]*e,t[7]=s[7]*e,t},Ai=function(t,s,e,i){var n=1-i;return Zn(s,e)<0&&(i=-i),t[0]=s[0]*n+e[0]*i,t[1]=s[1]*n+e[1]*i,t[2]=s[2]*n+e[2]*i,t[3]=s[3]*n+e[3]*i,t[4]=s[4]*n+e[4]*i,t[5]=s[5]*n+e[5]*i,t[6]=s[6]*n+e[6]*i,t[7]=s[7]*n+e[7]*i,t},ki=function(t,s){var e=Kn(s);return t[0]=-s[0]/e,t[1]=-s[1]/e,t[2]=-s[2]/e,t[3]=s[3]/e,t[4]=-s[4]/e,t[5]=-s[5]/e,t[6]=-s[6]/e,t[7]=s[7]/e,t},Fi=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},Oi=function(t,s){var e,i,n,r,h,o,a,l,u=Kn(s);return 0<u&&(u=Math.sqrt(u),l=(e=s[0]/u)*(h=s[4])+(i=s[1]/u)*(o=s[5])+(n=s[2]/u)*(a=s[6])+(r=s[3]/u)*(s=s[7]),t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=(h-e*l)/u,t[5]=(o-i*l)/u,t[6]=(a-n*l)/u,t[7]=(s-r*l)/u),t},Di=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},Li=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},Bi=function(t,s){var e=t[0],i=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],t=t[7],l=s[0],u=s[1],c=s[2],f=s[3],d=s[4],p=s[5],m=s[6],s=s[7];return Math.abs(e-l)<=xn*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(i-u)<=xn*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(n-c)<=xn*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(r-f)<=xn*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(h-d)<=xn*Math.max(1,Math.abs(h),Math.abs(d))&&Math.abs(o-p)<=xn*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=xn*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(t-s)<=xn*Math.max(1,Math.abs(t),Math.abs(s))},O=function(){var t=new Mn(2);return Mn!=Float32Array&&(t[0]=0,t[1]=0),t},Ni=function(t){var s=new Mn(2);return s[0]=t[0],s[1]=t[1],s},Wi=function(t,s){var e=new Mn(2);return e[0]=t,e[1]=s,e},Vi=function(t,s){return t[0]=s[0],t[1]=s[1],t},ji=function(t,s,e){return t[0]=s,t[1]=e,t},Hi=function(t,s,e){return t[0]=s[0]+e[0],t[1]=s[1]+e[1],t},Ui=function(t,s,e){return t[0]=s[0]-e[0],t[1]=s[1]-e[1],t},zi=function(t,s,e){return t[0]=s[0]*e[0],t[1]=s[1]*e[1],t},Ji=function(t,s,e){return t[0]=s[0]/e[0],t[1]=s[1]/e[1],t},qi=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},Xi=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},$i=function(t,s,e){return t[0]=Math.min(s[0],e[0]),t[1]=Math.min(s[1],e[1]),t},Yi=function(t,s,e){return t[0]=Math.max(s[0],e[0]),t[1]=Math.max(s[1],e[1]),t},Zi=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},Ki=function(t,s,e){return t[0]=s[0]*e,t[1]=s[1]*e,t},Qi=function(t,s,e,i){return t[0]=s[0]+e[0]*i,t[1]=s[1]+e[1]*i,t},tn=function(t,s){var e=s[0]-t[0];return Math.hypot(e,s[1]-t[1])},sn=function(t,s){var e=s[0]-t[0];return e*e+(s=s[1]-t[1])*s},en=function(t){var s=t[0];return Math.hypot(s,t[1])},nn=function(t){var s=t[0];return s*s+(t=t[1])*t},rn=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},hn=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},on=function(t,s){var e=s[0],i=s[1];return 0<(e=e*e+i*i)&&(e=1/Math.sqrt(e)),t[0]=s[0]*e,t[1]=s[1]*e,t},an=function(t,s){return t[0]*s[0]+t[1]*s[1]},ln=function(t,s,e){return s=s[0]*e[1]-s[1]*e[0],t[0]=t[1]=0,t[2]=s,t},un=function(t,s,e,i){var n=s[0],s=s[1];return t[0]=n+i*(e[0]-n),t[1]=s+i*(e[1]-s),t},cn=function(t,s){s=s||1;var e=2*On()*Math.PI;return t[0]=Math.cos(e)*s,t[1]=Math.sin(e)*s,t},fn=function(t,s,e){var i=s[0],s=s[1];return t[0]=e[0]*i+e[2]*s,t[1]=e[1]*i+e[3]*s,t},dn=function(t,s,e){var i=s[0],s=s[1];return t[0]=e[0]*i+e[2]*s+e[4],t[1]=e[1]*i+e[3]*s+e[5],t},pn=function(t,s,e){var i=s[0],s=s[1];return t[0]=e[0]*i+e[3]*s+e[6],t[1]=e[1]*i+e[4]*s+e[7],t},mn=function(t,s,e){var i=s[0],s=s[1];return t[0]=e[0]*i+e[4]*s+e[12],t[1]=e[1]*i+e[5]*s+e[13],t},gn=function(t,s,e,i){var n=s[0]-e[0],s=s[1]-e[1],r=Math.sin(i),i=Math.cos(i);return t[0]=n*i-s*r+e[0],t[1]=n*r+s*i+e[1],t},yn=function(t,s){var e=t[0],t=t[1],i=s[0],s=s[1],n=Math.sqrt((e*e+t*t)*(i*i+s*s));return Math.acos(Math.min(Math.max(n&&(e*i+t*s)/n,-1),1))},wn=function(t){return t[0]=0,t[1]=0,t},Sn=function(t){return"vec2("+t[0]+", "+t[1]+")"},bn=function(t,s){return t[0]===s[0]&&t[1]===s[1]},vn=function(t,s){var e=t[0],t=t[1],i=s[0],s=s[1];return Math.abs(e-i)<=xn*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(t-s)<=xn*Math.max(1,Math.abs(t),Math.abs(s))};n,p,f,a,d,l,m,g,y,w,S,b,M,T,C,I,G,_,P,E,R,A,k,F,O,xn=1e-6,Mn="undefined"!=typeof Float32Array?Float32Array:Array,On=Math.random,Dn="zyx",Ln=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),Bn={__proto__:null,EPSILON:xn,get S(){return Mn},M:On,T:Dn,C:D,I:L,equals:B},Nn=Object.freeze({__proto__:null,create:N,clone:W,G:V,identity:j,_:H,set:U,P:z,R:J,A:q,F:X,multiply:t,rotate:$,scale:Y,O:Z,D:K,L:Q,B:tt,N:st,add:et,W:s,V:it,equals:nt,j:rt,H:ht,mul:t,sub:s}),Wn=Object.freeze({__proto__:null,create:ot,clone:at,G:lt,identity:ut,_:ct,set:ft,R:dt,F:pt,multiply:e,rotate:mt,scale:gt,translate:yt,O:wt,D:St,U:bt,L:vt,B:xt,add:Mt,W:i,j:Tt,H:Ct,V:It,equals:Gt,mul:e,sub:i}),Vn=Object.freeze({__proto__:null,create:n,J:_t,clone:Pt,G:Et,_:Rt,set:At,identity:kt,P:Ft,R:Ot,A:Dt,F:Lt,multiply:r,translate:Bt,rotate:Nt,scale:Wt,U:Vt,O:jt,D:Ht,X:Ut,$:zt,Y:Jt,Z:qt,L:Xt,B:$t,add:Yt,W:h,j:Zt,H:Kt,V:Qt,equals:ts,mul:r,sub:h}),Tn=Object.freeze({__proto__:null,create:ss,clone:es,G:is,_:ns,set:rs,identity:p,P:hs,R:os,A:as,F:ls,multiply:o,translate:us,scale:cs,rotate:fs,K:ds,tt:ps,et:ms,U:gs,D:ys,O:ws,it:Ss,nt:bs,ht:vs,ot:f,lt:xs,ut:a,ct:d,gt:l,yt:Ms,St:Ts,bt:Cs,$:Is,vt:Gs,xt:u,perspective:u,Mt:_s,Tt:Ps,Ct:c,ortho:c,It:Es,Gt:Rs,_t:As,L:ks,B:Fs,add:Os,W:Ds,j:Ls,H:Bs,V:Ns,equals:Ws,mul:o,sub:Ds}),Yn=Js,Qn=qs,Un=Xs,tr=ee,sr=ie,jn=js,er=ne,Fn=m(),Cn=Object.freeze({__proto__:null,create:m,clone:Vs,length:js,_:g,G:Hs,set:Us,add:zs,W:Js,multiply:qs,Pt:Xs,ceil:$s,floor:Ys,min:Zs,max:Ks,round:Qs,scale:te,Et:se,Rt:ee,At:ie,kt:ne,Ft:re,inverse:he,normalize:y,Ot:w,Dt:S,Lt:oe,Bt:ae,Nt:le,Wt:ue,random:ce,Vt:fe,jt:de,Ht:pe,K:me,tt:ge,et:ye,angle:we,Ut:Se,L:be,V:ve,equals:xe,sub:Yn,mul:Qn,div:Un,zt:tr,Jt:sr,qt:jn,Xt:er,forEach:function(t,s,e,i,n,r){var h,o;for(s=s||3,e=e||0,o=i?Math.min(i*s+e,t.length):t.length,h=e;h<o;h+=s)Fn[0]=t[h],Fn[1]=t[h+1],Fn[2]=t[h+2],n(Fn,Fn,r),t[h]=Fn[0],t[h+1]=Fn[1],t[h+2]=Fn[2];return t}}),Yn=_e,Qn=Pe,Un=Ee,tr=Be,sr=Ne,er=v,ir=x,kn=b(),Hn=Object.freeze({__proto__:null,create:b,clone:Me,_:Te,G:Ce,set:Ie,add:Ge,W:_e,multiply:Pe,Pt:Ee,ceil:Re,floor:Ae,min:ke,max:Fe,round:Oe,scale:De,Et:Le,Rt:Be,At:Ne,length:v,kt:x,Ft:We,inverse:Ve,normalize:je,Ot:M,Dt:He,Lt:Ue,random:ze,Vt:Je,Ht:qe,Ut:Xe,L:$e,V:Ye,equals:Ze,sub:Yn,mul:Qn,div:Un,zt:tr,Jt:sr,qt:er,Xt:ir,forEach:function(t,s,e,i,n,r){var h,o;for(s=s||4,e=e||0,o=i?Math.min(i*s+e,t.length):t.length,h=e;h<o;h+=s)kn[0]=t[h],kn[1]=t[h+1],kn[2]=t[h+2],kn[3]=t[h+3],n(kn,kn,r),t[h]=kn[0],t[h+1]=kn[1],t[h+2]=kn[2],t[h+3]=kn[3];return t}}),Yn=Me,Qn=Te,Un=Ce,tr=Ie,sr=Ge,er=si,zn=De,Jn=M,ir=Ue,nr=qn=v,rr=Xn=x,$n=je,hr=Ye,En=m(),Rn=g(1,0,0),An=g(0,1,0),or=function(t,s,e){var i=w(s,e);return i<-.999999?(S(En,Rn,s),jn(En)<1e-6&&S(En,An,s),y(En,En),C(t,En,Math.PI),t):.999999<i?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(S(En,s,e),t[0]=En[0],t[1]=En[1],t[2]=En[2],t[3]=1+i,$n(t,t))},_n=T(),Pn=T(),ar=function(t,s,e,i,n,r){return R(_n,s,n,r),R(Pn,e,i,r),R(t,_n,Pn,2*r*(1-r)),t},Gn=n(),Yn=Object.freeze({__proto__:null,create:T,identity:Ke,$t:C,Yt:Qe,Zt:ti,multiply:si,K:I,tt:G,et:_,Kt:ei,exp:P,Qt:E,pow:ii,Bt:R,random:ni,R:ri,ts:hi,ss:A,es:oi,L:ai,clone:Yn,_:Qn,G:Un,set:tr,add:sr,mul:er,scale:zn,Ot:Jn,Lt:ir,length:qn,qt:nr,kt:Xn,Xt:rr,normalize:$n,V:hr,equals:li,ns:or,rs:ar,hs:function(t,s,e,i){return Gn[0]=e[0],Gn[3]=e[1],Gn[6]=e[2],Gn[1]=i[0],Gn[4]=i[1],Gn[7]=i[2],Gn[2]=-s[0],Gn[5]=-s[1],Gn[8]=-s[2],$n(t,A(t,Gn))}}),Zn=Jn,Qn=Kn=Xn,tr=Object.freeze({__proto__:null,create:ui,clone:ci,_:fi,os:di,ot:k,U:pi,O:mi,J:gi,G:F,identity:yi,set:wi,ls:Un,us:Si,cs:Un,ds:bi,ut:vi,translate:xi,K:Mi,tt:Ti,et:Ci,gs:Ii,ys:Gi,ws:_i,add:Pi,multiply:Ei,mul:Ei,scale:Ri,Ot:Zn,Lt:Ai,R:ki,ts:Fi,length:qn,qt:qn,kt:Kn,Xt:Qn,normalize:Oi,L:Di,V:Li,equals:Bi}),sr=en,er=Ui,ir=zi,nr=Ji,rr=tn,hr=sn,or=nn,In=O(),ar=Object.freeze({__proto__:null,create:O,clone:Ni,_:Wi,G:Vi,set:ji,add:Hi,W:Ui,multiply:zi,Pt:Ji,ceil:qi,floor:Xi,min:$i,max:Yi,round:Zi,scale:Ki,Et:Qi,Rt:tn,At:sn,length:en,kt:nn,Ft:rn,inverse:hn,normalize:on,Ot:an,Dt:ln,Lt:un,random:cn,Ss:fn,bs:dn,jt:pn,Vt:mn,rotate:gn,angle:yn,Ut:wn,L:Sn,V:bn,equals:vn,qt:sr,sub:er,mul:ir,div:nr,zt:rr,Jt:hr,Xt:or,forEach:function(t,s,e,i,n,r){var h,o;for(s=s||2,e=e||0,o=i?Math.min(i*s+e,t.length):t.length,h=e;h<o;h+=s)In[0]=t[h],In[1]=t[h+1],n(In,In,r),t[h]=In[0],t[h+1]=In[1];return t}}),globalThis.vs=Bn,globalThis.vs.xs=Nn,globalThis.vs.Ms=Wn,globalThis.vs.Ts=Vn,globalThis.vs.Cs=Tn,globalThis.vs.Is=Yn,globalThis.vs.Gs=tr,globalThis.vs._s=ar,globalThis.vs.Ps=Cn,globalThis.vs.Es=Hn}{let a=function(t,s,e){var i=[0,0],n=t[1][1]-t[0][1],r=t[0][0]-t[1][0],t=n*t[0][0]+r*t[0][1],h=s[1][1]-s[0][1],o=s[0][0]-s[1][0],s=h*s[0][0]+o*s[0][1],a=n*o-h*r;return m(a,0,e=e||0)||(i[0]=(o*t-r*s)/a,i[1]=(n*s-h*t)/a),i},n=function(t,s,e,i){var n,r=s[0]-t[0],s=s[1]-t[1],h=i[0]-e[0];return h*s-(i=i[1]-e[1])*r!=0&&(n=(h*(t[1]-e[1])+i*(e[0]-t[0]))/(i*r-h*s),0<=(t=(r*(e[1]-t[1])+s*(t[0]-e[0]))/(h*s-i*r)))&&t<=1&&0<=n&&n<=1},o=function(t,s,e){return(s[0]-t[0])*(e[1]-t[1])-(e[0]-t[0])*(s[1]-t[1])},M=function(t,s,e){return 0<o(t,s,e)},T=function(t,s,e){return 0<=o(t,s,e)},C=function(t,s,e){return o(t,s,e)<0},I=function(t,s,e){return o(t,s,e)<=0},r=function(t,s,e,i){var n,r,h;return i?(h=O,(r=F)[0]=s[0]-t[0],r[1]=s[1]-t[1],h[0]=e[0]-s[0],h[1]=e[1]-s[1],n=r[0]*h[0]+r[1]*h[1],r=Math.sqrt(r[0]*r[0]+r[1]*r[1]),h=Math.sqrt(h[0]*h[0]+h[1]*h[1]),Math.acos(n/(r*h))<i):0===o(t,s,e)},G=function(t,s){var e=s[0]-t[0];return e*e+(s=s[1]-t[1])*s},_=function(t,s){var e=t.length;return t[s<0?s%e+e:s%e]},h=function(t){t.length=0},P=function(t,s,e,i){for(var n=e;n<i;n++)t.push(s[n])},t=function(t){for(var s=0,e=t,i=1;i<t.length;++i)(e[i][1]<e[s][1]||e[i][1]===e[s][1]&&e[i][0]>e[s][0])&&(s=i);return!M(_(t,s-1),_(t,s),_(t,s+1))&&(l(t),!0)},l=function(t){for(var s=[],e=t.length,i=0;i!==e;i++)s.push(t.pop());for(i=0;i!==e;i++)t[i]=s[i]},E=function(t,s){return C(_(t,s-1),_(t,s),_(t,s+1))},u=function(t,s,e){var i,n=D,r=L;if(T(_(t,s+1),_(t,s),_(t,e))&&I(_(t,s-1),_(t,s),_(t,e)))return!1;for(var h=G(_(t,s),_(t,e)),o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&T(_(t,s),_(t,e),_(t,o+1))&&I(_(t,s),_(t,e),_(t,o))&&(n[0]=_(t,s),n[1]=_(t,e),r[0]=_(t,o),r[1]=_(t,o+1),i=a(n,r),G(_(t,s),i)<h))return!1;return!0},R=function(t,s,e){for(var i=0;i!==t.length;++i)if(i!==s&&i!==e&&(i+1)%t.length!==s&&(i+1)%t.length!==e&&n(_(t,s),_(t,e),_(t,i),_(t,i+1)))return!1;return!0},c=function(t,s,e,i){var n=i||[];if(h(n),s<e)for(var r=s;r<=e;r++)n.push(t[r]);else{for(r=0;r<=e;r++)n.push(t[r]);for(r=s;r<t.length;r++)n.push(t[r])}return n},f=function(t){for(var s=[],e=[],i=[],n=Number.MAX_VALUE,r=0;r<t.length;++r)if(E(t,r))for(var h=0;h<t.length;++h)if(u(t,r,h)){for(var e=f(c(t,r,h,i)),o=f(c(t,h,r,i)),a=0;a<o.length;a++)e.push(o[a]);e.length<n&&(n=(s=e).length,s.push([_(t,r),_(t,h)]))}return s},s=function(t){var s=f(t);return 0<s.length?d(t,s):[t]},d=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var e=[t],i=0;i<s.length;i++)for(var n=s[i],r=0;r<e.length;r++){var h=d(e[r],n);if(h){e.splice(r,1),e.push(h[0],h[1]);break}}return e}return i=t.indexOf((n=s)[0]),r=t.indexOf(n[1]),-1!==i&&-1!==r&&[c(t,i,r),c(t,r,i)]},e=function(t){for(var s=t,e=0;e<s.length-1;e++)for(var i=0;i<e-1;i++)if(n(s[e],s[e+1],s[i],s[i+1]))return!1;for(e=1;e<s.length-2;e++)if(n(s[0],s[s.length-1],s[e],s[e+1]))return!1;return!0},A=function(t,s,e,i,n){var r=s[1]-t[1],s=t[0]-s[0],t=r*t[0]+s*t[1],h=i[1]-e[1],i=e[0]-i[0],e=h*e[0]+i*e[1],o=r*i-h*s;return m(o,0,n=n||0)?[0,0]:[(i*t-s*e)/o,(r*e-h*t)/o]},k=function(t,s,e,i,n,r,h){r=r||100,h=h||0,n=n||25,s=void 0!==s?s:[],e=e||[],i=i||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],w=[],S=t,b=t;if(!(b.length<3))if(r<++h)console.warn("quickDecomp: max level ("+r+") reached.");else{for(var v=0;v<t.length;++v)if(E(S,v)){e.push(S[v]);for(var u=c=Number.MAX_VALUE,x=0;x<t.length;++x)M(_(S,v-1),_(S,v),_(S,x))&&I(_(S,v-1),_(S,v),_(S,x-1))&&(l=A(_(S,v-1),_(S,v),_(S,x),_(S,x-1)),C(_(S,v+1),_(S,v),l))&&(f=G(S[v],l))<c&&(c=f,a=l,m=x),M(_(S,v+1),_(S,v),_(S,x+1))&&I(_(S,v+1),_(S,v),_(S,x))&&(l=A(_(S,v+1),_(S,v),_(S,x),_(S,x+1)),M(_(S,v-1),_(S,v),l))&&(f=G(S[v],l))<u&&(u=f,o=l,p=x);if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,i.push(l),v<p?(P(y,S,v,p+1),y.push(l),w.push(l),0!==m&&P(w,S,m,S.length),P(w,S,0,v+1)):(0!==v&&P(y,S,v,S.length),P(y,S,0,p+1),y.push(l),w.push(l),P(w,S,m,v+1));else{if(p<m&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(x=m;x<=p;++x)T(_(S,v-1),_(S,v),_(S,x))&&I(_(S,v+1),_(S,v),_(S,x))&&(f=G(_(S,v),_(S,x)))<d&&R(S,v,x)&&(d=f,g=x%t.length);v<g?(P(y,S,v,g+1),0!==g&&P(w,S,g,b.length),P(w,S,0,v+1)):(0!==v&&P(y,S,v,b.length),P(y,S,0,g+1),P(w,S,g,v+1))}return y.length<w.length?(k(y,s,e,i,n,r,h),k(w,s,e,i,n,r,h)):(k(w,s,e,i,n,r,h),k(y,s,e,i,n,r,h)),s}s.push(t)}return s},i=function(t,s){for(var e=0,i=t.length-1;3<t.length&&0<=i;--i)r(_(t,i-1),_(t,i),_(t,i+1),s)&&(t.splice(i%t.length,1),e++);return e},p=function(t,s){for(var e=t.length-1;1<=e;--e)for(var i=t[e],n=e-1;0<=n;--n)g(i,t[n],s)&&t.splice(e,1)},m=function(t,s,e){return e=e||0,Math.abs(t-s)<=e},g=function(t,s,e){return m(t[0],s[0],e)&&m(t[1],s[1],e)};a,n,o,M,T,C,I,r,G,_,h,P,l,E,u,R,c,f,d,A,k,m,g,F=[],O=[],D=[],L=[],self.Rs={As:s,ks:k,Fs:e,Os:i,Ds:p,Ls:t}}{let t=!1,s=!1,e="dev",i=Symbol("Construct internal API token"),n=14,r=self.Bs=class{constructor(){throw TypeError("static class can't be instantiated")}static Ns(){if(n<=0)throw new Error("cannot obtain internal API token");return--n,i}static Ws(){t=!0}static Vs(){return t}static js(){s=!0}static Hs(){return s}static Us(t){e=t}static zs(){return e}static Js(){return"final"===e}};r.isDebug=!1,r.qs=!1,r.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Xs={}}{const s=self.Bs;s.$s=class{constructor(t){this.Ys=t,this.Zs=new Map,this.Ks()}Ks(){let t=this.Ys,s=(t=t.startsWith("?")||t.startsWith("#")?t.substr(1):t).split("&");for(const e of s)this.Qs(e)}Qs(t){if(t)if(t.includes("=")){const s=t.indexOf("="),e=decodeURIComponent(t.substring(0,s)),i=decodeURIComponent(t.substring(s+1));this.Zs.set(e,i)}else this.Zs.set(t,null)}te(){for(const t of this.Zs)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}ie(t){return this.Zs.has(t)}ne(t){const s=this.Zs.get(t);return void 0===s?null:s}re(){history.replaceState("",document.title,location.pathname+location.search)}he(t){this.Ys=t,this.Zs.clear(),this.Ks()}},s.oe=new s.$s(location.search),s.ae=new s.$s(location.hash),s.oe.ie("perf")&&(s.le=!0),"dev"!==s.oe.ne("mode")&&s.Us("final")}{let i=function(t){const s=parseFloat(t),e=j.get(s);return e||(13<=s?"11":"NT "+t)};i;const a=self.Bs,V="(unknown)",j=(a.ue={fe:V,de:V,pe:V,me:V,ge:NaN,ye:V,we:"browser",Se:!0,ve:!1,xe:!1,Me:!1,Te:async()=>{}},new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]])),H=navigator.userAgent,U=navigator.userAgentData;if(U&&0<U.brands.length){let s=function(t){let s="",e="",i="",n="";for(const r of t){const h=z.get(r.brand),o=(!s&&h&&(s=h,e=r.version),J.get(r.brand));!i&&o&&(i=o,n=r.version)}s||"Chromium"!==i||(a.ue.pe="Chromium",a.ue.me=n),a.ue.pe=s||V,a.ue.me=e||V,a.ue.ye=i||V};s,a.ue.fe=U.platform,a.ue.ve=U.mobile,a.ue.Se=!a.ue.ve;const z=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),J=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);s(U.brands);let e=!1;a.ue.Te=async()=>{if(!e)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);s(t.fullVersionList),"Windows"===a.ue.fe?a.ue.de=i(t.platformVersion):a.ue.de=t.platformVersion,e=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let t=function(t,s){const e=Array.isArray(t)?t:[t];for(const i of e){const n=i.exec(H);if(n){s(n);break}}};t(/windows\s+nt\s+([\d\.]+)/i,t=>{a.ue.fe="Windows";const s=t[1];a.ue.de=i(s)}),t(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{a.ue.fe="macOS",a.ue.de=t[1].replace(/_/g,".")}),t(/CrOS/,()=>{a.ue.fe="Chrome OS"}),t(/linux|openbsd|freebsd|netbsd/i,()=>{a.ue.fe="Linux"}),t(/android/i,()=>{a.ue.fe="Android"}),t(/android\s+([\d\.]+)/i,t=>{a.ue.fe="Android",a.ue.de=t[1]}),a.ue.fe===V&&(t(/(iphone|ipod|ipad)/i,t=>{a.ue.fe="iOS"}),t([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{a.ue.fe="iOS",a.ue.de=t[1].replace(/_/g,".")}));const q=/chrome\//i.test(H),X=/chromium\//i.test(H),$=/edg\//i.test(H),Y=/OPR\//.test(H),Z=/nwjs/i.test(H),K=/safari\//i.test(H),Q=/webkit/i.test(H),tt=($||Y||t(/chrome\/([\d\.]+)/i,t=>{a.ue.pe="Chrome",a.ue.me=t[1],a.ue.ye="Chromium"}),t(/edg\/([\d\.]+)/i,t=>{a.ue.pe="Edge",a.ue.me=t[1],a.ue.ye="Chromium"}),t(/OPR\/([\d\.]+)/,t=>{a.ue.pe="Opera",a.ue.me=t[1],a.ue.ye="Chromium"}),t(/chromium\/([\d\.]+)/i,t=>{a.ue.pe="Chromium",a.ue.me=t[1],a.ue.ye="Chromium"}),t(/nwjs\/[0-9.]+/i,t=>{a.ue.pe="NW.js",a.ue.me=t[1],a.ue.ye="Chromium",a.ue.we="nwjs"}),t(/firefox\/([\d\.]+)/i,t=>{a.ue.pe="Firefox",a.ue.me=t[1],a.ue.ye="Gecko"}),!K||q||X||$||Y||Z||(a.ue.pe="Safari",a.ue.ye="WebKit",t(/version\/([\d\.]+)/i,t=>{a.ue.me=t[1]}),t(/crios\/([\d\.]+)/i,t=>{a.ue.pe="Chrome for iOS",a.ue.me=t[1]}),t(/fxios\/([\d\.]+)/i,t=>{a.ue.pe="Firefox for iOS",a.ue.me=t[1]}),t(/edgios\/([\d\.]+)/i,t=>{a.ue.pe="Edge for iOS",a.ue.me=t[1]})),a.ue.ye===V&&Q&&(a.ue.ye="WebKit"),"Android"===a.ue.fe&&"Safari"===a.ue.pe&&(a.ue.pe="Stock"),new Set(["Windows","macOS","Linux","Chrome OS"])),st=tt.has(a.ue.fe)||"nwjs"===a.ue.we;a.ue.Se=st,a.ue.ve=!st}"Chrome"===a.ue.pe&&"browser"===a.ue.we&&/wv\)/.test(H)&&(a.ue.we="webview"),"nwjs"!==a.ue.we&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(a.ue.we="webapp"),a.ue.ge=parseFloat(a.ue.me);const e="macOS"===a.ue.fe&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints;e&&(a.ue.fe="iOS",a.ue.de=a.ue.me,a.ue.Se=!1,a.ue.ve=!0,a.ue.Me=!0),a.ue.xe="macOS"===a.ue.fe||"iOS"===a.ue.fe}{let h=function(e){return new Promise((t,s)=>{e.onsuccess=()=>t(e.result),e.onerror=()=>s(e.error)})},o=function(e){return new Promise((t,s)=>{e.oncomplete=()=>t(),e.onerror=()=>s(e.error),e.onabort=()=>s(e.error)})},t=function(t,s){return N(t,s)},s=function(t,s){return N(t,s,!0)},a=function(s){i(s);let t=nt.get(s);return t instanceof Promise||(t=(async e=>{i(e);const t=indexedDB.open(e,et);return t.addEventListener("upgradeneeded",t=>{try{const s=t.target.result;s.createObjectStore(it)}catch(t){console.error("Failed to create objectstore for database "+e,t)}}),h(t)})(s),nt.set(s,t),t.catch(t=>nt.delete(s))),t},i=function(t){if("string"!=typeof t)throw new TypeError("expected string")},r=function(t,n){const s=t.objectStore(it).openCursor();return new Promise(e=>{const i=[];s.onsuccess=t=>{const s=t.target.result;if(s){switch(n){case"entries":i.push([s.key,s.value]);break;case"keys":i.push(s.key);break;case"values":i.push(s.value)}s.continue()}else e(i)}})};h,o,t,s,a,i,r;const et=2,it="keyvaluepairs",nt=new Map,rt="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,ht="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function N(s,e,i=!1,n=!0){const t=await a(s);try{const r=t.transaction([it],i?"readwrite":"readonly");return e(r)}catch(t){if(n&&"InvalidStateError"===t.name)return nt.delete(s),N(s,e,i,!1);throw t}}class ot{constructor(t){i(t),this.name=t}async ready(){await a(this.name)}set(n,r){return i(n),s(this.name,async t=>{const s=t.objectStore(it).put(r,n),e=h(s),i=o(t);await Promise.all([i,e])})}get(r){return i(r),t(this.name,async t=>{const s=t.objectStore(it).get(r),e=h(s),i=o(t),[,n]=await Promise.all([i,e]);return n})}delete(n){return i(n),s(this.name,async t=>{const s=t.objectStore(it).delete(n),e=h(s),i=o(t);await Promise.all([i,e])})}clear(){return s(this.name,async t=>{const s=t.objectStore(it).clear(),e=h(s),i=o(t);await Promise.all([i,e])})}keys(){return t(this.name,async t=>{let s;if(ht){const n=t.objectStore(it).getAllKeys();s=h(n)}else s=r(t,"keys");const e=o(t),[,i]=await Promise.all([e,s]);return i})}values(){return t(this.name,async t=>{let s;if(rt){const n=t.objectStore(it).getAll();s=h(n)}else s=r(t,"values");const e=o(t),[,i]=await Promise.all([e,s]);return i})}entries(){return t(this.name,async t=>{const s=r(t,"entries"),e=o(t),[,i]=await Promise.all([e,s]);return i})}}self.Ce=ot}{let e=function(t){throw new Error(`"${t}" is not implemented`)},i=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},n=function(i){return"object"==typeof i?new Promise(s=>{const{port1:t,port2:e}=new MessageChannel;e.onmessage=t=>s(t.data),t.postMessage(i)}):Promise.resolve(i)};e,i,n;const at=self.Ce,lt=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];new WeakMap;class ut{constructor(t){this.Ie=t,this.Ge=!this.Ie,this.Ge||"undefined"!=typeof indexedDB||(this.Ge=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this._e=new Map}Pe(t){if(!this.Ge)for(const s of lt)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.Ge=!0;break}}async Ee(t){const s=this._e.get(t),e=await n(s);return void 0===e?null:e}async Re(t,s){s=await n(s),this._e.set(t,s)}Ae(t){this._e.delete(t)}ke(){this._e.clear()}Fe(){return Array.from(this._e.keys())}Oe(){return this.Ge}De(){return this._e}Le(t){this._e=t}async getItem(s,t){if(i(t),this.Ge)return this.Ee(s);let e;try{e=await this.Ie.get(s)}catch(t){return this.Pe(t),this.Ge?this.Ee(s):(console.error(`Error reading '${s}' from storage, returning null: `,t),null)}return void 0===e?null:e}async setItem(s,e,t){if(i(t),void 0===e&&(e=null),this.Ge)await this.Re(s,e);else try{await this.Ie.set(s,e)}catch(t){if(this.Pe(t),!this.Ge)throw t;await this.Re(s,e)}}async removeItem(s,t){if(i(t),this.Ge)this.Ae(s);else try{await this.Ie.delete(s)}catch(t){this.Pe(t),this.Ge?this.Ae(s):console.error(`Error removing '${s}' from storage: `,t)}}async clear(t){if(i(t),this.Ge)this.ke();else try{await this.Ie.clear()}catch(t){this.Pe(t),this.Ge?this.ke():console.error("Error clearing storage: ",t)}}async keys(t){if(i(t),this.Ge)return this.Fe();let s=[];try{s=await this.Ie.keys()}catch(t){if(this.Pe(t),this.Ge)return this.Fe();console.error("Error getting storage keys: ",t)}return s}ready(t){return i(t),this.Ge?Promise.resolve(!0):this.Ie.ready()}Be(t){if(t.Ne)return new ut(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const e=new at(s);return new ut(e)}}length(t){e("localforage.length()")}key(t,s){e("localforage.key()")}iterate(t,s){e("localforage.iterate()")}We(t){e("localforage.setDriver()")}config(t){e("localforage.config()")}Ve(t){e("localforage.defineDriver()")}je(){e("localforage.driver()")}supports(t){e("localforage.supports()")}dropInstance(){e("localforage.dropInstance()")}}self.localforage=new ut(new at("localforage"))}{const i=self.Bs;if(i.He={},i.He.Ue=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");if(void 0===t.animate)return!1;const s=t.animate([{opacity:"0"},{opacity:"1"}],1e3);return void 0!==s.reverse}catch(t){return!1}})(),i.He.Je="undefined"!=typeof HTMLDialogElement,i.He.qe=!!self.requestIdleCallback,i.He.ImageBitmap=!!self.createImageBitmap,i.He.ImageBitmapOptions=!1,i.He.Xe=!1,i.He.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{i.He.ImageBitmapOptions=!0}).catch(()=>{i.He.ImageBitmapOptions=!1})}catch(t){i.He.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{i.He.Xe=10===t.width&&10===t.height}).catch(()=>{i.He.Xe=!1})}catch(t){i.He.Xe=!1}}if(i.He.$e=!(!navigator.clipboard||!navigator.clipboard.readText),i.He.Ye=!(!navigator.permissions||!navigator.permissions.query),i.He.Ze=!1,i.He.Ye){const ct={name:"clipboard-read"};navigator.permissions.query(ct).then(()=>{i.He.Ze=!0}).catch(()=>{i.He.Ze=!1})}i.He.Ke=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),i.He.Qe="undefined"!=typeof Proxy,i.He.ti=(()=>{if("undefined"==typeof document)return!1;const t=document.createElement("a");return void 0!==t.download})(),i.He.si="function"==typeof fetch,i.He.ei=!!(self.isSecureContext&&"Opera"!==i.ue.pe&&navigator.storage&&navigator.storage.persist),i.He.ii=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),i.He.ni=(()=>{if("undefined"==typeof document)return!1;if("iOS"===i.ue.fe)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),i.He.ImageDecoder=void 0!==self.ImageDecoder,i.He.ri=!!self.VideoEncoder,i.He.hi=!!self.showOpenFilePicker,i.He.oi=!!self.queryLocalFonts,i.He.UserActivation=!!navigator.userActivation,i.He.ai=!1,(async()=>{let s;"undefined"==typeof document?s=new OffscreenCanvas(32,32):((s=document.createElement("canvas")).width=32,s.height=32);const t=s.getContext("2d");t.fillStyle="blue",t.fillRect(0,0,32,32);let e=null;try{s.convertToBlob?e=await s.convertToBlob({type:"image/webp",quality:1}):s.toBlob&&(e=await new Promise(t=>s.toBlob(t,"image/webp",1))),i.He.ai=e&&"image/webp"===e.type}catch(t){i.He.ai=!1}})()}{let i=function(t,e){return t.reduce((t,s)=>(0<e&&Array.isArray(s)?Array.prototype.push.apply(t,i(s,e-1)):t.push(s),t),[])};i;const ft=self.Bs;if(!String.prototype.trimStart){const dt=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(dt,"")}}if(!String.prototype.trimEnd){const pt=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(pt,"")}}String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(ft.li(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),Array.prototype.flat||(Array.prototype.flat=function(t=1){return i(this,t)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((e,t)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((t,s)=>e({usage:t,quota:s}),t))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let e=function(t){let s=mt.ci(),e="Assertion failure: "+t+"\n\nStack trace:\n"+s;console.error(e)};e;const mt=self.Bs;self.assert=function(t,s){t||e(s)}}{const n=self.Bs,gt=self.Xs,yt=(n.fi=function(t){return"number"==typeof t},n.di=function(t){return n.fi(t)&&isFinite(t)},n.mi=function(t){if(!n.fi(t))throw new TypeError("expected number")},n.gi=function(t){n.yi(t)},n.wi=function(t,s,e){if(!n.fi(t)||isNaN(t)||t<s||e<t)throw new RangeError("number outside of range")},n.Si=function(...s){for(let t of s);},n.bi=function(t){if(!n.di(t))throw new TypeError("expected finite number")},n.vi=function(t){n.yi(t)},n.xi=function(...s){for(let t of s);},n.Mi=function(t){return"string"==typeof t},n.Ti=function(t){if(!n.Mi(t))throw new TypeError("expected string")},n.Ci=function(t){n.yi(t)},n.Ii=function(...s){for(let t of s);},n.Gi=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},n._i=function(t){if(!n.Gi(t))throw new TypeError("expected simple object")},n.Pi=function(t){if(!n.yi(t)&&!n.Gi(t))throw new TypeError("expected simple object")},n.Ei=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},n.Ri=function(t){if(!n.Ei(t))throw new TypeError("expected object")},n.Ai=function(t){n.yi(t)},n.ki=function(...s){for(let t of s);},n.Fi=function(t){return n.Oi(t,Blob)&&"string"==typeof t.name},n.Di=function(t){if(!n.Fi(t))throw new TypeError("expected file")},n.Li=function(t){n.yi(t)},n.Bi=function(t){return Array.isArray(t)},n.Ni=function(t){if(!n.Bi(t))throw new TypeError("expected array")},n.Wi=function(t){n.yi(t)},n.Vi=function(...s){for(let t of s);},n.ji=function(t){return!(!n.Bi(t)||t.length&&!n.Bi(t[0]))},n.Hi=function(s){if(!n.ji(s))throw new TypeError("expected 2d array");for(let t of s)if(!n.Bi(t))throw new TypeError("expected 2d array")},n.Ui=function(t){n.yi(t)},n.Ji=function(t){return"function"==typeof t},n.Xi=function(t,s){if(!n.Ji(t))throw new TypeError("expected function");if(!n.yi(s)&&t!==s)throw new TypeError("expected same function reference")},n.$i=function(t){n.yi(t)},n.Yi=function(...s){for(let t of s);},n.Zi=function(s,...e){if(!n.Ji(s))throw new TypeError("expected function");if(!e.length)throw new Error("missing comparison functions");for(let t of e)if(!n.yi(t)&&s===t)return;throw new TypeError("expected same function reference")},n.Ki=function(...s){if(!n.yi(s))for(let t of s);},n.Qi=function(t,s){return t instanceof s},n.tn=function(s,...e){for(let t of e)if(n.Qi(s,t))return!0;return!1},n.sn=function(t,s){if(!n.Qi(t,s))throw new TypeError("unexpected type")},n.nn=function(t,s){n.yi(t)},n.rn=function(t,...s){for(let t of s);},n.hn=function(t,...s){if(!n.tn(t,...s))throw new TypeError("unexpected type")},n.an=function(t,...s){if(!n.yi(t)&&!n.tn(t,...s))throw new TypeError("unexpected type")},n.ln=function(s,e){for(let t of s)if(!n.Qi(t,e))return!1;return!0},n.un=function(s){for(let t of s)if(!n.di(t))return!1;return!0},n.cn=function(s,t){for(let t of s);},n.dn=function(s,t){if(!n.yi(s))for(let t of s);},n.pn=function(s,t){if(!n.yi(s))for(let t of s);},n.mn=function(s){for(let t of s);},n.gn=function(s){if(!n.yi(s))for(let t of s);},n.yn=function(t,s){return!(n.yi(t)||!n.Mi(t.nodeName))&&(!s||n.wn(t.nodeName,s))},n.Sn=function(t,s){if(n.yi(t)||!n.Mi(t.nodeName))throw new TypeError("expected DOM node");if(s&&!n.wn(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},n.bn=function(t,s){n.yi(t)},n.vn=function(t,s){return!(n.yi(t)||!n.Mi(t.tagName))&&(!s||n.wn(t.tagName,s))},n.xn=function(t,s){if(n.yi(t)||!n.Mi(t.tagName))throw new TypeError("expected HTML element");if(s&&!n.wn(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},n.Mn=function(t,s){n.yi(t)},n.Tn=function(t){return n.vn(t,"img")||n.vn(t,"canvas")||n.vn(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},n.Cn=function(t){if(!n.Tn(t))throw new TypeError("expected drawable")},n.In=function(t){n.yi(t)},n.Gn=function(t){return t instanceof ImageData||n.Tn(t)},n._n=function(t){if(!n.Gn(t))throw new TypeError("expected drawable or image data")},n.Pn=function(t){if(!n.yi(t)&&!n.Gn(t))throw new TypeError("expected drawable or image data")},n.En=function(t){return"string"==typeof t||n.HtmlString&&t instanceof n.HtmlString||t instanceof n.Rn},n.An=function(t){if(!n.En(t))throw new TypeError("expected string-like")},n.kn=function(t){n.yi(t)},n.Fn=function(...s){for(let t of s);},n.On=function(){throw new Error("must be overridden")},n.Dn=function(){throw new Error("not yet implemented")},n.Ln=function(t){return t.constructor===function*(){}.constructor},n.Bn=function(t){if(!n.Ln(t))throw new Error("expected generator function")},n.Nn=function(t){return"function"===t[Symbol.iterator]},n.Wn=function(t){if(!n.Nn(t))throw new Error("expected iterable")},n.Vn=function(t){return!n.yi(t)},n.yi=function(t){return null==t},n.jn=function(s){let e=s[0].constructor;for(let t of s)if(t.constructor!==e)return!1;return e},n.Hn=function(s,e){for(let t of s)if(!(t instanceof e))return!1;return!0},Object.getPrototypeOf(Uint8Array));n.Un=function(t){return n.Qi(t,yt)},n.zn=function(t){},n.Jn=function(t){n.qn(t,yt)},n.Xn=function(t,...s){if(!n.$n(t,...s))throw new TypeError("unexpected type")},n.$n=function(t,...s){for(const e of s)if(n.Oi(t,e))return!0;return!1},n.qn=function(t,s){if(!n.Oi(t,s))throw new TypeError("unexpected type")},n.Oi=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},gt.mi=n.mi,gt.gi=n.gi,gt.bi=n.bi,gt.vi=n.vi,gt.Ti=n.Ti,gt.Ci=n.Ci,gt.Ri=n.Ri,gt.Ai=n.Ai,gt.Ni=n.Ni,gt.Wi=n.Wi,gt.Xi=n.Xi,gt.$i=n.$i,gt.sn=n.sn,gt.nn=n.nn,gt.yi=n.yi}{let i=function(t,s){let e=p.getType(t),i=p.getType(s);return"null"===e||"null"===i||"undefined"!==e&&"undefined"!==i&&e===i},n=function(t){console.warn("[Defence] "+t+" @",p.ci())},e=function(){if(f=-1,0<a.size||0<l.size){let t=new Set([...a.keys()].map(t=>p.Yn(t))),s=[...t].join(",");console.warn("An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: "+s),a.clear(),l.clear()}},r=function(s){let e=new Set;for(let t in s)e.add(t);return e},h=function(t,s){let e=r(s),i=d.get(t);if(i){let s=[];for(let t of i.values())e.has(t)?e.delete(t):s.push(t);p.Zn(s,[...e]),s.length&&console.warn(`[Defence] '${p.Yn(t)}' constructor creates inconsistent properties: `+s.join(", "))}else d.set(t,e)};i,n,e,r,h;const p=self.Bs,wt=new Map;p.Kn=function(t,s){console.log("%c"+t,"font-weight: bold; color:"+s)},p.Qn=function(t,...s){wt.has(t)||wt.set(t,-1),-1===wt.get(t)&&wt.set(t,requestAnimationFrame(()=>{console.log("%c"+t,"font-weight: bold",...s),wt.set(t,-1)}))};let o,a=(p.er=function(t){performance.mark(t),(o=o||new Map).has(t)||o.set(t,{current:0,total:0,ir:0,nr:1,toString:function(){return`${t} :: current => ${this.current.toPrecision(3)} :: average => ${this.ir.toPrecision(3)} :: calls => `+this.nr}})},p.rr=function(t){performance.measure("measure-"+t,t);const s=performance.getEntriesByName("measure-"+t)[0],e=o.get(t);e.current=s.duration,e.total+=e.current,e.ir=e.total/e.nr,console.log(e.toString()),e.nr++,performance.clearMarks(t),performance.clearMeasures("measure-"+t)},p.ci=function(){return(new Error).stack},p.hr=function(){},p.cast=function(t,s){return t&&t instanceof s?t:null},p.Yn=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":p.fi(t)?"<number>":p.Mi(t)?"<string>":p.Bi(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":p.Ji(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},p.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},p.range=function*(s,e){if(!isFinite(Math.abs(s-e)))throw new Error("Invalid parameters");if(e<s)for(let t=s-1;t>=e;t--)yield t;else for(let t=s;t<e;t++)yield t},new Map),l=new Map,u=new WeakMap,c=new WeakMap;p.lr={};const St=new Set(["then","splice"]);p.lr.get=function(t,s){return s in t||"symbol"==typeof s||St.has(s)||n(`Accessed missing property '${s}' from defended object '${p.Yn(t)}', returning undefined`),c.has(t)&&"symbol"!=typeof s&&!St.has(s)&&n(`Accessed property '${s}' on a released object '${p.Yn(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]},p.lr.set=function(t,s,e){return s in t||a.has(t)||n(`Set non-existent property '${s}' to '${e}' on defended object '${p.Yn(t)}'`),i(t[s],e)||a.has(t)||n(`Set '${p.getType(t[s])}' property '${s}' to type '${p.getType(e)}' on defended object '${p.Yn(t)}'`),c.has(t)&&n(`Set property '${s}' on a released object '${p.Yn(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]=e,!0},p.lr.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${p.Yn(t)}'`)},p.lr.defineProperty=function(t,s,e){throw new ReferenceError(`Cannot define property '${s}' on defended object '${p.Yn(t)}'`)},p.lr.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${p.Yn(t)}'`)};let f=-1,d=(p.ur=class{constructor(){if(p.qs&&p.He.Qe){let t=Object.create(new.target.prototype),s=new Proxy(t,p.lr);return a.set(t,s),l.set(s,t),u.set(s,t),-1===f&&(f=requestAnimationFrame(e)),s}}},p.cr=function(s){if(p.qs&&p.He.Qe&&s instanceof p.ur){if(l.has(s)){let t=l.get(s);l.delete(s),a.delete(t)}return s}return p.isDebug?Object.seal(s):s},p.dr=function(t,...s){let e;try{e=new t(...s)}catch(t){throw l.clear(),a.clear(),t}return p.qs&&h(t,e),p.cr(e)},p.pr=function(t){let s=u.get(t);s&&c.set(s,p.ci())},p.mr=function(t){let s=u.get(t);return!!s&&!!c.get(s)},new Map);p.gr=class{constructor(t){this.yr="",t&&this.start(t)}start(t){p.le&&(this.yr=t,performance.mark(this.yr+"-Start"))}end(){p.le&&(performance.mark(this.yr+"-End"),performance.measure(this.yr,this.yr+"-Start",this.yr+"-End"))}next(t){p.le&&(this.end(),this.yr=t,performance.mark(this.yr+"-Start"))}}}{let e=function(t){return 0===t&&1/t<0};e;const y=self.Bs,bt=2*Math.PI,vt=Math.PI/180,xt=180/Math.PI,Mt=(y.wrap=function(t,s,e){t=Math.floor(t),s=Math.floor(s);const i=(e=Math.floor(e))-s;if(0==i)return e;if(t<s){const n=e-(s-t)%i;return n===e?0:n}return s+(t-s)%i},y.Sr=function(t,s,e,i,n){const r=e-s;if(0==r&&0===i)return t;const h=n-i;return(t-s)*h/r+i},y.normalize=function(t,s,e){return s-e==0?1:(t-s)/(e-s)},y.br=function(t,s,e){return t<s?s:e<t?e:t},y.vr=function(t){return(t%=bt)<0&&(t+=bt),t},y.Mr=function(t){return t*vt},y.Tr=function(t){return t*xt},y.Cr=function(t,s){return Math.sqrt(t*t+s*s)},y.Ir=function(t,s,e){return Math.sqrt(t*t+s*s+e*e)},y.Gr=function(t,s,e,i){return y.Cr(e-t,i-s)},y._r=function(t,s,e,i){const n=e-t,r=i-s;return n*n+r*r},y.Pr=function(t,s,e,i){return Math.atan2(i-s,e-t)},y.Er=function(t,s){if(t===s)return 0;let e=Math.sin(t),i=Math.cos(t),n=Math.sin(s),r=Math.cos(s),h=e*n+i*r;return 1<=h?0:h<=-1?Math.PI:Math.acos(h)},y.Rr=function(t,s,e){let i=Math.sin(t),n=Math.cos(t),r=Math.sin(s),h=Math.cos(s);return Math.acos(i*r+n*h)>e?0<n*r-i*h?y.vr(t+e):y.vr(t-e):y.vr(s)},y.Ar=function(t,s){let e=Math.sin(t),i=Math.cos(t),n=Math.sin(s),r=Math.cos(s);return i*n-e*r<=0},y.kr=function(t,s,e,i=0){let n=y.Er(t,s),r=bt*i;return y.Ar(s,t)?y.vr(t+(n+r)*e):y.vr(t-(n+r)*e)},y.Fr=function(t,s,e,i=0){const n=y.Er(t,s),r=bt*i;return y.Ar(s,t)?y.vr(t+(n+r)*e):y.vr(t+(bt-n+r)*e)},y.Or=function(t,s,e,i=0){const n=y.Er(t,s),r=bt*i;return y.Ar(s,t)?y.vr(t-(-bt+n-r)*e):y.vr(t-(n+r)*e)},y.Dr=function(t,s){const e=y.Er(t,s);return y.Ar(t,s)?y.vr(s-e):y.vr(s+e)},y.Lt=function(t,s,e){return t+e*(s-t)},y.Lr=function(t,s,e){return t===s?0:(e-t)/(s-t)},y.Br=function(t,s,e,i,n){return y.Lt(i,n,y.Lr(t,s,e))},y.Nr=function(t,s,e,i){return y.Lt(y.Lt(t,s,i),y.Lt(s,e,i),i)},y.Wr=function(t,s,e,i,n){return y.Lt(y.Nr(t,s,e,n),y.Nr(s,e,i,n),n)},y.Vr=function(t,s,e){return(t+s+(t-s)*Math.cos(e*Math.PI))/2},y.jr=function(t){return 0<t&&0==(t-1&t)},y.Hr=function(s){--s;for(let t=1;t<32;t<<=1)s|=s>>t;return s+1},y.Ur=function(t,s){return Math.round(t*s)/s},y.zr=function(t,s){return Math.floor(t*s)/s},y.Jr=function(t,s){s=Math.max(Math.floor(s),0);const e=Math.pow(10,s);return Math.round(t*e)/e},y.qr=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},y.toFixed=function(t,s){let e=t.toFixed(s),i=e.length-1;for(;0<=i&&"0"===e.charAt(i);--i);return 0<=i&&"."===e.charAt(i)&&--i,i<0?e:e.substr(0,i+1)},y.Xr=function(t,s,e){return y.br(t,0,255)|y.br(s,0,255)<<8|y.br(e,0,255)<<16},1024),Tt=16384,Ct=8191,It=(y.$r=function(t,s,e,i){return t=y.br(Math.floor(1024*t),-8192,Ct),s=y.br(Math.floor(1024*s),-8192,Ct),e=y.br(Math.floor(1024*e),-8192,Ct),i=y.br(Math.floor(1023*i),0,1023),t<0&&(t+=Tt),s<0&&(s+=Tt),e<0&&(e+=Tt),-(t*Tt*Tt*Mt+s*Tt*Mt+e*Mt+i)},y.Yr=function(t,s,e){return y.$r(t,s,e,1)},y.Zr=function(s){if(0<=s)return(255&s)/255;{let t=Math.floor(-s/(Tt*Tt*Mt));return t>Ct&&(t-=Tt),t/1024}},y.Kr=function(s){if(0<=s)return((65280&s)>>8)/255;{let t=Math.floor(-s%(Tt*Tt*Mt)/(Tt*Mt));return t>Ct&&(t-=Tt),t/1024}},y.Qr=function(s){if(0<=s)return((16711680&s)>>16)/255;{let t=Math.floor(-s%(Tt*Mt)/Mt);return t>Ct&&(t-=Tt),t/1024}},y.th=function(t){if(e(t))return 0;if(0<=t)return 1;{const s=Math.floor(-t%Mt);return s/1023}},y.eh=function(s,e){for(s=Math.floor(s),e=Math.floor(e);0!==e;){let t=e;e=s%e,s=t}return s},[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]]);y.ih=function(e,i){if((e=Math.floor(e))===(i=Math.floor(i)))return[1,1];for(let s of It){let t=e/s[0]*s[1];if(Math.abs(i-t)<1)return s.slice(0);if(t=e/s[1]*s[0],Math.abs(i-t)<1)return[s[1],s[0]]}let t=y.eh(e,i);return[e/t,i/t]},y.nh=function(t,s,e,i,n,r,h,o){const a=Math.min(t,e),l=Math.max(t,e),u=Math.min(n,h),c=Math.max(n,h);if(l<u||c<a)return!1;const f=Math.min(s,i),d=Math.max(s,i),p=Math.min(r,o),m=Math.max(r,o);if(d<p||m<f)return!1;const g=n-t+h-e,y=r-s+o-i,w=e-t,S=i-s,b=h-n,v=o-r,x=Math.abs(S*b-v*w),M=b*y-v*g;if(Math.abs(M)>x)return!1;const T=w*y-S*g;return Math.abs(T)<=x},y.rh=function(t,s,e,i,n,r,h,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(r<f||d<n)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||m<h)return!1;const g=a-t+u-e,y=l-s+c-i,w=e-t,S=i-s,b=u-a,v=c-l,x=Math.abs(S*b-v*w),M=b*y-v*g;if(Math.abs(M)>x)return!1;const T=w*y-S*g;return Math.abs(T)<=x},y.hh=function(t,s,e,i,n){const r=Math.min(t,e),h=Math.max(t,e),o=Math.min(s,i),a=Math.max(s,i),l=n.oh(),u=n.ah(),c=n.lh(),f=n.uh(),d=n.fh(),p=n.dh(),m=n.ph(),g=n.mh();return y.rh(t,s,e,i,r,h,o,a,l,u,c,f)||y.rh(t,s,e,i,r,h,o,a,c,f,d,p)||y.rh(t,s,e,i,r,h,o,a,d,p,m,g)||y.rh(t,s,e,i,r,h,o,a,m,g,l,u)},y.gh=function(s,e,i,n,r){let h=Math.min(s,i),o=Math.max(s,i),a=Math.min(e,n),l=Math.max(e,n),u=0;for(let t=r.length-4;u<=t;u+=2)if(y.rh(s,e,i,n,h,o,a,l,r[u],r[u+1],r[u+2],r[u+3]))return!0;return y.rh(s,e,i,n,h,o,a,l,r[u],r[u+1],r[0],r[1])};y.yh=function(t,s,e,i,n,r,h,o){const a=e-t,l=i-s,u=h-n,c=o-r,f=a*c-l*u;if(0==f)return 2;const d=((s-i)*(h-t)+a*(o-s))/f;return 0<d&&d<1+1e-6?(c*(h-t)+(n-h)*(o-s))/f:2},y.wh=function(t,s,e,i,n,r,h,o,a){const l=(h-n)*a,u=(o-r)*a;return y.yh(t,s,e,i,n-l,r-u,h+l,o+u)},y.Sh=function(t,s,e,i,n,r,h,o){const a=n-e,l=r-i,u=h-e,c=o-i,f=t-e,d=s-i,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,w=u*f+c*d,S=1/(p*y-m*m),b=(y*g-m*w)*S,v=(p*w-m*g)*S;return 0<=b&&0<=v&&b+v<=1},y.bh=function(t,s,e,i,n,r,h,o){const a=n-e,l=r-i,u=h-e,c=o-i,f=t-e,d=s-i,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,w=f*u+d*c,S=p*g-m*m,b=(g*y-m*w)/S,v=(p*w-m*y)/S,x=1-b-v;return[x,b,v]},y.xh=function(t,s,e,i,n,r,h,o,a,l,u,c){return[t*i+s*h+e*l,t*n+s*o+e*u,t*r+s*a+e*c]}}{let l=self.Bs,s=null,e="";if("undefined"!=typeof document){const Gt=(s=document).querySelector("base");(e=Gt&&Gt.hasAttribute("href")?Gt.getAttribute("href"):"")&&!(e=e.startsWith("/")?e.substr(1):e).endsWith("/")&&(e+="/")}l.Mh=function(){return e},l.Th=function(){if(!s)return"";const t=s.location;return l.Ch(t.origin+t.pathname)+e},l.Ch=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},l.Ih=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},l.Gh=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},l._h=function(t,s){const e=t.lastIndexOf(".");return-1===e?t+"."+s:t.substr(0,e+1)+s},l.Ph=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},l.Eh=function(t){return t.replace(/\\/g,"/")},l.Rh=function(t,s){const e=t?l.Gh(t).slice(1):"";return s===e},l.Ah=function(t,s){let e,i;return l.Fi(t)&&(e=l.Ph(t.name)),l.Mi(t)&&(e=l.Ph(t)),l.Fi(s)&&(i=l.Ph(s.name)),l.Mi(s)&&(i=l.Ph(s)),e===i},l.kh=function(t){t=l.Eh(t);let s=/^\w\:\//.exec(t),e=(s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=1<(t=t.replace(/\/{2,}/g,"/")).length&&"/"===t.slice(-1)?t.slice(0,-1):t).lastIndexOf("/")+1),i="",n=t,r,h="";0<e&&(i=t.slice(0,e),n=t.slice(e));const o=(r=n).lastIndexOf("."),a=(0<o&&(h=n.slice(o),r=n.slice(0,-h.length)),s+i+n);return{dir:i,Fh:n,name:r,root:s,ext:h,Oh:a}},l.Dh=function(e,i){return new Promise((t,s)=>{self.setTimeout(t,e,i)})},l.Lh=function(t){try{t()}catch(t){l.isDebug&&console.warn("Swallowed exception: ",t)}},l.Bh=function(){},l.wn=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},l.Nh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},l.Wh=function(t,s,e){t[e++]=s[0],t[e++]=s[1],t[e++]=s[2],t[e++]=s[3],t[e++]=s[4],t[e++]=s[5],t[e++]=s[6],t[e++]=s[7],t[e++]=s[8],t[e++]=s[9],t[e++]=s[10],t[e++]=s[11],t[e++]=s[12],t[e++]=s[13],t[e++]=s[14],t[e]=s[15]},l.Vh=function(t,s){t.length=s},l.jh=function(t){t&&0!==t.length&&l.Vh(t,0)},l.Hh=function(e){if(e){for(let s=0;s<e.length;s++){let t=e[s];l.Vh(t,0)}l.Vh(e,0)}},l.Uh=function(s,e,i){const n=s.length;if(!((e|=0)<=n))for(let t=n;t<e;++t)s.push(i)},l.zh=function(t,s,e){const i=t.length;(s|=0)<i?l.Vh(t,s):i<s&&l.Uh(t,s,e)},l.Jh=function(t,s){l.jh(t),l.Zn(t,s)},l.Zn=function(e,i){if(i.length<1e4)e.push(...i);else for(let t=0,s=i.length;t<s;++t)e.push(i[t])},l.qh=function(e,i){if(!((i=Math.floor(i))<0||i>=e.length)){let s=e.length-1;for(let t=i;t<s;++t)e[t]=e[t+1];l.Vh(e,s)}},l.Xh=function(t,s){let e=t.indexOf(s);0<=e&&t.splice(e,1)},l.$h=function(s,e){let i=s.length;if(e.length!==i)return!1;for(let t=0;t<i;++t)if(s[t]!==e[t])return!1;return!0},l.Yh=function(e,i){let n=[],r=0;for(let s=0,t=e.length;s<t;++s){let t=e[s];i(t)?n.push(t):(e[r]=t,++r)}return l.Vh(e,r),n},l.Zh=function(e,i){let t=e.length,n=0;for(let s=0,t=e.length;s<t;++s){let t=e[s];i.has(t)||(e[n++]=t)}return l.Vh(e,n),t-n},l.Kh=function(t,s){return t===Math.floor(t)&&0<=t&&t<s.length},l.Qh=function(t,s){if(!l.Kh(t,s))throw new RangeError("array index out of bounds")},l.eo=function(t){return t.slice()},l.io=function(t,e){let i=[];for(let s of t)if(l.Ei(s)){let t=e(s);if(!t)throw new Error("missing clone");if(t.constructor!==s.constructor)throw new Error("object is not a clone");i.push(t)}else l.Bi(s)?i.push(l.io(s,e)):i.push(s);return i},l.no=function(s){let e=[];for(let t of s)e.push(t.slice());return e},l.ro=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},l.ho=function(t,s,e){const i=new Set;for(const n of t.values())s(n)&&(e?i.add(e(n)):i.add(n));return i},l.ao=function(t,s){return t.union?t.union(s):new Set([...t,...s])},l.lo=function(t,s){for(const e of s)t.add(e);return t},l.first=function(s){for(let t of s)return t;return null},l.xor=function(t,s){return!t!=!s},l.compare=function(t,s,e){switch(s){case 0:return t===e;case 1:return t!==e;case 2:return t<e;case 3:return t<=e;case 4:return e<t;case 5:return e<=t;default:return!1}},l.uo=function(s){for(let t in s)if(s.hasOwnProperty(t))return!0;return!1},l.co=function(o,a){return o.length?new Promise((e,i)=>{let n=[],r=0,h=!1;for(let s=0,t=o.length;s<t;++s)n.push(void 0),o[s].then(t=>{h||(n[s]=t,++r===o.length?e(n):a(r,o.length))}).catch(t=>{h=!0,i(t)})}):Promise.resolve([])};let i=[],n=(l.fo=function(t){i.push(t)},l.do=function(){let e=0;for(let s of i){let t=s();e+=t}return Math.floor(e)},1),r=new Map,h=new MessageChannel,o=(h.port2.onmessage=function(t){const s=t.data,e=r.get(s);r.delete(s),e&&e(performance.now())},l.po=function(t){const s=n++;return r.set(s,t),h.port1.postMessage(s),s},l.yo=function(t){r.delete(t)},l.wo=l.po,l.So=function(){return new Promise(t=>l.wo(t))},new Set);l.bo=function(s){const e=self.requestAnimationFrame(async t=>{await l.So(),o.has(e)&&(o.delete(e),s(t))});return o.add(e),e},l.vo=function(t){o.has(t)&&(self.cancelAnimationFrame(t),o.delete(t))}}{const r=self.Bs;r.xo=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},r.Mo=function(t){return!r.xo(t)},r.To=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} `+t.statusText)},r.Co=function(t,s){return fetch(t,s).then(t=>(r.To(t),t))},r.Io=function(t){return r.Co(t).then(t=>t.text())},r.Go=function(t){return r.Co(t).then(t=>t.json())},r._o=function(t){return r.Co(t).then(t=>t.blob())},r.Po=function(t){return r.Co(t).then(t=>t.arrayBuffer())},r.Eo=function(i){return new Promise((t,s)=>{const e=new Image;e.onload=()=>t(e),e.onerror=t=>s(t),e.src=i})},r.Ro=function(i){return"function"==typeof i.arrayBuffer?i.arrayBuffer():new Promise((t,s)=>{const e=new FileReader;e.onload=()=>t(e.result),e.onerror=()=>s(e.error),e.readAsArrayBuffer(i)})},r.Ao=function(i){return"function"==typeof i.text?i.text():new Promise((t,s)=>{const e=new FileReader;e.onload=()=>t(e.result),e.onerror=()=>s(e.error),e.readAsText(i)})},r.ko=function(t){return r.Ao(t).then(t=>JSON.parse(t))},r.Fo=async function(t,s){let e=URL.createObjectURL(t);try{const i=await r.Eo(e);return URL.revokeObjectURL(e),e="",s&&"function"==typeof i.decode&&await i.decode(),i}finally{e&&URL.revokeObjectURL(e)}},r.Oo=function(t,s){if("undefined"==typeof document||"function"!=typeof document.createElement)return new OffscreenCanvas(t,s);{const e=document.createElement("canvas");return e.width=t,e.height=s,e}},r.Do=function(s,e,i){if("number"!=typeof i&&(i=1),e=e||"image/png",i=r.br(i,0,1),s.convertToBlob)return s.convertToBlob({type:e,quality:i});if(s.toBlob)return new Promise(t=>s.toBlob(t,e,i));throw new Error("could not convert canvas to blob")},r.Lo=function(t,s,e){const i=r.Oo(t.width,t.height),n=i.getContext("2d");return n.drawImage(t,0,0),r.Do(i,s,e)},r.Bo=function(t,s,e){if(r.He.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>r.Lo(t,s,e));if(r.He.ImageBitmap)return createImageBitmap(t).then(t=>r.Lo(t,s,e));{const i=r.Oo(t.width,t.height),n=i.getContext("2d");return n.putImageData(t,0,0),r.Do(i,s,e)}},r.No=function(t,s){t.clear();for(const e of s)t.add(e)},r.Wo=function(t){const s=Object.create(null);for(const[e,i]of t.entries())s[e]=i;return s},r.Vo=function(t,s){s.clear();for(const[e,i]of Object.entries(t))s.set(e,i)},r.jo=function s(t){if("object"!=typeof t||null===t)return t;if(t instanceof Set)return{_c3type_:"set",data:[...t].map(t=>s(t))};if(t instanceof Map)return{_c3type_:"map",data:[...t].map(t=>[t[0],s(t[1])])};{const e=Object.create(null);for(const[i,n]of Object.entries(t))e[i]=s(n);return e}},r.Ho=function s(t){if("object"==typeof t&null!==t){if("set"===t._c3type_)return new Set(t.data.map(t=>s(t)));if("map"===t._c3type_)return new Map(t.data.map(t=>[t[0],s(t[1])]));{const e=Object.create(null);for(const[i,n]of Object.entries(t))e[i]=s(n);return e}}return t},r.Uo=function(t){if(t.startsWith("--"))return t;let s="",e=!1,i=0;for(const n of t)"-"===n?0<i&&(e=!0):e?(s+=n.toUpperCase(),e=!1):s+=n,++i;return s},r.zo=function(t){return"object"==typeof t&&"function"==typeof t.next},r.Jo=function(s,e){const i=[];if("function"==typeof e)for(let t=0;t<s;++t)i.push(e());else for(let t=0;t<s;++t)i.push(e);return i}}{let i=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},l=function(t,s,e){return e<0&&(e+=1),1<e&&--e,e<1/6?t+6*(s-t)*e:e<.5?s:e<2/3?t+(s-t)*(2/3-e)*6:t};i,l;const u=self.Bs,_t=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,Pt=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;u.qo=class{constructor(t,s,e,i){this.Xo=NaN,this.$o=NaN,this.Yo=NaN,this.Zo=NaN,this.Xo=0,this.$o=0,this.Yo=0,this.Zo=0,t instanceof u.qo?this.set(t):this.Ko(t||0,s||0,e||0,i||0)}Qo(t,s,e){return this.Xo=+t,this.$o=+s,this.Yo=+e,this.br(),this}Ko(t,s,e,i){return this.Xo=+t,this.$o=+s,this.Yo=+e,this.Zo=+i,this.br(),this}set(t){return this.Xo=t.Xo,this.$o=t.$o,this.Yo=t.Yo,this.Zo=t.Zo,this}G(t){return this.set(t)}add(t){this.Xo+=t.Xo,this.$o+=t.$o,this.Yo+=t.Yo,this.Zo+=t.Zo,this.br()}ta(t,s,e,i=0){this.Xo+=+t,this.$o+=+s,this.Yo+=+e,this.Zo+=+i,this.br()}ea(t){this.na(Math.max(this.Xo,t.Xo)-Math.min(this.Xo,t.Xo)),this.ra(Math.max(this.$o,t.$o)-Math.min(this.$o,t.$o)),this.oa(Math.max(this.Yo,t.Yo)-Math.min(this.Yo,t.Yo)),this.aa(Math.max(this.Zo,t.Zo)-Math.min(this.Zo,t.Zo)),this.br()}la(t){this.Xo=t.Xo,this.$o=t.$o,this.Yo=t.Yo}na(t){this.Xo=u.br(+t,0,1)}ua(){return this.Xo}ra(t){this.$o=u.br(+t,0,1)}ca(){return this.$o}oa(t){this.Yo=u.br(+t,0,1)}fa(){return this.Yo}aa(t){this.Zo=u.br(+t,0,1)}da(){return this.Zo}clone(){return u.dr(u.qo,this.Xo,this.$o,this.Yo,this.Zo)}toArray(){return[this.Xo,this.$o,this.Yo,this.Zo]}pa(){return new Float64Array(this.toArray())}ma(t,s){t[s++]=this.Xo,t[s++]=this.$o,t[s++]=this.Yo,t[s]=this.Zo}ga(t,s){t[s++]=this.Xo,t[s++]=this.$o,t[s]=this.Yo}equals(t){return this.Xo===t.Xo&&this.$o===t.$o&&this.Yo===t.Yo&&this.Zo===t.Zo}ya(t){return this.Xo===t.Xo&&this.$o===t.$o&&this.Yo===t.Yo}wa(t,s,e){return this.Xo===t&&this.$o===s&&this.Yo===e}Sa(t,s,e,i){return this.Xo===t&&this.$o===s&&this.Yo===e&&this.Zo===i}ba(t,s){return t[s]===Math.fround(this.Xo)&&t[s+1]===Math.fround(this.$o)&&t[s+2]===Math.fround(this.Yo)&&t[s+3]===Math.fround(this.Zo)}xa(t,s){return t[s]===Math.fround(this.Xo)&&t[s+1]===Math.fround(this.$o)&&t[s+2]===Math.fround(this.Yo)}multiply(t){this.Xo*=t.Xo,this.$o*=t.$o,this.Yo*=t.Yo,this.Zo*=t.Zo}Ma(t){this.Xo*=t,this.$o*=t,this.Yo*=t,this.Zo*=t}Ta(){return this.Xo*=this.Zo,this.$o*=this.Zo,this.Yo*=this.Zo,this}Ca(){return this.Xo/=this.Zo,this.$o/=this.Zo,this.Yo/=this.Zo,this}br(){return this.Xo=u.br(this.Xo,0,1),this.$o=u.br(this.$o,0,1),this.Yo=u.br(this.Yo,0,1),this.Zo=u.br(this.Zo,0,1),this}Ia(t){this.Xo=u.Zr(t),this.$o=u.Kr(t),this.Yo=u.Qr(t),this.Zo=u.th(t)}Ga(t,s,e){const i=u.di(t)?t:this.ua(),n=u.di(s)?s:this.ca(),r=u.di(e)?e:this.fa();return`rgb(${100*i}%, ${100*n}%, ${100*r}%)`}_a(t,s,e,i){const n=u.di(t)?t:this.ua(),r=u.di(s)?s:this.ca(),h=u.di(e)?e:this.fa(),o=u.di(i)?i:this.da();return`rgba(${100*n}%, ${100*r}%, ${100*h}%, ${o})`}Pa(){const t=Math.round(255*this.ua()),s=Math.round(255*this.ca()),e=Math.round(255*this.fa());return"#"+i(t.toString(16))+i(s.toString(16))+i(e.toString(16))}Ea(t){if("string"!=typeof t)return!1;let s,e,i;if(3===(t="#"===(t=t.trim()).charAt(0)?t.substr(1):t).length)s=parseInt(t[0],16)/15,e=parseInt(t[1],16)/15,i=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,e=parseInt(t.substr(2,2),16)/255,i=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.na(s),isFinite(e)&&this.ra(e),isFinite(i)&&this.oa(i),this.aa(1),!0}Ra(){const t=Math.round(255*this.ua()),s=Math.round(255*this.ca()),e=Math.round(255*this.fa());return t+`, ${s}, `+e}Aa(){const t=Math.round(255*this.ua()),s=Math.round(255*this.ca()),e=Math.round(255*this.fa());return[t,s,e]}ka(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const e=parseInt(s[0].trim(),10)/255,i=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255;return isFinite(e)&&this.na(e),isFinite(i)&&this.ra(i),isFinite(n)&&this.oa(n),this.aa(1),!0}Fa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const e=parseInt(s[0].trim(),10)/100,i=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100;return isFinite(e)&&this.na(e),isFinite(i)&&this.ra(i),isFinite(n)&&this.oa(n),this.aa(1),!0}Oa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const e=parseInt(s[0].trim(),10)/255,i=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(e)&&this.na(e),isFinite(i)&&this.ra(i),isFinite(n)&&this.oa(n),isFinite(r)&&this.aa(r),!0}Da(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const e=parseInt(s[0].trim(),10)/100,i=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(e)&&this.na(e),isFinite(i)&&this.ra(i),isFinite(n)&&this.oa(n),isFinite(r)&&this.aa(r),!0}La(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.Fa(t):this.ka(t);if(t.startsWith("rgba("))return t.includes("%")?this.Da(t):this.Oa(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.Ba(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.Fa(t):4===s.length&&this.Da(t):3===s.length?this.ka(t):4===s.length&&this.Oa(t)}}return this.Ea(t)}toJSON(){return[this.Xo,this.$o,this.Yo,this.Zo]}Na(t,s,e,i){let n,r,h;if(t%=360,s=u.br(s,0,100),e=u.br(e,0,100),i=u.br(i,0,1),t/=360,e/=100,0==(s/=100))n=r=h=e;else{const o=e<.5?e*(1+s):e+s-e*s,a=2*e-o;n=l(a,o,t+1/3),r=l(a,o,t),h=l(a,o,t-1/3)}return this.na(n),this.ra(r),this.oa(h),this.aa(i),this}Ba(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),e=_t.exec(s),i=Pt.exec(s);return e&&4===e.length?(this.Na(+e[1],+e[2],+e[3],1),!0):!(!i||5!==i.length||(this.Na(+e[1],+e[2],+e[3],+e[4]),0))}Wa(){const t=this.Xo,s=this.$o,e=this.Yo,i=this.Zo,n=u.qo.Va(t,s,e),r=u.qo.ja(t,s,e),h=u.qo.Ha(t,s,e);return`hsla(${n}, ${r}%, ${h}%, ${i})`}Ua(){const t=this.Xo,s=this.$o,e=this.Yo;return[u.qo.Va(t,s,e),u.qo.ja(t,s,e),u.qo.Ha(t,s,e),this.Zo]}za(t){!Array.isArray(t)||t.length<3||(this.Xo=t[0],this.$o=t[1],this.Yo=t[2],this.Zo=4<=t.length?t[3]:1)}set r(t){this.na(t)}get r(){return this.ua()}set g(t){this.ra(t)}get g(){return this.ca()}set b(t){this.oa(t)}get b(){return this.fa()}set a(t){this.aa(t)}get a(){return this.da()}Ja(t,s){switch(t){case 0:this.na(s);break;case 1:this.ra(s);break;case 2:this.oa(s);break;case 3:this.aa(s);break;default:throw new RangeError("invalid color index")}}qa(t){switch(t){case 0:return this.ua();case 1:return this.ca();case 2:return this.fa();case 3:return this.da();default:throw new RangeError("invalid color index")}}static Xa(t,s){let e,i;if(Array.isArray(t))(e=new u.qo).za(t);else{if(!(t instanceof u.qo))throw new Error("unexpected type");e=t}if(Array.isArray(s))(i=new u.qo).za(s);else{if(!(s instanceof u.qo))throw new Error("unexpected type");i=s}return e.equals(i)}static $a(t,s){return u.br(Math.max(t,s)-Math.min(t,s),0,1)}static Ya(t,s){const e=new u.qo;return e.na(Math.max(t.Xo,s.Xo)-Math.min(t.Xo,s.Xo)),e.ra(Math.max(t.$o,s.$o)-Math.min(t.$o,s.$o)),e.oa(Math.max(t.Yo,s.Yo)-Math.min(t.Yo,s.Yo)),e.aa(Math.max(t.Zo,s.Zo)-Math.min(t.Zo,s.Zo)),e}static Za(t,s){const e=new u.qo(0,0,0,1);return e.na(Math.max(t.Xo,s.Xo)-Math.min(t.Xo,s.Xo)),e.ra(Math.max(t.$o,s.$o)-Math.min(t.$o,s.$o)),e.oa(Math.max(t.Yo,s.Yo)-Math.min(t.Yo,s.Yo)),e}static Va(t,s,e){const i=Math.max(t,s,e),n=Math.min(t,s,e);if(i===n)return 0;let r=0;switch(i){case t:r=(s-e)/(i-n)+(s<e?6:0);break;case s:r=(e-t)/(i-n)+2;break;case e:r=(t-s)/(i-n)+4}return Math.round(r/6*360)}static ja(t,s,e){const i=Math.max(t,s,e),n=Math.min(t,s,e);if(i===n)return 0;const r=(i+n)/2,h=i-n,o=.5<r?h/(2-i-n):h/(i+n);return Math.round(100*o)}static Ha(t,s,e){const i=Math.max(t,s,e),n=Math.min(t,s,e),r=(i+n)/2;return i?Math.round(100*r):0}},u.qo.Ka=Object.freeze(u.dr(u.qo,1,1,1,1)),u.qo.Qa=Object.freeze(u.dr(u.qo,0,0,0,1)),u.qo.tl=Object.freeze(u.dr(u.qo,0,0,0,0))}{const Et=self.Bs;Et.sl=class{constructor(t,s){this.el=0,this.il=0,t instanceof Et.sl?this.G(t):this.set(t||0,s||0)}set(t,s){this.el=+t,this.il=+s}G(t){this.el=t.el,this.il=t.il}equals(t){return this.el===t.el&&this.il===t.il}nl(t,s){return this.el===t&&this.il===s}ba(t,s){return t[s]===Math.fround(this.el)&&t[s+1]===Math.fround(this.il)}rl(t){this.el=+t}hl(){return this.el}ol(t){this.il=+t}al(){return this.il}toArray(){return[this.el,this.il]}pa(){return new Float64Array(this.toArray())}ma(t,s){t[s++]=this.el,t[s]=this.il}offset(t,s){this.el+=+t,this.il+=+s}scale(t,s){this.el*=t,this.il*=s}Pt(t,s){this.el/=t,this.il/=s}round(){this.el=Math.round(this.el),this.il=Math.round(this.il)}floor(){this.el=Math.floor(this.el),this.il=Math.floor(this.il)}ceil(){this.el=Math.ceil(this.el),this.il=Math.ceil(this.il)}angle(){return Et.Pr(0,0,this.el,this.il)}ll(){return this.el*this.el+this.il*this.il}length(){return Et.Cr(this.el,this.il)}ul(t,s){const e=this.el*s-this.il*t;this.il=this.il*s+this.el*t,this.el=e}rotate(t){0!==t&&this.ul(Math.sin(t),Math.cos(t))}cl(t,s,e){0===t||s===this.el&&e===this.il||(this.el-=s,this.il-=e,this.ul(Math.sin(t),Math.cos(t)),this.el+=+s,this.il+=+e)}move(t,s){0!==s&&(this.el+=Math.cos(t)*s,this.il+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.el/=t,this.il/=t)}br(t,s){this.el=Et.br(this.el,t,s),this.il=Et.br(this.il,t,s)}Ot(t){return this.el*t.el+this.il*t.il}reverse(){this.el=-this.el,this.il=-this.il}fl(){let t=this.el;return this.el=this.il,this.il=-t,this}}}{const Rt=self.Bs;Rt.Rect=class{constructor(t,s,e,i){this.dl=NaN,this.pl=NaN,this.ml=NaN,this.gl=NaN,this.dl=0,this.pl=0,this.ml=0,this.gl=0,t instanceof Rt.Rect?this.G(t):this.set(t||0,s||0,e||0,i||0)}set(t,s,e,i){this.dl=+t,this.pl=+s,this.ml=+e,this.gl=+i}yl(t,s,e,i){s=+s,this.dl=t=+t,this.pl=s,this.ml=t+ +e,this.gl=s+ +i}G(t){this.dl=+t.dl,this.pl=+t.pl,this.ml=+t.ml,this.gl=+t.gl}clone(){return new Rt.Rect(this.dl,this.pl,this.ml,this.gl)}static wl(t,s){const e=new Rt.Rect;return e.Sl(Math.min(t.dl,s.dl)),e.bl(Math.min(t.pl,s.pl)),e.vl(Math.max(t.ml,s.ml)),e.xl(Math.max(t.gl,s.gl)),e}static Ml(t){return new Rt.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.dl===t.dl&&this.pl===t.pl&&this.ml===t.ml&&this.gl===t.gl}Tl(t,s,e,i){return this.dl===t&&this.pl===s&&this.width()===e&&this.height()===i}ba(t,s){return t[s]===Math.fround(this.dl)&&t[s+1]===Math.fround(this.pl)&&t[s+2]===Math.fround(this.ml)&&t[s+3]===Math.fround(this.gl)}Sl(t){this.dl=+t}Cl(){return this.dl}bl(t){this.pl=+t}Il(){return this.pl}vl(t){this.ml=+t}Gl(){return this.ml}xl(t){this.gl=+t}_l(){return this.gl}toArray(){return[this.dl,this.pl,this.ml,this.gl]}pa(){return new Float64Array(this.toArray())}Pl(){return new DOMRect(this.dl,this.pl,this.width(),this.height())}static El(t){return Rt.dr(Rt.Rect,t.left,t.top,t.right,t.bottom)}ma(t,s){t[s++]=this.dl,t[s++]=this.pl,t[s++]=this.ml,t[s]=this.gl}Rl(t,s){t[s++]=this.dl,t[s++]=this.pl,t[s++]=this.ml,t[s++]=this.pl,t[s++]=this.ml,t[s++]=this.gl,t[s++]=this.dl,t[s]=this.gl}Al(t,s,e){t[s++]=this.dl,t[s++]=this.pl,t[s++]=e,t[s++]=this.ml,t[s++]=this.pl,t[s++]=e,t[s++]=this.ml,t[s++]=this.gl,t[s++]=e,t[s++]=this.dl,t[s++]=this.gl,t[s]=e}width(){return this.ml-this.dl}height(){return this.gl-this.pl}kl(){return(this.dl+this.ml)/2}Fl(){return(this.pl+this.gl)/2}offset(t,s){s=+s,this.dl+=t=+t,this.pl+=s,this.ml+=t,this.gl+=s}offsetLeft(t){this.dl+=+t}offsetTop(t){this.pl+=+t}Ol(t){this.ml+=+t}Dl(t){this.gl+=+t}Ll(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.pl<this.gl?this.dl<this.ml?this.gl=this.pl+this.width():this.gl=this.pl-this.width():this.dl<this.ml?this.gl=this.pl-this.width():this.gl=this.pl+this.width()}Bl(t,s){s=+s,this.dl-=t=+t,this.pl-=s,this.ml+=t,this.gl+=s}Nl(t,s){s=+s,this.dl+=t=+t,this.pl+=s,this.ml-=t,this.gl-=s}multiply(t,s){this.dl*=t,this.pl*=s,this.ml*=t,this.gl*=s}Pt(t,s){this.dl/=t,this.pl/=s,this.ml/=t,this.gl/=s}Wl(t){this.dl=+t-this.dl,this.ml=+t-this.ml}Vl(t){this.pl=+t-this.pl,this.gl=+t-this.gl}jl(t,s){const e=this.width(),i=this.height(),n=this.Cl()+e*t,r=this.Il()+i*s;this.yl(n-i*s,r-e*t,i,e)}Hl(){const t=this.dl;this.dl=this.ml,this.ml=t}Ul(){const t=this.pl;this.pl=this.gl,this.gl=t}zl(t){const s=this.pl;this.pl=+t-this.gl,this.gl=+t-s}round(){this.dl=Math.round(this.dl),this.pl=Math.round(this.pl),this.ml=Math.round(this.ml),this.gl=Math.round(this.gl)}Jl(){this.dl=Math.ceil(this.dl),this.pl=Math.ceil(this.pl),this.ml=Math.floor(this.ml),this.gl=Math.floor(this.gl)}ql(){this.dl=Math.floor(this.dl),this.pl=Math.floor(this.pl),this.ml=Math.ceil(this.ml),this.gl=Math.ceil(this.gl)}floor(){this.dl=Math.floor(this.dl),this.pl=Math.floor(this.pl),this.ml=Math.floor(this.ml),this.gl=Math.floor(this.gl)}ceil(){this.dl=Math.ceil(this.dl),this.pl=Math.ceil(this.pl),this.ml=Math.ceil(this.ml),this.gl=Math.ceil(this.gl)}br(t,s,e,i){this.dl=Math.max(this.dl,+t),this.pl=Math.max(this.pl,+s),this.ml=Math.min(this.ml,+e),this.gl=Math.min(this.gl,+i)}Xl(t,s,e,i){t=+t,s=+s,e=+e,i=+i,this.dl=Rt.br(this.dl,t,e),this.pl=Rt.br(this.pl,s,i),this.ml=Rt.br(this.ml,t,e),this.gl=Rt.br(this.gl,s,i)}normalize(){this.dl>this.ml&&this.Hl(),this.pl>this.gl&&this.Ul()}$l(t){return!(t.ml<this.dl||t.gl<this.pl||t.dl>this.ml||t.pl>this.gl)}Yl(t,s,e){return!(t.ml+s<this.dl||t.gl+e<this.pl||t.dl+s>this.ml||t.pl+e>this.gl)}Zl(t,s){return t>=this.dl&&t<=this.ml&&s>=this.pl&&s<=this.gl}Kl(t){return t.dl>=this.dl&&t.pl>=this.pl&&t.ml<=this.ml&&t.gl<=this.gl}Ql(t){t.dl<this.dl&&(this.dl=+t.dl),t.pl<this.pl&&(this.pl=+t.pl),t.ml>this.ml&&(this.ml=+t.ml),t.gl>this.gl&&(this.gl=+t.gl)}tu(t){this.dl=Rt.Lt(t.dl,t.ml,this.dl),this.pl=Rt.Lt(t.pl,t.gl,this.pl),this.ml=Rt.Lt(t.dl,t.ml,this.ml),this.gl=Rt.Lt(t.pl,t.gl,this.gl)}}}{const At=self.Bs;At.su=class{constructor(t,s,e,i,n,r,h,o){this.eu=NaN,this.iu=NaN,this.nu=NaN,this.ru=NaN,this.hu=NaN,this.ou=NaN,this.au=NaN,this.lu=NaN,this.eu=0,this.iu=0,this.nu=0,this.ru=0,this.hu=0,this.ou=0,this.au=0,this.lu=0,t instanceof At.su?this.G(t):this.set(t||0,s||0,e||0,i||0,n||0,r||0,h||0,o||0)}set(t,s,e,i,n,r,h,o){this.eu=+t,this.iu=+s,this.nu=+e,this.ru=+i,this.hu=+n,this.ou=+r,this.au=+h,this.lu=+o}uu(t,s,e,i){this.set(t,s,e,s,e,i,t,i)}G(t){this.eu=t.eu,this.iu=t.iu,this.nu=t.nu,this.ru=t.ru,this.hu=t.hu,this.ou=t.ou,this.au=t.au,this.lu=t.lu}equals(t){return this.eu===t.eu&&this.iu===t.iu&&this.nu===t.nu&&this.ru===t.ru&&this.hu===t.hu&&this.ou===t.ou&&this.au===t.au&&this.lu===t.lu}cu(t){this.eu=+t}oh(){return this.eu}fu(t){this.iu=+t}ah(){return this.iu}du(t){this.nu=+t}lh(){return this.nu}pu(t){this.ru=+t}uh(){return this.ru}mu(t){this.hu=+t}fh(){return this.hu}gu(t){this.ou=+t}dh(){return this.ou}yu(t){this.au=+t}ph(){return this.au}wu(t){this.lu=+t}mh(){return this.lu}Su(){return new DOMQuad(new DOMPoint(this.eu,this.iu),new DOMPoint(this.nu,this.ru),new DOMPoint(this.hu,this.ou),new DOMPoint(this.au,this.lu))}static bu(t){return At.dr(At.su,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.eu,this.iu,this.nu,this.ru,this.hu,this.ou,this.au,this.lu]}pa(){return new Float64Array(this.toArray())}ma(t,s){t[s++]=this.eu,t[s++]=this.iu,t[s++]=this.nu,t[s++]=this.ru,t[s++]=this.hu,t[s++]=this.ou,t[s++]=this.au,t[s]=this.lu}vu(t,s,e){t[s++]=this.eu,t[s++]=this.iu,t[s++]=e,t[s++]=this.nu,t[s++]=this.ru,t[s++]=e,t[s++]=this.hu,t[s++]=this.ou,t[s++]=e,t[s++]=this.au,t[s++]=this.lu,t[s]=e}offset(t,s){s=+s,this.eu+=t=+t,this.iu+=s,this.nu+=t,this.ru+=s,this.hu+=t,this.ou+=s,this.au+=t,this.lu+=s}round(){this.eu=Math.round(this.eu),this.iu=Math.round(this.iu),this.nu=Math.round(this.nu),this.ru=Math.round(this.ru),this.hu=Math.round(this.hu),this.ou=Math.round(this.ou),this.au=Math.round(this.au),this.lu=Math.round(this.lu)}floor(){this.eu=Math.floor(this.eu),this.iu=Math.floor(this.iu),this.nu=Math.floor(this.nu),this.ru=Math.floor(this.ru),this.hu=Math.floor(this.hu),this.ou=Math.floor(this.ou),this.au=Math.floor(this.au),this.lu=Math.floor(this.lu)}ceil(){this.eu=Math.ceil(this.eu),this.iu=Math.ceil(this.iu),this.nu=Math.ceil(this.nu),this.ru=Math.ceil(this.ru),this.hu=Math.ceil(this.hu),this.ou=Math.ceil(this.ou),this.au=Math.ceil(this.au),this.lu=Math.ceil(this.lu)}xu(t){this.eu=t.dl,this.iu=t.pl,this.nu=t.ml,this.ru=t.pl,this.hu=t.ml,this.ou=t.gl,this.au=t.dl,this.lu=t.gl}Mu(t,s){0===s?this.xu(t):this.Tu(t,Math.sin(s),Math.cos(s))}Tu(t,s,e){const i=t.dl*s,n=t.pl*s,r=t.ml*s,h=t.gl*s,o=t.dl*e,a=t.pl*e,l=t.ml*e,u=t.gl*e;this.eu=o-n,this.iu=a+i,this.nu=l-n,this.ru=a+r,this.hu=l-h,this.ou=u+r,this.au=o-h,this.lu=u+i}Cu(t){t.set(Math.min(this.eu,this.nu,this.hu,this.au),Math.min(this.iu,this.ru,this.ou,this.lu),Math.max(this.eu,this.nu,this.hu,this.au),Math.max(this.iu,this.ru,this.ou,this.lu))}Zl(t,s){let e=this.nu-this.eu,i=this.ru-this.iu,n=this.hu-this.eu,r=this.ou-this.iu,h=t-this.eu,o=s-this.iu,a=e*e+i*i,l=e*n+i*r,u=e*h+i*o,c=n*n+r*r,f=n*h+r*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return 0<=p&&0<m&&p+m<1||(m=((a=(e=this.au-this.eu)*e+(i=this.lu-this.iu)*i)*f-(l=e*n+i*r)*(u=e*h+i*o))*(d=1/(a*c-l*l)),0<=(p=(c*u-l*f)*d)&&0<m&&p+m<1)}kl(){return(this.eu+this.nu+this.hu+this.au)/4}Fl(){return(this.iu+this.ru+this.ou+this.lu)/4}Iu(t,s,e,i){return!(!this.Zl(t,s)&&!this.Zl(e,i))||At.hh(t,s,e,i,this)}Gu(t){let s=t.kl(),e=t.Fl();if(this.Zl(s,e))return!0;if(s=this.kl(),e=this.Fl(),t.Zl(s,e))return!0;const i=this.eu,n=this.iu,r=this.nu,h=this.ru,o=this.hu,a=this.ou,l=this.au,u=this.lu;return At.hh(i,n,r,h,t)||At.hh(r,h,o,a,t)||At.hh(o,a,l,u,t)||At.hh(l,u,i,n,t)}_u(){const t=this.eu,s=this.iu;this.eu=this.nu,this.iu=this.ru,this.nu=this.hu,this.ru=this.ou,this.hu=this.au,this.ou=this.lu,this.au=t,this.lu=s}Pu(){this.Eu(0,2),this.Eu(1,3),this.Eu(6,4),this.Eu(7,5)}Ru(){this.Eu(0,6),this.Eu(1,7),this.Eu(2,4),this.Eu(3,5)}Au(){this.Eu(2,6),this.Eu(3,7)}Eu(t,s){const e=this.ku(t);this.Fu(t,this.ku(s)),this.Fu(s,e)}ku(t){switch(t){case 0:return this.eu;case 1:return this.iu;case 2:return this.nu;case 3:return this.ru;case 4:return this.hu;case 5:return this.ou;case 6:return this.au;case 7:return this.lu;default:throw new RangeError("invalid quad point index")}}Fu(t,s){switch(s=+s,t){case 0:this.eu=s;break;case 1:this.iu=s;break;case 2:this.nu=s;break;case 3:this.ru=s;break;case 4:this.hu=s;break;case 5:this.ou=s;break;case 6:this.au=s;break;case 7:this.lu=s;break;default:throw new RangeError("invalid quad point index")}}}}{const kt=self.Bs,Ft=[0,0,1,0,1,1,0,1],Ot=kt.dr(kt.su);kt.Ou=class extends kt.ur{constructor(t,s=!0){super(),t=t||Ft,this.Du=Float64Array.from(t),this.Lu=new kt.Rect,this.Bu=!0,this.Nu=s}pr(){}Wu(){return this.Du}Vu(){return this.Du.length/2}ju(t){this.Du.length===t.length?this.Du.set(t):this.Du=Float64Array.from(t),this.Bu=!0}Hu(){this.ju(Ft)}G(t){this.ju(t.Du)}Uu(){this.Bu=!0}zu(){if(this.Bu){let e=this.Du,i=e[0],n=e[1],r=i,h=n;for(let t=0,s=e.length;t<s;t+=2){const o=e[t],a=e[t+1];o<i&&(i=o),o>r&&(r=o),a<n&&(n=a),a>h&&(h=a)}this.Lu.set(i,n,r,h),this.Bu=!1}}xu(t,s,e){let i=this.Du;8!==i.length&&(i=new Float64Array(8),this.Du=i),i[0]=t.Cl()-s,i[1]=t.Il()-e,i[2]=t.Gl()-s,i[3]=t.Il()-e,i[4]=t.Gl()-s,i[5]=t._l()-e,i[6]=t.Cl()-s,i[7]=t._l()-e,this.Lu.G(t),0===s&&0===e||this.Lu.offset(-s,-e),this.Bu=!1}Ju(t,s,e){Ot.G(t),Ot.offset(s,e),this.ju(Ot.toArray()),this.Bu=!0}transform(t,s,e){let i=0,n=1;0!==e&&(i=Math.sin(e),n=Math.cos(e)),this.qu(t,s,i,n)}qu(e,i,n,r){const h=this.Du;for(let t=0,s=h.length;t<s;t+=2){const o=t+1,a=h[t]*e,l=h[o]*i;h[t]=a*r-l*n,h[o]=l*r+a*n}this.Bu=!0}offset(e,i){const n=this.Du;for(let t=0,s=n.length;t<s;t+=2)n[t]+=e,n[t+1]+=i}Zl(e,i){const n=this.Du;if(e===n[0]&&i===n[1])return!0;this.zu();let t=this.Lu,r=t.Cl()-110,h=t.Il()-101,o=t.Gl()+131,a=t._l()+120,l=0,u=0,c,f,d=0,p=0,m,g,y=(c=r<e?(l=r,e):(l=e,r),f=h<i?(u=h,i):(u=i,h),m=o<e?(d=o,e):(d=e,o),g=a<i?(p=a,i):(p=i,a),0),w=0;for(let t=0,s=n.length;t<s;t+=2){const S=(t+2)%s,b=n[t],v=n[t+1],x=n[S],M=n[1+S];kt.rh(r,h,e,i,l,c,u,f,b,v,x,M)&&++y,kt.rh(o,a,e,i,d,m,p,g,b,v,x,M)&&++w}return y%2==1||w%2==1}Xu(t,c,f){const d=t.Du,p=this.Du;if(this.Zl(d[0]+c,d[1]+f))return!0;if(t.Zl(p[0]-c,p[1]-f))return!0;for(let s=0,u=p.length;s<u;s+=2){let t=(s+2)%u,e=p[s],i=p[s+1],n=p[t],r=p[1+t],h=0,o=0,a,l;a=e<n?(h=e,n):(h=n,e),l=i<r?(o=i,r):(o=r,i);for(let t=0,s=d.length;t<s;t+=2){const m=(t+2)%s,g=d[t]+c,y=d[t+1]+f,w=d[m]+c,S=d[1+m]+f;if(kt.rh(e,i,n,r,h,a,o,l,g,y,w,S))return!0}}return!1}Iu(e,i,n,r,h,o){if(this.Zl(n-e,r-i))return!0;if(this.Zl(h-e,o-i))return!0;let a=0,l=0,u,c;u=n<h?(a=n,h):(a=h,n),c=r<o?(l=r,o):(l=o,r);const f=this.Du;for(let t=0,s=f.length;t<s;t+=2){const d=(t+2)%s,p=f[t]+e,m=f[t+1]+i,g=f[d]+e,y=f[1+d]+i;if(kt.rh(n,r,h,o,a,u,l,c,p,m,g,y))return!0}return!1}Pu(e){const i=this.Du;for(let t=0,s=i.length;t<s;t+=2)i[t]=2*e-i[t];this.Bu=!0}Ru(e){const i=this.Du;for(let t=0,s=i.length;t<s;t+=2){const n=t+1;i[n]=2*e-i[n]}this.Bu=!0}Au(){const e=this.Du;for(let t=0,s=e.length;t<s;t+=2){const i=t+1,n=e[t];e[t]=e[i],e[i]=n}this.Bu=!0}$u(){let e=this.Du,i=0;for(let t=0,s=e.length;t<s;t+=2)i+=e[t];return i/this.Vu()}Yu(){let e=this.Du,i=0;for(let t=0,s=e.length;t<s;t+=2)i+=e[t+1];return i/this.Vu()}Zu(){return this.Du}Ku(){return this.Vu()}Qu(){return this.Nu}}}{const Dt=self.Bs;Dt.tc=class extends Dt.ur{constructor(t){if(super(),this.sc=new Map,t)for(const[s,e,i]of t)this.Set(s,e,i)}pr(){this.ec(),this.sc=null}ic(){return 0===this.sc.size}ec(){const t=this.sc;for(const s of t.values())s.clear();t.clear()}Set(t,s,e){let i=this.sc,n=i.get(t);n||(n=new Map,i.set(t,n)),n.set(s,e)}ne(t,s){const e=this.sc.get(t);return e&&e.get(s)}ie(t,s){const e=this.sc.get(t);return!!e&&e.has(s)}nc(t,s){const e=this.sc,i=e.get(t);if(!i)return!1;const n=i.delete(s);return n&&0===i.size&&e.delete(t),n}rc(t){const s=this.sc,e=s.get(t);e&&(e.clear(),s.delete(t));for(const[i,n]of s.entries())n.delete(t)&&0===n.size&&s.delete(i)}hc(){let t=0;for(const s of this.sc.values())t+=s.size;return t}*values(){for(const t of this.sc.values())yield*t.values()}*oc(){for(const[t,s]of this.sc.entries())for(const e of s.keys())yield[t,e]}*entries(){for(const[t,s]of this.sc.entries())for(const[e,i]of s.entries())yield[t,e,i]}}}{const Lt=self.Bs;Lt.ac=class extends Lt.ur{constructor(){super(),this.lc=new Set,this.uc=[],this.cc=!1}pr(){this.ec()}ec(){this.lc.clear(),Lt.jh(this.uc),this.cc=!1}fc(t){this.lc.has(t)||(this.lc.add(t),this.cc)||this.uc.push(t)}ie(t){return this.lc.has(t)}nc(t){this.lc.delete(t)&&(this.cc=!0)}hc(){return this.lc.size}ic(){return 0===this.lc.size}dc(){return this.cc&&(this.mc(),this.cc=!1),this.uc}mc(){const t=this.uc;Lt.jh(t);for(const s of this.lc)t.push(s)}}}{const Bt=self.Bs,Nt=new Map,Wt=new Map,Vt=new Map,jt=new Map,Ht=new Map,Ut=new Map,zt=new Map,Jt=new Map,qt=new Map,Xt=(qt.set("linear","noease"),qt.set("default","noease"),["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"]),$t=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Yt=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]),Zt=(self.yc=class rs{constructor(){}static wc(){return"default"}static Sc(){return"noease"}static vc(t){return Yt.get(t)}static xc(s,...e){this.Mc();let t,i=(s?(Vt.has(s)||Vt.set(s,new Map),[...(t=Vt.get(s)).keys()].filter(t=>!rs.Tc(t,s)||rs.Tc(t,s).transition.IsForAnyPurpose())):[...(t=Ht).keys()]).sort();return[...Wt.keys()].concat(i).filter(t=>!e.includes(t))}static Cc(){this.Mc();const t=[...Ht.keys()];return t.sort(),[...Wt.keys()].concat(t)}static Ic(){this.Mc();const t=[...Ht.keys()];return t.sort(),t}static Gc(t){for(const s of Xt){const e=self.lang("ui.bars.timeline.eases."+s);if(e===t)return!0}for(const i of $t){const n=self.lang("ui.bars.timeline.short-eases."+i);if(n===t)return!0}}static _c(t){return this.Mc(),[...Wt.keys()].includes(t)}static Pc(t){const s=qt.get(t);return s?Nt.get(s):rs._c(t)?Nt.get(t):zt.has(t)?zt.get(t):void 0}static Ec(t){return this.Mc(),Jt.get(t)}static Rc(t,s){this.Mc();const e=rs.Pc(t);if(e)return e;if(s)return Vt.get(s).get(t);throw new Error("missing ease function")}static Tc(t,s){this.Mc();const e=jt.get(s);if(e)return e.get(t)}static Ac(t,s){this.Mc();const e=rs.Pc(t);return!!e||!!Vt.get(s).get(t)}static kc(t){this.Mc();const s=rs.Pc(t);return s||Ht.get(t)}static Fc(t){return this.Mc(),Ut.get(t)}static Oc(t){this.Mc();const s=this.Cc();return s[t]}static Dc(t,s){this.Mc();const e=this.xc(s);return e.indexOf(t)}static Lc(t){return this.Dc(t)}static Mc(){0===Nt.size&&(this.Bc("default",()=>{}),this.Bc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.Bc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.Bc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.Bc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.Bc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.Bc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.Bc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.Bc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.Bc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.Bc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.Bc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.Bc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.Bc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.Bc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.Bc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.Bc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.Bc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.Bc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.Bc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Bc("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.Bc("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.Bc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.Bc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.Bc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.Bc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Bc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.Bc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Bc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.Bc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.Bc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.Bc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Nc("cubicbezier",this.Wc),this.Nc("spline",this.Vc))}static Bc(t,s,e=!1){if("function"==typeof s)rs.jc(t,s,"predefined");else{if(!Bt.Bi(s))throw new Error("unexpected arguments");if(self.BuiltInTransition){const n=Bt.dr(self.BuiltInTransition,t,e);n.SetFromJson(s),rs.jc(t,(t,s,e,i)=>n.Hc(t,s,e,i),"predefined"),Jt.set(t,n)}else{const r=Bt.dr(Bt.Uc,[t,s.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);r.zc(e),rs.jc(t,(t,s,e,i)=>r.Hc(t,s,e,i),"predefined")}}}static Nc(t,s){rs.jc(t,s,"private")}static Jc(t,s,e,i){this.Mc(),rs.jc(t,s,"custom",e,i)}static qc(t,s){if(!this._c(t)&&![...zt.keys()].includes(t)){const e=Vt.get(s),i=(e&&e.delete(t),jt.get(s));i&&i.delete(t)}}static jc(t,s,e,i,n){switch(e){case"predefined":Nt.set(t,s),Wt.set(t,s);break;case"custom":if(i){Vt.has(i)||Vt.set(i,new Map),jt.has(i)||jt.set(i,new Map);const r=Vt.get(i),h=(r.set(t,s),jt.get(i));h.set(t,n)}else Ht.set(t,s),Ut.set(t,n);break;case"private":Nt.set(t,s),zt.set(t,s);break;default:throw new Error("unexpected ease mode")}}static Xc(t,s,e,i){return 0===i?s:e*t/i+s}static Wc(t,s,e,i,n){const r=s,h=3*t*(e-s),o=3*t**2*(s+i-2*e),a=t**3*(n-s+3*e-3*i);return r+h+o+a}static Vc(t,s,e,i,n,r,h,o,a,l){if(i===n&&r===h)return t;const u=ns(t,s,i,r,o,l),c=Qt(e,n,h,a),f=ts(e,n,h,a),d=ss(e,n,h,a);return es(u,c,f,d)}static $c(t,s,e,i){const n=[],r=Qt(t,s,e,i),h=ts(t,s,e,i),o=ss(t,s,e,i);for(let t=0;t<Zt;++t){const a=es(t*Kt,r,h,o);n.push(a)}return n}},11),Kt=1/(Zt-1),Qt=(t,s,e,i)=>i-3*e+3*s-t,ts=(t,s,e,i)=>3*e-6*s+3*t,ss=(t,s,e,i)=>3*(s-t),es=(t,s,e,i)=>((s*t+e)*t+i)*t,is=(t,s,e,i)=>3*s*t*t+2*e*t+i,ns=(h,t,s,e,i,n)=>{if(1==h)return 1;let o=0,r=1,a=n[r],l=Zt-1;for(Zt;r!=l&&a<=h;)r++,a=n[r],o+=Kt;r--;let u=(h-(a=n[r]))/(n[r+1]-a),c=o+u*Kt,f=Qt(t,s,e,i),d=ts(t,s,e,i),p=ss(t,s,e,i),m=is(c,f,d,p);if(0===m)return c;if(.01<=m){for(let t=0;t<4;++t){const g=es(c,f,d,p)-h,y=is(c,f,d,p);c-=g/y}return c}{let s=o,e=o+Kt,i=0,n,r;do{c=s+(e-s)/2;let t=es(c,f,d,p)-h;0<t?e=c:s=c,n=1e-7<Math.abs(t),r=++i<10}while(n&&r);return c}}}{let o=function(t){hs.Mi(t)};o;const hs=self.Bs;hs.Yc=class{constructor(t){this.Zc=[],this.yr=t||"",this.Kc=0}pr(){this.ec(),this.Zc=null}Qc(){return this.yr}ec(){hs.Hh(this.Zc),this.Kc=0}tf(){return this.Kc}ef(t=Math.random()*this.tf()){let s=0;for(const[e,i]of this.Zc)if(t<(s+=e))return i;return 0}if(t,s){o(s),this.Kc+=t,this.Zc.push([t,s])}nf(s,e){o(e);const i=0===s;for(let t=0;t<this.Zc.length;t++){const n=this.Zc[t],r=i||n[0]===s,h=n[1]===e;if(r&&h){this.Zc.splice(t,1),this.Kc-=n[0];break}}}rf(){return JSON.stringify(this.Zc)}static hf(t,s){const e=new hs.Yc(s),i=JSON.parse(t);for(const n of i){const r=n[0],h=n[1];e.if(r,h)}return e}}}{let t=self.Bs,e=0;t.lf=class{constructor(t,s){this.uf=t,this.cf=s,this.ff=e++,this.uf.df("runtime","screen-reader-text",{type:"create",id:this.ff,text:this.cf})}pr(){this.uf.df("runtime","screen-reader-text",{type:"release",id:this.ff}),this.uf=null,this.cf="",this.ff=-1}pf(t){this.cf!==t&&(this.cf=t,this.uf.df("runtime","screen-reader-text",{type:"update",id:this.ff,text:this.cf}))}}}{const os=self.Bs;os.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.mf=!1,this.gf=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.gf)throw new Error(`cannot stop async event '${this.type}' propagation`);this.mf=!0}}}{const as=self.Bs;as.Event.yf=class extends as.ur{constructor(t){super(),this.wf=t,this.Sf=[],this.bf=new Set,this.vf=[],this.xf=new Set,this.Mf=0,this.Tf=[]}pr(){0<this.Mf||(as.jh(this.Sf),this.bf.clear(),as.jh(this.vf),this.xf.clear(),as.jh(this.Tf),as.pr(this))}Cf(t,s){this.If()?this.Tf.push({Gf:"add",_f:t,capture:s}):s?this.bf.has(t)||(this.Sf.push(t),this.bf.add(t)):this.xf.has(t)||(this.vf.push(t),this.xf.add(t))}Pf(t,s){this.If()?this.Tf.push({Gf:"remove",_f:t,capture:s}):s?this.bf.has(t)&&(this.bf.delete(t),as.Xh(this.Sf,t)):this.xf.has(t)&&(this.xf.delete(t),as.Xh(this.vf,t))}Ef(){return!this.Sf.length&&!this.vf.length}If(){return 0<this.Mf}Rf(){const t=new Set,s=new Set;for(const e of this.Tf)if("add"===e.Gf)this.Cf(e._f,e.capture),(e.capture?s:t).delete(e._f);else{if("remove"!==e.Gf)throw new Error("invalid op");(e.capture?(this.bf.delete(e._f),s):(this.xf.delete(e._f),t)).add(e._f)}as.Zh(this.vf,t),as.Zh(this.Sf,s),as.jh(this.Tf)}Af(e){this.kf();let i=!1;for(let t=0,s=this.Sf.length;t<s;++t)if(this.Sf[t](e),e.mf){i=!0;break}if(!i)for(let t=0,s=this.vf.length;t<s&&(this.vf[t](e),!e.mf);++t);return this.Ff(),!e.defaultPrevented}Of(e){this.kf();for(let t=0,s=this.Sf.length;t<s;++t)this.Sf[t](e);for(let t=0,s=this.vf.length;t<s;++t)this.vf[t](e);return this.Ff(),!0}kf(){this.Mf++}Ff(){this.Mf--,0===this.Mf&&0<this.Tf.length&&this.Rf()}Df(t){t?this.kf():this.Ff()}Lf(e){let i=[];for(let s=0,t=this.Sf.length;s<t;++s){let t=this.Sf[s];i.push(as.Bf(()=>t(e)))}for(let s=0,t=this.vf.length;s<t;++s){let t=this.vf[s];i.push(as.Bf(()=>t(e)))}return Promise.all(i).then(()=>!e.defaultPrevented)}Nf(e){const i=[];this.kf();for(let t=0,s=this.Sf.length;t<s;++t){const n=this.Sf[t](e);n instanceof Promise&&i.push(n)}for(let t=0,s=this.vf.length;t<s;++t){const r=this.vf[t](e);r instanceof Promise&&i.push(r)}return this.Ff(),i.length?Promise.all(i).then(()=>!e.defaultPrevented):!e.defaultPrevented}async Wf(t){return this.Nf(t)}async Vf(e){this.kf();for(let t=0,s=this.Sf.length;t<s;++t){const i=this.Sf[t](e);i instanceof Promise&&await i}for(let t=0,s=this.vf.length;t<s;++t){const n=this.vf[t](e);n instanceof Promise&&await n}return this.Ff(),!e.defaultPrevented}*jf(e){this.kf();for(let t=0,s=this.Sf.length;t<s;++t){const i=this.Sf[t](e);as.zo(i)&&(yield*i)}for(let t=0,s=this.vf.length;t<s;++t){const n=this.vf[t](e);as.zo(n)&&(yield*n)}this.Ff()}}}{const ls=self.Bs;ls.Event.Hf=class extends ls.ur{constructor(){super(),this.Uf=new Map,this.zf=!1}pr(){if(this.zf)throw new Error("already released");this.Jf(),this.zf=!0,ls.pr(this)}mr(){return this.zf}Jf(){if(this.Uf){for(let t of this.Uf.values())t.pr();this.Uf.clear()}}qf(t,s){let e=this.Uf.get(t);return e||(s?(e=ls.dr(ls.Event.yf,t),this.Uf.set(t,e),e):null)}Xf(t){return this.Uf.has(t)}addEventListener(t,s,e){let i=this.qf(t,!0);i.Cf(s,!!e)}removeEventListener(t,s,e){let i=this.qf(t,!1);i&&(i.Pf(s,!!e),i.Ef())&&this.Uf.delete(t)}dispatchEvent(t){const s=this.qf(t.type,!1);return!s||(t.cancelable?s.Af(t):s.Of(t))}$f(t){const s=this.qf(t.type,!1);return s?(t.gf=!0,s.Lf(t)):Promise.resolve(!0)}async Yf(t){const s=this.qf(t.type,!1);if(!s)return!0;this.Uf.delete(t.type),t.gf=!0;const e=await s.Lf(t);return s.pr(),e}async Zf(t){const s=this.qf(t.type,!1);return!s||s.Wf(t)}Kf(t){const s=this.qf(t.type,!1);return!s||s.Nf(t)}async Qf(t){const s=this.qf(t.type,!1);return!s||s.Vf(t)}t0(t){const s=this.qf(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.jf(t)}Df(t){for(const s of this.Uf.values())s.Df(t)}}}{let r=function(t){c=l&&0===f?requestIdleCallback(s,{timeout:e}):setTimeout(s,0<f?1:t)},s=function(n){if(c=-1,u.length){let e=performance.now(),i=e,t=0,s;for(;h(u.shift()),i=performance.now(),++t,s=(i-e)/t*1.1,u.length&&(l&&0===f&&void 0!==n?s<n.timeRemaining():i-e+s<o););if(-1===c&&u.length){let t=i-e,s=Math.max(a-t,4);r(s)}}},h=function(s){let t;try{t=s._f()}catch(t){return void s.reject(t)}s.resolve(t)},t=(r,s,h,self.Bs),o=12,a=16,e=35,l="undefined"!=typeof requestIdleCallback,u=[],c=-1,f=0,n=t.oe.ie("disable-asyncify");n&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),t.Bf=function(e){let i=null;return t.isDebug&&(i=t.ci()),new Promise((t,s)=>{u.push({_f:e,resolve:t,reject:s,stack:i}),n?h(u.pop()):-1===c&&r(a)})},t.Bf.s0=function(t){if(t)++f;else if(--f<0)throw new Error("already turned off high throughput mode")}}{let t=function(){r=-1},s=function(){h=-1,o=-1;let e=Date.now();for(let s of a)if(s.e0(e)){let t=s.i0();(-1===o||t<o)&&(o=t)}else a.delete(s);if(-1!==o){let t=Math.max(o-e+n,i);h=self.setTimeout(s,t)}},e=(t,s,self.Bs),i=1e3,n=100,r=-1,h=(e.n0=function(){return-1===r&&(r=Date.now(),self.setTimeout(t,16)),r},-1),o=-1,a=new Set;e.r0=class{constructor(t,s){this.h0=t,this.o0=1e3*s,this.a0=0,this.l0=!1}u0(){let t=e.n0();this.a0=t+this.o0,this.l0||(a.add(this),this.l0=!0),-1===h?(o=this.a0,h=self.setTimeout(s,this.o0+n)):this.a0<o&&o>t+i&&(self.clearTimeout(h),o=this.a0,h=self.setTimeout(s,this.o0+n))}e0(t){return!(t>=this.a0)||(this.h0()?(this.a0=t+this.o0,!0):this.l0=!1)}i0(){return this.a0}c0(){this.l0&&(a.delete(this),this.l0=!1,0===a.size)&&-1!==h&&(self.clearTimeout(h),h=-1,o=-1)}pr(){this.c0(),this.h0=null}}}{const us=self.Bs;us.f0=class cs{constructor(t){this.d0=!1,this.p0=t}m0(){this.d0||(this.d0=!0,this.p0&&(this.p0(),this.p0=null))}g0(){return this.d0}pr(){this.m0()}static pr(t){return new cs(()=>t.pr())}static y0(s,e,i,n,t){if(null==n)n=!1;else if("boolean"!=typeof n&&"object"!=typeof n)throw new TypeError("invalid event listener options");if(t&&(i=i.bind(t)),e.includes(" ")){e=e.split(" ");const r=new us.w0;for(let t of e)s.addEventListener(t,i,n),r.fc(us.dr(us.f0,()=>s.removeEventListener(t,i,n)));return r}return s.addEventListener(e,i,n),us.dr(us.f0,()=>s.removeEventListener(e,i,n))}},us.S0=class extends us.f0{b0(t){this.p0=t}},us.w0=class extends us.f0{constructor(...s){super(),this.v0=new Set;for(let t of s)this.fc(t)}fc(...s){if(this.d0)throw new Error("already disposed");for(let t of s)this.v0.add(t)}x0(t){if(this.d0)throw new Error("already disposed");this.v0.delete(t)}M0(){if(this.d0)throw new Error("already disposed");if(this.v0){for(let t of this.v0)t.m0();this.v0.clear()}}g0(){return this.d0}m0(){if(this.d0)throw new Error("already disposed");this.d0=!0;for(let t of this.v0)t.m0();this.v0.clear(),this.v0=null}pr(){this.m0()}}}{const fs=self.Bs;fs.T0=class extends fs.ur{constructor(){super(),this.C0=0,this.il=0,this.I0=0,this.G0=0}fc(t){this.il=(t=+t)-this.C0,this.I0=this.G0+this.il,this.C0=this.I0-this.G0-this.il,this.G0=this.I0}_0(t){this.G0-=+t}ne(){return this.G0}u0(){this.C0=0,this.il=0,this.I0=0,this.G0=0}Set(t){this.C0=0,this.il=0,this.I0=0,this.G0=+t}P0(t){this.C0=t.C0,this.il=t.il,this.I0=t.I0,this.G0=t.G0}pr(){}}}{const ds=self.Bs,h={};h.E0=function(t){this.R0=t,this.right=this.R0.A0,this.left=this.R0.A0,this.parent=null,this.color=!1,this.key=null},h.k0=function(t){this.size=0,this.A0=new h.E0(this),this.A0.color=!1,this.root=this.A0,this.root.parent=this.A0,this.compare=t||this.F0},h.k0.prototype.F0=function(t,s){return t<s?-1:s<t?1:0},h.k0.prototype.clone=function(){var t=new h.k0(this.compare);return t.O0(this),t},h.k0.prototype.clear=function(){this.size=0,this.A0=new h.E0(this),this.A0.color=!1,this.root=this.A0,this.root.parent=this.A0},h.k0.prototype.D0=function(t){var s=t.right;t.right=s.left,s.left!=this.A0&&(s.left.parent=t),s.parent=t.parent,t.parent==this.A0?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,(s.left=t).parent=s},h.k0.prototype.L0=function(t){var s=t.left;t.left=s.right,s.right!=this.A0&&(s.right.parent=t),s.parent=t.parent,t.parent==this.A0?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,(s.right=t).parent=s},h.k0.prototype.B0=function(t){if(this.contains(t))this.N0(t).key=t;else{for(var s=new h.E0(this),e=(s.key=t,this.A0),i=this.root;i!=this.A0;)e=i,i=this.compare(s.key,i.key)<0?i.left:i.right;(s.parent=e)==this.A0?this.root=s:this.compare(s.key,e.key)<0?e.left=s:e.right=s,s.left=this.A0,s.right=this.A0,s.color=!0,this.W0(s),this.size++}},h.k0.prototype.W0=function(t){for(;t!=this.A0&&t!=this.root&&1==t.parent.color;){var s;t.parent==t.parent.parent.left?1==(s=t.parent.parent.right).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.D0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.A0&&this.L0(t.parent.parent)):1==(s=t.parent.parent.left).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.L0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.A0&&this.D0(t.parent.parent))}this.root.color=!1},h.k0.prototype.V0=function(t){var s=t.left==this.A0||t.right==this.A0?t:this.j0(t),e=s.left!=this.A0?s.left:s.right;e.parent=s.parent,s.parent==this.A0?this.root=e:s==s.parent.left?s.parent.left=e:s.parent.right=e,s!=t&&(t.key=s.key),0==s.color&&this.H0(e),this.size--},h.k0.prototype.H0=function(t){for(;t!=this.root&&0==t.color;){var s;t=t==t.parent.left?(1==(s=t.parent.right).color&&(s.color=!1,t.parent.color=!0,this.D0(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=!0,t.parent):(0==s.right.color&&(s.left.color=!1,s.color=!0,this.L0(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.D0(t.parent),this.root)):(1==(s=t.parent.left).color&&(s.color=!1,t.parent.color=!0,this.L0(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=!0,t.parent):(0==s.left.color&&(s.right.color=!1,s.color=!0,this.D0(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.L0(t.parent),this.root))}t.color=!1},h.k0.prototype.remove=function(t){var s;return(t=this.N0(t))!=this.A0?(s=t.key,this.V0(t),s):null},h.k0.prototype.U0=function(t,s){this.remove(s)},h.k0.prototype.min=function(t){for(;t.left!=this.A0;)t=t.left;return t},h.k0.prototype.max=function(t){for(;t.right!=this.A0;)t=t.right;return t},h.k0.prototype.j0=function(t){if(t.right!=this.A0)return this.min(t.right);for(var s=t.parent;s!=this.A0&&t==s.right;)s=(t=s).parent;return s},h.k0.prototype.z0=function(t){if(t.left!=this.A0)return this.max(t.left);for(var s=t.parent;s!=this.A0&&t==s.left;)s=(t=s).parent;return s},h.k0.prototype.J0=function(t){if(0<this.size){var s=this.N0(t);if(s==this.A0)return null;if(s.right!=this.A0)return this.min(s.right).key;for(var e=s.parent;e!=this.A0&&s==e.right;)e=(s=e).parent;return e!=this.A0?e.key:null}return null},h.k0.prototype.q0=function(t){if(0<this.size){var s=this.N0(t);if(s==this.A0)return null;if(s.left!=this.A0)return this.max(s.left).key;for(var e=s.parent;e!=this.A0&&s==e.left;)e=(s=e).parent;return e!=this.A0?e.key:null}return null},h.k0.prototype.X0=function(){return this.min(this.root).key},h.k0.prototype.$0=function(){return this.max(this.root).key},h.k0.prototype.N0=function(t){for(var s=this.root;s!=this.A0&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},h.k0.prototype.contains=function(t){return null!=this.N0(t).key},h.k0.prototype.getValues=function(){var s=[];return this.forEach(function(t){s.push(t)}),s},h.k0.prototype.O0=function(t){if("array"==h.typeOf(t))for(var s=0;s<t.length;s++)this.B0(t[s]);else if("function"==h.typeOf(t.forEach))t.forEach(this.B0,this);else if("function"==h.typeOf(t.getValues))for(var e=t.getValues(),s=0;s<e.length;s++)this.B0(e[s]);else if("object"==h.typeOf(t))for(var i in t)this.B0(t[i])},h.k0.prototype.Y0=function(t){if("array"==h.typeOf(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==h.typeOf(t.forEach))t.forEach(this.U0,this);else if("function"==h.typeOf(t.getValues))for(var e=t.getValues(),s=0;s<e.length;s++)this.remove(e[s]);else if("object"==h.typeOf(t))for(var i in t)this.remove(t[i])},h.k0.prototype.Z0=function(t){if("array"==h.typeOf(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==h.typeOf(t.forEach))return t.every(this.contains,this);if("function"==h.typeOf(t.getValues)){for(var e=t.getValues(),s=0;s<e.length;s++)if(!this.contains(e[s]))return!1;return!0}if("object"==h.typeOf(t)){for(var i in t)if(!this.contains(t[i]))return!1;return!0}},h.k0.prototype.range=function(t,s){var e=[];return this.K0(function(t){e.push(t)},t,s),e},h.k0.prototype.Q0=function(t,s){if(!this.td())for(var e=this.min(this.root);e!=this.A0;){if(t.call(s,e.key,this))return;e=this.j0(e)}},h.k0.prototype.sd=function(t,s,e){if(!this.td())for(var i=this.N0(s);i!=this.A0;){if(t.call(e,i.key,this))return;i=this.j0(i)}},h.k0.prototype.ed=function(t,s,e){if(!this.td())for(var i=this.min(this.root),n=this.N0(s);i!=n;){if(t.call(e,i.key,this))return;i=this.j0(i)}},h.k0.prototype.K0=function(t,s,e,i){if(!this.td())for(var n=this.N0(s),r=this.N0(e);n!=r;){if(t.call(i,n.key,this))return;n=this.j0(n)}},h.k0.prototype.nd=function(t,s){if(!this.td())for(var e=this.max(this.root);e!=this.A0;){if(t.call(s,e.key,this))return;e=this.z0(e)}},h.k0.prototype.forEach=function(t,s){if(!this.td())for(var e=this.min(this.root);e!=this.A0;e=this.j0(e))t.call(s,e.key,e.key,this)},h.k0.prototype.some=function(t,s){if(!this.td())for(var e=this.min(this.root);e!=this.A0;e=this.j0(e))if(t.call(s,e.key,e.key,this))return!0;return!1},h.k0.prototype.every=function(t,s){if(this.td())return!1;for(var e=this.min(this.root);e!=this.A0;e=this.j0(e))if(!t.call(s,e.key,e.key,this))return!1;return!0},h.k0.prototype.map=function(t,s){var e=[];if(!this.td())for(var i=this.min(this.root);i!=this.A0;i=this.j0(i))e.push(t.call(s,i.key,i.key,this));return e},h.k0.prototype.filter=function(t,s){var e=[];if(!this.td())for(var i=this.min(this.root);i!=this.A0;i=this.j0(i))t.call(s,i.key,i.key,this)&&e.push(i.key);return e},h.k0.prototype.getCount=function(){return this.size},h.k0.prototype.td=function(){return 0==this.size},h.k0.prototype.isSubsetOf=function(t){var s=h.getCount(t);if(this.getCount()>s)return!1;var e=0;if(this.td())return!0;for(var i=this.min(this.root);i!=this.A0;i=this.j0(i))h.contains.call(t,t,i.key)&&e++;return e==this.getCount()},h.k0.prototype.intersection=function(t){var s=new h.k0(this.compare);if(!this.td())for(var e=this.min(this.root);e!=this.A0;e=this.j0(e))t.contains.call(t,e.key,e.key,this)&&s.B0(e.key);return s},ds.k0=class extends ds.ur{constructor(t){super(),this.rd=new h.k0(t),this.hd=!1,this.od=new Set,this.ad=new Set}fc(t){this.hd?this.rd.contains(t)?this.ad.delete(t):this.od.add(t):this.rd.B0(t)}x0(t){this.hd?this.rd.contains(t)?this.ad.add(t):this.od.delete(t):this.rd.remove(t)}ie(t){return this.hd?!!this.od.has(t)||!this.ad.has(t)&&this.rd.contains(t):this.rd.contains(t)}ec(){this.rd.clear(),this.od.clear(),this.ad.clear()}toArray(){if(this.hd)throw new Error("cannot be used in queueing mode");return this.rd.getValues()}hc(){return this.rd.getCount()+this.od.size-this.ad.size}ic(){return 0===this.hc()}ld(){if(this.ic())throw new Error("empty set");if(this.hd)throw new Error("cannot be used in queueing mode");const t=this.rd,s=t.min(t.root);return s.key}ud(){if(this.ic())throw new Error("empty set");if(this.hd)throw new Error("cannot be used in queueing mode");const t=this.ld();return this.x0(t),t}fd(t){if(this.hd!==(t=!!t)&&!(this.hd=t)){for(const s of this.ad)this.rd.remove(s);this.ad.clear();for(const e of this.od)this.rd.B0(e);this.od.clear()}}dd(t){this.rd.forEach(t)}*values(){if(!this.ic()){const s=this.rd;for(let t=s.min(s.root);t!=s.A0;t=s.j0(t))yield t.key}}[Symbol.iterator](){return this.values()}}}{const ps=self.Bs;ps.pd=class{constructor(t=ps.hardwareConcurrency){this.md=t,this.gd=[],this.yd=0}fc(e){return new Promise((t,s)=>{this.gd.push({_f:e,resolve:t,reject:s}),this.wd()})}Sd(e){for(let t=0,s=this.gd.length;t<s;++t)if(this.gd[t]._f===e)return t;return-1}bd(t,s){const e=this.Sd(t);if(-1===e)throw new Error("cannot find promise to resolve");this.gd[e].resolve(s),this.gd.splice(e,1)}vd(t,s){const e=this.Sd(t);if(-1===e)throw new Error("cannot find promise to reject");this.gd[e].reject(s),this.gd.splice(e,1)}async wd(){if(this.gd.length&&!(this.yd>=this.md)){this.yd++;const s=this.gd.shift();try{const t=await s._f();s.resolve(t)}catch(t){s.reject(t)}this.yd--,this.wd()}}static async xd(t,s){let e=[],i=!1,n=[];for(;t--;)n.push((async()=>{let t;for(;t=s.pop();){if(i)return;try{e.push(await t())}catch(t){throw i=!0,t}}})());return await Promise.all(n),e}}}{const ms=self.Bs;ms.Md=class{constructor(t,s,e){this.h0=t,this.Td=s,this.Cd=e||2*s,this.Id=-1,this.Gd=-1/0,this._d=()=>this.Pd(),this.Ed=!1,this.Rd=!1,this.Ad=null}kd(t){this.Rd=!!t}Fd(){return void 0!==ms.Battery&&ms.Battery.IsOnBatteryPower()?this.Cd:this.Td}Od(...i){if(-1===this.Id){this.Ad=i;let t=ms.n0(),s=t-this.Gd,e=this.Fd();e<=s&&this.Rd?(this.Gd=t,this.Dd()):this.Id=self.setTimeout(this._d,Math.max(e-s,4))}}Dd(){this.Ed=!0;const t=this.Ad;this.Ad=null,t?this.h0(...t):this.h0(),this.Ed=!1}u0(){this.Ed||(this.Ld(),this.Ad=null,this.Gd=ms.n0())}Pd(){this.Id=-1,this.Gd=ms.n0(),this.Dd()}Ld(){-1!==this.Id&&(self.clearTimeout(this.Id),this.Id=-1)}pr(){this.Ld(),this.h0=null,this.Ad=null,this._d=null}}}{const gs=self.Bs;gs.Bd=class{constructor(){this.Nd=new Map,this.Wd=!1,this.Vd=null,this.jd=null,this.Hd=null,this.Ud=null}zd(t){this.Wd=!!t}Jd(){return this.Wd}qd(t){this.Vd=t}Xd(t){if(this.Vd)return this.Vd(t);throw new Error("no get base size callback set")}$d(t){this.jd=t}Yd(t,s,e,i,n,r){if(this.jd)return this.jd(t,s,e,i,n,r);throw new Error("no raster at size callback set")}Zd(t){this.Hd=t}Kd(t){if(!this.Hd)throw new Error("no release result callback set");this.Hd(t)}Qd(t){this.Ud=t}t1(){if(!this.Ud)throw new Error("no redraw callback set");this.Ud()}s1(t){let s=this.Nd.get(t);return s||(s=gs.dr(gs.e1,this,t),this.Nd.set(t,s)),s.i1(),s}n1(t){this.Nd.delete(t.h1())}o1(){for(const t of this.Nd.values())t.a1(),t.l1()}}}{const ys=self.Bs;ys.e1=class{constructor(t,s){this.u1=t,this.c1=s,this.f1=0,this.d1=0,this.m1=0,this.g1=this.u1.Xd(s).then(t=>{this.u1&&(this.d1=t[0],this.m1=t[1],this.u1.t1())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.w1=!0,this.u1&&this.u1.t1()}),this.S1=0,this.b1=0,this.v1=0,this.M1=0,this.T1=!1,this.C1=null,this.I1=!1,this.w1=!1}pr(){if(this.f1<=0)throw new Error("already released");this.f1--,0===this.f1&&this.G1()}a1(){this.C1&&(this.u1.Kd(this.C1),this.C1=null)}G1(){this.a1(),this.u1.n1(this),this.u1=null}h1(){return this.c1}i1(){this.f1++}_1(){return 0<this.f1}P1(){return this.C1}l1(){this.I1=!0}async E1(i,n,r){if(0!==n&&0!==r&&!this.w1&&!this.T1){let t=ys.Hr(Math.ceil(n)),s=ys.Hr(Math.ceil(r)),e=Math.max(t,s);if(4096<e){const h=4096/e;n*=h,r*=h,t=Math.min(Math.ceil(t*h),4096),s=Math.min(Math.ceil(s*h),4096)}if(n<t&&r<s){const o=n/r,a=t/s;r=o<a?(n=s*o,s):(n=t)/o}if(this.u1.Jd()&&(t=Math.ceil(n),s=Math.ceil(r)),!(t<=this.S1&&s<=this.b1)||this.I1){this.T1=!0,this.S1=t,this.b1=s;const l=await this.u1.Yd(this.c1,i,this.S1,this.b1,n,r);this.u1&&(this.a1(),this.C1=l,this.v1=n,this.M1=r,this.T1=!1,this.I1=!1,this.u1.t1())}}}R1(){return this.g1}A1(){return this.d1}F1(){return this.m1}O1(){return this.v1}D1(){return this.M1}L1(){return this.w1}}}{let s=function(t){return vs.get(t)};s;const c=self.Bs,ws=(c.B1="\ufeff",new Set("0123456789")),Ss=(c.N1=function(t){return ws.has(t)},new Set(" \t\n\r            ​\u2028\u2029  　"));c.W1=function(t){return Ss.has(t)},c.V1=function(t){return[...t].filter(t=>!c.W1(t)).join("")},c.j1=function(t){for(const s of t)if(!c.W1(s))return!1;return!0},c.H1=function(t){for(const s of t)if(!c.W1(s))return!1;return!0},c.U1=function(t){return 1===t.length&&t.charCodeAt(0)<32},c.z1=function(t){return[...t].filter(t=>!c.U1(t)).join("")};let e=null;try{e=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}c.J1=function(t){return!c.W1(t)&&e&&e.test(t)};const bs=new Set("0123456789.+-e"),vs=(c.q1=function(s){if(!(s=s.trim()).length)return!1;let t=s.charAt(0);if("-"!==t&&!ws.has(t))return!1;for(let t of s)if(!bs.has(t))return!1;return!0},c.X1=function(s){let e=s.length;for(;0<e;){let t=s.charAt(e-1);if(!c.N1(t))break;--e}return s.substr(0,e)},c.Y1=function(t){let s=c.X1(t),e=t.substr(s.length);return s+(e?(parseInt(e,10)+1).toString():"2")},new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]])),xs=/[&<>"']/g,Ms=(c.Z1=function(t){return t.replace(xs,s)},c.K1=function(t){let s=c.Q1(t,"\\","\\\\");return s=c.Q1(s,'"','\\"'),s=c.Q1(s,"\t","\\t"),s=c.Q1(s,"\r",""),c.Q1(s,"\n","\\n")},c.tp=function(t){let s=c.Q1(t,"&","&amp;");return s=c.Q1(s,"<","&lt;"),s=c.Q1(s,">","&gt;"),c.Q1(s,'"',"&quot;")},/[-[\]{}()*+?.,\\^$|#\s]/g),Ts=(c.li=function(t){return t.replace(Ms,"\\$&")},c.sp=function(t,s){let e=0;for(const i of t)i===s&&++e;return e},c.ep=function(t,s,e=!1){if(!s)return[];e||(t=t.toLowerCase(),s=s.toLowerCase());let i=s.length,n=0,r,h=[];for(;-1<(r=t.indexOf(s,n));)h.push(r),n=r+i;return h},c.Q1=function(t,s,e){return t.replaceAll(s,()=>e)},c.ip=function(t,s,e){return t.replace(new RegExp(c.li(s),"gi"),()=>e)},c.np=function(t,s){"string"==typeof s?t.textContent=s:s.rp()?t.textContent=s.toString():(t.innerHTML=s.hp(),s instanceof c.Rn&&s.op(t))},c.lp=function(t,s){return t instanceof c.HtmlString||t instanceof c.Rn?t.equals(s):s instanceof c.HtmlString||s instanceof c.Rn?s.equals(t):t===s},c.up=function(e,...i){let n=e;for(let t=0,s=i.length;t<s;++t){const r=`{${t}}`;if(!e.includes(r))throw new Error(`missing placeholder '${r}' in string substitution`);n=n.replace(r,i[t].toString())}return n},c.cp=function(e,...i){let n=e,r=-1,h=-1;for(let t=0,s=i.length;t<s;++t){const o=`{${t}}`;e.includes(o)?(h=t,n=n.replace(o,i[t].toString())):-1===r&&(r=t)}if(0<=r&&0<=h&&r<h)throw new Error(`missing placeholder '${r}' in string substitution`);return n},c.fp=function(t,e){let i=t;for(let[t,s]of Object.entries(e))i=i.replaceAll(t,s.toString());return i},c.pp=function(t,s){return s<t?1:t<s?-1:0},c.mp=function(t,s){let e=t.toLowerCase(),i=s.toLowerCase();return i<e?1:e<i?-1:0},new self.Intl.Segmenter),Cs=(c.gp=function(t){const s=[];for(const e of Ts.segment(t))s.push(e.segment);return s},c.yp=function*(t){for(const s of Ts.segment(t))yield s.segment},c.wp=function(t){let s=0;for(const e of Ts.segment(t))++s;return s},1073741824),Is=1024*Cs,Gs={Sp:!(c.bp=function(s,t){let e="common."+(t?"dataRates":"dataSizes")+".",i=self.langSub;if(s<1024)return i(e+"bytes",s);if(s<1048576){let t=s/1024;return t=t<10?Math.round(10*t)/10:Math.round(t),i(e+"kilobytes",t)}if(s<Cs){let t=s/1048576;return t=t<10?Math.round(10*t)/10:Math.round(t),i(e+"megabytes",t)}if(s<Is){let t=s/Cs;return t=t<10?Math.round(10*t)/10:Math.round(t),i(e+"gigabytes",t)}{let t=s/Is;return t=t<10?Math.round(10*t)/10:Math.round(t),i(e+"terabytes",t)}}),vp:!0,xp:!0,Mp:!0,Tp:!0};c.Cp=function(t,s){s=Object.assign({},Gs,s),c.Lang.PushContext("common.time");const e=[],i=self.lang,n=self.langPluralSub;if(s.vp){const h=Math.floor(t/86400);0<h&&(t-=24*h*3600,e.push(n(".days",null,h)))}if(s.xp){const o=Math.floor(t/3600);(0<o||e.length)&&(t-=3600*o,e.push(n(".hours",null,o)))}if(s.Mp){const a=Math.floor(t/60);(0<a||e.length||!s.Tp)&&(t-=60*a,e.push(n(".minutes",null,a)))}if(s.Tp){const l=Math.floor(t%60);e.push(n(".seconds",null,l))}const r=(s.Sp?i(".approx-prefix"):"")+e.join(i(".separator"));return c.Lang.PopContext(),r},c.Ip=function(t,s){let e=t<0?"-":"",i=(t=Math.abs(t)).toString(),n=s-i.length;for(let t=0;t<n;++t)e+="0";return e+i},c.Gp=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},c._p=function(t,s){let e=t.split(".").map(t=>t.trim()),i=s.split(".").map(t=>t.trim());c.zh(e,4,"0"),c.zh(i,4,"0"),e=e.map(t=>parseInt(t,10)),i=i.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const n=e[t]-i[t];if(0!=n)return n<0?-1:1}return 0},c.Pp=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random()),e="x"===t?s:3&s|8;return e.toString(16)})},c.Ep=function(e,i){if(e.length!==i.length)throw new Error("strings must be same length");let n=0;for(let t=0,s=e.length;t<s;++t)e.charAt(t)!==i.charAt(t)&&++n;return n},c.Rp=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let e,i,n,r,h,o;for(s.length<t.length&&(e=t,t=s,s=e),o=Array(t.length+1),i=0;i<=t.length;i++)o[i]=i;for(i=1;i<=s.length;i++){for(r=i,n=1;n<=t.length;n++)h=s[i-1]===t[n-1]?o[n-1]:Math.min(o[n-1]+1,Math.min(r+1,o[n]+1)),o[n-1]=r,r=h;o[t.length]=r}return o[t.length]}}{let s=function(t,e,i){const n=o.get(i);if(!n)return"class"===i?e?"</span>":`<span class="bbclass${u++}">`:t;if("string"==typeof n){if("a"===n&&0===a.length||"abbr"===n&&0===l.length)return t;if("a"!==n||e){if("abbr"!==n||e)return"<"+e+n+">";{const r=parseInt(i.substring(3),10)-1;if(r<0||r>=l.length)throw new Error("invalid bbcode tip substitution");let t=l[r],s="";if("string"==typeof t?s=t:"function"==typeof t&&(s=t()),"string"!=typeof s)throw new TypeError("invalid bbcode tip");return`<abbr title="${f.Q1(s,'"',"&quot;")}">`}}{const s=parseInt(i.substring(1),10)-1;if(s<0||s>=a.length)throw new Error("invalid bbcode link substitution");const h=a[s];if("string"==typeof h)return`<a href="${a[s]}">`;if("function"==typeof h)return`<a class="bblink${s}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(n)){let t=n[0],s=n[1];return e?"</"+t+">":`<${t} class="${s}">`}},f=(s,self.Bs),o=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),d=new Set(["icon"]),e=/\[(\/?)([a-zA-Z0-9]+)\]/g,p=/\[(\/?)([^\[\n]*?)\]/g,a=null,l=null,u=0,i=/\n/g;f.Rn=class{constructor(t,s){if(this.Ap=s&&s.kp?t:f.Z1(t),this.Fp="",this.Op=!1,this.Dp=[],this.Lp=[],s){if(this.Op=!!s.convertLineBreaks,s.links){if(9<s.links.length)throw new Error("too many links");this.Dp=s.links}if(s.tips){if(9<s.tips.length)throw new Error("too many tips");this.Lp=s.tips}}this.Bp=this.Ap.includes("["),this.Np=this.Op&&this.Ap.includes("\n"),this.Wp=!this.Bp&&!this.Np&&!this.Ap.includes("&"),this.Vp=!1,this.jp=[]}toString(){return this.Ap}valueOf(){return this.Ap}rp(){return this.Wp}Hp(){return this.Bp?this.Ap.replace(e,""):this.Ap}hp(){if(this.Wp)return this.Ap;if(!this.Fp&&this.Ap){let t=this.Ap;this.Bp&&(u=0,a=this.Dp,l=this.Lp,t=t.replace(e,s),a=null,l=null),this.Np&&(t=t.replace(i,"<br>")),this.Fp=t}return this.Fp}op(e){if(this.Dp.length)for(let t=0,s=this.Dp.length;t<s;++t){const i=this.Dp[t];if("function"==typeof i){const n=e.querySelector(".bblink"+t);if(!n)throw new Error("unable to attach BBString link handler");n.onclick=i}}}equals(t){return t instanceof f.HtmlString?this.hp()===t.hp():t instanceof f.Rn?this.Ap===t.Ap:this.Ap===t}Up(){if(!this.Vp){let i=[],t=this.Ap,n=[],s=p.lastIndex=0,e;for(;null!==(e=p.exec(t));){const r=e.index;if(!(0<r&&"\\"===t.charAt(r-1))){const h=e[0],o=e[1],a=e[2],l=t.substring(s,r);if(s=r+h.length,l&&i.push({text:l,zp:n.slice(0)}),a)if(o){const u=a.toLowerCase();for(let t=n.length-1;0<=t;--t)if(n[t].tag===u){n.splice(t,1);break}}else{let t=a,s=null,e=a.indexOf("=");if(-1!==e?(t=a.substring(0,e).toLowerCase(),s=a.substring(e+1)):t=t.toLowerCase(),d.has(t)){if("icon"!==t)throw new Error("unknown self-closing tag "+t);i.push({icon:s,zp:n.slice(0)})}else n.push({tag:t,Jp:s})}}}s<t.length&&i.push({text:t.substring(s),zp:n.slice(0)});for(const c of i)c.text&&(c.text=this.qp(c.text));this.jp=i.map(t=>t.icon?f.dr(f.Xp,{icon:t.icon,zp:t.zp}):f.dr(f.$p,{Yp:f.gp(t.text),zp:t.zp})),this.Vp=!0}return this.jp}qp(t){return t=f.Q1(t,"\\[","["),f.Q1(t,"\\\\","\\")}static Zp(t){return f.dr(f.Rn,t,{kp:!0}).Hp()}static Kp(t){return t.replace(p,"")}}}{let l=function(t){return" "!==t&&" "!==t&&w.W1(t)},a=function(t){return _s.has(t)},u=function(t){return w.J1(t)&&!a(t)},c=function(t){for(;0<t.length&&l(t.at(-1));)t.pop()},y=function(t){return"\n"===t||"\r\n"===t};l,a,u,c,y;const w=self.Bs,_s=new Set("〈《「『【〔〖〘〚〝");w.Qp=class{constructor(){this.tm=[],this.im=null}nm(){return this.tm}rm(){return this.tm.length}hm(t){this.im=t}om(t,s){let e=0,i=0,n=0,r=0,h=0;for(const o of t){if(-1===o.am()){const a=s(o);o.lm(a.height),o.um(a.fontBoundingBoxAscent||0),o.fm(a.fontBoundingBoxDescent||0),o.dm(a.pm||0),o.gm()?o.ym(a.width):o.wm()&&o.Sm(this.im)}e+=o.am(),i=Math.max(i,o.vm()),n=Math.max(n,o.xm()),r=Math.max(r,o.Mm()),h=Math.max(h,o.Tm())}return{width:e,height:i,fontBoundingBoxAscent:n,fontBoundingBoxDescent:r,pm:h}}Cm(t,s,e,i,n,r){this.tm.push(w.dr(w.Qp.Im,{Gm:t,width:s,height:e,fontBoundingBoxAscent:i,fontBoundingBoxDescent:n,pm:r}))}Qp(s,r,h,e,o){if("string"==typeof s&&(s=[w.dr(w.$p,{Yp:w.gp(s)})]),w.jh(this.tm),!(!s.length||1===s.length&&s[0].gm()&&s[0].ic()||h<2)){if(1===s.length){const a=s[0];if(a.gm()&&a._m()<=100&&!a.Pm()){let{width:t,height:s,fontBoundingBoxAscent:e,fontBoundingBoxDescent:i,pm:n}=r(a);if(t+=o,a.ym(t),a.lm(s),a.um(e||0),a.fm(i||0),a.dm(n||0),t<=h)return void this.Cm([a],t,s,e,i,n)}}let t;t="word"===e?this.Em(s):"cjk"===e?this.Rm(s):this.Am(s),this.km(t,r,h,o)}}Em(t){let s=[],e=[],i=!1;for(const n of t){const r=n.Fm();if(n.wm())0<e.length&&s.push(e),s.push([n]),e=[];else for(const h of n.Om())if(y(h))0<e.length&&s.push(e),s.push([w.dr(w.$p,{Yp:["\n"],zp:r})]),e=[];else if(0===e.length)e.push(w.dr(w.$p,{Yp:[h],zp:r})),i=l(h);else{const o=l(h);if(o===i){const a=e.at(-1);a.Fm()===r?a.Dm(h):e.push(w.dr(w.$p,{Yp:[h],zp:r}))}else s.push(e),e=[w.dr(w.$p,{Yp:[h],zp:r})],i=o}}return 0<e.length&&s.push(e),s}Rm(t){let s=[],e=[],i=!1;for(const n of t){const r=n.Fm();if(n.wm())0<e.length&&s.push(e),s.push([n]),e=[];else for(const h of n.Om())if(y(h))0<e.length&&s.push(e),s.push([w.dr(w.$p,{Yp:["\n"],zp:r})]),e=[];else{if(0===e.length)e.push(w.dr(w.$p,{Yp:[h],zp:r}));else if(i||u(h)){const o=e.at(-1);o.Fm()===r?o.Dm(h):e.push(w.dr(w.$p,{Yp:[h],zp:r}))}else s.push(e),e=[w.dr(w.$p,{Yp:[h],zp:r})];i=a(h)}}return 0<e.length&&s.push(e),s}Am(t){const s=[];for(const e of t)if(e.gm()){const i=e.Om();w.Zn(s,i.map(t=>[w.dr(w.$p,{Yp:[t],zp:e.Fm()})]))}else s.push([e]);return s}Lm(t){return t.map(t=>t.Bm())}Nm(s,e){let t=s.length?s.at(-1):null,i=0;t&&t.gm()&&e[0].gm()&&e[0].Fm()===t.Fm()&&(t.Wm(e[0].Om()),i=1);for(let t=e.length;i<t;++i){const n=e[i];s.push(n.Bm())}}km(t,s,e,i){let n=[],r=0,h=0,o=0,a=0,l=0;for(const u of t)if(1===u.length&&u[0].gm()&&1===u[0]._m()&&y(u[0].Om()[0])){if(0===h){const c=w.dr(w.$p,{Yp:[" "],zp:u[0].Fm()}),f=s(c);h=f.height,o=f.fontBoundingBoxAscent||0,a=f.fontBoundingBoxDescent||0,l=f.pm||0}this.Cm(n,r,h,o,a,l),n=[],r=0,h=0,o=0,a=0,l=0}else{const d=this.Lm(n),p=(this.Nm(d,u),this.om(d,s)),m=p.width;if(e<=m)if(0<n.length&&this.Cm(n,r,h,o,a,l),n=[],u[0].gm()&&w.H1(u[0].Om()))r=0,h=0,o=0,a=0,l=0;else{this.Nm(n,u);const g=this.om(n,s);r=g.width,h=g.height,o=g.fontBoundingBoxAscent,a=g.fontBoundingBoxDescent,l=g.pm}else n=d,r=m,h=p.height,o=p.fontBoundingBoxAscent,a=p.fontBoundingBoxDescent,l=p.pm}0<n.length&&this.Cm(n,r,h,o,a,l),this.Vm(s,i)}Vm(s,e){for(const i of this.tm){const n=i.jm();if(n.length){let t=n.at(-1);if(t.gm()){const r=t.Om(),h=r.slice(0);if(c(h),0===h.length)i.Hm(-t.am()),n.pop();else if(h.length<r.length){t.Um(h);const o=s(t).width,a=t.am()-o;t.ym(o),i.Hm(-a)}0!==e&&0<n.length&&((t=n.at(-1)).Hm(e),i.Hm(e))}}}}ec(){w.jh(this.tm)}zm(){return this.tm.reduce((t,s)=>Math.max(t,s.am()),0)}Jm(){return this.tm.reduce((t,s)=>t+s.vm(),0)}}}{const Ps=self.Bs;Ps.Qp.Im=class{constructor(t){this.jp=t.Gm||[],this.qm=t.width||-1,this.Xm=t.height||-1,this.$m=t.fontBoundingBoxAscent||-1,this.Ym=t.fontBoundingBoxDescent||-1,this.Zm=t.pm||-1,this.Km=0,this.Qm=0}Gm(){return this.jp.values()}*tg(){const s=this.jp;for(let t=s.length-1;0<=t;--t)yield s[t]}jm(){return this.jp}Hm(t){this.qm+=t}am(){return this.qm}vm(){return this.Xm}sg(){return this.$m}Mm(){return this.Ym}Tm(){return this.Zm}eg(t){this.Km=t}ig(){return this.Km}ng(t){this.Qm=t}rg(){return this.Qm}}}{const Es=self.Bs;Es.hg=class{constructor(t){this.og=t.zp||[],this.qm=t.width||-1,this.Xm=t.height||-1,this.$m=t.fontBoundingBoxAscent||-1,this.Ym=t.fontBoundingBoxDescent||-1,this.Zm=t.pm||-1,this.Km=0,this.Qm=0}gm(){return!1}wm(){return!1}Fm(){return this.og}ag(s){const e=this.og;for(let t=e.length-1;0<=t;--t){const i=e[t];if(i.tag===s)return i}return null}lg(t){return!!this.ag(t)}ug(){const t=new Map;for(const s of this.og)t.set(s.tag,s.Jp);return t}Hm(t){this.qm+=t}ym(t){this.qm=t}am(){return this.qm}lm(t){this.Xm=t}vm(){return this.Xm}um(t){this.$m=t}xm(){return this.$m}fm(t){this.Ym=t}Mm(){return this.Ym}dm(t){this.Zm=t}Tm(){return this.Zm}eg(t){this.Km=t}ig(){return this.Km}ng(t){this.Qm=t}rg(){return this.Qm}}}{const Rs=self.Bs;Rs.$p=class extends Rs.hg{constructor(t){super(t),this.fg=t.Yp}gm(){return!0}Wm(t){Rs.Zn(this.fg,t),this.qm=-1,this.Xm=-1,this.$m=-1,this.Ym=-1,this.Zm=-1}Dm(t){this.fg.push(t)}Bm(){return Rs.dr(Rs.$p,{Yp:this.fg.slice(0),zp:this.og,width:this.qm,height:this.Xm,fontBoundingBoxAscent:this.$m,fontBoundingBoxDescent:this.Ym,pm:this.Zm})}Om(){return this.fg}Um(t){this.fg=t}_m(){return this.fg.length}ic(){return 0===this.fg.length}Pm(){return this.fg.includes("\n")}}}{const As=self.Bs;As.Xp=class extends As.hg{constructor(t){super(t),this.dg=t.icon}wm(){return!0}pg(){return this.dg}Bm(){return As.dr(As.Xp,{icon:this.dg,zp:this.og,width:this.qm,height:this.Xm,fontBoundingBoxAscent:this.$m,fontBoundingBoxDescent:this.Ym,pm:this.Zm})}mg(t){if(!t)return null;let s=Number(this.dg);return String(s)===this.dg?(s=Math.floor(s),t.gg(s)):t.yg(this.dg)}Sm(t){const s=this.mg(t);this.qm=s?this.Xm*s.am()/s.vm():0}wg(t){const s=this.mg(t);return s?s.wg():null}_m(){return 1}}}{const ks=self.Bs;ks.Sg=class{constructor(t){this.bg=new Map,this.vg=t.xg,this.Mg=t.Tg}pr(){for(const t of this.bg.values())t.pr();this.bg.clear()}Cg(t){let s=this.bg.get(t);if(!s){const e=this.vg(t);s=ks.dr(ks.Ig,this,{source:t,Gg:e}),this.bg.set(t,s)}return s}_g(t){return this.bg.has(t)}Pg(t){const s=this.bg.get(t);s&&s.pr(),this.bg.delete(t)}async Eg(t){return this.Mg(t)}}}{const Fs=self.Bs;Fs.Ig=class{constructor(t,s){this.Rg=t,this.Ag=s.source,this.kg=[],this.Fg=new Map,this.Og=!1,this.Dg=!1,this.Lg=null;const e=s.Gg.Bg;for(let t=0,s=e.length;t<s;++t){const i=e[t],n=Fs.dr(Fs.Ng,this,{index:t,tag:i.tag,source:i.source,width:i.width,height:i.height});this.kg.push(n),i.tag&&this.Fg.set(i.tag.toLowerCase(),n)}}pr(){for(const t of this.kg)t.pr();Fs.jh(this.kg),this.Fg.clear(),this.Rg=null,this.Ag=null}Wg(){return this.Og}Vg(){return this.Dg}jg(){return this.Lg||(this.Lg=this.Hg()),this.Lg}async Hg(){if(!this.Og){this.Og=!0,this.Dg=!0;const t=await this.Rg.Eg(this.Ag);if(this.Rg){const e=t.Bg;for(let t=0,s=Math.min(e.length,this.kg.length);t<s;++t){const i=e[t].Ug;this.kg[t].zg(i)}this.Dg=!1}}}gg(t){return(t=Math.floor(t))<0||t>=this.kg.length?null:this.kg[t]}yg(t){return this.Fg.get(t.toLowerCase())||null}}}{const Os=self.Bs;Os.Ng=class{constructor(t,s){this.Jg=t,this.Ag=s.source||null,this.qg=s.index,this.Xg=s.tag,this.qm=s.width,this.Xm=s.height,this.$g=null}pr(){this.qm=0,this.Xm=0,this.Jg=null}Yg(){return this.Ag}am(){return this.qm}vm(){return this.Xm}zg(t){this.$g=t}wg(){return this.$g}}}{let i=function(t,s,e,i){const n=Ws;Cn.W(Bs,e,s),Cn.W(Ns,t,s),Cn.Dt(n,Bs,Ns),Cn.normalize(n,n),i.set(n[0],n[1],n[2],Cn.Ot(t,n))},h=function(t,s,e,i,n,r,h){const o=h.x,a=h.y,l=h.z,u=h.w,c=h.Zg,f=h.Kg,d=h.Qg,p=1-c,m=1-f,g=1-d,y=o*t*c+o*i*p+a*s*f+a*n*m+l*e*d+l*r*g;if(u<=y)return!0;const w=o*i*c+o*t*p+a*n*f+a*s*m+l*r*d+l*e*g;return u<w},n=function(t,s,e,i){const n=i.x,r=i.y,h=i.z,o=i.w,a=n*t+r*s+h*e;return o<=a};i,h,n;const Ds=self.Bs,Ls=self.vs,Cn=Ls.Ps,Hn=Ls.Es,Tn=Ls.Cs,Bs=Cn.create(),Ns=Cn.create(),Ws=Cn.create(),Vs=Hn.create(),js=Tn.create(),Hs=Cn.create(),Us=Cn.create(),zs=Cn.create(),Js=Cn.create(),qs=Cn.create(),Xs=Cn.create(),$s=Cn.create(),Ys=Cn.create(),Zs=Hn._(0,0,1,1);Ds.ty={ey(t,s,e,i,n,r,h){let o=i[0]*t+i[4]*s+i[8]*e+i[12],a=i[1]*t+i[5]*s+i[9]*e+i[13],l=i[2]*t+i[6]*s+i[10]*e+i[14],u=i[3]*t+i[7]*s+i[11]*e+i[15],c=n[0]*o+n[4]*a+n[8]*l+n[12]*u,f=n[1]*o+n[5]*a+n[9]*l+n[13]*u,d=n[2]*o+n[6]*a+n[10]*l+n[14]*u,p=n[3]*o+n[7]*a+n[11]*l+n[15]*u;return 0!=p&&(f*=p=1/p,d*=p,h[0]=(.5*(c*=p)+.5)*r[2]+r[0],h[1]=(.5*f+.5)*r[3]+r[1],h[2]=.5*(1+d),!0)},iy(t,s,e,i,n,r,h){const o=js,a=Vs;return Tn.multiply(o,n,i),null!==Tn.R(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*e-1,a[3]=1,Hn.Vt(a,a,o),0!==a[3])&&(a[3]=1/a[3],h[0]=a[0]*a[3],h[1]=a[1]*a[3],h[2]=a[2]*a[3],!0)},ny(t,s,e,i,n,r,h){const o=Bs,a=Ns;if(!Ds.ty.iy(t,s,0,i,n,r,o))return!1;if(!Ds.ty.iy(t,s,1,i,n,r,a))return!1;let l=Ns,u=(Cn.W(l,a,o),Ws),c=(Cn.set(u,0,0,1),-e),f=Cn.Ot(u,l),d=0;if(0===f){const p=Cn.Ot(u,o)+c;if(0!==p)return!1}else if((d=-(Cn.Ot(o,u)+c)/f)<0)return!1;return Cn.Et(h,o,l,d),!0}};class Ks{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.Zg=NaN,this.Kg=NaN,this.Qg=NaN}set(t,s,e,i){this.x=t,this.y=s,this.z=e,this.w=i,this.Zg=0<t?1:0,this.Kg=0<s?1:0,this.Qg=0<e?1:0}}Ds.ty.hy=class{constructor(){this.oy=new Ks,this.uy=new Ks,this.my=new Ks,this.gy=new Ks,this.yy=new Ks,this.wy=new Ks}Sy(t,s){const e=Zs;Ds.ty.iy(0,1,0,t,s,e,Hs),Ds.ty.iy(1,1,0,t,s,e,Us),Ds.ty.iy(0,0,0,t,s,e,zs),Ds.ty.iy(1,0,0,t,s,e,Js),Ds.ty.iy(0,1,1,t,s,e,qs),Ds.ty.iy(1,1,1,t,s,e,Xs),Ds.ty.iy(0,0,1,t,s,e,$s),Ds.ty.iy(1,0,1,t,s,e,Ys),i(zs,Hs,qs,this.oy),i(Hs,Us,Xs,this.uy),i(Us,Js,Ys,this.my),i(Js,zs,$s,this.gy),i($s,qs,Xs,this.wy),i(Js,Us,Hs,this.yy)}by(t,s,e,i,n,r){return h(t,s,e,i,n,r,this.oy)&&h(t,s,e,i,n,r,this.uy)&&h(t,s,e,i,n,r,this.my)&&h(t,s,e,i,n,r,this.gy)&&h(t,s,e,i,n,r,this.yy)&&h(t,s,e,i,n,r,this.wy)}vy(t,s,e){return!n(t,s,e,this.yy)}}}{const Qs=self.Bs,te=self.vs,Cn=te.Ps,Hn=te.Es,Tn=te.Cs,se=Tn.create(),ee=Cn._(0,0,0),ie=Cn._(0,0,0),ne=Cn._(0,0,0),re=Cn._(0,1,0),he=(Hn._(0,0,0,0),new Qs.su),oe=new Qs.Rect,ae=new Qs.su(0,0,1,0,1,1,0,1),le={xy:1,My:1e4},ue=Tn._(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Qs.ty.Ty=class{constructor(t){t=Object.assign({},le,t),this.qm=0,this.Xm=0,this.Cy=Qs.Mr(45),this.Iy=Math.tan(this.Cy/2),this.Gy=Tn.create(),this._y=Tn.create(),this.Py=!1,this.Ey=t.xy,this.Ry=t.My,this.Ay=[],this.ky=new Map,this.Fy=null,this.Oy=null,this.Dy=null,this.Ly=null,this.By=null,this.Ny=null,this.Wy=null,this.Vy=null,this.jy=null,this.Hy=null,this.Uy=null,this.zy=null,this.Jy=new Map,this.qy=null,this.Xy=[],this.$y=new Map,this.Yy=0,this.Zy=0,this.Ky=1,this.Qy=[this.Ky],this.ew=1,this.iw=[this.ew],this.rw=.5,this.hw=[this.rw],this.ow=0,this.aw=!0,this.lw=!1}uw(t){let s=0,e=t.length,i=0;for(;s<e;)t[s++]=i,t[s++]=i+1,t[s++]=i+2,t[s++]=i,t[s++]=i+2,t[s++]=i+3,i+=4}cw(){this.Yy=0,this.Zy=0,this.Fy=null,this.Oy=null,this.Dy=null,this.Ly=null,this.By=null,this.Ny=null,this.Wy=null,this.Vy=null,this.jy=null,this.Hy=null,this.Uy=null,this.zy=null,this.fw()}dw(){this.cw(),this.qy=null}pw(){for(const t of this.Ay)t.pr();this.cw()}am(){return this.qm}vm(){return this.Xm}mw(t){return this.gw()?100:t/(2*this.yw())}ww(t){if(this.gw()){const s=t/(2*this.yw());return s/this.mw(t)}return 1}Sw(t){this.Ey=t}bw(){return this.Ey}xw(t){this.Ry=t}Mw(){return this.Ry}Tw(t){this.Cy=t,this.Iy=Math.tan(this.Cy/2)}Cw(){return this.Cy}yw(){return this.Iy}Iw(){this.Py=!1}Gw(){this.Py=!0}gw(){return!this.Py}_w(){return this.Py}Pw(t,s,e=.5,i=.5){const n=this.bw(),r=this.Mw(),h=this.Cw();if(.5===e&&.5===i)this.Ew()?Tn.Mt(t,h,s,n,r):Tn.perspective(t,h,s,n,r);else{const o=2*(e=1-e)-2,a=2*e,l=2*i-2,u=2*i,c=this.yw()*n,f=c*s;Tn.vt(t,o*f,a*f,l*c,u*c,n,r),this.Ew()&&Tn.mul(t,ue,t)}}Rw(t,s,e,i=1){const n=self.devicePixelRatio,r=2*this.mw(e)*n*this.yw()/e,h=s*r/(2*n*i),o=e*r/(2*n*i),a=-h,l=h,u=-o,c=o;this.Ew()?Tn.It(t,a,l,u,c,this.bw(),this.Mw()):Tn.ortho(t,a,l,u,c,this.bw(),this.Mw())}Aw(t,s,e,i,n,r=1){let h=1;this.gw()&&(h=200*this.yw()/n);const o=ne,a=(Cn.set(o,h,-h,1),ee),l=ie;Cn.multiply(a,s,o),Cn.multiply(l,e,o),Tn.Gt(t,a,l,i||re),o[2]=r,Tn.scale(t,t,o)}kw(t,s,e,i,n,r,h,o){return Cn.set(ee,t,s,e),Cn.set(ie,i,n,r),this.Aw(se,ee,ie,re,h,o),se}Fw(t){this.Ay.push(t),this.ky.set(t.Qc(),t)}Ow(t){const s=this.Ay.indexOf(t);-1!==s&&this.Ay.splice(s,1),this.ky.delete(t.Qc())}fw(){Qs.jh(this.Ay),this.ky.clear()}Dw(t){return this.ky.get(t)||null}Lw(){return this.Fy}Bw(){this.Nw(this.Fy)}Ww(){return this.Oy}Vw(){this.Nw(this.Oy)}jw(){this.Nw(this.Dy)}Hw(){this.Nw(this.Ly)}Uw(){this.Nw(this.By)}zw(){this.Nw(this.Ny)}Jw(){this.Nw(this.Wy)}qw(){this.Nw(this.Vy)}Xw(){this.Nw(this.jy)}$w(){this.Nw(this.Hy)}Yw(){this.Nw(this.Uy)}Zw(){this.Nw(this.zy)}Kw(t){this.qy=t}Qw(){return this.qy}tS(t,s,e,i){let n=Qs.ty.eS.sS(t,s,e,i),r=this.Jy.get(n);return r||(r=Qs.dr(Qs.ty.eS,this,t,s,e,i),this.Jy.set(n,r)),r.iS(),r}nS(t){t.rS(),0===t.hS()&&(this.qy===t&&(this.qy=null),this.Jy.delete(t.oS()),t.pr())}aS(t){Qs.jh(this.Xy),this.$y.clear();let s=0;for(const e of t){const i=e[0],n=e[1],r=e[2];this.Xy.push([n,r]),this.$y.set(i,{number:s,lS:n,uS:r}),s++}}cS(t){return this.Xy[t]}fS(t){return this.cS(t)[0]}dS(t){return this.cS(t)[1]}pS(t){const s=this.$y.get(t);if(void 0===s)throw new Error("invalid blend name");return s}mS(t){const s=this.$y.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}gS(t){this.Yy=t}yS(){return this.Yy}wS(t){this.Zy=t,this.qy=null}SS(){return this.Zy}Im(t,s,e,i){const n=Qs.Pr(t,s,e,i),r=Math.sin(n),h=Math.cos(n),o=.5*this.Ky,a=r*o,l=h*o,u=this.ew;2===u?this.bS(t,s,0,e,i,0,a,l):1===u?this.vS(t,s,0,e,i,0,a,l):this.xS(t,s,0,e,i,0,a,l)}MS(t,s,e,i,n,r){const h=Qs.Pr(t,s,i,n),o=Math.sin(h),a=Math.cos(h),l=.5*this.Ky,u=o*l,c=a*l,f=this.ew;2===f?this.bS(t,s,e,i,n,r,u,c):1===f?this.vS(t,s,e,i,n,r,u,c):this.xS(t,s,e,i,n,r,u,c)}bS(t,s,e,i,n,r,h,o){const a=this.rw,l=t+a-o,u=s+a-h,c=i+a+o,f=n+a+h,d=2*o,p=2*h,m=l+h,g=u-o,y=l-h+d,w=u+o+p,S=c+h,b=f-o,v=c-h-d,x=f+o-p;this.TS(m,g,e,S,b,r,v,x,r,y,w,e,ae)}vS(t,s,e,i,n,r,h,o){const a=this.rw,l=t+a-o,u=s+a-h,c=i+a+o,f=n+a+h,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,w=f-o,S=c-h,b=f+o;this.TS(d,p,e,y,w,r,S,b,r,m,g,e,ae)}xS(t,s,e,i,n,r,h,o){const a=this.rw,l=t+a,u=s+a,c=i+a,f=n+a,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,w=f-o,S=c-h,b=f+o;this.TS(d,p,e,y,w,r,S,b,r,m,g,e,ae)}CS(t,s,e,i,n,r){const h=Qs.Pr(t,s,e,i),o=Math.sin(h),a=Math.cos(h),l=.5*this.Ky,u=o*l,c=a*l,f=this.ew;2===f?this.IS(t,s,e,i,u,c,n,r):1===f?this.GS(t,s,e,i,u,c,n,r):this._S(t,s,e,i,u,c,n,r)}IS(t,s,e,i,n,r,h,o){const a=this.rw,l=t+a-r,u=s+a-n,c=e+a+r,f=i+a+n,d=2*r,p=2*n,m=l+n,g=u-r,y=l-n+d,w=u+r+p,S=c+n,b=f-r,v=c-n-d,x=f+r-p;he.set(m,g,S,b,v,x,y,w),oe.set(h,0,o,0),this.PS(he,oe)}GS(t,s,e,i,n,r,h,o){const a=this.rw,l=t+a-r,u=s+a-n,c=e+a+r,f=i+a+n,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,w=f-r,S=c-n,b=f+r;he.set(d,p,y,w,S,b,m,g),oe.set(h,0,o,0),this.PS(he,oe)}_S(t,s,e,i,n,r,h,o){const a=this.rw,l=t+a,u=s+a,c=e+a,f=i+a,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,w=f-r,S=c-n,b=f+r;he.set(d,p,y,w,S,b,m,g),oe.set(h,0,o,0),this.PS(he,oe)}ES(t,s,e,i){const n=.5*this.Ky,r=this.ew;2===r?this.RS(t,s,e,i,n):1===r?this.AS(t,s,e,i,n):this.kS(t,s,e,i,n)}RS(t,s,e,i,n){this.bS(t,s,0,e,s,0,0,n),this.bS(e,s,0,e,i,0,n,0),this.bS(e,i,0,t,i,0,0,-n),this.bS(t,i,0,t,s,0,-n,0)}AS(t,s,e,i,n){this.vS(t,s,0,e,s,0,0,n),this.vS(e,s,0,e,i,0,n,0),this.vS(e,i,0,t,i,0,0,-n),this.vS(t,i,0,t,s,0,-n,0)}kS(t,s,e,i,n){this.xS(t,s,0,e,s,0,0,n),this.xS(e,s,0,e,i,0,n,0),this.xS(e,i,0,t,i,0,0,-n),this.xS(t,i,0,t,s,0,-n,0)}FS(t){this.ES(t.Cl(),t.Il(),t.Gl(),t._l())}OS(t){const s=Qs.Pr(t.oh(),t.ah(),t.lh(),t.uh()),e=Math.sin(s),i=Math.cos(s),n=.5*this.Ky,r=e*n,h=i*n,o=this.ew;2===o?this.DS(t,r,h):1===o?this.LS(t,r,h):this.BS(t,r,h)}DS(t,s,e){this.bS(t.oh(),t.ah(),0,t.lh(),t.uh(),0,s,e),this.bS(t.lh(),t.uh(),0,t.fh(),t.dh(),0,e,-s),this.bS(t.fh(),t.dh(),0,t.ph(),t.mh(),0,-s,-e),this.bS(t.ph(),t.mh(),0,t.oh(),t.ah(),0,-e,s)}LS(t,s,e){this.vS(t.oh(),t.ah(),0,t.lh(),t.uh(),0,s,e),this.vS(t.lh(),t.uh(),0,t.fh(),t.dh(),0,e,-s),this.vS(t.fh(),t.dh(),0,t.ph(),t.mh(),0,-s,-e),this.vS(t.ph(),t.mh(),0,t.oh(),t.ah(),0,-e,s)}BS(t,s,e){this.xS(t.oh(),t.ah(),0,t.lh(),t.uh(),0,s,e),this.xS(t.lh(),t.uh(),0,t.fh(),t.dh(),0,e,-s),this.xS(t.fh(),t.dh(),0,t.ph(),t.mh(),0,-s,-e),this.xS(t.ph(),t.mh(),0,t.oh(),t.ah(),0,-e,s)}NS(t){this.Ky=t,this.Qy[this.Qy.length-1]=t}WS(){return this.Ky}VS(t){if(100<=this.Qy.length)throw new Error("pushed too many line widths - check push/pop pairs");this.Qy.push(t),this.Ky=t}jS(){if(this.Qy.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.Qy.pop(),this.Ky=this.Qy.at(-1)}HS(){this.ew=0,this.iw[this.iw.length-1]=0}US(){this.ew=1,this.iw[this.iw.length-1]=0}zS(){this.ew=2,this.iw[this.iw.length-1]=0}JS(t){if("butt"===t)this.qS();else if("square"===t)this.XS();else{if("zag"!==t)throw new Error("invalid line cap");this.$S()}}qS(){if(100<=this.iw.length)throw new Error("pushed too many line caps - check push/pop pairs");this.iw.push(0),this.ew=0}XS(){if(100<=this.iw.length)throw new Error("pushed too many line caps - check push/pop pairs");this.iw.push(1),this.ew=1}$S(){if(100<=this.iw.length)throw new Error("pushed too many line caps - check push/pop pairs");this.iw.push(2),this.ew=2}YS(){if(this.iw.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.iw.pop(),this.ew=this.iw.at(-1)}ZS(t){this.rw=t,this.hw[this.hw.length-1]=t}KS(){return this.rw}QS(t){if(100<=this.hw.length)throw new Error("pushed too many line offsets - check push/pop pairs");this.hw.push(t),this.rw=t}tb(){if(this.hw.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.hw.pop(),this.rw=this.hw.at(-1)}sb(s){const t=s.length/2;if(t<3)throw new Error("need at least 3 points");const e=t-2,i=e-1,n=s[0],r=s[1];for(let t=0;t<e;t+=2){const h=2*t,o=s[2+h],a=s[3+h],l=s[4+h],u=s[5+h];if(t===i)this.eb(n,r,o,a,l,u,l,u);else{const c=s[6+h],f=s[7+h];this.eb(n,r,o,a,l,u,c,f)}}}ib(){return 3}nb(){this.rb(!0),this.ow++}hb(){return this.ow}ob(){this.ow++}ab(t){this.aw=!!t}lb(){return this.aw}ub(t){this.lw=!!t}cb(){return this.lw}fb(){return!1}Ew(){return!1}pb(){}mb(){}gb(){}yb(){return this.pb()+this.mb()+this.gb()}wb(){return Qs.dr(Qs.ty.Sb,this)}}}{const ce=self.Bs;ce.ty.bb=class{constructor(t,s){this.yr=s.name,this.vb=t,this.xb=s.Mb||0,this.Tb=s.Cb||0,this.Ib=!!s.Gb,this._b=!!s.Pb,this.Eb=!!s.Rb,this.Ab=!!s.kb,this.Fb=!!s.Ob,this.Db=!!s.Lb,this.Bb=!!s.Nb,this.Wb=!1,this.Vb=this.Ib||this.Db||0!==this.xb||0!==this.Tb}pr(){this.vb=null}jb(){return this.vb}Qc(){return this.yr}Hb(){return 0!==this.xb||0!==this.Tb}Ub(){return this.xb}zb(){return this.Tb}Jb(){return this.Ib}qb(){return this._b}Xb(){return this.Eb}$b(){return this.Ab}Yb(){return this.Fb}Zb(){return this.Db}Kb(){return this.Bb}Qb(){return this.Wb}tv(){return this.Vb}sv(){return!1}}}{const fe=self.Bs;fe.ty.eS=class{constructor(t,s,e,i,n){this.vb=t,this.f1=0,this.nv=null,this.rv="",this.hv=e,this.ov=fe.dr(fe.qo),this.ov.set(i),this.av=n,"string"==typeof s?this.rv=s:(this.nv=s,this.rv=this.nv.Qc())}pr(){if(0<this.f1)throw new Error("releasing state group still in use");this.vb=null,this.nv=null,this.rv=""}lv(){const t=this.vb;t.Nw(this.nv),t.uv(this.hv),t.cv(this.ov),t.wS(this.av),t.Kw(this)}oS(){return fe.ty.eS.sS(this.rv,this.hv,this.ov,this.av)}iS(){++this.f1}rS(){--this.f1}hS(){return this.f1}dv(){this.nv=null}pv(t){if(this.nv=t.Dw(this.rv),!this.nv)throw new Error("failed to restore shader program")}static sS(t,s,e,i){const n="string"==typeof t?t:t.Qc();return n+","+s+","+e.ua()+","+e.ca()+","+e.fa()+","+e.da()+","+i}}}{let i=function(t,s,e){const i=e.oh(),n=e.ah(),r=e.lh()-i,h=e.uh()-n,o=e.ph()-i,a=e.mh()-n,l=r*t,u=h*t,c=o*s,f=a*s;return[i+l+c,n+u+f]};i;const I=self.Bs,de=I.dr(I.su);I.ty.mv=class{constructor(t,s,e){this.gv=t,this.yv=s,this.wv=e,this.el=NaN,this.il=NaN,this.av=NaN,this.Sv=NaN,this.bv=NaN,this.el=0,this.il=0,this.av=0,this.Sv=0,this.bv=0}vv(t,s,e,i){this.el=t,this.il=s,this.Sv=e,this.bv=i}xv(){return this.el}Mv(t){this.el!==t&&(this.el=t,this.gv.Tv())}Cv(){return this.il}Iv(t){this.il!==t&&(this.il=t,this.gv.Tv())}Gv(){return this.av}_v(t){this.av!==t&&(this.av=Math.max(t,0),this.gv.Tv())}Pv(){return this.Sv}Ev(t){this.Sv=t}Rv(){return this.bv}Av(t){this.bv=t}kv(t,s,e){[this.el,this.il]=i(t.el,t.il,s),this.av=t.av,this.Sv=I.Lt(e.Cl(),e.Gl(),t.Sv),this.bv=I.Lt(e.Il(),e._l(),t.bv)}Fv(t,s,e){[this.el,this.il]=i(t.el,t.il,s),this.av=t.av,[this.Sv,this.bv]=i(t.Sv,t.bv,e)}Ov(){return{x:this.xv(),y:this.Cv(),z:this.Gv(),u:this.Pv(),v:this.Rv()}}Dv(t){this.Mv(t.x),this.Iv(t.y),t.hasOwnProperty("z")&&this._v(t.z),this.Ev(t.u),this.Av(t.v)}Lv(){return this.gv}Bv(){return this.yv}Nv(){return this.wv}},I.ty.Wv=class{constructor(e,t,s){if(e<2||t<2)throw new Error("invalid mesh size");this.Vv=e,this.jv=t,this.Hv=s||null,this.Uv=[],this.zv=0,this.Jv=0,this.qv=1,this.Xv=1,this.$v=0,this.Yv=!1;const i=e-1,n=t-1;for(let s=0;s<t;++s){const r=[];for(let t=0;t<e;++t){const h=I.dr(I.ty.mv,this,t,s),o=t/i,a=s/n;h.vv(o,a,o,a),r.push(h)}this.Uv.push(r)}}pr(){I.jh(this.Uv)}Zv(){return this.Vv}Kv(){return this.jv}Qv(){return this.Hv}tx(){return this.Uv}Tv(){this.Yv=!0}ix(){if(this.Yv){let t=1/0,s=1/0,e=-1/0,i=-1/0,n=0;for(const r of this.Uv)for(const h of r){const o=h.xv(),a=h.Cv();t=Math.min(t,o),s=Math.min(s,a),e=Math.max(e,o),i=Math.max(i,a),n=Math.max(n,h.Gv())}this.zv=t,this.Jv=s,this.qv=e,this.Xv=i,this.$v=n,this.Yv=!1}}nx(){return this.ix(),this.zv}hx(){return this.ix(),this.Jv}ox(){return this.ix(),this.qv}ux(){return this.ix(),this.Xv}mx(){return this.ix(),this.$v}gx(){return 0<this.mx()}yx(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.Vv||s<0||s>=this.jv?null:this.Uv[s][t]}wx(t,e,i){const n=i instanceof I.Rect;if(t.Zv()!==this.Zv()||t.Kv()!==this.Kv())throw new Error("source mesh wrong size");const r=t.Uv,h=this.Uv;for(let t=0,s=h.length;t<s;++t){const o=r[t],a=h[t];for(let t=0,s=a.length;t<s;++t){const l=o[t],u=a[t];n?u.kv(l,e,i):u.Fv(l,e,i)}}}Sx(r){let h=this.Uv,o=h[0];for(let t=1,s=h.length;t<s;++t){let e=h[t],i=o[0],n=e[0];for(let t=1,s=e.length;t<s;++t){const a=o[t],l=e[t];de.set(i.Pv(),i.Rv(),a.Pv(),a.Rv(),l.Pv(),l.Rv(),n.Pv(),n.Rv()),r.TS(i.xv(),i.Cv(),i.Gv(),a.xv(),a.Cv(),a.Gv(),l.xv(),l.Cv(),l.Gv(),n.xv(),n.Cv(),n.Gv(),de),i=a,n=l}o=e}}bx(o,a){a=a||((t,s,e)=>[t,s,e]);let t=this.Uv,l=t[0];for(let r=1,h=t.length;r<h;++r){let e=t[r],i=l[0],n=e[0];for(let t=1,s=e.length;t<s;++t){const u=l[t],c=e[t],[f,d,p]=a(i.xv(),i.Cv(),i.Gv()),[m,g,y]=a(u.xv(),u.Cv(),u.Gv()),[w,S,b]=a(c.xv(),c.Cv(),c.Gv()),[v,x,M]=a(n.xv(),n.Cv(),n.Gv());o.MS(f,d,p,m,g,y),o.MS(f,d,p,w,S,b),o.MS(f,d,p,v,x,M),t===s-1&&o.MS(m,g,y,w,S,b),r===h-1&&o.MS(v,x,M,w,S,b),i=u,n=c}l=e}}vx(t){let e=.99999999,i=t.Wu(),n=[],r=this.Zv()-1,h=this.Kv()-1,o=1/r,a=1/h,l=r-1,u=h-1,c=i[0],f=i[1],d=I.br(Math.floor(c*r),0,l),p=I.br(Math.floor(f*h),0,u),m=!0,g=0,y=0,w=0,S=-1,b=()=>{c=I.br(I.Lt(c,g,w),0,1),f=I.br(I.Lt(f,y,w),0,1),n.push(c,f)};for(let t=0,s=i.length;t<s;t+=2){c=i[t],f=i[t+1],n.push(c,f),d=I.br(Math.floor(c*r),0,l),p=I.br(Math.floor(f*h),0,u);const v=(t+2)%s;for(g=i[v],y=i[1+v],S=-1;;){if(1e6<n.length)throw new Error("Too many mesh poly points");const x=d*o,M=p*a,T=(d+1)*o,C=(p+1)*a;if(m=I.Sh(c,f,x,M,T,M,T,C),0!==S&&0<=(w=I.wh(c,f,g,y,x,M,T,C,-.001))&&w<=e)b(),m=!m,S=0;else if(0<p&&2!==S&&0<=(w=I.wh(c,f,g,y,x,M,T,M,.001))&&w<=e)b(),p--,m=!1,S=4;else if(d<l&&3!==S&&0<=(w=I.wh(c,f,g,y,T,M,T,C,.001))&&w<=e)b(),d++,m=!1,S=1;else if(0<d&&1!==S&&0<=(w=I.wh(c,f,g,y,x,M,x,C,.001))&&w<=e)b(),d--,m=!0,S=3;else{if(!(p<u&&4!==S&&0<=(w=I.wh(c,f,g,y,x,C,T,C,.001))&&w<=e))break;b(),p++,m=!0,S=2}}}return I.dr(I.Ou,n)}xx(t,s){const e=this.Mx(t);this.Tx(e),s.ju(e)}Mx(t){const e=[],i=t.Wu();for(let t=0,s=i.length;t<s;t+=2){const n=i[t],r=i[t+1],[h,o]=this.Cx(n,r);e.push(h,o)}return e}Cx(t,s){const e=this.Zv()-1,i=this.Kv()-1,n=1/e,r=1/i,h=I.br(Math.floor(t*e),0,e-1),o=I.br(Math.floor(s*i),0,i-1),a=h*n,l=o*r,u=(h+1)*n,c=(o+1)*r,f=this.yx(h,o),d=this.yx(h+1,o+1),p=I.Sh(t,s,a,l,u,l,u,c),m=p?a+n:a,g=p?l:l+r,y=this.yx(h+(p?1:0),o+(p?0:1)),[w,S,b]=I.bh(t,s,a,l,m,g,u,c);return I.xh(w,S,b,f.xv(),f.Cv(),f.Gv(),y.xv(),y.Cv(),y.Gv(),d.xv(),d.Cv(),d.Gv())}Tx(e){let i=[],n=e[0],r=e[1],h=n-e.at(-2),o=r-e.at(-1);for(let t=0,s=e.length;t<s;t+=2){const a=(t+2)%s,l=e[a],u=e[1+a],c=l-n,f=u-r,d=Math.abs(c)<1e-7&&Math.abs(h)<1e-7&&Math.sign(f)===Math.sign(o),p=Math.abs(f)<1e-7&&Math.abs(o)<1e-7&&Math.sign(c)===Math.sign(h);(!d&&!p&&.001<Math.abs(c/h-f/o)||0==c&&0==f)&&i.push(n,r),n=l,r=u,h=c,o=f}6<=i.length&&i.length<e.length&&I.Jh(e,i)}Ov(){return{cols:this.Zv(),rows:this.Kv(),points:this.Uv.map(t=>t.map(t=>t.Ov()))}}Dv(t){const e=this.Zv(),i=this.Kv();if(t.cols!==e||t.rows!==i)throw new Error("mesh data wrong size");const n=t.points;for(let s=0;s<i;++s){const r=n[s];for(let t=0;t<e;++t){const h=this.yx(t,s);h.Dv(r[t])}}}}}{let d=function(t,s){let e,i,n,r;switch(t){case"rgba8":e=s.RGBA8,i=s.RGBA,n=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":e=s.RGB8,i=s.RGB,n=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":e=s.RGBA4,i=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":e=s.RGB5_A1,i=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":e=s.RGB565,i=s.RGB,n=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{Ix:e,Gx:i,format:n,type:r}};d;const pe=self.Bs,me=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),ge=new Set(["nearest","bilinear","trilinear"]),ye=new Set(["default","low","high"]),we=new Set(["clamp-to-edge","repeat","mirror-repeat"]),Se={_x:"clamp-to-edge",Px:"clamp-to-edge",Ex:"trilinear",Rx:0,Ax:"rgba8",kx:!0,Fx:"default",premultiplyAlpha:!0,Ox:!1,width:-1,height:-1},be={premultiplyAlpha:!0,flipY:!1},ve=new Set;pe.ty.Dx=class{constructor(t){this.vb=t,this.Lx=null,this.qm=0,this.Xm=0,this.Bx=!0,this.Nx="clamp-to-edge",this.Wx="clamp-to-edge",this.Vx="trilinear",this.jx=0,this.Hx="rgba8",this.Ux=!1,this.zx="default",this.f1=0}Jx(s,t){if(!("undefined"!=typeof HTMLImageElement&&s instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&s instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&s instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&s instanceof OffscreenCanvas||s instanceof ImageData||s instanceof ArrayBuffer||null===s))throw new Error("invalid texture source");if(t=Object.assign({},Se,t),this.Lx)throw new Error("already created texture");if(this.Nx=t._x,this.Wx=t.Px,this.Vx=t.Ex,this.jx=t.Rx,this.Hx=t.Ax,this.Ux=!!t.kx&&this.vb.lb(),this.zx=t.Fx,!we.has(this.Nx)||!we.has(this.Wx))throw new Error("invalid wrap mode");if(!ge.has(this.Vx))throw new Error("invalid sampling");if(!me.has(this.Hx))throw new Error("invalid pixel format");if(!ye.has(this.zx))throw new Error("invalid mipmap quality");if(this.Bx=!0,s instanceof ArrayBuffer||null===s||t.Ox){if(this.qm=t.width,this.Xm=t.height,s instanceof ArrayBuffer&&s.byteLength!==this.qm*this.Xm*4)throw new Error("ArrayBuffer wrong size")}else this.qm=s.width,this.Xm=s.height;if(this.qm<=0||this.Xm<=0)throw new Error("invalid texture data size");if(t.Ox){const o=pe.Oo(this.qm,this.Xm),a=o.getContext("2d");a.drawImage(s,0,0,this.qm,this.Xm),s=o}const e=pe.jr(this.qm)&&pe.jr(this.Xm),i=this.vb.qx();if(this.qm>i||this.Xm>i)throw new Error("texture data exceeds maximum texture size");const n=this.vb.Xx(),r=this.vb.$x(),h=(this.Lx=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.Lx),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),d(this.Hx,n));if(this.vb.Yx()||e||!this.Zx())if(2<=r){let t;t=this.Ux?Math.floor(Math.log2(Math.max(this.qm,this.Xm))+1):1,n.texStorage2D(n.TEXTURE_2D,t,h.Ix,this.qm,this.Xm),s instanceof ArrayBuffer?n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.qm,this.Xm,h.format,h.type,new Uint8Array(s)):null!==s&&n.texSubImage2D(n.TEXTURE_2D,0,0,0,h.format,h.type,s)}else s instanceof ArrayBuffer?n.texImage2D(n.TEXTURE_2D,0,h.Gx,this.qm,this.Xm,0,h.format,h.type,new Uint8Array(s)):null===s?n.texImage2D(n.TEXTURE_2D,0,h.Gx,this.qm,this.Xm,0,h.format,h.type,null):n.texImage2D(n.TEXTURE_2D,0,h.Gx,h.format,h.type,s);else{if(null===s)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if((s=s instanceof ArrayBuffer?new ImageData(new Uint8ClampedArray(s),this.qm,this.Xm):s)instanceof ImageData){const c=pe.Oo(this.qm,this.Xm),f=c.getContext("2d");f.putImageData(s,0,0),s=c}const l=pe.Oo(pe.Hr(this.qm),pe.Hr(this.Xm)),u=l.getContext("2d");u.imageSmoothingEnabled="nearest"!==this.Vx,u.drawImage(s,0,0,this.qm,this.Xm,0,0,l.width,l.height),n.texImage2D(n.TEXTURE_2D,0,h.Gx,h.format,h.type,l)}null!==s&&this.Kx(n),n.bindTexture(n.TEXTURE_2D,null),this.vb.Qx(),this.f1=1,ve.add(this)}t2(t,s,e){if(e=Object.assign({},Se,e),this.Lx)throw new Error("already created texture");if(this.Nx=e._x,this.Wx=e.Px,this.Vx=e.Ex,this.Hx=e.Ax,this.Ux=!!e.kx&&this.vb.lb(),this.zx=e.Fx,!we.has(this.Nx)||!we.has(this.Wx))throw new Error("invalid wrap mode");if(!ge.has(this.Vx))throw new Error("invalid sampling");if(!me.has(this.Hx))throw new Error("invalid pixel format");if(!ye.has(this.zx))throw new Error("invalid mipmap quality");this.Bx=!1,this.qm=Math.floor(t),this.Xm=Math.floor(s);const i=pe.jr(this.qm)&&pe.jr(this.Xm),n=this.vb.qx();if(this.qm<=0||this.Xm<=0)throw new Error("invalid texture size");if(this.qm>n||this.Xm>n)throw new Error("texture exceeds maximum texture size");if(!this.vb.Yx()&&this.Zx()&&!i)throw new Error("non-power-of-two tiled textures not supported");const r=this.vb.Xx(),h=this.vb.$x(),o=(this.Lx=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.Lx),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),d(this.Hx,r)),a=2<=h?o.Ix:o.Gx;r.texImage2D(r.TEXTURE_2D,0,a,this.qm,this.Xm,0,o.format,o.type,null),this.Kx(r),r.bindTexture(r.TEXTURE_2D,null),this.vb.Qx(),this.f1=1,ve.add(this)}s2(t){if("default"===this.zx)return this.Bx?t.NICEST:t.FASTEST;if("low"===this.zx)return t.FASTEST;if("high"===this.zx)return t.NICEST;throw new Error("invalid mipmap quality")}Zx(){return"clamp-to-edge"!==this.Nx||"clamp-to-edge"!==this.Wx}e2(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}Kx(t){const s=pe.jr(this.qm)&&pe.jr(this.Xm);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.e2(t,this.Nx)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.e2(t,this.Wx)),"nearest"===this.Vx)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.Ux=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.vb.Yx())&&this.Ux){t.hint(t.GENERATE_MIPMAP_HINT,this.s2(t)),t.generateMipmap(t.TEXTURE_2D);const i="trilinear"===this.Vx&&!this.vb.cb();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,i?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.Ux=!1;const e=this.vb.i2();e&&0<this.jx&&"nearest"!==this.Vx&&t.texParameterf(t.TEXTURE_2D,e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.jx,this.vb.n2()))}h2(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.Lx||this.f1<=0)throw new Error("texture not created");if(this.Bx)throw new Error("cannot update static texture");s=Object.assign({},be,s);const e=t.width||t.videoWidth,i=t.height||t.videoHeight,n=this.vb.$x(),r=this.vb.Xx(),h=(r.bindTexture(r.TEXTURE_2D,this.Lx),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY),d(this.Hx,r)),o=2<=n?h.Ix:h.Gx;try{if(this.qm===e&&this.Xm===i){const a=pe.jr(this.qm)&&pe.jr(this.Xm);r.texSubImage2D(r.TEXTURE_2D,0,0,0,h.format,h.type,t),(a||this.vb.Yx())&&this.Ux&&(r.hint(r.GENERATE_MIPMAP_HINT,this.s2(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.qm=e,this.Xm=i;const l=pe.jr(this.qm)&&pe.jr(this.Xm);if(!this.vb.Yx()&&this.Zx()&&!l)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,h.format,h.type,t),(l||this.vb.Yx())&&this.Ux&&(r.hint(r.GENERATE_MIPMAP_HINT,this.s2(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.vb.Qx()}o2(){if(0<this.f1)throw new Error("texture still has references");if(!this.Lx)throw new Error("already deleted texture");ve.delete(this);const t=this.vb.Xx();t.deleteTexture(this.Lx),this.Lx=null}a2(){return!!this.Lx}l2(){return this.Lx}jb(){return this.vb}u2(){this.f1++}c2(){if(this.f1<=0)throw new Error("no more references");this.f1--}f2(){return this.f1}am(){return this.qm}vm(){return this.Xm}d2(){return this.Bx}m2(){let t=this.qm*this.Xm;switch(this.Hx){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.Ux&&(t+=Math.floor(t/3)),t}static dv(){ve.clear()}static g2(){return ve.values()}}}{const xe=self.Bs,Me=self.vs,Cn=Me.Ps,Tn=Me.Cs,Te=new Set(["nearest","bilinear","trilinear"]),Ce={Ex:"trilinear",alpha:!0,depth:!1,w2:!0,S2:!0,b2:0},Ie=new Set;xe.ty.v2=class{constructor(t){this.vb=t,this.M2=null,this.T2=null,this.Lx=null,this.C2=null,this.qm=0,this.Xm=0,this.I2=!0,this.Vx="trilinear",this.G2=!0,this._2=!1,this.P2=!0,this.E2=0,this.R2=Tn.create(),this.A2=0,this.F2=0,this.O2=0}D2(t,s,e){e=Object.assign({},Ce,e);const i=this.vb.$x();if(this.Lx||this.C2)throw new Error("already created render target");if(this.Vx=e.Ex,this.G2=!!e.alpha,this._2=!!e.depth,this.P2=!!e.w2,this.I2=!!e.S2,this.E2=e.b2,!Te.has(this.Vx))throw new Error("invalid sampling");if(0<this.E2&&(i<2||this.P2))throw new Error("invalid use of multisampling");if(i<2&&(this.P2=!0),this.qm=t,this.Xm=s,this.qm<=0||this.Xm<=0)throw new Error("invalid render target size");this.L2();const n=this.vb.Xx();if(this.M2=n.createFramebuffer(),this._2&&(this.T2=n.createFramebuffer()),this.P2){this.Lx=this.vb.B2(this.qm,this.Xm,{Ex:this.Vx,Ax:this.G2?"rgba8":"rgb8",kx:!1});const h=this.Lx.l2();n.bindFramebuffer(n.FRAMEBUFFER,this.M2),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,h,0),this._2&&(n.bindFramebuffer(n.FRAMEBUFFER,this.T2),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,h,0))}else{this.C2=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this.C2);const o=this.G2?n.RGBA8:n.RGB8;if(0<this.E2){const a=n.getInternalformatParameter(n.RENDERBUFFER,o,n.SAMPLES);if(a&&a[0]){const l=a[0];this.E2>l&&(this.E2=l)}else this.E2=0}0===this.E2?n.renderbufferStorage(n.RENDERBUFFER,o,this.qm,this.Xm):n.renderbufferStorageMultisample(n.RENDERBUFFER,this.E2,o,this.qm,this.Xm),n.bindFramebuffer(n.FRAMEBUFFER,this.M2),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.C2),this._2&&(n.bindFramebuffer(n.FRAMEBUFFER,this.T2),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.C2)),n.bindRenderbuffer(n.RENDERBUFFER,null)}const r=this.vb.N2();this._2&&r&&(n.bindFramebuffer(n.FRAMEBUFFER,this.M2),this.vb.W2()?n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,r,0):n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r)),n.bindFramebuffer(n.FRAMEBUFFER,null),Ie.add(this)}V2(t,s){if(this.qm!==t||this.Xm!==s){this.qm=t,this.Xm=s,this.L2();const e=this.vb.Xx(),i=(e.bindFramebuffer(e.FRAMEBUFFER,this.M2),this.Lx?this.Lx.h2(new ImageData(this.qm,this.Xm)):(e.bindRenderbuffer(e.RENDERBUFFER,this.C2),e.renderbufferStorage(e.RENDERBUFFER,this.G2?e.RGBA8:e.RGB8,this.qm,this.Xm),e.bindRenderbuffer(e.RENDERBUFFER,null)),this.vb.N2());this._2&&i&&(this.vb.W2()?e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,i,0):e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,i)),e.bindFramebuffer(e.FRAMEBUFFER,null)}}o2(){if(!this.Lx&&!this.C2)throw new Error("already deleted render target");Ie.delete(this);const t=this.vb.Xx(),s=(this.Lx?(t.bindFramebuffer(t.FRAMEBUFFER,this.M2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this._2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.T2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.vb.j2(this.Lx),this.Lx=null):this.C2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.M2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this._2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.T2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.C2),this.C2=null),t.bindFramebuffer(t.FRAMEBUFFER,null),2<=this.vb.$x()&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.M2),this._2&&t.deleteFramebuffer(this.T2),this.vb.H2());s.U2=null,this.M2=s.z2=null}L2(){this.vb.Pw(this.R2,this.qm/this.Xm),this.A2=this.vb.Cw(),this.F2=this.vb.bw(),this.O2=this.vb.Mw()}J2(){return this.M2}q2(){return this.T2}jb(){return this.vb}X2(){return this.Lx}Y2(){return this.vb.Cw()===this.A2&&this.vb.bw()===this.F2&&this.vb.Mw()===this.O2||this.L2(),this.R2}Z2(){return"nearest"!==this.Vx}K2(){return this.G2}Q2(){return this.P2}tM(){return this._2}am(){return this.qm}vm(){return this.Xm}sM(){return this.I2}eM(){return this.E2}iM(){const t={Ex:this.Vx,alpha:this.G2,w2:this.P2};return this.I2||(t.width=this.qm,t.height=this.Xm),t}nM(t){return"nearest"!==(t=Object.assign({},Ce,t)).Ex===this.Z2()&&!!t.alpha===this.K2()&&!!t.depth===this.tM()&&!(2<=this.vb.$x()&&!!t.w2!==this.Q2())&&("number"==typeof t.width||"number"==typeof t.height?!this.sM()&&this.am()===Math.floor(t.width)&&this.vm()===Math.floor(t.height):this.sM())}rM(){return this.Lx?this.Lx.l2():null}m2(){return this.Lx?this.Lx.m2():this.qm*this.Xm*(this.G2?4:3)}static async hM(t,s){const e=await t.oM(s,!0);return xe.Bo(e)}static dv(){Ie.clear()}static aM(){return Ie.values()}static lM(t,s){for(const e of Ie)e.sM()&&e.V2(t,s)}}}{const m=self.Bs,Ge=self.vs,Cn=Ge.Ps,Tn=Ge.Cs,_e=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);m.ty.uM=class extends m.ty.bb{static async cM(t,s){const e=t.Xx(),i=s.src,n=s.fM,r=s.name,h=e.createShader(e.FRAGMENT_SHADER),o=(e.shaderSource(h,i),e.compileShader(h),e.createShader(e.VERTEX_SHADER)),a=(e.shaderSource(o,n),e.compileShader(o),e.createProgram()),l=(e.attachShader(a,h),e.attachShader(a,o),e.bindAttribLocation(a,0,"aPos"),e.bindAttribLocation(a,1,"aTex"),e.bindAttribLocation(a,2,"aPoints"),e.linkProgram(a),t.dM());if(l?await t.pM(()=>e.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await m.Dh(5),!e.getShaderParameter(h,e.COMPILE_STATUS)){const c=e.getShaderInfoLog(h);throw e.deleteShader(h),e.deleteShader(o),e.deleteProgram(a),new Error("Error compiling fragment shader: "+c)}if(!e.getShaderParameter(o,e.COMPILE_STATUS)){const f=e.getShaderInfoLog(o);throw e.deleteShader(h),e.deleteShader(o),e.deleteProgram(a),new Error("Error compiling vertex shader: "+f)}if(!e.getProgramParameter(a,e.LINK_STATUS)){const d=e.getProgramInfoLog(a);throw e.deleteShader(h),e.deleteShader(o),e.deleteProgram(a),new Error("Error linking shader program: "+d)}const u=m.z1(e.getProgramInfoLog(a)||"").trim();return u&&!m.j1(u)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,u),e.deleteShader(h),e.deleteShader(o),a}static async mM(t,s){const e=await m.ty.uM.cM(t,s);return new m.ty.uM(t,e,s)}constructor(t,s,e){super(t,e);const i=t.Xx(),n=t.H2(),r=(t.rb(),i.useProgram(s),this.gM=i,this.nv=s,this.yM="<default-device-transform>"===e.name,i.getAttribLocation(s,"aPos")),h=i.getAttribLocation(s,"aTex"),o=(this.wM=i.getAttribLocation(s,"aPoints"),-1!==r&&(i.bindBuffer(i.ARRAY_BUFFER,t.SM),i.vertexAttribPointer(r,t.ib(),i.FLOAT,!1,0,0),i.enableVertexAttribArray(r)),-1!==h&&(i.bindBuffer(i.ARRAY_BUFFER,t.bM),i.vertexAttribPointer(h,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(h)),-1!==this.wM&&(i.bindBuffer(i.ARRAY_BUFFER,t.vM),i.vertexAttribPointer(this.wM,4,i.FLOAT,!1,0,0),i.enableVertexAttribArray(this.wM)),i.bindBuffer(i.ARRAY_BUFFER,null),this.xM=new m.ty.MM(this,"matP","mat4"),this.TM=new m.ty.MM(this,"matMV","mat4"),this.CM=new m.ty.MM(this,"color","vec4"),this.IM=new m.ty.MM(this,"samplerFront","sampler"),this.GM=new m.ty.MM(this,"pointTexStart","vec2"),this._M=new m.ty.MM(this,"pointTexEnd","vec2"),this.PM=new m.ty.MM(this,"zElevation","float"),this.EM=new m.ty.MM(this,"tileSize","vec2"),this.RM=new m.ty.MM(this,"tileSpacing","vec2"),this.AM=new m.ty.MM(this,"color2_","vec4"),this.kM=new m.ty.MM(this,"outlineThickness","float"),this.FM=new m.ty.MM(this,"samplerBack","sampler"),this.OM=new m.ty.MM(this,"samplerDepth","sampler"),this.DM=new m.ty.MM(this,"destStart","vec2"),this.LM=new m.ty.MM(this,"destEnd","vec2"),this.BM=new m.ty.MM(this,"srcStart","vec2"),this.NM=new m.ty.MM(this,"srcEnd","vec2"),this.WM=new m.ty.MM(this,"srcOriginStart","vec2"),this.VM=new m.ty.MM(this,"srcOriginEnd","vec2"),this.jM=new m.ty.MM(this,"pixelSize","vec2"),this.HM=new m.ty.MM(this,"seconds","float"),this.UM=new m.ty.MM(this,"devicePixelRatio","float"),this.zM=new m.ty.MM(this,"layerScale","float"),this.JM=new m.ty.MM(this,"layerAngle","float"),this.qM=new m.ty.MM(this,"layoutStart","vec2"),this.XM=new m.ty.MM(this,"layoutEnd","vec2"),this.$M=new m.ty.MM(this,"zNear","float"),this.YM=new m.ty.MM(this,"zFar","float"),this.ZM=!!(this.jM.KM()||this.HM.KM()||this.FM.KM()||this.DM.KM()||this.LM.KM()||this.BM.KM()||this.NM.KM()||this.WM.KM()||this.VM.KM()||this.UM.KM()||this.zM.KM()||this.JM.KM()||this.qM.KM()||this.XM.KM()),e.parameters||[]);this.QM=[],this.Wb=this.jM.KM()||this.BM.KM()||this.NM.KM()||this.WM.KM()||this.VM.KM(),this.tT=!1,this.sT=!1,this.CM.eT(1,1,1,1),this.AM.eT(1,1,1,1),this.IM.iT(0),this.FM.iT(1),this.OM.iT(2),this.GM.nT(0,0),this._M.nT(1,1),this.PM.rT(0),this.EM.nT(0,0),this.RM.nT(0,0),this.DM.nT(0,0),this.LM.nT(1,1),this.BM.nT(0,0),this.NM.nT(0,0),this.WM.nT(0,0),this.VM.nT(0,0),this.jM.nT(0,0),this.UM.rT(1),this.$M.rT(t.bw()),this.YM.rT(t.Mw()),this.zM.rT(1),this.JM.rT(0),this.HM.rT(0),this.qM.nT(0,0),this.XM.nT(0,0),this.kM.rT(1);for(const l of o){const u=l[0],c=l[2],f=new m.ty.MM(this,u,c);"color"===c?f.hT(0,0,0):f.rT(0),this.QM.push(f)}this.yM?this.oT(n.aT):(this.lT(n.aT,!0),this.uT(n.cT,!0));const a=n.fT;i.useProgram(a?a.nv:null)}pr(){this.gM.deleteProgram(this.nv),this.nv=null,this.vb.Ow(this),this.gM=null,super.pr()}dT(){return this.gM}pT(){return this.nv}mT(){return this.QM.length}gT(t){return t<0||t>=this.QM.length?null:this.QM[t].yT()}wT(e){for(let t=0,s=e.length;t<s;++t)if(!this.QM[t].ST(e[t]))return!1;return!0}bT(e){for(let t=0,s=e.length;t<s;++t)this.QM[t].vT(e[t])}xT(t,s,e,i,n,r,h,o,a,l){return!this.FM.KM()&&!(this.jM.KM()&&!this.jM.MT(n,r)||this.DM.KM()&&!this.DM.MT(t.Cl(),t.Il())||this.LM.KM()&&!this.LM.MT(t.Gl(),t._l())||this.UM.KM()&&!this.UM.TT(h)||this.zM.KM()&&!this.zM.TT(o)||this.JM.KM()&&!this.JM.TT(a)||this.BM.KM()&&!this.BM.MT(s.Cl(),s.Il())||this.NM.KM()&&!this.NM.MT(s.Gl(),s._l())||this.WM.KM()&&!this.WM.MT(e.Cl(),e.Il())||this.VM.KM()&&!this.VM.MT(e.Gl(),e._l())||this.qM.KM()&&!this.qM.MT(i.Cl(),i.Il())||this.XM.KM()&&!this.XM.MT(i.Il(),i._l())||this.HM.KM()&&!this.HM.TT(l))}CT(t,s,e,i,n,r,h,o,a,l){this.FM.KM()||(this.jM.KM()&&this.jM.IT(n,r),this.DM.KM()&&this.DM.IT(t.Cl(),t.Il()),this.LM.KM()&&this.LM.IT(t.Gl(),t._l()),this.UM.KM()&&this.UM.GT(h),this.zM.KM()&&this.zM.GT(o),this.JM.KM()&&this.JM.GT(a),this.BM.KM()&&this.BM.IT(s.Cl(),s.Il()),this.NM.KM()&&this.NM.IT(s.Gl(),s._l()),this.WM.KM()&&this.WM.IT(e.Cl(),e.Il()),this.VM.KM()&&this.VM.IT(e.Gl(),e._l()),this.qM.KM()&&this.qM.IT(i.Cl(),i.Il()),this.XM.KM()&&this.XM.IT(i.Il(),i._l()),this.HM.KM()&&this.HM.GT(l))}lT(t,s){this.tT&&!s||this.yM||(this.xM.KM()&&this.xM._T(t),this.tT=!0)}PT(){this.tT=!1}uT(t,s){this.sT&&!s||this.yM||(this.TM.KM()&&this.TM._T(t),this.sT=!0)}ET(){this.sT=!1}oT(t){if(!this.yM)throw new Error("not device transform shader");this.xM._T(t);const s=this.vb,e=s.am()/2,i=s.vm()/2,n=s.kw(e,i,s.mw(s.vm()),e,i,0,s.vm());this.TM._T(n)}RT(t){this.CM.KM()&&this.CM.AT(t[0],t[1],t[2],t[3])}static kT(){return _e}static FT(t){const s=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static OT(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static DT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static LT(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static BT(){return["#version 300 es","in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static NT(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static WT(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static VT(){return["#version 300 es","in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static jT(t,s,e){let i="";return 2<=t?i="#version 300 es\n":(s&&(i="#extension GL_EXT_frag_depth : enable\n"),e&&(i+="#extension GL_EXT_shader_texture_lod : enable\n#extension GL_OES_standard_derivatives : enable\n")),i+`
#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
${2<=t?"in":"varying"} vec2 vTex;
${2<=t?"out lowp vec4 outColor;":""}
uniform lowp vec4 color;
uniform lowp sampler2D samplerFront;
uniform vec2 pixelSize;

uniform vec2 tileSize;
uniform vec2 tileSpacing;
uniform float outlineThickness;

const float PI = 3.1415926;

lowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)
{
	return (a + b + (a - b) * cos(x * PI)) / 2.0;
}

vec3 randVec3(vec2 seed)
{
	return vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),
				fract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),
				fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));
}

lowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)
{
	vec2 posRandom = tileSize;
	float angleRandom = outlineThickness;
	
	vec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;
	
	float angle = angleRandom * rand.z * PI;
	float sin_a = sin(angle);
	float cos_a = cos(angle);
	float aspect = pixelSize.x / pixelSize.y;

	vec2 mid = tile + vec2(0.5, 0.5);
	vec2 dp = uv - mid;
	dp.x /= aspect;
	vec2 r = vec2(dp.x * cos_a - dp.y * sin_a,
				  dp.y * cos_a + dp.x * sin_a);
	r.x *= aspect;

	vec2 p = mid + r + (posRandom * rand.xy / 2.0);
	
	${2<=t?"return textureGrad(samplerFront, p, ddx, ddy);":""}
	${t<2&&e?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}
	${t<2&&!e?"return texture2D(samplerFront, p);":""}
}

void main(void) {
	
	${t<2?"lowp vec4 outColor;":""}
	
	float blendMarginX = tileSpacing.x;
	float blendMarginY = tileSpacing.y;
	
	vec2 tile = floor(vTex);
	vec2 tex = fract(vTex);
	vec2 ddx = ${2<=t||e?"dFdx(vTex)":"vec2(0.0, 0.0)"};
	vec2 ddy = ${2<=t||e?"dFdy(vTex)":"vec2(0.0, 0.0)"};
	
	vec4 curTile = sampleTile(tile, vTex, ddx, ddy);
	
	bool inLeftMargin = (tex.x < blendMarginX);
	bool inRightMargin = (tex.x > 1.0 - blendMarginX);
	bool inTopMargin = (tex.y < blendMarginY);
	bool inBottomMargin = (tex.y > 1.0 - blendMarginY);
	
	if (inLeftMargin)
	{
		lowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);
		float leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;
		lowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);
			
			outColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);
			
			outColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = leftMixedTile;
		}
	}
	else if (inRightMargin)
	{
		lowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);
		float rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);
		lowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);
			
			outColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);
			
			outColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = rightMixedTile;
		}
	}
	else if (inTopMargin)
	{
		lowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
		outColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
	}
	else if (inBottomMargin)
	{
		lowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
		outColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
	}
	else
	{
		outColor = curTile;
	}
	
	outColor *= color;
	${t<2?"gl_FragColor = outColor;":""}
	${2<=t?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
	${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
}
`}static HT(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static UT(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static zT(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static JT(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static qT(){return["#version 300 es","uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static XT(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static $T(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static YT(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {",`	highmedp float grad = vTex.x / (1.0 - vTex.y);`,`	gl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);`,"}"].join("\n")}static ZT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static KT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static QT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static tC(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static sC(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const Pe=self.Bs,Ee=self.vs,Tn=Ee.Cs,Re=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);Pe.ty.MM=class{constructor(t,s,e){if(!Re.has(e))throw new Error("invalid uniform type");this.Hv=t,this.gM=this.Hv.dT(),this.yr=s,this.wf=e,this.eC="color"===this.wf,this.iC=this.gM.getUniformLocation(this.Hv.pT(),s),this.nC=!!this.iC;const i=Re.get(e);this.rC=new Float32Array(i),this.hC=new Float32Array(i)}pr(){this.Hv=null,this.gM=null,this.iC=null}KM(){return this.nC}yT(){return this.wf}oC(){return this.eC}rT(t){this.KM()&&(this.rC[0]=t,this.hC.set(this.rC),this.gM.uniform1f(this.iC,t))}iT(t){this.KM()&&(this.rC[0]=t,this.hC.set(this.rC),this.gM.uniform1i(this.iC,t))}nT(t,s){this.KM()&&(this.rC[0]=t,this.rC[1]=s,this.hC.set(this.rC),this.gM.uniform2f(this.iC,t,s))}hT(t,s,e){this.KM()&&(this.rC[0]=t,this.rC[1]=s,this.rC[2]=e,this.hC.set(this.rC),this.gM.uniform3f(this.iC,t,s,e))}eT(t,s,e,i){this.KM()&&(this.rC[0]=t,this.rC[1]=s,this.rC[2]=e,this.rC[3]=i,this.hC.set(this.rC),this.gM.uniform4f(this.iC,t,s,e,i))}aC(t){t=Math.fround(t);const s=this.rC;s[0]!==t&&(s[0]=t,this.gM.uniform1f(this.iC,t))}lC(t){const s=this.rC;s[0]!==t&&this.gM.uniform1i(this.iC,s[0]=t)}uC(t,s){t=Math.fround(t),s=Math.fround(s);const e=this.rC;e[0]===t&&e[1]===s||(e[0]=t,e[1]=s,this.gM.uniform2f(this.iC,t,s))}cC(t,s,e){t=Math.fround(t),s=Math.fround(s),e=Math.fround(e);const i=this.rC;i[0]===t&&i[1]===s&&i[2]===e||(i[0]=t,i[1]=s,i[2]=e,this.gM.uniform3f(this.iC,t,s,e))}AT(t,s,e,i){t=Math.fround(t),s=Math.fround(s),e=Math.fround(e),i=Math.fround(i);const n=this.rC;n[0]===t&&n[1]===s&&n[2]===e&&n[3]===i||(n[0]=t,n[1]=s,n[2]=e,n[3]=i,this.gM.uniform4f(this.iC,t,s,e,i))}_T(t){const s=this.rC;Tn.V(s,t)||(Pe.Wh(s,t,0),this.gM.uniformMatrix4fv(this.iC,!1,t))}ST(t){const s=this.hC;return this.oC()?s[0]===Math.fround(t.ua())&&s[1]===Math.fround(t.ca())&&s[2]===Math.fround(t.fa()):s[0]===Math.fround(t)}vT(t){const s=this.hC;this.oC()?(s[0]=t.ua(),s[1]=t.ca(),s[2]=t.fa()):s[0]=t}TT(t){return this.hC[0]===Math.fround(t)}MT(t,s){const e=this.hC;return e[0]===Math.fround(t)&&e[1]===Math.fround(s)}GT(t){this.hC[0]=t}IT(t,s){const e=this.hC;e[0]=t,e[1]=s}}}{const Ae=self.Bs,ke=self.vs,Hn=ke.Es,Tn=ke.Cs;Ae.ty.fC=class{constructor(t){this.renderer=t,this.cT=Tn.create(),this.aT=Tn.create(),this.U2=null,this.z2=null,this.dC=!1,this.pC=Hn._(1,1,1,1),this.fT=null,this.mC=new Ae.Rect,this.clearColor=Ae.dr(Ae.qo,0,0,0,0)}},Ae.ty.gC=class{constructor(t){const s=new ArrayBuffer(96);this.wf=0,this.yC=t,this.gM=t.renderer.Xx(),this.wC=0,this.SC=0,this.bC=null,this.vC=new Float32Array(s,0,16),this.xC=new Float32Array(s,64,4),this.MC=new Float32Array(s,80,4),this.TC=[]}CC(t,s){this.wf=1,this.wC=t,this.SC=s}IC(){const t=this.gM;t.drawElements(t.TRIANGLES,this.SC,t.UNSIGNED_SHORT,this.wC)}GC(t){this.wf=2,this.bC=t}_C(){const t=this.gM,s=this.bC;t.bindTexture(t.TEXTURE_2D,s?s.l2():null)}PC(t){this.wf=3,t.ma(this.xC,0)}EC(){const t=this.xC,s=this.yC;Hn.G(s.pC,t),s.fT.RT(t)}RC(t){this.wf=21,t.ma(this.xC,0)}AC(){const t=this.xC,s=this.yC.fT;s.AM.KM()&&s.AM.AT(t[0],t[1],t[2],t[3])}kC(t,s){this.wf=4,this.wC=t,this.SC=s}FC(){this.gM.blendFunc(this.wC,this.SC)}OC(t,s,e,i){this.wf=5;const n=this.xC;n[0]=t,n[1]=s,n[2]=e,n[3]=i}DC(){const t=this.xC;this.gM.viewport(t[0],t[1],t[2],t[3])}LC(t){this.wf=6,Tn.G(this.vC,t)}BC(){const t=this.yC,e=t.renderer.Ay,i=t.fT,n=this.vC;for(let t=0,s=e.length;t<s;++t){const r=e[t];r===i?r.lT(n,!0):r.PT()}Tn.G(t.aT,n)}NC(t){this.wf=7,Tn.G(this.vC,t)}WC(){const t=this.yC,e=t.renderer.Ay,i=t.fT,n=this.vC;for(let t=0,s=e.length;t<s;++t){const r=e[t];r===i?r.uT(n,!0):r.ET()}Tn.G(t.cT,n)}VC(t){this.wf=8,this.bC=t}jC(){const t=this.gM,s=this.bC,e=this.yC;s?(e.U2=s.J2(),e.z2=s.q2(),e.dC&&e.z2?t.bindFramebuffer(t.FRAMEBUFFER,e.z2):t.bindFramebuffer(t.FRAMEBUFFER,e.U2)):(e.U2=null,e.z2=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}HC(t){this.wf=9,t.ma(this.vC,0)}UC(t,s,e,i){this.wf=9;const n=this.vC;n[0]=t,n[1]=s,n[2]=e,n[3]=i}zC(){const t=this.gM,s=this.vC,e=this.yC,i=e.clearColor,n=s[0],r=s[1],h=s[2],o=s[3];i.Sa(n,r,h,o)||(t.clearColor(n,r,h,o),i.Ko(n,r,h,o)),t.clear(t.COLOR_BUFFER_BIT)}JC(t){this.wf=15,t.ma(this.vC,0)}qC(){const t=this.vC;this.yC.mC.set(t[0],t[1],t[2],t[3])}XC(t,s){this.wf=10,this.wC=t,this.SC=1,this.vC[0]=s}$C(){const t=this.gM,s=this.yC,e=s.renderer,i=e.Oy,n=(t.useProgram(i.nv),i.lT(s.aT,!1),i.uT(s.cT,!1),s.mC),r=(i.GM.KM()&&i.GM.uC(n.Cl(),n.Il()),i._M.KM()&&i._M.uC(n.Gl(),n._l()),this.vC[0]);if(i.PM.KM()&&i.PM.aC(r),i.CM.KM()){const h=s.pC;i.CM.AT(h[0],h[1],h[2],h[3])}t.drawArrays(t.POINTS,this.wC/4,this.SC),t.useProgram(s.fT.nv)}YC(t){this.wf=11,this.bC=t}ZC(){const t=this.gM,s=this.yC,e=this.bC;if(s.fT=e,t.useProgram(e.nv),e.lT(s.aT,!1),e.uT(s.cT,!1),e.CM.KM()){const i=s.pC;e.CM.AT(i[0],i[1],i[2],i[3])}}KC(){this.wf=12}QC(){const t=this.yC.fT,s=this.gM,e=this.vC,i=this.xC,n=this.MC;if(t.FM.KM()){const r=this.yC.renderer,h=this.bC;r.tI!==h&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,h?h.l2():null),r.tI=h,s.activeTexture(s.TEXTURE0))}t.jM.KM()&&t.jM.uC(e[0],e[1]),t.DM.KM()&&t.DM.uC(e[2],e[3]),t.LM.KM()&&t.LM.uC(e[4],e[5]),t.UM.KM()&&t.UM.aC(this.SC),t.zM.KM()&&t.zM.aC(e[6]),t.JM.KM()&&t.JM.aC(e[7]),t.BM.KM()&&t.BM.uC(e[12],e[13]),t.NM.KM()&&t.NM.uC(e[14],e[15]),t.WM.KM()&&t.WM.uC(n[0],n[1]),t.VM.KM()&&t.VM.uC(n[2],n[3]),t.qM.KM()&&t.qM.uC(i[0],i[1]),t.XM.KM()&&t.XM.uC(i[2],i[3]),t.HM.KM()&&t.HM.aC(this.wC)}sI(){this.wf=13}eI(){const t=this.yC.fT,e=t.QM,i=this.TC;for(let t=0,s=e.length;t<s;++t){const n=e[t],r=i[t];n.oC()?n.cC(r.ua(),r.ca(),r.fa()):n.aC(r)}}iI(t){this.wf=14,this.bC=t}nI(){const t=this.gM,s=this.bC,e=this.yC.U2;s!==e&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==e&&t.bindFramebuffer(t.FRAMEBUFFER,e)}rI(t,s,e){this.wf=17;const i=this.vC,n=this.yC.renderer,r=(i[0]=t.am(),i[1]=t.vm(),i[2]=(s||n).am(),i[3]=(s||n).vm(),i[4]=t.Z2()?1:0,i[5]="stretch"===e,this.TC);Ae.jh(r),r.push(t.J2()),r.push(s?s.J2():null)}hI(){const t=this.vC,s=this.TC,e=this.gM,i=t[0],n=t[1],r=t[2],h=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(e.bindFramebuffer(e.READ_FRAMEBUFFER,l),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,u),a)e.blitFramebuffer(0,0,i,n,0,0,r,h,e.COLOR_BUFFER_BIT,o?e.LINEAR:e.NEAREST);else{const c=Math.min(i,r),f=Math.min(n,h),d=Math.max(n-h,0),p=Math.max(h-n,0);e.blitFramebuffer(0,d,c,f+d,0,p,c,f+p,e.COLOR_BUFFER_BIT,e.NEAREST)}}oI(t){this.wf=18,this.bC=t}aI(){this.bC.lI(),this.bC=null}uI(t){this.wf=19,this.bC=t}cI(){this.bC.fI(),this.bC=null}dI(t,s,e){this.wf=20;const i=this.vC;i[0]=t,i[1]=s,i[2]=e}pI(){const t=this.yC.fT,s=this.vC;t.jM.KM()&&t.jM.uC(s[0],s[1]),t.kM.KM()&&t.kM.aC(s[2])}mI(t,s,e,i,n,r,h){this.wf=16;const o=this.vC;t.ma(o,0),o[4]=1/s,o[5]=1/e,o[6]=i/s,o[7]=n/e,o[8]=r/s,o[9]=h/e}gI(){const t=this.yC.fT,s=this.vC;t.BM.KM()&&t.BM.uC(s[0],s[1]),t.jM.KM()&&t.jM.uC(s[4],s[5]),t.EM.KM()&&t.EM.uC(s[6],s[7]),t.RM.KM()&&t.RM.uC(s[8],s[9])}yI(t,s,e,i,n,r,h){this.wf=29;const o=this.vC;o[0]=1/t,o[1]=1/s,o[2]=e,o[3]=i,o[4]=n,o[5]=r,o[6]=h}wI(){const t=this.yC.fT,s=this.vC;t.jM.KM()&&t.jM.uC(s[0],s[1]),t.EM.KM()&&t.EM.uC(s[2],s[3]),t.kM.KM()&&t.kM.aC(s[4]),t.RM.KM()&&t.RM.uC(s[5],s[6])}SI(t){this.wf=22,this.wC=t?1:0}bI(){const t=this.gM,s=0!==this.wC;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}vI(t){this.wf=23,this.wC=t?1:0}xI(){const t=this.gM;0===this.wC?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}MI(t){this.wf=24,this.wC=t?1:0}TI(){const t=this.gM,s=this.yC,e=s.renderer,i=0!==this.wC;s.dC=i,t.activeTexture(t.TEXTURE2),i?(s.z2&&t.bindFramebuffer(t.FRAMEBUFFER,s.z2),t.bindTexture(t.TEXTURE_2D,e.N2())):(t.bindTexture(t.TEXTURE_2D,null),s.z2&&t.bindFramebuffer(t.FRAMEBUFFER,s.U2)),t.activeTexture(t.TEXTURE0)}CI(){this.wf=25}II(){const t=this.gM;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}GI(){this.wf=26}_I(){const t=this.gM;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}EI(){this.wf=27}RI(){const t=this.gM;t.disable(t.STENCIL_TEST)}AI(t,s,e,i,n){this.wf=28,this.wC=t?1:0;const r=this.vC;r[0]=s,r[1]=e,r[2]=i,r[3]=n}kI(){const t=this.gM,s=this.vC;1===this.wC?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}FI(){switch(this.wf){case 1:return void this.IC();case 2:return void this._C();case 3:return void this.EC();case 4:return void this.FC();case 5:return void this.DC();case 6:return void this.BC();case 7:return void this.WC();case 8:return void this.jC();case 9:return void this.zC();case 10:return void this.$C();case 11:return void this.ZC();case 12:return void this.QC();case 13:return void this.eI();case 14:return void this.nI();case 15:return void this.qC();case 16:return void this.gI();case 17:return void this.hI();case 18:return void this.aI();case 19:return void this.cI();case 20:return void this.pI();case 21:return void this.AC();case 22:return void this.bI();case 23:return void this.xI();case 24:return void this.TI();case 25:return void this.II();case 26:return void this._I();case 27:return void this.RI();case 28:return void this.kI();case 29:return void this.wI()}}}}{let G=function(t,s,e,i,n,r){s?t.strokeRect(e,i,n,r):t.fillRect(e,i,n,r)},t=function(t){return t*(4/3)},o=function(t,s){t=t.trim();const e=parseFloat(t);return isFinite(e)?t.endsWith("%")?s*e/100:e:0};G,t,o;const Fe=self.Bs,Oe=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),De={timeout:60},Le=new Fe.qo(0,0,0,1),Be=new Set(["left","center","right"]),Ne=new Set(["top","center","bottom"]),We=new Set(["word","cjk","character"]),Ve=new Set(["ltr","rtl"]),je=new Set;Fe.FontManager&&Fe.FontManager.addEventListener("fontload",t=>{const s=t.font.Qc();for(const e of je)(e.OI()||Fe.wn(e.DI(),s))&&e.LI()});let s=!1,e=!1;Fe.ty.Sb=class{constructor(t,s){s=Object.assign({},De,s),this.vb=t,this.BI="Arial",this.NI=16,this.WI=1,this.VI=0,this.jI=!1,this.HI=!1,this.UI="black",this.zI=!1,this.im=null,this.JI=!0,this.qI=null,this.XI=new Set,this.$I="left",this.YI="top",this.cf="",this.ZI=null,this.KI=Fe.dr(Fe.Qp),this.QI="word",this.tG="ltr",this.sG=!1,this.eG=!1,this.iG=!1,this.nG=-1,this.rG=0,this.hG=0,this.oG=0,this.qm=0,this.Xm=0,this.aG=1,this.lG=null,this.uG=null,this.cG=null,this.fG=null,this.dG=-1,this.pG=-1,this.mG="",this.gG="",this.yG="",this.wG=1,this.SG=1,this.bG=t=>this.vG(t),this.Lx=null,this.xG=new Fe.Rect,this.MG=1,this.TG=new Fe.r0(()=>{this.CG(),this.IG(8,8)},s.timeout),this.GG=null,this._G=!1,je.add(this)}pr(){this.qI=null,this.XI.clear(),this.im=null,this.ZI=null,this.lG=null,this.uG=null,this.cG=null,this.fG=null,this.bG=null,this.TG.pr(),this.GG=null,this.CG(),this.KI.ec(),this.KI=null,this.vb=null,this._G=!0,je.delete(this)}PG(){this.iG=!0}EG(){this.PG(),this.eG=!0}LI(){this.EG(),this.sG=!0}AG(t){if(this.zI!==(t=!!t)){this.zI=t;const s=this.zI?"alphabetic":"top";this.uG&&(this.uG.textBaseline=s),this.cG&&(this.cG.textBaseline=s),this.LI()}}OI(){return this.zI}hm(t){this.im!==t&&(this.im=t,this.KI.hm(t),this.im&&this.im.Vg()&&this.im.jg().then(()=>this.PG()),this.LI())}kG(t){this.JI!==(t=!!t)&&(this.JI=t,this.PG())}FG(t){this.BI!==(t=t||"serif")&&(this.BI=t,this.LI())}DI(){return this.BI}OG(t){this.NI!==(t=t<.1?.1:t)&&(this.NI=t,this.LI())}DG(){return this.NI}LG(t){this.WI!==t&&(this.WI=t,this.LI())}BG(t){this.VI!==t&&(this.VI=t,this.EG())}NG(){return this.VI}WG(t){this.jI!==(t=!!t)&&(this.jI=t,this.LI())}VG(){return this.jI}jG(t){this.HI!==(t=!!t)&&(this.HI=t,this.LI())}HG(){return this.HI}UG(t){t=Math.floor(t),this.nG!==t&&(this.nG=t,this.PG())}zG(){return this.nG}JG(t,s){let e=[];(this.jI||s.lg("b"))&&e.push("bold"),(this.HI||s.lg("i"))&&e.push("italic");const i=s.ag("size"),n=(i?parseFloat(i.Jp):this.NI)*this.WI;e.push(t?n+"pt":n*this.qG()+"pt");let r=this.BI,h=s.ag("font");return h&&h.Jp&&(r=h.Jp,this.qI)&&!this.XI.has(r)&&(this.qI(r),this.XI.add(r)),r&&(Oe.has(r)?e.push(r):e.push('"'+r+'"')),e.join(" ")}cv(t){t instanceof Fe.qo&&(t=t.Ga()),this.UI!==t&&(this.UI=t,this.PG())}XG(t,s,e){Le.Qo(t,s,e),this.cv(Le)}$G(t){if(!Be.has(t))throw new Error("invalid horizontal alignment");this.$I!==t&&(this.$I=t,this.EG())}YG(){return this.$I}ZG(t){if(!Ne.has(t))throw new Error("invalid vertical alignment");this.YI!==t&&(this.YI=t,this.EG())}KG(){return this.YI}QG(t){if(!We.has(t))throw new Error("invalid word wrap mode");this.QI!==t&&(this.QI=t,this.LI())}t_(){return this.QI}s_(t){if(!Ve.has(t))throw new Error("invalid text direction");this.tG!==t&&(this.tG=t,this.uG&&(this.uG.direction=this.tG),this.cG&&(this.cG.direction=this.tG),this.LI())}e_(){return this.tG}pf(t){this.cf!==t&&(this.cf=t,this.LI())}i_(){return this.cf}qG(){return this.MG*this.aG*self.devicePixelRatio}n_(r,h,o){if(void 0===o&&(o=1),!(r<=0||this.hG===r&&this.oG===h&&this.aG===o)){let t=this.hG,s=(this.hG=r,this.oG=h,this.aG=o,self.devicePixelRatio),e=(this.qm=this.hG*this.aG*s,this.Xm=this.oG*this.aG*s,Math.max(this.qm,this.Xm)),i=Math.min(this.vb.qx(),4096),n=1;i<e&&(n=i/e,this.qm=Math.min(this.qm*n,i),this.Xm=Math.min(this.Xm*n,i)),this.MG=n,this.hG!==t?this.LI():this.EG()}}am(){return this.qm}vm(){return this.Xm}r_(){return this.aG}h_(){return this.o_(),this.KI.zm()}a_(){return this.o_(),this.KI.Jm()+this.KI.rm()*(this.VI+4)-this.VI}l_(){this.o_();let t=0;for(const s of this.KI.nm())for(const e of s.Gm())t+=e._m();return t}X2(){return this.TG.u0(),this.u_(),this.Lx}c_(t,s){this.o_();const e=this.qG(),i=this.KI.nm();for(const n of i){const r=n.Mm()*e;if(s>=n.rg()-n.vm()*e+r&&s<n.rg()+r)for(const h of n.Gm())if(t>=h.ig()&&t<h.ig()+h.am()*e)return h}return null}*f_(t){this.o_();const s=this.KI.nm();for(const e of s)for(const i of e.Gm()){const n=i.ag("tag");n&&Fe.wn(n.Jp,t)&&(yield i)}}d_(t,s){for(const e of this.f_(t)){if(0===s)return e;--s}return null}p_(t){let s=0;for(const e of this.f_(t))++s;return s}u_(){this.Lx&&!this.iG&&!this.eG&&!this.sG||this._G||this.qm<=0||this.Xm<=0||(this.iG=!1,this.m_())}m_(){this._G||(this.o_(),this.IG(Math.max(Fe.Hr(Math.ceil(this.qm)),128),Math.max(Fe.Hr(Math.ceil(this.Xm)),64)),this.g_(),this.y_(),this.TG.u0())}IG(t,s){this.lG||(this.lG=Fe.Oo(16,16));let e=!1;this.dG===t&&this.pG===s||(this.dG=t,this.pG=s,this.lG.width=t,this.lG.height=s,e=!0),this.uG||(this.uG=this.lG.getContext("2d"),e=!0),e?(this.uG.textBaseline=this.zI?"alphabetic":"top",this.uG.direction=this.tG,this.uG.font=this.mG,this.uG.fillStyle=this.yG,this.uG.strokeStyle=this.yG,this.uG.globalAlpha=this.wG,this.uG.lineWidth=this.SG):this.uG.clearRect(0,0,t,s)}w_(){this.cG||(this.cG=Fe.Oo(16,16).getContext("2d"),this.fG=Fe.Oo(16,16).getContext("2d"),this.cG.textBaseline=this.zI?"alphabetic":"top",this.fG.textBaseline="top",this.cG.direction=this.tG,this.fG.direction=this.tG)}S_(t){this.gG!==t&&(this.gG=t,this.cG.font=t,this.fG.font=t)}b_(){if(!s){s=!0,this.w_();const t=this.cG.measureText("test");e="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return e}o_(){this.v_(),this.x_()}v_(){this.sG&&(this.w_(),!this.zI||this.ZI&&this.ZI.toString()===this.cf||(this.ZI=new Fe.Rn(this.cf,{kp:!0})),this.KI.Qp(this.zI?this.ZI.Up():this.cf,this.bG,this.hG,this.QI,0),this.sG=!1)}x_(){this.eG&&(this.M_(),this.eG=!1)}vG(t){let s=t.gm()?t.Om().join(""):" ",e=(this.S_(this.JG(!0,t)),t.ag("size")),i=(e?parseFloat(e.Jp):this.NI)*this.WI,n=this.cG.measureText(s),r=0;if(this.zI&&this.b_()){const h=this.fG.measureText(s);r=n.fontBoundingBoxAscent-h.fontBoundingBoxAscent}return{width:n.width,height:4/3*i,fontBoundingBoxAscent:n.fontBoundingBoxAscent||0,fontBoundingBoxDescent:n.fontBoundingBoxDescent||0,pm:r}}T_(t){this.mG!==t&&(this.mG=t,this.uG.font=t)}C_(t){this.yG!==t&&(this.yG=t,this.uG.fillStyle=t,this.uG.strokeStyle=t)}I_(t){this.wG!==t&&(this.wG=t,this.uG.globalAlpha=t)}G_(t){this.SG!==t&&(this.SG=t,this.uG.lineWidth=t)}M_(){let i=this.qG(),n=(4+this.VI)*i,r=0,h=this.KI.nm();if(0!==h.length){for(const s of h){s.eg(NaN),s.ng(NaN);for(const o of s.Gm())o.eg(NaN),o.ng(NaN)}let t=this.zI&&this.b_(),e=h[0].vm()*i;if("center"===this.YI){const a=h.reduce((t,s)=>t+s.vm()*i+n,0)-n;r=Math.max(this.Xm/2-a/2,0),t&&(e=h[0].Tm()*i)}else if("bottom"===this.YI){const l=h.reduce((t,s)=>t+s.vm()*i+n,0)-this.VI*i,u=t?h.at(-1).Mm()*i:0;r=this.Xm-l-u-2}for(let t=0,s=h.length;t<s;++t){const c=h[t],f=c.vm()*i,d=r;if(this.zI){if(r+=0===t?e:f,0<t&&r>this.Xm-4*i)break}else if(0<t&&r>=this.Xm-f)break;0<=d&&this.__(c,r,i),this.zI||(r+=f),r+=n}}}__(t,s,e){let i=0;"center"===this.$I?i=Math.floor((this.qm-t.am()*e)/2):"right"===this.$I&&(i=this.qm-t.am()*e),t.eg(i),t.ng(s);for(const n of"ltr"===this.tG?t.Gm():t.tg())this.P_(n,i,s,e),i+=n.am()*e}P_(t,s,e,i){const n=t.ag("offsetx"),r=(s+=n?o(n.Jp,t.vm())*i:0,t.ag("offsety"));if(e+=r?o(r.Jp,t.vm())*i:0,t.wm()){const h=t.ag("iconoffsety");e+=h?o(h.Jp,t.vm())*i:.2*t.vm()*i}t.eg(s),t.ng(e)}g_(){this.uG.imageSmoothingEnabled=this.JI,this.uG.imageSmoothingQuality="high",this.rG=0;const t=this.qG(),s=this.KI.nm();for(const e of s)this.E_(e,t)}E_(t,s){const e=t.ig(),i=t.rg();if(Number.isFinite(e)&&Number.isFinite(i))for(const n of"ltr"===this.tG?t.Gm():t.tg())this.R_(n,s,t.vm())}R_(h,o,a){const l=this.uG,u=h.ig(),c=h.rg();if(Number.isFinite(u)&&Number.isFinite(c)){let t=a/16,s=h.am()*o,e=h.vm()*o,i=h.vm()/16,n=(4+this.VI)*o,r=h.gm()?h.Om():null;if(-1!==this.nG){if(this.rG>=this.nG)return;h.gm()&&this.rG+r.length>this.nG&&(r=r.slice(0,this.nG-this.rG),s=this.vG(h).width*o),this.rG+=h._m()}const f=h.ag("background"),d=h.lg("u"),p=h.lg("s");if((!h.gm()||!Fe.H1(r)||f||d||p)&&!h.lg("hide")){const m=h.ag("color"),g=h.ag("opacity"),y=(this.I_(g?parseFloat(g.Jp)/100:1),f&&(this.C_(f.Jp),l.fillRect(u,c-e,s,e+n)),h.ag("linethickness")),w=y?parseFloat(y.Jp):1,S=h.lg("stroke");if(S&&this.G_(.5*i*w*this.qG()),h.gm()){const b=r.join("");if(this.T_(this.JG(!1,h)),!S){this.G_(.5*i*w*this.qG());const v=h.ag("outlineback");v&&(this.C_(v.Jp),this.A_(!0,b,u,c,s))}if(this.C_(m?m.Jp:this.UI),this.A_(S,b,u,c,s),!S){this.G_(.5*i*w*this.qG());const x=h.ag("outline");x&&(this.C_(x.Jp),this.A_(!0,b,u,c,s))}}else if(h.wm()&&0<h.am()){const M=h.wg(this.im);M&&l.drawImage(M,u,c-e,s,e)}if(this.C_(m?m.Jp:this.UI),d&&G(l,S,u,c+o*t,s,o*t*w),p){const T=c-e/4,C=o*i,I=T+C/2;l.fillRect(u,I-C*w/2,s,C*w)}}}}A_(t,s,e,i,n){"rtl"===this.tG&&(e+=n),t?"Gecko"===Fe.ue.ye?this.uG.strokeText(s,e,i,n):this.uG.strokeText(s,e,i):"Gecko"===Fe.ue.ye?this.uG.fillText(s,e,i,n):this.uG.fillText(s,e,i)}y_(){this.vb.k_()||(this.Lx||(this.Lx=this.vb.B2(this.lG.width,this.lG.height,{kx:!0,Fx:"high"})),this.vb.F_(this.lG,this.Lx),this.xG.set(0,0,this.qm/this.Lx.am(),this.Xm/this.Lx.vm()),this.GG&&this.GG())}O_(){return this.xG}CG(){this.Lx&&(this.vb.k_()||this.vb.j2(this.Lx),this.Lx=null)}static dv(){for(const t of je)t.CG()}static D_(){return je.values()}}}{const He=self.Bs;class Ue{constructor(t){this.gM=t.Xx(),this.L_=t.$x(),this.B_=t.N_(),this.W_=null,this.l0=!1,this.V_=!1,this.j_=0,1===this.L_?this.W_=this.B_.createQueryEXT():this.W_=this.gM.createQuery()}pr(){this.H_(),this.gM=null,this.B_=null,this.V_=!1}H_(){this.W_&&(1===this.L_?this.B_.deleteQueryEXT(this.W_):this.gM.deleteQuery(this.W_),this.W_=null)}lI(){if(this.l0)throw new Error("query already active");1===this.L_?this.B_.beginQueryEXT(this.B_.TIME_ELAPSED_EXT,this.W_):this.gM.beginQuery(this.B_.TIME_ELAPSED_EXT,this.W_),this.l0=!0}fI(){if(!this.l0)throw new Error("query not active");1===this.L_?this.B_.endQueryEXT(this.B_.TIME_ELAPSED_EXT):this.gM.endQuery(this.B_.TIME_ELAPSED_EXT),this.l0=!1}U_(){if(this.W_&&!this.V_&&!this.l0){let t;t=1===this.L_?this.B_.getQueryObjectEXT(this.W_,this.B_.QUERY_RESULT_AVAILABLE_EXT):this.gM.getQueryParameter(this.W_,this.gM.QUERY_RESULT_AVAILABLE);const s=this.gM.getParameter(this.B_.GPU_DISJOINT_EXT);t&&!s&&(1===this.L_?this.j_=this.B_.getQueryObjectEXT(this.W_,this.B_.QUERY_RESULT_EXT):this.j_=this.gM.getQueryParameter(this.W_,this.gM.QUERY_RESULT),this.j_/=1e9,this.V_=!0),(t||s)&&this.H_()}}z_(){return this.V_}J_(){if(this.V_)return this.j_;throw new Error("no result available")}}He.ty.q_=class{constructor(t){this.vb=t,this.ow=t.hb(),this.l0=!1,this.X_=null,this.Y_=!1,this.Z_=null,this.K_=[]}pr(){for(const t of this.K_)t instanceof Ue&&t.pr();He.jh(this.K_),this.X_=null,this.Z_=null,this.vb=null}lI(){if(this.l0)throw new Error("query already active");const t=this.vb.Q_();0<t.length?(this.Y_=!0,this.X_=t.at(-1),this.X_.tP(),this.X_.K_.push(this)):(this.Y_=!1,this.X_=null),this.l0=!0,t.push(this),this.sP()}fI(){if(!this.l0)throw new Error("query not active");const t=this.vb.Q_().pop();if(t!==this)throw new Error("can only end most nested query");this.l0=!1,this.tP(),this.X_&&(this.X_.sP(),this.X_=null)}sP(){this.Z_=He.dr(Ue,this.vb),this.K_.push(this.Z_),this.Z_.lI()}tP(){this.Z_.fI(),this.Z_=null}U_(){for(const t of this.K_)t.U_()}eP(){return this.Y_}z_(){return this.K_.every(t=>t.z_())}J_(){return this.K_.reduce((t,s)=>t+s.J_(),0)}hb(){return this.ow}}}{const ze=self.Bs;ze.ty.iP=class{constructor(t,s=1e3){this.vb=t,this.nP=s,this.rP=[],this.vb.hP(this)}pr(){this.ec(),this.vb.oP(this),this.vb=null}ec(){for(const t of this.rP)t.pr();ze.jh(this.rP)}aP(){const t=new ze.ty.q_(this.vb);if(this.rP.push(t),this.rP.length>this.nP){const s=this.rP.shift();s.pr()}return t}lP(t){for(const s of this.rP){if(s.hb()>=t)return;if(s.eP())return;s.U_()}}uP(t,s){if(s<=t)return NaN;let e=0;for(const i of this.rP){if(i.hb()>=s)break;if(!(i.hb()<t)){if(!i.z_())return NaN;e+=i.J_()}}return e}cP(e){for(let t=0,s=this.rP.length;t<s;++t){const i=this.rP[t];if(!(i.hb()<e))return void(0<t&&this.rP.splice(0,t));i.pr()}}}}{let e=function(){n=-1;for(const t of i)t.fP()&&(t.resolve(),i.delete(t));0<i.size&&(n=self.requestAnimationFrame(e))},b=(e,self.Bs),t=self.vs,v=(t.Ps,t.Es),y=t.Cs,r={powerPreference:"default",dP:!0,alpha:!1,depth:!1,pP:!1,mP:2,failIfMajorPerformanceCaveat:!1},h=new Set(["default","low-power","high-performance"]),c=new b.su(0,0,1,0,1,1,0,1),w=y.create(),S=y.create(),x=new b.su,M=new b.Rect,T=null,i=(b.isDebug&&(self.gP=function(){T?T.loseContext():console.warn("WEBGL_lose_context not supported")},self.yP=function(){T?T.restoreContext():console.warn("WEBGL_lose_context not supported")}),new Set),n=-1;b.ty.wP=class extends b.ty.Ty{constructor(t,s){if(super(s),s=Object.assign({},r,s),!h.has(s.powerPreference))throw new Error("invalid power preference");let e={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat},i=null,n=0;if(2<=s.mP&&(i=t.getContext("webgl2",e),n=2),i||(i=t.getContext("webgl",e),n=1),!i)throw new Error("renderer-unavailable (could not get WebGL context)");this.gM=i,this.SP=i.getContextAttributes(),this.bP=i.getParameter(i.VERSION),this.L_=n,this.vP=v.create(),this.xP=!1,this.MP=y.create(),this.TP=!!s.depth,this.CP=!(!s.depth||!s.pP),this.IP=this.TP,this.GP=!1,this._P=null,this.PP=!0,this.EP=0,this.RP=0,this.SM=null,this.bM=null,this.AP=null,this.vM=null,this.kP=new Float32Array(8e3*this.ib()),this.FP=new Uint16Array(12e3),this.OP=new Float32Array(16e3),this.DP=new Float32Array(32e3),this.LP=0,this.BP=0,this.NP=0,this.WP=0,this.VP=null,this.jP=null,this.HP=[],this.UP=0,this.zP=0,this.JP=null,this.qP=0,this.yC=b.dr(b.ty.fC,this),this.XP=b.dr(b.qo,1,1,1,1),this.$P=null,this.tI=null,this.YP=0,this.ZP=0,this.KP=new b.Rect,this.QP=b.dr(b.Rect,0,0,-1,-1),this.tE=0,this.sE=-1,this.eE=0,this.iE=0,this.nE=0,this.rE="(unavailable)",this.hE="(unavailable)",this.oE=[],this.aE=!1,this.lE=null,this.uE=null,this.cE=null,this.fE=null,this.dE=null,this.pE=null,this.mE=0,this.gE=!!s.dP,this.B_=null,this.yE=new Set,this.wE=[],this.uw(this.FP)}fb(){return!0}async dw(){super.dw();const t=this.gM,s=this.ib(),e=(this.XP.Ko(1,1,1,1),this.$P=null,this.tI=null,this.LP=0,this.NP=0,this.WP=8e3*s-4*s,b.jh(this.HP),this.UP=0,this.zP=0,this.VP=null,this.JP=null,this.KP.set(0,0,1,1),this.qP=0,this.yC),i=(e.fT=null,e.U2=null,e.z2=null,v.set(e.pC,1,1,1,1),e.clearColor.Ko(0,0,0,0),e.mC.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.YP=t.ONE,this.ZP=t.ONE_MINUS_SRC_ALPHA,this.SE(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.TP?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.IP=this.TP,this.GP=!1,this.vM=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vM),t.bufferData(t.ARRAY_BUFFER,this.DP.byteLength,t.DYNAMIC_DRAW),this.SM=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.SM),t.bufferData(t.ARRAY_BUFFER,this.kP.byteLength,t.DYNAMIC_DRAW),this.bM=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.bM),t.bufferData(t.ARRAY_BUFFER,this.OP.byteLength,t.DYNAMIC_DRAW),this.AP=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.AP),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.FP,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.sE=t.getParameter(t.MAX_TEXTURE_SIZE),t.getParameter(t.ALIASED_POINT_SIZE_RANGE)),n=(this.eE=i[0],this.iE=i[1],t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT)),r=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),h=(this.nE=n&&r?Math.min(n.precision,r.precision):0,2048<this.iE&&(this.iE=2048),this.oE=t.getSupportedExtensions(),t.getExtension("WEBGL_debug_renderer_info"));if(h&&(this.rE=t.getParameter(h.UNMASKED_VENDOR_WEBGL),this.hE=t.getParameter(h.UNMASKED_RENDERER_WEBGL)),this.lE=t.getExtension("KHR_parallel_shader_compile"),b.isDebug&&(T=t.getExtension("WEBGL_lose_context")),this.gE&&(1===this.$x()?this.B_=t.getExtension("EXT_disjoint_timer_query"):this.B_=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.uE=t.getExtension("EXT_texture_filter_anisotropic"),this.uE?this.mE=t.getParameter(this.uE.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.mE=0,this.$x()<2&&this.TP&&this.CP&&(this.cE=t.getExtension("WEBGL_depth_texture"),!this.cE))throw new Error("no depth texture support");this.$x()<2&&(this.fE=t.getExtension("EXT_frag_depth"),this.dE=t.getExtension("OES_standard_derivatives"),this.pE=t.getExtension("EXT_shader_texture_lod"));let o=b.ty.uM,a=o.FT(!1),l=o.DT(),u=a,c=o.zT(),f=o.HT(),d=o.NT(),p=o.FT(!0),m=!1;this.TP&&(this.$x()<2?this.fE&&(l=o.LT(),c=o.JT(),d=o.WT(),m=!0):(u=o.OT(),l=o.BT(),c=o.qT(),f=o.UT(),d=o.VT(),p=o.OT(!0)));const g=o.jT(this.$x(),m,this.dE&&this.pE),y=2<=this.$x()?o.OT():a,w=[[l,u,"<default>"],[l,u,"<default-device-transform>"],[c,f,"<point>"],[o.XT(),a,"<fill>"],[o.$T(),a,"<lineargradient>"],[o.YT(),a,"<penumbra>"],[o.KT(),a,"<hardellipse>"],[o.QT(),a,"<hardellipseoutline>"],[o.tC(),a,"<smoothellipse>"],[o.sC(),a,"<smoothellipseoutline>"],[o.ZT(),a,"<smoothline>"],[d,p,"<tilemap>"],[g,y,"<tilerandomization>"]],S=await Promise.all(w.map(t=>this.bE({src:t[0],fM:t[1],name:t[2]})));this.Fy=S[0],this.jP=S[1],this.Oy=S[2],this.By=S[3],this.Ny=S[4],this.Wy=S[5],this.Vy=S[6],this.jy=S[7],this.Hy=S[8],this.Uy=S[9],this.zy=S[10],this.Dy=S[11],this.Ly=S[12],this.Bw()}async bE(t){const s=await b.ty.uM.mM(this,t);return this.Fw(s),s}vE(){this.VP=null}n_(t,s,e){if(this.qm!==t||this.Xm!==s||e){this.rb();const i=this.gM,n=this.yC;this.qm=t,this.Xm=s,this.xE(0,0,t,s),this.Pw(this.MP,t/s),this.ME(this.MP),this.jP&&(i.useProgram(this.jP.pT()),this.jP.oT(this.Gy),this.VP=this.jP,this.yC.fT=this.jP),i.bindTexture(i.TEXTURE_2D,null),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,null),i.activeTexture(i.TEXTURE0),this.$P=null,this.tI=null,this.TP&&this.PP&&this.TE(this.qm,this.Xm),this.JP&&this.JP.V2(this.qm,this.Xm),i.bindFramebuffer(i.FRAMEBUFFER,null),this.JP=null,n.U2=null,n.z2=null}}TE(t,s){const e=this.gM;this._P&&this.EP===t&&this.RP===s||(this.CP?(this._P&&e.deleteTexture(this._P),this._P=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this._P),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),2<=this.$x()?e.texImage2D(e.TEXTURE_2D,0,e.DEPTH24_STENCIL8,t,s,0,e.DEPTH_STENCIL,e.UNSIGNED_INT_24_8,null):this.cE&&e.texImage2D(e.TEXTURE_2D,0,e.DEPTH_STENCIL,t,s,0,e.DEPTH_STENCIL,this.cE.UNSIGNED_INT_24_8_WEBGL,null),e.bindTexture(e.TEXTURE_2D,null)):(this._P&&e.deleteRenderbuffer(this._P),this._P=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this._P),e.renderbufferStorage(e.RENDERBUFFER,2<=this.L_?e.DEPTH24_STENCIL8:e.DEPTH_STENCIL,t,s),e.bindRenderbuffer(e.RENDERBUFFER,null)),this.EP=t,this.RP=s)}CE(t,s){this.TP&&(this.PP=!1,this.TE(t,s))}IE(){this.TP&&(this.PP=!0,this.TE(this.qm,this.Xm))}xE(t,s,e,i){const n=this.vP;if(n[0]!==t||n[1]!==s||n[2]!==e||n[3]!==i){const r=this.GE();r.OC(t,s,e,i),v.set(n,t,s,e,i),this.zP=0}}Tw(t){super.Tw(t),this.Pw(this.MP,this.qm/this.Xm)}Sw(t){super.Sw(t),this.Pw(this.MP,this.qm/this.Xm)}xw(t){super.xw(t),this.Pw(this.MP,this.qm/this.Xm)}ME(t){if(!y.V(this.Gy,t)){const s=this.GE();s.LC(t),y.G(this.Gy,t),this.zP=0,this.xP=!0}}_E(){let t,s,e,i=this.JP;e=(null===i?(t=this.MP,s=this.am(),this):(t=i.Y2(),s=i.am(),i)).vm(),this.ME(t),this.xE(0,0,s,e)}PE(t){if(!y.V(this._y,t)){const s=this.GE();s.NC(t),y.G(this._y,t),this.zP=0,this.xP=!0}}EE(){this.xP=!1}RE(){return this.xP}H2(){return this.yC}GE(){const t=this.HP;return this.UP===t.length&&t.push(new b.ty.gC(this.yC)),t[this.UP++]}rb(){0===this.UP||this.k_()||(this.AE(),this.kE(),this.UP=0,this.LP=0,this.BP=0,this.NP=0,this.zP=0)}AE(){const t=this.gM;0<this.NP&&(t.bindBuffer(t.ARRAY_BUFFER,this.vM),t.bufferSubData(t.ARRAY_BUFFER,0,this.DP.subarray(0,this.NP))),0<this.LP&&(t.bindBuffer(t.ARRAY_BUFFER,this.SM),t.bufferSubData(t.ARRAY_BUFFER,0,this.kP.subarray(0,this.LP)),t.bindBuffer(t.ARRAY_BUFFER,this.bM),t.bufferSubData(t.ARRAY_BUFFER,0,this.OP.subarray(0,this.BP)))}kE(){const e=this.HP;for(let t=0,s=this.UP;t<s;++t)e[t].FI()}FE(){return this.XP.da()}OE(t,s,e,i){const n=this.XP;if(!n.Sa(t,s,e,i)){n.Ko(t,s,e,i);const r=this.GE();r.PC(n),this.zP=0,this.qy=null}}DE(t){const s=this.XP;if(s.da()!==t){s.aa(t);const e=this.GE();e.PC(s),this.zP=0,this.qy=null}}cv(t){const s=this.XP;if(!s.equals(t)){s.set(t);const e=this.GE();e.PC(s),this.zP=0,this.qy=null}}LE(){this.OE(1,1,1,1)}BE(){return this.XP}NE(t){if(t!==this.$P){const s=this.GE();s.GC(t),this.$P=t,this.zP=0}}Qx(){this.$P=null}uv(t){const s=this.cS(t);this.WE(s[0],s[1])}VE(t){const s=this.pS(t);this.WE(s.lS,s.uS)}WE(t,s){if(t!==this.YP||s!==this.ZP){const e=this.GE();e.kC(t,s),this.YP=t,this.ZP=s,this.zP=0,this.qy=null}}jE(){return this.YP===this.gM.ONE&&this.ZP===this.gM.ONE_MINUS_SRC_ALPHA}HE(){this.WE(this.gM.ONE,this.gM.ONE_MINUS_SRC_ALPHA)}UE(){this.WE(this.gM.SRC_ALPHA,this.gM.ONE_MINUS_SRC_ALPHA)}zE(){this.WE(this.gM.ONE,this.gM.ZERO)}Rect(t){this.JE(t.Cl(),t.Il(),t.Gl(),t._l())}JE(t,s,e,i){this.eb(t,s,e,s,e,i,t,i)}qE(){let t=this.LP;if(t>=this.WP&&(this.rb(),t=0),1===this.zP)this.HP[this.UP-1].SC+=6;else{const s=this.GE();s.CC(t,6),this.zP=1}}XE(t){t.vu(this.kP,this.LP,this.Yy+this.Zy),this.LP+=12}su(t){this.qE(),this.XE(t),c.ma(this.OP,this.BP),this.BP+=8}eb(t,s,e,i,n,r,h,o){this.qE();let a=this.kP,l=this.LP,u=this.Yy+this.Zy;a[l++]=t,a[l++]=s,a[l++]=u,a[l++]=e,a[l++]=i,a[l++]=u,a[l++]=n,a[l++]=r,a[l++]=u,a[l++]=h,a[l++]=o,a[l++]=u,this.LP=l,c.ma(this.OP,this.BP),this.BP+=8}PS(t,s){this.qE(),this.XE(t),s.Rl(this.OP,this.BP),this.BP+=8}$E(t,s){this.qE(),this.XE(t),s.ma(this.OP,this.BP),this.BP+=8}YE(t,s,e,i,n,r,h,o,a,l,u,c,f){this.qE();let d=this.kP,p=this.LP,m=this.Yy+this.Zy;d[p++]=t,d[p++]=s,d[p++]=m+e,d[p++]=i,d[p++]=n,d[p++]=m+r,d[p++]=h,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.LP=p,f.Rl(this.OP,this.BP),this.BP+=8}TS(t,s,e,i,n,r,h,o,a,l,u,c,f){this.qE();let d=this.kP,p=this.LP,m=this.Yy+this.Zy;d[p++]=t,d[p++]=s,d[p++]=m+e,d[p++]=i,d[p++]=n,d[p++]=m+r,d[p++]=h,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.LP=p,f.ma(this.OP,this.BP),this.BP+=8}ZE(i,n,r){const h=this.kP,o=this.OP;if(r.length%3!=0)throw new Error("invalid index buffer length");for(let e=0,t=r.length;e<t;){const a=r[e++],l=r[e++],u=r[e++],c=3*a,f=3*l,d=3*u,p=2*a,m=2*l,g=2*u;this.qE();let t=this.LP,s=this.BP;h[t++]=i[0+c],h[t++]=i[1+c],h[t++]=i[2+c],h[t++]=i[0+f],h[t++]=i[1+f],h[t++]=i[2+f],h[t++]=i[0+d],h[t++]=i[1+d],h[t++]=i[2+d],h[t++]=i[0+d],h[t++]=i[1+d],h[t++]=i[2+d],o[s++]=n[0+p],o[s++]=n[1+p],o[s++]=n[0+m],o[s++]=n[1+m],o[s++]=n[0+g],o[s++]=n[1+g],o[s++]=n[0+g],o[s++]=n[1+g],this.LP=t,this.BP=s}}KE(t,s){this.wS(0),y.G(w,this.Gy),y.G(S,this._y),this._E();const[e,i]=this.QE(this.JP),n=this.kw(0,0,this.mw(i),0,0,0,i);if(this.PE(n),"crop"===t&&this.JP&&s){const r=this.qm/2,h=this.Xm/2,o=s.am(),a=s.vm(),l=this.JP.am(),u=this.JP.vm(),c=Math.min(l,o),f=Math.min(u,a),d=Math.max(a-u,0),p=Math.max(u-a,0);M.set(-r,h-p,-r+c,h-f-p),x.xu(M),M.set(0,d,c,f+d),M.Pt(o,a),this.PS(x,M)}else{const m=e/2,g=i/2;this.JE(-m,g,m,-g)}this.ME(w),this.PE(S)}tR(t){if(!this.KP.equals(t)){this.KP.G(t);const s=this.GE();s.JC(t),this.zP=0}}sR(){}eR(t,s,e,i){7996<=this.NP&&this.rb();let n=this.NP,r=this.Yy+this.Zy;if(2===this.zP&&this.qP===r)this.HP[this.UP-1].SC++;else{const o=this.GE();o.XC(n,r),this.zP=2,this.qP=r}const h=this.DP;h[n++]=t,h[n++]=s,h[n++]=e,h[n++]=i,this.NP=n}Nw(t){if(this.VP!==t){const s=this.GE();s.YC(t),this.VP=t,this.zP=0,this.qy=null}}iR(){return this.VP}nR(){this.Nw(this.jP)}rR(t){const s=this.GE();s.RC(t),this.zP=0}hR(t,s,e=1){const i=this.GE();i.dI(t,s,e),this.zP=0}oR(t,s,e,i,n,r,h){if(this.VP!==this.Dy)throw new Error("must set tilemap fill mode first");const o=this.GE();o.mI(t,s,e,i,n,r,h),this.zP=0}aR(t,s,e,i,n,r,h){if(this.VP!==this.Ly)throw new Error("must set tile randomization mode first");const o=this.GE();o.yI(t,s,e,i,n,r,h),this.zP=0}lR(t,s,e,i,n,r,h,o,a,l,u){const c=this.VP;if(u%=10800,c.ZM&&!c.xT(s,e,i,n,r,h,o,a,l,u)){const f=this.GE(),d=(f.KC(),c.CT(s,e,i,n,r,h,o,a,l,u),f.vC),p=(d[0]=r,d[1]=h,s.ma(d,2),d[6]=a,d[7]=l,e.ma(d,12),f.xC),m=(n.ma(p,0),p[1]);p[1]=p[3],p[3]=m,i.ma(f.MC,0),f.wC=u,f.SC=o,c.FM.KM()?f.bC=t?t.X2():null:f.bC=null,this.zP=0}}uR(t){const s=this.VP;if(0!==t.length&&!s.wT(t)){const e=this.GE();e.sI(),s.bT(t),b.Jh(e.TC,t),this.zP=0}}cR(t,s,e,i){const n=this.GE();n.UC(t,s,e,i),this.zP=0}ec(t){const s=this.GE();s.HC(t),this.zP=0}fR(){}nb(){super.nb(),this.gM.flush()}dR(){if(this.TP&&this.JP&&this.JP.tM()){const t=this.GE();t.SI(this.IP),this.zP=0}}pR(t){if(this.IP!==(t=!!t)&&this.TP){this.IP=t;const s=this.GE();s.vI(t),this.zP=0}}mR(){return this.IP}N2(){return this._P}W2(){return this.CP}gR(t){if(t=!!t,this.CP&&this.GP!==t){if(t&&this.mR())throw new Error("depth still enabled");this.GP=t;const s=this.GE();s.MI(t),this.zP=0}}yR(t,s,e,i,n=0){if(t=Math.floor(t),s=Math.floor(s),e=Math.floor(e),i=Math.floor(i),!this.QP.Tl(t,s,e,i)){this.QP.yl(t,s,e,i);const r=n||this.QE(this.wR())[1],h=(s=r-s-i,this.GE());h.AI(!0,t,s,e,i),this.zP=0}}SR(){if(-1!==this.QP.Gl()){this.QP.set(0,0,-1,-1);const t=this.GE();t.AI(!1,0,0,0,0),this.zP=0}}bR(){for(const t of this.yE)t.lP(this.ow)}k_(){return!this.gM||this.gM.isContextLost()||this.aE}dv(){super.pw(),b.ty.Dx.dv(),b.ty.v2.dv(),b.ty.Sb.dv();for(const t of this.yE)t.ec();this.oE=[],this.B_=null,this.lE=null,this.uE=null,this.cE=null,this.fE=null,this.dE=null,this.pE=null,this.mE=0,this.rE="(unavailable)",this.hE="(unavailable)",this.VP=null,this.jP=null,this._P=null;for(const s of this.Jy.values())s.dv()}async pv(){this.aE=!0,await this.dw(),this.aE=!1;for(const t of this.Jy.values())t.pv(this);this.n_(this.qm,this.Xm,!0)}vR(t,s){if(this.k_())throw new Error("context lost");this.rb();const e=b.dr(b.ty.Dx,this);return e.Jx(t,s),e}async xR(i,n){if(this.k_())throw new Error("context lost");if(n=Object.assign({},n),b.He.ImageBitmapOptions){let t=await createImageBitmap(i,{premultiplyAlpha:"premultiply"}),s=n._x&&"clamp-to-edge"!==n._x||n.Px&&"clamp-to-edge"!==n.Px,e=b.jr(t.width)&&b.jr(t.height);return this.Yx()||e||!s?n.premultiplyAlpha=!1:b.He.Xe?(t=await createImageBitmap(i,{premultiplyAlpha:"premultiply",resizeWidth:b.Hr(t.width),resizeHeight:b.Hr(t.height)}),n.premultiplyAlpha=!1):t=await createImageBitmap(i,{premultiplyAlpha:"none"}),b.Bf(()=>this.vR(t,n))}if(i instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const t=await b.Fo(i);i=t}return b.Bf(()=>this.vR(i,n))}B2(t,s,e){this.rb();const i=b.dr(b.ty.Dx,this);return i.t2(t,s,e),i}F_(t,s,e){this.rb(),s.h2(t,e)}j2(t){t&&(t.c2(),0<t.f2()||(this.rb(),t===this.$P&&(this.gM.bindTexture(this.gM.TEXTURE_2D,null),this.$P=null),t===this.tI&&(this.gM.activeTexture(this.gM.TEXTURE1),this.gM.bindTexture(this.gM.TEXTURE_2D,null),this.gM.activeTexture(this.gM.TEXTURE0),this.tI=null),t.o2()))}MR(t){let s=this.qm,e=this.Xm,i=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),i=!1),"number"==typeof t.height)&&(e=Math.floor(t.height),i=!1),s<=0||e<=0)throw new Error("invalid size");this.rb();const n=b.dr(b.ty.v2,this);return n.D2(s,e,Object.assign({S2:i},t)),this.JP=null,this.yC.U2=null,this.yC.z2=null,n}TR(t,s=!0){if(t!==this.JP){t&&t.sM()&&t.V2(this.qm,this.Xm);const e=this.GE();e.VC(t),this.JP=t,this.zP=0,s&&this._E()}}wR(){return this.JP}QE(t){return t?[t.am(),t.vm()]:[this.qm,this.Xm]}CR(t,s="stretch"){if(this.L_<2||this.JP&&0<this.JP.eM())this.zE(),this.LE(),this.IR(t,s);else{const e=this.GE();e.rI(t,this.JP,s),this.zP=0}}IR(t,s="stretch"){const e=t.X2();if(!e)throw new Error("not a texture-backed render target");this.NE(e),this.KE(s,e)}GR(t){if(!(this.L_<2)){const s=this.GE();s.iI(t.J2()),this.zP=0}}_R(t){this.TR(null),this.rb();const s=t.X2();s===this.$P&&(this.gM.bindTexture(this.gM.TEXTURE_2D,null),this.$P=null),s===this.tI&&(this.gM.activeTexture(this.gM.TEXTURE1),this.gM.bindTexture(this.gM.TEXTURE_2D,null),this.gM.activeTexture(this.gM.TEXTURE0),this.tI=null),t.o2()}async oM(t,s,e){this.rb();let i=this.JP,n,r,h,o=(h=t?(n=t.am(),r=t.vm(),t.J2()):(n=this.am(),r=this.vm(),null),0),a=0,l=n,u=r;if(e){o=b.br(Math.floor(e.Cl()),0,n-1),a=b.br(Math.floor(e.Il()),0,r-1);let t=e.width(),s=(t=0===t?n-o:b.br(Math.floor(t),0,n-o),e.height());s=0===s?r-a:b.br(Math.floor(s),0,r-a),l=t,u=s,a=r-(a+u)}let c=this.gM,f=(c.bindFramebuffer(c.FRAMEBUFFER,h),()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.JP=null,this.yC.U2=null,this.yC.z2=null,this.TR(i)}),d;if(!s&&2<=this.$x()){c.bindFramebuffer(c.READ_FRAMEBUFFER,h);const p=c.createBuffer(),m=l*u*4,g=c.PIXEL_PACK_BUFFER,y=(c.bindBuffer(g,p),c.bufferData(g,m,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(g,null),f(),c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0));await this.pM(()=>c.getSyncParameter(y,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(y),d=new ImageData(l,u),c.bindBuffer(g,p),c.getBufferSubData(g,0,new Uint8Array(d.data.buffer),0,m),c.bindBuffer(g,null),c.deleteBuffer(p)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}PR(){this.pR(!0);const t=this.GE();t.CI(),this.zP=0,this.tE=1}ER(){this.pR(!1);const t=this.GE();t.GI(),this.zP=0,this.tE=2}RR(){return 2===this.tE}AR(){this.pR(!0);const t=this.GE();t.EI(),this.zP=0,this.tE=0}kR(t){if(this.FR()){const s=this.GE();s.oI(t),this.zP=0}}OR(t){if(this.FR()){const s=this.GE();s.uI(t),this.zP=0}}pM(s){const t=new Promise(t=>i.add({resolve:t,fP:s}));return-1===n&&(n=self.requestAnimationFrame(e)),t}pb(){return this.qm*this.Xm*(this.SP.alpha?4:3)}mb(){let t=0;for(const s of b.ty.v2.aM())s.X2()||(t+=s.m2());return t}gb(){let t=0;for(const s of b.ty.Dx.g2())t+=s.m2();return t}DR(){return this.bP}$x(){return this.L_}LR(){return"webgl"+this.$x()}Yx(){return 2<=this.$x()}qx(){return this.sE}BR(){return this.eE}NR(){return this.iE}WR(){return 0!==this.nE}VR(){return this.nE}jR(){return this.rE}HR(){return this.hE}UR(){if(2<=this.$x())return"webgl2";{const t=[];return this.fE&&t.push("EXT_frag_depth"),this.dE&&t.push("OES_standard_derivatives"),this.pE&&t.push("EXT_shader_texture_lod"),0<t.length?"webgl1:"+t.join(","):"webgl1:none"}}zR(){return this.oE}FR(){return!!this.B_}N_(){return this.B_}dM(){return this.lE}i2(){return this.uE}n2(){return this.mE}hP(t){this.yE.add(t)}oP(t){this.yE.delete(t)}Q_(){return this.wE}Xx(){return this.gM}SE(t){this.aS([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}JR(){return this.wb()}}}{const Je=self.Bs,qe={qR:null,$R:null,YR:null,getTime:null,ZR:null};Je.ty.KR=class{constructor(t){t=Object.assign({},qe,t),this.QR=t.qR,this.tA=t.$R,this.sA=t.YR,this.eA=t.getTime,this.iA=t.ZR,this.nA=null,this.rA=new Set}hA(t){this.rA.add(t)}oA(t){this.rA.delete(t)}dv(){this.nA=null;for(const t of this.rA)t.dv()}aA(t){return this.QR?this.QR(t):[t.am(),t.vm()]}wR(t){return this.tA(t)}lA(t,s){this.sA(t,s)}uA(){return this.eA()}t1(t){this.iA(t)}cA(t,s,e){return s=Math.floor(s),e=Math.floor(e),!this.nA||this.nA.am()===s&&this.nA.vm()===e||(t.j2(this.nA),this.nA=null),null===this.nA&&(this.nA=t.vR(null,{width:s,height:e,Ex:"nearest",kx:!1})),this.nA}}}{const o=self.Bs,Xe=self.vs,Tn=Xe.Cs,$e=o.dr(o.Rect),Ye=o.dr(o.Rect),Ze=o.dr(o.Rect),Ke=o.dr(o.Rect),Qe=Tn.create(),ti=Tn.create(),si={fA:null,dA:null,pA:null,mA:!1},ei={gA:null,yA:!1,wA:!1,SA:!1,bA:!1,vA:!1,xA:!1};o.ty.MA=class{constructor(t,s){s=Object.assign({},si,s),this.u1=t,this.TA=s.fA,this.CA=s.dA,this.IA=s.pA,this.GA=null,this._A=[],this.PA=[],this.EA=[],this.RA=!1,this.hv=0,this.AA=!1,this.kA=!1,this.FA=!1,this.OA=!1,this.DA=!1,this.LA=!1,this.xP=!1,this.BA=!1,this.NA=!1,this.WA=!1,this.VA=!1,this.jA=!1,this.HA=0,this.UA=[null,null,null],this.zA=!!s.mA,this.JA=0,this.qA=0,this.XA=0,this.$A=0,this.YA=null,this.ZA=null,this.KA=o.dr(o.Rect),this.QA=o.dr(o.Rect),this.t3=o.dr(o.Rect),this.s3=o.dr(o.Rect),this.e3=o.dr(o.Rect),this.i3=1,this.n3=1,this.r3=0,this.h3=0,this.o3=null,this.a3=null,this.l3=0,this.u3=0,this.f3=!1,this.R2=Tn.create(),this.d3=Tn.create(),this.u1.hA(this)}pr(){this.u1.oA(this),o.jh(this.EA),o.jh(this._A),o.jh(this.PA),this.YA=null,this.ZA=null,this.TA=null,this.CA=null,this.IA=null}dv(){this.RA=!0,o.jh(this.EA),o.jh(this._A),o.jh(this.PA)}m3(){return this.RA}g3(n,t){if(t=Object.assign({},ei,t),o.jh(this.EA),this.JA=0,this.qA=0,this.AA=!1,this.kA=!1,this.FA=!1,this.OA=!1,this.DA=!1,this.LA=!1,this.HA=0,this.jA=!!t.bA,this.VA=!!t.xA,this.RA=!1,o.Jh(this._A,n),0!==n.length){if(t.gA){if(t.gA.length!==n.length)throw new Error("incorrect indexMap length");o.Jh(this.PA,t.gA)}else{o.jh(this.PA);for(let t=0,s=n.length;t<s;++t)this.PA.push(t)}for(const s of n)this.JA+=s.Ub(),this.qA+=s.zb(),s.Yb()&&(this.AA=!0),s.Kb()&&(this.kA=!0),s.Zb()&&(this.FA=!0),s.Jb()&&(this.OA=!0),s.sv()&&(this.DA=!0);this.LA=this.y3(n[0].jb());const r=this.w3(n[0],t),h=this.S3(n.at(-1),t);if(1!==n.length||r||h){this.WA=!1;let i=0;r&&(this.HA=1,this.EA.push(o.dr(o.ty.MA.v3.b3,this,-1,1)),i=1);for(let s=0,e=n.length;s<e;++s)if(0!==s||r){let t=1===i?2:1;s!==e-1||h||(t=0),this.HA=Math.max(this.HA,t),this.EA.push(o.dr(o.ty.MA.v3.x3,this,i,t,s)),i=t}else this.HA=1,this.EA.push(o.dr(o.ty.MA.v3.M3,this,-1,1,s)),i=1;h&&this.EA.push(o.dr(o.ty.MA.v3.T3,this,i,0))}else this.WA=!0}}w3(t,s){return!!(s.yA||t.qb()||s.SA&&!t.$b()||t.Kb()&&!this.VA||0!==this.JA||0!==this.qA)||(t.jb().fb()?t.Zb()&&(s.vA||s.bA)||t.Qb()&&s.bA:t.Zb()&&!this.LA&&s.vA)}S3(t,s){return!!s.wA||(t.jb().fb()?t.Zb()||t.Jb():(t.Zb()||t.Jb())&&this.C3())}y3(t){return t.Ew()&&this.FA&&!this.OA}I3(t,s,e){t.Ew()&&null===s&&(s=t.GetBackbufferRenderTarget()),this.o3=s,this.YA=e.G3||null,this.ZA=e.contextObject||null,this.hv=e._3||0,this.i3=e.devicePixelRatio||1,this.n3=e.P3||1,this.r3=e.E3||0,this.h3="number"==typeof e.time?e.time:this.u1.uA(),this.xP=!1,t.EE(),this.AA&&this.R3();let i=!1;if(this.A3()&&(this.F3(t,e),i=!0,this.a3=this.u1.cA(t,this.XA,this.$A),$e.G(this.QA),$e.ql(),t.Ew()&&t._MaybeDoPendingClearRenderPass(this.o3),t.CopyTextureToTexture(this.o3.X2(),this.a3,$e.Cl(),$e.Il(),$e.width(),$e.height())),this.WA)this.O3(t,e);else if(i||this.F3(t,e),0!==this.t3.width()||0!==this.t3.height()){t.HE(),t.LE(),t.gS(0),t.wS(0),this.GA=e.D3||null,this.l3=e.L3||0,this.u3=e.B3||0,this.f3=!!e.N3,this.W3(t),this.UA[0]=s,this.UA[1]=1<=this.HA?this.V3():null,this.UA[2]=2===this.HA?this.V3():null;for(const n of this.EA){const r=this.j3(n.H3()),h=this.j3(n.U3());t.Ew()?n.z3(t,r,h):n.J3(t,r,h)}t.NE(null),this.UA[1]&&this.q3(this.UA[1]),this.UA[2]&&this.q3(this.UA[2]),this.UA.fill(null),this.X3(t),this.o3=null,this.a3=null,this.YA=null,this.ZA=null,this.GA=null}}F3(t,s){const[e,i]=this.u1.aA(t);this.Y3(t,e,i),this.Z3(s)}Y3(t,s,e){if(s<=0||e<=0)throw new Error("invalid draw size");this.XA===s&&this.$A===e||this.K3(t,s,e,0,0,this.R2,this.d3),this.XA=s,this.$A=e}K3(t,s,e,i,n,r,h){const o=s/2+i,a=e/2+n,l=(t.Pw(r,s/e),t.kw(o,a,t.mw(e),o,a,0,e));Tn.G(h,l)}Z3(t){this.KA.G(t.Q3),t.tk?this.QA.G(t.tk):this.QA.set(0,0,this.XA,this.$A),this.t3.G(this.QA),this.t3.Pt(this.XA,this.$A);const s=this.n3*this.i3;this.QA.Bl(this.JA*s,this.qA*s),this.e3.G(this.QA),this.e3.Pt(this.XA,this.$A),this.QA.Xl(0,0,this.XA,this.$A),this.s3.G(this.QA),this.s3.Pt(this.XA,this.$A)}W3(t){if(this.BA=t.mR(),this.NA=t.RR(),this.VA)t.pR(!1),this.kA&&t.gR(!0);else{if($e.G(this.QA),t.fb()){const s=this.n3*this.i3;$e.Bl(Math.max(this.JA,1)*s,Math.max(this.qA,1)*s),$e.ql(),$e.br(0,0,this.XA,this.$A)}else $e.ql();t.yR($e.Cl(),$e.Il(),$e.width(),$e.height(),this.$A)}}sk(t){t.LE(),this.VA||(this.NA&&t.AR(),t.pR(!1),this.kA&&t.gR(!0)),t.Ew()&&t.SetNormalizedCoordsProgramVariant(!0)}X3(t){t.gR(!1),this.NA&&t.ER(),t.pR(this.BA),this.VA||t.SR(),t.Ew()&&t.SetNormalizedCoordsProgramVariant(!1),this.xP=t.RE()}ek(){this.e3.br(0,0,1,1)}j3(t){return t<0?null:this.UA[t]}V3(){return this.u1.wR(this)}ik(){return this.o3}q3(t){this.u1.lA(t,this)}nk(t){return this._A[t]}rk(t){this.GA?this.GA(this,t,()=>this.TA(t,this)):this.TA(t,this),this.WA||this.sk(t)}hk(t){if(this.VA)return!0;if(0!==this.l3||0!==this.u3)return!1;const[s,e]=t.QE(t.wR());return s===this.XA&&e===this.$A}ak(t,s){let e=this.R2,i=this.d3;if(s&&!this.hk(t)){e=Qe,i=ti;const[n,r]=t.QE(t.wR());this.K3(t,n,r,this.l3,this.u3,e,i),this.VA||t.SR()}t.ME(e),t.PE(i)}R3(){this.u1.t1(this)}lk(t,s){return this.IA(this.PA[t],s)}uk(t,s){let e=this.e3,i=this.s3,n=this.t3;t.fb()&&(Ye.G(e),Ye.Vl(1),e=Ye,Ze.G(i),Ze.Vl(1),i=Ze,Ke.G(n),Ke.Vl(1),n=Ke),this.ck(t,s,i,n,e,1/this.XA,1/this.$A)}fk(t,s){let i=this.s3,n=this.t3,r=1/this.XA,h=1/this.$A;if(this.CA){let{dk:t,pk:s,mk:e}=this.CA(this.YA);t||($e.set(0,0,0,0),t=$e),s=s||this.XA,e=e||this.$A,i=t,n=t,r=1/s,h=1/e}else t.fb()&&(Ze.G(i),Ze.Vl(1),i=Ze,Ke.G(n),Ke.Vl(1),n=Ke);let e=this.e3;t.fb()&&((e=Ye).G(this.e3),e.Vl(1)),this.ck(t,s,i,n,e,r,h),t.Ew()&&this.DA&&t.SetProgramParameter_IsSrcTexRotated(this.jA)}gk(t){return this.FA?t.Ew()?this.A3()?this.a3:this.o3.X2():this.o3:null}ck(t,s,e,i,n,r,h){t.lR(this.gk(t),n,e,i,this.KA,r,h,this.i3,this.n3,this.r3,this.h3),t.uR(this.lk(s,t))}O3(t,s){const e=this._A[0],i=t.mR(),n=e.Kb();n&&(t.pR(!1),t.gR(!0),this.e3.set(0,0,1,1),this.t3.set(0,0,1,1)),t.Nw(e),t.uv(this.hv),t.TR(this.o3);let r=0,h=1;if(this.t3.set(0,0,1,1),e.Qb()&&this.CA){const{dk:o,pk:a,mk:l}=this.CA(this.YA);o&&this.t3.G(o),r=Number.isFinite(a)?1/a:0,h=Number.isFinite(l)?1/l:0}else{const[u,c]=this.u1.aA(t);r=1/u,h=1/c}s.Q3?this.KA.G(s.Q3):this.KA.set(0,0,0,0),t.lR(this.gk(t),this.e3,this.t3,this.t3,this.KA,r,h,this.i3,this.n3,this.r3,this.h3),t.uR(this.lk(0,t)),t.Ew()&&this.DA&&t.SetProgramParameter_IsSrcTexRotated(this.jA),t.gS(0),this.rk(t),n&&(t.gR(!1),t.pR(i))}A3(){return this.LA}C3(){return!this.LA}yk(){return this.FA}wk(){return!!this.WA&&!this.A3()}Sk(){return this.VA}bk(){return this.YA}vk(){return this.ZA}xk(){return this.hv}Mk(){return this.f3}RE(){return this.xP}Tk(){return this.QA}Ck(){return this.s3}Ik(){return this.zA}async Gk(t,s,e){}}}{const ii=self.Bs;ii.ty.MA.v3=class{constructor(t,s,e,i=-1){this._k=t,this.Pk=s,this.Ek=e,this.qg=i}Rk(){return this._k}H3(){return this.Pk}U3(){return this.Ek}Ak(){return this.qg}pT(){return this.Rk().nk(this.Ak())}J3(t,s,e){}z3(t,s,e){}}}{const ni=self.Bs;ni.ty.MA.v3.b3=class extends ni.ty.MA.v3{constructor(t,s,e,i){super(t,s,e,i)}J3(t,s,e){const i=this.Rk();t.HE(),t.Bw(),t.TR(e,i.Mk()),t.cR(0,0,0,0),i.rk(t),i.ek()}z3(t,s,e){const i=this.Rk();t.HE(),t.Bw(),t.TR(e,!1),t.cR(0,0,0,0),i.rk(t),i.ek()}}}{const ri=self.Bs,hi=ri.dr(ri.Rect),oi=ri.dr(ri.su);ri.ty.MA.v3.T3=class extends ri.ty.MA.v3{constructor(t,s,e,i){super(t,s,e,i)}J3(t,s,e){const i=this.Rk();t.Bw(),t.TR(e),i.ak(t,!0),t.uv(i.xk()),t.NE(s.X2()),oi.xu(i.Tk()),hi.G(i.Ck()),hi.Vl(1),t.PS(oi,hi),i.Ik()&&t.GR(s)}z3(t,s,e){const i=this.Rk();t.Bw(),t.TR(e,!1),i.hk(t)?oi.xu(i.Ck()):(t.SetNormalizedCoordsProgramVariant(!1),i.ak(t,!0),oi.xu(i.Tk())),t.SetBackTexture(null),t.uv(i.xk()),t.NE(s.X2()),i.Sk()?t.KE():t.PS(oi,i.Ck())}}}{const ai=self.Bs;ai.ty.MA.v3.M3=class extends ai.ty.MA.v3{constructor(t,s,e,i){super(t,s,e,i)}J3(t,s,e){const i=this.Rk();t.TR(e,i.Mk()),t.cR(0,0,0,0),t.zE(),t.Nw(this.pT()),i.fk(t,this.Ak()),i.rk(t),i.ek()}z3(t,s,e){const i=this.Rk();t.TR(e,!1),t.cR(0,0,0,0),t.zE(),t.Nw(this.pT()),i.fk(t,this.Ak()),i.rk(t),i.ek()}}}{const li=self.Bs,ui=li.dr(li.Rect),ci=li.dr(li.su);li.ty.MA.v3.x3=class extends li.ty.MA.v3{constructor(t,s,e,i){super(t,s,e,i)}J3(t,s,e){const i=this.Rk(),n=(t.TR(e),0===this.U3());n?t.uv(i.xk()):(t.cR(0,0,0,0),t.zE()),t.Nw(this.pT()),i.uk(t,this.Ak()),t.NE(s.X2()),i.ak(t,n),ci.xu(i.Tk()),ui.G(i.Ck()),ui.Vl(1),t.PS(ci,ui),i.Ik()&&t.GR(s)}z3(t,s,e){const i=this.Rk(),n=(t.TR(e,!1),0===this.U3());n?(t.uv(i.xk()),t.SetBackTexture(null),i.hk(t)?ci.xu(i.Ck()):(t.SetNormalizedCoordsProgramVariant(!1),i.ak(t,!0),ci.xu(i.Tk()))):(t.cR(0,0,0,0),t.zE(),ci.xu(i.Ck())),t.Nw(this.pT()),i.uk(t,this.Ak()),t.NE(s.X2()),i.Sk()?t.KE():t.PS(ci,i.Ck())}}}{let u=function(t,s){const e=t[0],i=s[0],n=e-i;if(0!=n)return n;const r=t[1],h=s[1];return r-h},c=(u,self.Bs),f=self.Xs,d=null,s=new Set,p=[],m=[],e=!1,t=!1,i=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.kk=class{constructor(t){d=t,Object.defineProperties(this,{Fk:{value:d.Dk().Ok(),writable:!1},Lk:{value:d.Nk().Bk(),writable:!1},Wk:{value:{},writable:!1},Vk:{value:{},writable:!1},jk:{value:d.Hk(),writable:!1},Uk:{value:d.zk(),writable:!1},Jk:{value:new Date(d.qk()),writable:!1},storage:{value:new self.Xk(d),writable:!1},isInWorker:{value:d.$k(),writable:!1},Yk:{value:d.Zk(),writable:!1},Kk:{value:d.Qk(),writable:!1},Ex:{value:d.tF(),writable:!1},sF:{value:d.eF(),writable:!1},iF:{value:new self.nF(t),writable:!1},rF:{value:new self.hF(t),writable:!1}}),d.oF().addEventListener("keydown",t=>{s.has(t.key)?t.stopPropagation():s.add(t.key)}),d.oF().addEventListener("keyup",t=>s.delete(t.key)),d.Hf().addEventListener("window-blur",()=>s.clear()),d.$k()&&(self.alert=t=>(e||(e=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}aF(t){Object.defineProperties(this.Wk,t)}lF(t){Object.defineProperties(this.Vk,t)}addEventListener(t,s){d.oF().addEventListener(t,s)}removeEventListener(t,s){d.oF().removeEventListener(t,s)}uF(t,...s){f.Ti(t);const e=d.cF(),i=e.fF(t);if(!i)throw new Error(`cannot find function name '${t}'`);if(!i.Qu())return i.dF();if(s.length<i.pF())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${i.pF()} expected)`);let n=i.mF(),r=n.gF(),h=e.yF();if(h){r=r.slice(0);const a=new Set(r);for(const l of h.gF())a.has(l)||(r.push(l),a.add(l));for(const u of e.wF())a.has(u)||(r.push(u),a.add(u))}const o=n.SF(r,i.bF(),i.vF(),i.dF(),...s);return o}xF(t){const s=d.TF().MF();if(!s)throw new Error("not in a function which returns a value");switch(s.CF()){case 1:"number"==typeof t&&s.IF(t);break;case 2:"string"==typeof t&&s.IF(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.IF(t)}}signal(t){f.Ti(t),d.cF().GF(t)}_F(t){return f.Ti(t),d.cF().PF(t)}EF(){return[d.Zk(),d.Qk()]}get isSuspended(){return d.RF()}get dt(){return d.AF()}get kF(){return d.FF()}get OF(){return d.DF()}get LF(){return d.BF()}get NF(){return d.WF()}set NF(t){f.bi(t),d.VF(t)}get fps(){return t||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),t=!0),d.jF()}get framesPerSecond(){return d.jF()}get HF(){return d.UF()}get zF(){return d.JF()}get qF(){return d.XF()}get $F(){return d.YF()}set $F(t){if(!i.has(t))throw new Error("invalid framerate mode");d.ZF(t)}get KF(){return d.QF()}set KF(t){f.bi(t),d.tO(t)}get sO(){return d.eO()}set sO(t){d.iO(t)}get nO(){return d.Dk().rO()}get hO(){return d.Dk().oO()}random(){return d.aO()}get layout(){const t=d.lO();if(t)return t.uO();throw new Error("no layout is running - make sure a layout is loaded before accessing")}cO(t){let s=d.fO(),e=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(e=s.dO(t))return e.uO();throw new Error("invalid layout")}pO(){return d.fO().mO().map(t=>t.uO())}gO(t){let s=d.fO(),e;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(!(e=s.dO(t)))throw new Error("invalid layout");s.yO()||s.wO(e)}get keyboard(){const t=d.SO().keyboard;if(t)return t;throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first")}get bO(){const t=d.SO().bO;if(t)return t;throw new Error("runtime.mouse used but Mouse object missing - add it to your project first")}get vO(){const t=d.SO().vO;if(t)return t;throw new Error("runtime.touch used but Touch object missing - add it to your project first")}get xO(){const t=d.SO().xO;if(t)return t;throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first")}MO(t,s){f.Ti(t),f.Ti(s),d.TO(t,s)}CO(t){f.bi(t);const s=d.IO(t);return s?s.GO():null}_O(t,i){f.Xi(i);const n=d.PO();for(const s of t){const e=d.EO(s),r=e.RO();p.push([r.AO().Ak(),r.kO()]),m.push(e)}if(0!==p.length){p.sort(u),m.sort((t,s)=>i(t.GO(),s.GO()));let e=!1;for(let t=0,s=p.length;t<s;++t){const h=m[t],o=n.FO(p[t][0]),a=p[t][1],l=o.OO();l[a]!==h&&((l[a]=h).RO().DO(o,!0),o.LO(h),e=!0)}e&&d.BO(),c.jh(p),c.jh(m)}}async NO(t,s){const e=new MessageChannel,i=e.port1,n=e.port2;return await d.WO("runtime","script-create-worker",{url:t,opts:s,port2:n},[n]),i}alert(t){return d.WO("runtime","alert",{message:t+(d.$k()?" [via Web Worker]":"")})}VO(t){return f.bi(t),d.jO(t)}HO(t){d.UO(t)}}}{let s=self.Bs,e=null;self.zO=class{constructor(t){e=t,Object.defineProperties(this,{JO:{value:!0,writable:!1}})}qO(t){const s=self.$O.XO(t);if(!s)throw new Error("invalid IImageInfo");s.YO(e.ZO())}KO(t){return e.Io(t)}QO(t){return e.Go(t)}tD(t){return e._o(t)}sD(t){return e.Po(t)}eD(t){return e.iD(t)}nD(t){return"flat"===e.rD()&&s.Mo(t)&&(t=t.toLowerCase()),e.hD(t)}get oD(){return e.aD()}async lD(t,s){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}uD(...t){return e.cD(...t)}fD(t){return e.dD(t)}pD(t){return e.mD(t)}}}{let h=self.Bs,e=self.Xs,o=null;self.gD=class{constructor(t){o=t,Object.defineProperties(this,{runtime:{value:o.ZO(),writable:!1}})}yD(t,s){const e=o.ZO(),i=e.EO(t),n=e.EO(s);return o.wD(i,n)}SD(t,s){const e=o.ZO(),i=e.EO(t);for(const n of s){const r=e.EO(n);if(o.wD(i,r))return n}return null}bD(t){const s=o.ZO().EO(t),e=o.vD(s);return e?e.GO():null}xD(t,s){if(e.bi(t),e.bi(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");o.MD(t,s)}TD(){return o.CD()}ID(t,s){let e=o.ZO(),i;i=Array.isArray(t)?t.map(t=>e.GD(t)):[e.GD(t)];const n=h.Rect.Ml(s),r=[];return o._D(null,i,n,r),r.map(t=>t.GO())}}}{let s=self.Bs,e=null,i=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),n=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),r=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.nF=class{constructor(t){e=t,Object.defineProperties(this,{PD:{value:s.ue.ve,writable:!1},ED:{value:i.get(s.ue.fe)||"unknown",writable:!1},RD:{value:s.ue.de,writable:!1},AD:{value:n.get(s.ue.pe)||"unknown",writable:!1},kD:{value:s.ue.me,writable:!1},FD:{value:r.get(s.ue.ye)||"unknown",writable:!1}})}get exportType(){let t=e.OD();return e.DD()?t="nwjs":e.LD()?t="windows-webview2":"cordova"===t?t="Android"===s.ue.fe?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get renderer(){return e.ND().BD()}get WD(){return e.ND().VD()}get jD(){return e.ND().HD()}get UD(){return e.ND().zD()}get JD(){return e.ND().qD()}get XD(){return e.ND().$D()}get devicePixelRatio(){return e.YD()}}}{const fi=self.Xs;self.Xk=class{constructor(t){this.ZD=t.KD()}getItem(t){return fi.Ti(t),this.ZD.getItem(t)}setItem(t,s){return fi.Ti(t),this.ZD.setItem(t,s)}removeItem(t){return fi.Ti(t),this.ZD.removeItem(t)}clear(){return this.ZD.clear()}keys(){return this.ZD.keys()}}}{const di=self.Bs,pi=di.Ns();self.QD=class{#tL;constructor(){const t=di.eL.sL(pi);this.#tL=t,Object.defineProperties(this,{runtime:{value:t.ZO().iL(),writable:!1},nL:{value:t.rL(),writable:!1},hL:{value:t.oL(),writable:!1},aL:{value:t.lL(),writable:!1},uL:{value:t.cL(),writable:!1},fL:{value:t.dL(),writable:!1},pL:{value:t.mL(),writable:!1},gL:{value:t.yL(),writable:!1},wL:{value:t.SL(),writable:!1}}),t.ZO().bL(this,t)}static vL(t){if(!t)return null;const s=di.eL.xL(t);return s?s.ML():null}TL(){return this.#tL.IL().CL()}GL(){return this.#tL._L().GO()}}}{const mi=self.Bs,gi=self.Xs,yi=mi.Ns();self.PL=class{#tL;constructor(){const t=mi.eL.sL(yi);this.#tL=t,Object.defineProperties(this,{name:{value:t.Qc(),writable:!1},runtime:{value:t.ZO().iL(),writable:!1},EL:{value:t.RL().ML(),writable:!1}}),t.ZO().bL(this,t)}addEventListener(t,s){gi.Ti(t),gi.Xi(s),this.#tL.oF().addEventListener(t,s)}removeEventListener(t,s){gi.Ti(t),gi.Xi(s),this.#tL.oF().removeEventListener(t,s)}AL(){return[...this.instances()]}kL(){return mi.first(this.instances())}FL(){return[...this.OL()]}DL(){return mi.first(this.OL())}LL(t){const s=this.#tL,e=s.ZO().BL(t),i=s.NL(e);return i?i.GO():null}*instances(){for(const t of this.#tL.WL())yield t.GO()}*OL(){for(const t of this.#tL.jL().VL())yield t.GO()}HL(t){gi.Xi(t);const s=this.#tL;if(0<s.UL())throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.zL(t)}Be(t,s,e,i,n){if(gi.mi(s),gi.mi(e),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#tL,h=r.ZO(),o=h.lO().AO(t);if(!o)throw new Error("invalid layer");const a=h.JL(r,o,s,e,i,n),l=(i&&o.qL(a),h.cF());return l.XL(!0),a.$L(),l.XL(!1),l.YL()||h.fO().ZL()||h.KL(),a.GO()}}}{const wi=self.Xs,l=new WeakMap,Si=["above","below","top-sublayer","bottom-sublayer"];self.QL=class{constructor(t){l.set(this,t);const s=[],e=t.tB(),i=e.sB().length;for(let t=0;t<i;++t)s.push(new self.eB(e,t));Object.defineProperties(this,{name:{value:t.Qc(),writable:!1},index:{value:t.Ak(),writable:!1},iB:{value:s,writable:!1}})}addEventListener(t,s){wi.Ti(t),wi.Xi(s),l.get(this).oF().addEventListener(t,s)}removeEventListener(t,s){wi.Ti(t),wi.Xi(s),l.get(this).oF().removeEventListener(t,s)}get width(){return l.get(this).am()}set width(t){wi.bi(t),l.get(this).ym(t)}get height(){return l.get(this).vm()}set height(t){wi.bi(t),l.get(this).lm(t)}nB(t,s){wi.bi(t),wi.bi(s);const e=l.get(this);e.ym(t),e.lm(s)}getSize(){const t=l.get(this);return[t.am(),t.vm()]}set scale(t){wi.bi(t),l.get(this).rB(t)}get scale(){return l.get(this).hB()}set angle(t){wi.bi(t),l.get(this).oB(t)}get angle(){return l.get(this).aB()}set scrollX(t){wi.mi(t),l.get(this).lB(t)}get scrollX(){return l.get(this).uB()}set scrollY(t){wi.mi(t),l.get(this).cB(t)}get scrollY(){return l.get(this).fB()}scrollTo(t,s){wi.mi(t),wi.mi(s);const e=l.get(this);e.lB(t),e.cB(s)}dB(){const t=l.get(this);return[t.uB(),t.fB()]}pB(t){let s=l.get(this),e=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return(e=s.AO(t))?e.mB():null}gB(){return l.get(this).yB().map(t=>t.mB())}*wB(){for(const t of l.get(this).wB())yield t.mB()}SB(t,s,e){const i=l.get(this),n=self.bB,r=(wi.Ti(t),wi.nn(s,n),s?i.ZO().vB(s):null),h=Si.indexOf(e);if(h<0)throw new Error("invalid location");i.xB(t,r,h)}MB(t,s,e){const i=l.get(this),n=i.ZO(),r=self.bB,h=(wi.sn(t,r),n.vB(t));if(!h)throw new Error("invalid layer");wi.nn(s,r);const o=s?n.vB(s):null,a=Si.indexOf(e);if(a<0)throw new Error("invalid location");i.TB(h,o,a)}CB(t){const s=l.get(this),e=self.bB,i=(wi.sn(t,e),s.ZO().vB(t));if(!i)throw new Error("invalid layer");const n=i.ZO();s.IB(i),n.cF().YL()||n.KL()}GB(){const t=l.get(this),s=t.ZO();t._B(),s.cF().YL()||s.KL()}PB(t,s){wi.bi(t),wi.bi(s),l.get(this).EB(t,s)}RB(){return l.get(this).AB()}set Z(t){wi.Ti(t);const s=l.get(this);if("perspective"===t)s.kB();else{if("orthographic"!==t)throw new Error("invalid projection");s.OB()}}get Z(){return l.get(this).DB()?"orthographic":"perspective"}}}{const bi=self.Bs,f=self.Xs,d=new WeakMap,vi=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),xi=new Map([...vi.entries()].map(t=>[t[1],t[0]])),Mi=bi.dr(bi.qo);self.bB=class{constructor(t){d.set(this,t);const s=[],e=t.tB(),i=e.sB().length;for(let t=0;t<i;++t)s.push(new self.eB(e,t));Object.defineProperties(this,{name:{value:t.Qc(),writable:!1},layout:{value:t.dO().uO(),writable:!1},iB:{value:s,writable:!1}}),t.ZO().bL(this,t)}get LB(){const t=d.get(this).BB();return t?t.mB():null}*NB(){for(const t of d.get(this).NB())yield t.mB()}*WB(){for(const t of d.get(this).VB())yield t.mB()}*jB(){for(const t of d.get(this).VB())for(const s of t.HB())yield s.mB()}get index(){return d.get(this).Ak()}get isVisible(){return d.get(this).UB()}set isVisible(t){d.get(this).zB(t)}get JB(){return d.get(this).qB()}get isInteractive(){return d.get(this).XB()}set isInteractive(t){d.get(this).$B(t)}get YB(){return d.get(this).ZB()}set YB(t){d.get(this).KB(!!t)}get QB(){return d.get(this).t5()}get opacity(){return d.get(this).FE()}set opacity(t){t=bi.br(+t,0,1),isNaN(t)||d.get(this).DE(t)}set scale(t){f.bi(t),d.get(this).s5(t)}get scale(){return d.get(this).e5()}set scaleRate(t){f.bi(t),d.get(this).i5(t)}get scaleRate(){return d.get(this).n5()}set angle(t){f.bi(t),d.get(this).oB(t)}get angle(){return d.get(this).r5()}set parallaxX(t){f.bi(t),d.get(this).h5(t)}get parallaxX(){return d.get(this).o5()}set parallaxY(t){f.bi(t),d.get(this).a5(t)}get parallaxY(){return d.get(this).l5()}set u5(t){f.bi(t),d.get(this)._v(t)}get u5(){return d.get(this).Gv()}set c5(t){d.get(this).f5(t)}get c5(){return d.get(this).d5()}set p5(t){d.get(this).m5(t)}get p5(){return d.get(this).g5()}set _3(t){f.Ti(t);const s=vi.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");d.get(this).uv(s)}get _3(){return xi.get(d.get(this).y5())}set backgroundColor(t){if(f.Ni(t),t.length<3)throw new Error("expected 3 elements");Mi.Qo(t[0],t[1],t[2]);const s=d.get(this),e=s.w5();e.ya(Mi)||(e.la(Mi),s.ZO().BO())}get backgroundColor(){const t=d.get(this).w5();return[t.ua(),t.ca(),t.fa()]}set scrollX(t){f.mi(t);const s=d.get(this);s.S5(!0),s.lB(t)}get scrollX(){return d.get(this).uB()}set scrollY(t){f.mi(t);const s=d.get(this);s.S5(!0),s.cB(t)}get scrollY(){return d.get(this).fB()}scrollTo(t,s){f.mi(t),f.mi(s);const e=d.get(this);e.S5(!0),e.lB(t),e.cB(s)}dB(){const t=d.get(this);return[t.uB(),t.fB()]}b5(){d.get(this).S5(!1)}getViewport(){return d.get(this).v5().Pl()}x5(t,s,e=0){f.mi(t),f.mi(s),f.mi(e);const i=d.get(this),n=i.ZO();return i.M5(t-n.T5(),s-n.C5(),e)}I5(t,s,e=0){f.mi(t),f.mi(s),f.mi(e);const i=d.get(this),n=i.ZO(),[r,h]=i.G5(t,s,e);return[r+n.T5(),h+n.C5()]}_5(t,s,e=0){return f.mi(t),f.mi(s),f.mi(e),d.get(this).P5(t,s,e)}E5(t,s,e=0){return f.mi(t),f.mi(s),f.mi(e),d.get(this).R5(t,s,e)}get A5(){return d.get(this).k5()}}}{let i=function(t){let s=Ii.get(t);return s||(s=Ti.dr(Ti.Event.Hf),Ii.set(t,s)),s};i;const Ti=self.Bs,Ci=self.Xs,Ii=new WeakMap,Gi=Ti.Ns();self.F5=class{#tL;constructor(){const t=Ti.eL.sL(Gi),s={runtime:{value:(this.#tL=t).ZO().iL(),writable:!1},O5:{value:t.D5().CL(),writable:!1},EL:{value:t.RL().ML(),writable:!1}};t.L5(s),t.B5(s),Object.defineProperties(this,s),t.ZO().bL(this,t)}static N5(){return Ti.eL.W5()}V5(){const t=Ii.get(this);t&&(t.pr(),Ii.delete(this))}addEventListener(t,s,e){Ci.Ti(t),Ci.Xi(s),i(this).addEventListener(t,s,e)}removeEventListener(t,s,e){Ci.Ti(t),Ci.Xi(s),i(this).removeEventListener(t,s,e)}dispatchEvent(t){i(this).dispatchEvent(t)}j5(){const t=this.#tL,s=t.ZO();s.H5(t),s.cF().YL()||s.fO().ZL()||s.cF().U5()||s.KL()}z5(){const t=this.#tL.J5();return t?t.map(t=>t.GO()):[]}*q5(){const t=this.#tL;if(t.X5())for(const s of t.Y5())yield s.GO()}get uid(){return this.#tL.Z5()}get K5(){return this.#tL.Q5()}get tN(){return this.#tL.sN()}set NF(t){Ci.bi(t),this.#tL.VF(t)}get NF(){return this.#tL.eN()}iN(){this.#tL.nN()}get dt(){const t=this.#tL;return t.ZO().AF(t)}rN(...t){Ci.Ni(t);const s=new Set(t),e=this.#tL.hN();return s.isSubsetOf(e)}oN(t){Ci.sn(t,Set),this.#tL.aN(t)}lN(){return new Set(this.#tL.hN())}signal(t){Ci.Ti(t);const s=this.#tL;s.ZO().cF().uN(s,t)}_F(t){Ci.Ti(t);const s=this.#tL;return s.ZO().cF().cN(s,t)}}}{const _i=self.Bs,Pi=self.Xs,Ei=_i.Ns();self.fN=class extends self.F5{#tL;#dN=!1;#pN=null;#mN=!1;#gN=null;#yN;#wN;constructor(t){super(),this.#tL=_i.eL.sL(Ei),this.#dN=!1,this.#pN=null,this.#mN=!1,this.#gN=null,this.#yN=t?.domComponentId,this.#wN=t?.wrapperComponentId}V5(){this.SN(!1),this.bN(!1),super.V5()}vN(){return _i.eL.xN()}MN(t){const s=this.#tL;s.ZO().TN(t,s)}CN(t){const s=this.#tL;return s.ZO().IN(t,s)}GN(t,s){if(Pi.Ti(t),Pi.Xi(s),!this.#yN)throw new Error("no DOM component id set");const e=this.#tL.ZO();e._N(this.#yN,t,s)}PN(t){Pi.Ni(t);for(const[s,e]of t)this.GN(s,e)}EN(t,s){if(Pi.Ti(t),!this.#yN)throw new Error("no DOM component id set");const e=this.#tL.ZO();e.df(this.#yN,t,s)}RN(t,s){if(Pi.Ti(t),!this.#yN)throw new Error("no DOM component id set");const e=this.#tL.ZO();return e.WO(this.#yN,t,s)}AN(t,s){const e=this.#tL.ZO();if(!e.$k())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#yN,handler:t,data:s,responseId:null});this.EN(t,s)}SN(t){if(this.#dN!==(t=!!t)){this.#dN=t;const s=this.#tL.ZO();if(t){if(!this.#pN)if(this.#tL.ZO().kN()){const e=globalThis.C3Debugger,i=this.EL;this.#pN=()=>{const t=performance.now();this.FN(),e.AddIndividualPluginTickTime(i,performance.now()-t)}}else this.#pN=()=>this.FN();s.Hf().addEventListener("tick",this.#pN)}else s.Hf().removeEventListener("tick",this.#pN)}}ON(){return this.#dN}FN(){}bN(t){if(this.#mN!==(t=!!t)){this.#mN=t;const s=this.#tL.ZO();if(t){if(!this.#gN)if(this.#tL.ZO().kN()){const e=globalThis.C3Debugger,i=this.EL;this.#gN=()=>{const t=performance.now();this.DN(),e.AddIndividualPluginTickTime(i,performance.now()-t)}}else this.#gN=()=>this.DN();s.Hf().addEventListener("tick2",this.#gN)}else s.Hf().removeEventListener("tick2",this.#gN)}}LN(){return this.#mN}DN(){}BN(){return[]}NN(){return null}WN(t){}VN(){if(!this.#wN)throw new Error("no wrapper component id set");const t=this.#tL.ZO();return t.jN(this.#wN)}HN(t,s){if(Pi.Ti(t),Pi.Xi(s),!this.#wN)throw new Error("no wrapper component id set");const e=this.#tL.ZO();e.UN(this.#wN,t,s)}zN(t){Pi.Ni(t);for(const[s,e]of t)this.HN(s,e)}JN(t,s){if(!this.#wN)throw new Error("no wrapper component id set");this.runtime.rF.qN(this.#wN,t,s)}XN(t,s){if(this.#wN)return this.runtime.rF.$N(this.#wN,t,s);throw new Error("no wrapper component id set")}}}{let t=function(t){return class n extends t{#YN;#ZN;constructor(t){super(t);const s=Ri.eL.sL(Oi),e=s.RO(),i=(this.#YN=s,this.#ZN=e,Fi.set(this,s),[]),n=e.KN();if(n){const h=e.D5().tB().sB().length;for(let t=0;t<h;++t)i.push(new self.eB(n,t))}const r={iB:{value:i,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#ZN.dO().uO()}get QN(){return this.#ZN.AO().mB()}get x(){return this.#ZN.xv()}set x(t){t=+t;const s=this.#ZN;isNaN(t)||s.xv()===t||(s.Mv(t),s.t4())}get y(){return this.#ZN.Cv()}set y(t){t=+t;const s=this.#ZN;isNaN(t)||s.Cv()===t||(s.Iv(t),s.t4())}setPosition(t,s){t=+t,s=+s;const e=this.#ZN;isNaN(t)||isNaN(s)||e.xv()===t&&e.Cv()===s||(e.s4(t,s),e.t4())}e4(){const t=this.#ZN;return[t.xv(),t.Cv()]}i4(t,s){if(t=+t,s=+s,!(isNaN(t)||isNaN(s)||0===t&&0===s)){const e=this.#ZN;e.n4(t,s),e.t4()}}get u5(){return this.#ZN.Gv()}set u5(t){t=+t;const s=this.#YN,e=this.#ZN;isNaN(t)||e.Gv()===t||(e._v(t),s.ZO().BO())}get r4(){return this.#ZN.h4()}get width(){return this.#ZN.am()}set width(t){t=+t;const s=this.#ZN;isNaN(t)||s.am()===t||(s.ym(t),s.t4())}get height(){return this.#ZN.vm()}set height(t){t=+t;const s=this.#ZN;isNaN(t)||s.vm()===t||(s.lm(t),s.t4())}nB(t,s){t=+t,s=+s;const e=this.#ZN;isNaN(t)||isNaN(s)||e.am()===t&&e.vm()===s||(e.n_(t,s),e.t4())}getSize(){const t=this.#ZN;return[t.am(),t.vm()]}get angle(){return this.#ZN.aB()}set angle(t){t=Ri.vr(+t);const s=this.#ZN;isNaN(t)||s.aB()===t||(s.oB(t),s.t4())}get o4(){return Ri.Tr(this.angle)}set o4(t){this.angle=Ri.Mr(t)}Cu(){return this.#ZN.a4().Pl()}l4(){return this.#ZN.u4().Su()}c4(){return this.#ZN.f4()}get isVisible(){return this.#ZN.qB()}set isVisible(t){t=!!t;const s=this.#YN,e=this.#ZN;e.qB()!==t&&(e.zB(t),s.ZO().BO())}get opacity(){return this.#ZN.FE()}set opacity(t){t=Ri.br(+t,0,1);const s=this.#YN,e=this.#ZN;isNaN(t)||e.FE()===t||(e.DE(t),s.ZO().BO())}set d4(t){if(Ai.Ni(t),t.length<3)throw new Error("expected 3 elements");Bi.Qo(t[0],t[1],t[2]);const s=this.#YN,e=this.#ZN;e.m4().ya(Bi)||(e.g4(Bi),s.ZO().BO())}get d4(){const t=this.#ZN.m4();return[t.ua(),t.ca(),t.fa()]}set _3(t){Ai.Ti(t);const s=Di.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const e=this.#YN,i=this.#ZN;i.uv(s),e.ZO().BO()}get _3(){return Li.get(this.#ZN.y5())}y4(){this.#ZN.w4()}S4(){this.#ZN.b4()}v4(t){Ai.sn(t,ki);const s=this.#YN,e=s.ZO().vB(t);if(!e)throw new Error("invalid layer");s.RO().x4(e)}M4(t,s){Ai.sn(t,n),this.#ZN.T4(Fi.get(t),s)}get zIndex(){return this.#ZN.kO()}get C4(){return this.#ZN.I4()}set C4(t){this.#ZN.G4(!!t)}Zl(t,s){return Ai.mi(t),Ai.mi(s),this.#ZN._4(+t,+s)}yD(t){Ai.sn(t,n);const s=this.#YN,e=Fi.get(t);return s.ZO().Nk().wD(s,e)}bD(){const t=this.#YN,s=t.ZO().Nk().vD(t);return s?s.GO():null}getParent(){const t=this.#YN.P4();return t?t.GO():null}E4(){const t=this.#YN.R4();return t?t.GO():null}*A4(){for(const t of this.#YN.A4())yield t.GO()}F4(){return this.#YN.O4()}D4(t){const s=this.#YN.L4(t);return s?s.GO():null}*children(){for(const t of this.#YN.children())yield t.GO()}*B4(){for(const t of this.#YN.B4())yield t.GO()}N4(t,s){Ai.sn(t,n),Ai.Ai(s),s=s||{};const e=this.#YN,i=Fi.get(t);e.W4(i,s)}removeChild(t){Ai.sn(t,n);const s=this.#YN,e=Fi.get(t);s.V4(e)}j4(){const t=this.#YN;if(t.H4()){const s=t.P4();s.V4(t)}}U4(){const t=this.#ZN;return{z4:t.J4(),q4:t.X4(),Y4:t.Z4(),K4:t.Q4(),tW:t.sW(),eW:t.iW(),nW:t.rW(),hW:t.oW(),aW:t.lW()}}uW(t,s){Ai.bi(t),Ai.bi(s),this.#ZN.cW(t,s)}fW(){const t=this.#ZN;t.dW(),t.t4()}pW(t,s,e){Ai.bi(t),Ai.bi(s),Ai.Ri(e);const i=this.#ZN;i.mW(t,s,e)&&i.t4()}gW(t,s){let e=NaN,i=NaN,n=NaN,r=NaN,h=NaN,o=this.#ZN;if(o.yW()){const a=o.wW(),l=a.yx(t,s);null!==l&&(e=l.xv(),i=l.Cv(),n=l.Gv(),r=l.Pv(),h=l.Rv())}return{x:e,y:i,u5:n,u:r,v:h}}SW(){const t=this.#ZN;if(!t.yW())return[0,0];const s=t.wW();return[s.Zv(),s.Kv()]}}};0;const Ri=self.Bs,Ai=self.Xs,ki=self.bB,Fi=new WeakMap,Oi=Ri.Ns(),Di=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Li=new Map([...Di.entries()].map(t=>[t[1],t[0]])),Bi=Ri.dr(Ri.qo);self.bW=t(self.F5),self.vW=t(self.fN)}{const Ni=self.Xs;self.xW=class extends self.bW{#tL;constructor(){super(),this.#tL=self.F5.N5()}MW(){return this.#tL.IW().TW()}focus(){this.#tL.IW().GW()}blur(){this.#tL.IW()._W()}PW(t,s){Ni.Ti(t),this.#tL.IW().EW(t,s)}}}{let i=function(t){let s=ji.get(t);return s||(s=Wi.dr(Wi.Event.Hf),ji.set(t,s)),s};i;const Wi=self.Bs,Vi=self.Xs,ji=new WeakMap,Hi=Wi.Ns();self.RW=class{#tL;constructor(){const t=Wi.eL.sL(Hi),s={runtime:{value:(this.#tL=t).ZO().iL(),writable:!1},behavior:{value:t.kW().AW(),writable:!1},FW:{value:t.DW().OW(),writable:!1}};Object.defineProperties(this,s),t.ZO().bL(this,t)}static N5(){return Wi.eL.W5()}get LW(){return this.#tL.BW().GO()}V5(){const t=ji.get(this);t&&(t.pr(),ji.delete(this))}addEventListener(t,s,e){Vi.Ti(t),Vi.Xi(s),i(this).addEventListener(t,s,e)}removeEventListener(t,s,e){Vi.Ti(t),Vi.Xi(s),i(this).removeEventListener(t,s,e)}dispatchEvent(t){i(this).dispatchEvent(t)}}}{const Ui=self.Bs,zi=Ui.Ns();self.NW=class{constructor(){const t=Ui.eL.sL(zi),s={runtime:{value:t.ZO().iL(),writable:!1},behavior:{value:t.kW().AW(),writable:!1},name:{value:t.Qc(),writable:!1}};Object.defineProperties(this,s)}}}{const Ji=self.Bs,qi=Ji.Ns();self.WW=class{#tL;constructor(){const t=Ji.eL.sL(qi),s={runtime:{value:(this.#tL=t).ZO().iL(),writable:!1}};Object.defineProperties(this,s),t.ZO().bL(this,t)}AL(){return this.#tL.VL().map(t=>t.GO())}static vL(t){if(!t)return null;const s=Ji.eL.VW(t);return s?s.AW():null}}}{const Xi=self.Bs,$i=self.Xs,Yi=Xi.dr(Xi.qo);self.eB=class{#tL;constructor(t,s){this.#tL=t;const e={index:{value:s,writable:!1}};Object.defineProperties(this,e)}get name(){const t=this.#tL.sB();return t[this.index].Qc()}get isActive(){return this.#tL.jW(this.index)}set isActive(t){t=!!t;const s=this.#tL;s.jW(this.index)!==t&&(s.HW(this.index,t),s.UW(),s.ZO().BO())}setParameter(t,s){$i.bi(t),t=Math.floor(+t);const e=this.#tL,i=e.zW(this.index,t);if(null===i)throw new RangeError("invalid index");if(i instanceof Xi.qo){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");Yi.Qo(s[0],s[1],s[2]),s=Yi}else if("number"!=typeof s)throw new TypeError("expected number");const n=e.JW(this.index,t,s);n&&e.jW(this.index)&&e.ZO().BO()}getParameter(t){$i.bi(t),t=Math.floor(+t);const s=this.#tL,e=s.zW(this.index,t);if(null===e)throw new RangeError("invalid index");return e instanceof Xi.qo?[e.ua(),e.ca(),e.fa()]:e}}}self.qW=class{#tL;constructor(t){this.#tL=t,Object.defineProperties(this,{name:{value:t.Qc(),writable:!1}})}get speed(){return this.#tL.XW()}get $W(){return this.#tL.YW()}get repeatCount(){return this.#tL.ZW()}get KW(){return this.#tL.QW()}get t6(){return this.#tL.s6()}get frameCount(){return this.#tL.e6()}i6(){return this.#tL.n6().map(t=>t.r6())}*frames(){for(const t of this.#tL.n6())yield t.r6()}};self.$O=class{#tL;constructor(t){this.#tL=t}static XO(t){return t.#tL}get width(){return this.#tL.am()}get height(){return this.#tL.vm()}getSize(){const t=this.#tL;return[t.am(),t.vm()]}h6(t){return t.o6(this)}a6(){return this.#tL.O_().Pl()}};{const Zi=self.Xs;self.l6=class extends self.$O{#tL;constructor(t){super(t.u6()),this.#tL=t,Object.defineProperties(this,{duration:{value:t.c6(),writable:!1},f6:{value:t.d6(),writable:!1},p6:{value:t.m6(),writable:!1}})}g6(){const t=this.#tL;return[t.d6(),t.m6()]}y6(){return this.#tL.w6()}S6(t){return this.b6(t)[0]}v6(t){return this.b6(t)[1]}b6(t){let s=this.#tL,e=null;if("number"==typeof t)e=s.x6(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");e=s.M6(t)}return e?[e.xv(),e.Cv()]:this.g6()}T6(){const t=this.#tL.C6();return t?t.Vu():0}I6(t){return this.G6(t)[0]}_6(t){return this.G6(t)[1]}G6(t){Zi.bi(t),t=Math.floor(t);const s=this.#tL.C6();if(!s||t<0||t>=s.Vu())return[0,0];const e=s.Wu(),i=e[2*t],n=e[2*t+1];return[i,n]}get tag(){return this.#tL.P6()}}}{let s=function(t){const s=Qi.get(t);if(s.E6())throw new Error("timeline/tween was released and is no longer valid");return s};s;const Ki=self.Xs,Qi=new WeakMap;self.R6=class{constructor(t){Qi.set(this,t),t.ZO().bL(this,t)}pause(){s(this).A6()}resume(){s(this).k6()}stop(){s(this).u0()}rN(t){return s(this).F6(t)}set time(t){Ki.bi(t),s(this).O6(t)}get time(){return s(this).uA()}set totalTime(t){Ki.bi(t),s(this).D6(t)}get totalTime(){return s(this).L6()}set $W(t){s(this).B6(!!t)}get $W(){return s(this).N6()}set t6(t){s(this).W6(!!t)}get t6(){return s(this).V6()}set playbackRate(t){Ki.bi(t),s(this).j6(t)}get playbackRate(){return s(this).H6()}get progress(){const t=s(this);return t.uA()/t.L6()}get tags(){return s(this).U6()}get finished(){return s(this).z6()}get isPlaying(){return s(this).IsPlaying()}get J6(){return s(this).q6()}get X6(){return Qi.get(this).E6()}}}{let e=new WeakMap;self.Y6=class extends self.R6{constructor(t){super(t),e.set(this,t);const s={name:{value:t.Qc(),writable:!1}};Object.defineProperties(this,s)}}}{let e=function(t){const s=n.get(t);if(s.E6())throw new Error("tween was released and is no longer valid");return s},i=(e,self.Xs),n=new WeakMap,r=new WeakMap,h=null;self.Z6=class extends self.R6{constructor(t,s,e){super(t),h=h||e.K6,n.set(this,t),s&&r.set(this,s)}stop(){const t=e(this),s=r.get(this);s.Q6(t)}tV(t){i.Ti(t);const s=self.yc.Oc(h(t));e(this).sV(s)}get LW(){const t=e(this).eV();return t?t.GO():null}get iV(){return e(this).nV()}set iV(t){e(this).rV(!!t)}get value(){const t=e(this);if("value"!==t.hV())throw new Error("not a value tween");return t.aV("value").oV()}}}self.lV=class extends self.QD{constructor(){super()}};{const tn=self.Bs,sn=self.Xs,en=tn.Ns();self.uV=class extends self.lV{#tL;#yN;#cV=0;#fV=new Map;constructor(t){if(super(),this.#tL=tn.eL.sL(en),!t?.domComponentId)throw new Error("no DOM component ID specified");this.#yN=t.domComponentId,this.dV("elem-focused",t=>t.pV()),this.dV("elem-blurred",t=>{t&&t.mV()})}gV(t){const s=this.#cV++;return this.#fV.set(s,t),s}yV(t){this.#fV.delete(t)}dV(t,e){const s=this.#tL.ZO();s._N(this.#yN,t,t=>{const s=this.#fV.get(t.elementId);e(s,t)})}wV(t){sn.Ni(t);for(const[s,e]of t)this.wV(s,e)}}}{const nn=self.Bs,rn=(new WeakMap,nn.Ns());self.SV=class extends self.PL{#tL;constructor(){super(),this.#tL=nn.eL.sL(rn)}bV(){}vV(){return this.#tL.u6().xV()}MV(t){}TV(t){}CV(){}IV(t){}}}{const hn=self.Bs,on=(new WeakMap,hn.Ns());self.GV=class extends self.vW{#tL;#_V=null;#PV=null;constructor(t){super(t),this.#tL=hn.eL.sL(on)}V5(){if(super.V5(),this.#_V){const t=this.#tL.ZO().Hf();t.removeEventListener("renderercontextlost",this.#_V),t.removeEventListener("renderercontextrestored",this.#PV),this.#_V=null,this.#PV=null}}EV(){if(!this.#_V){this.#_V=()=>this.RV(),this.#PV=()=>this.AV();const t=this.#tL.ZO().Hf();t.addEventListener("renderercontextlost",this.#_V),t.addEventListener("renderercontextrestored",this.#PV)}}RV(){}AV(){}kV(t){}}}{const an=self.Bs,ln=an.dr(an.Rect),un=new WeakMap,cn=an.Ns();self.FV=class extends self.GV{#OV=-1;#DV=!0;#LV=!1;#BV=!1;#NV=-.2;#WV=an.dr(an.Rect,0,0,-1,-1);#VV=0;#jV=0;#HV=-1;#UV=-1;#zV=!1;constructor(t){if(!t?.domComponentId)throw new Error("no DOM component ID specified");super(t);const s=an.eL.sL(cn),e=(un.set(this,s),this.#OV=this.EL.gV(this),s.ZO().ND());this.#VV=e.JV(),this.#jV=e.qV(),this.SN(!0)}V5(){super.V5(),this.EL.yV(this.#OV),this.XV("destroy"),this.#OV=-1,un.delete(this)}$V(){const t=un.get(this).ZO();if(t.$k())throw new Error("not valid in worker mode");return this.YV("get-element")}XV(t,s){(s=s||{}).elementId=this.#OV,this.EN(t,s)}YV(t,s){return(s=s||{}).elementId=this.#OV,this.AN(t,s)}ZV(t,s){return(s=s||{}).elementId=this.#OV,this.RN(t,s)}KV(t){t=t||{};const s=un.get(this).RO();t.elementId=this.#OV,t.isVisible=s.qB(),t.htmlIndex=s.AO().QV(),t.htmlZIndex=s.tj(),Object.assign(t,this.sj()),this.#DV=!!t.isVisible,this.AN("create",t),this.ej(!0)}ij(t){this.#DV!==(t=!!t)&&(this.#DV=t,this.XV("set-visible",{isVisible:t}))}FN(){this.ej(!1)}nj(){const t=un.get(this).ZO(),s=t.ND().rj();return"Android"===an.ue.fe&&("scale-inner"===s||"scale-outer"===s||"crop"===s)}ej(u){const c=un.get(this);if(!c.hj()){let t=c.RO(),s=t.AO(),e=t.a4(),[i,n]=s.G5(e.Cl(),e.Il()),[r,h]=s.G5(e.Gl(),e._l()),o=c.ZO().ND(),a=o.HD(),l=o.zD();if(t.qB()&&s.qB())if(!this.nj()&&(r<=0||h<=0||a<=i||l<=n))this.ij(!1);else{ln.set(i,n,r,h);const f=o.JV(),d=o.qV(),p=s.QV(),m=t.tj();if(!u&&ln.equals(this.#WV)&&this.#VV===f&&this.#jV===d&&this.#HV===p&&this.#UV===m)this.ij(!0);else{this.#WV.G(ln),this.#VV=f,this.#jV=d,this.#HV=p,this.#UV=m,this.ij(!0);let t=null;this.#BV&&(t=s.oj()+this.#NV),this.XV("update-position",{left:Math.round(this.#WV.Cl()),top:Math.round(this.#WV.Il()),width:Math.round(this.#WV.width()),height:Math.round(this.#WV.height()),htmlIndex:p,htmlZIndex:m,fontSize:t})}}else this.ij(!1)}}aj(){this.YV("focus",{focus:!0})}lj(){this.YV("focus",{focus:!1})}pV(){this.#LV=!0}mV(){this.#LV=!1}uj(){return this.#LV}cj(t,s){this.postToDOMElement("set-css-style",{prop:an.Uo(t),val:s})}fj(t,s){this.postToDOMElement("set-attribute",{name:t,val:s})}dj(t){this.postToDOMElement("remove-attribute",{name:t})}pj(){this.#zV||(this.#zV=!0,Promise.resolve().then(()=>{this.#zV=!1,this.XV("update-state",this.sj())}))}sj(){}mj(){return this.#OV}}}self.gj=class extends self.WW{constructor(){super()}};self.yj=class extends globalThis.NW{constructor(){super()}bV(){}};{const fn=self.Bs,dn=new WeakMap,pn=fn.Ns();self.wj=class extends self.RW{#dN=!1;#mN=!1;#Sj=!1;constructor(){super(),dn.set(this,fn.eL.sL(pn))}V5(){super.V5(),this.SN(!1),this.bN(!1),this.bj(!1),dn.delete(this)}vN(){return fn.eL.xN()}vj(){}MN(t){const s=dn.get(this);s.ZO().TN(t,s.BW(),s.DW())}CN(t){const s=dn.get(this);return s.ZO().IN(t,s.BW(),s.DW())}SN(t){if(this.#dN!==(t=!!t)){this.#dN=t;const s=dn.get(this).ZO();t?s.xj(this):s.Mj(this)}}ON(){return this.#dN}FN(){}bN(t){if(this.#mN!==(t=!!t)){this.#mN=t;const s=dn.get(this).ZO();t?s.Tj(this):s.Cj(this)}}LN(){return this.#mN}DN(){}bj(t){if(this.#Sj!==(t=!!t)){this.#Sj=t;const s=dn.get(this).ZO();t?s.Ij(this):s.Gj(this)}}_j(){return this.#Sj}Pj(){}BN(){return[]}NN(){return null}WN(t){}}}{let i=self.Xs,n=null;self.hF=class{constructor(t){n=t}HO(t){n.UO(t)}qN(t,s,e){i.Ti(t),i.Ti(s),i.Wi(e),n.Ej(t,s,e)}$N(t,s,e){return i.Ti(t),i.Ti(s),i.Wi(e),n.Rj(t,s,e)}Aj(t){return i.Ci(t),new self.kj(n,t)}set Fj(t){n.Oj(!!t)}get Fj(){return n.Dj()}Lj(t){n.Bj(!!t)}Nj(t){i.mi(t);const s=n.Wj(t);return s?s.CL():null}}}self.kj=class{#Vj;#jj;#Hj;#Uj;#zj;#Jj;constructor(t,s){const e=(this.#Vj=t).cF(),i=t.yF(),n=(this.#jj=i,this.#Hj=i.qj(),t.TF()),r=(this.#Uj=n.Xj(),this.#zj=n.$j(i),e.Yj()),h=r.$j();this.#Jj=h,s&&h.Zj(s),t.Kj(!1)}Qj(){const t=this.#Vj.cF(),s=this.#Hj,e=this.#Jj;t.t8(s),this.#jj.s8(this.#Uj,this.#zj),t.e8(s),e.i8(e.Ak()+1)}get n8(){return this.#Jj.r8()}release(){const t=this.#Vj,s=t.TF(),e=t.cF().Yj();t.Kj(!0),e.h8(),s.h8()}};{let d=self.Bs,n=self.Xs,p=null,r=null;self.o8=class{constructor(t,s){r=t,p=s}a8(){p.HE()}l8(t){p.VE(t)}u8(){p.Uw()}c8(){p.Bw()}f8(){p.Zw()}setColor(t){p.OE(t[0],t[1],t[2],t[3])}d8(t,s,e,i){p.OE(t,s,e,i)}p8(){p.LE()}m8(t){p.DE(t)}g8(t){p.wS(t)}y8(){p.SS()}rect(t){p.JE(t.left,t.top,t.right,t.bottom)}w8(t,s,e,i){p.JE(t,s,e,i)}S8(t){p.su(d.su.bu(t))}b8(t,s,e,i,n,r,h,o){p.eb(t,s,e,i,n,r,h,o)}v8(t,s){p.PS(d.su.bu(t),d.Rect.El(s))}x8(t,s){p.$E(d.su.bu(t),d.su.bu(s))}M8(t,s,e,i,n,r,h,o,a,l,u,c,f){p.YE(t,s,e,i,n,r,h,o,a,l,u,c,d.Rect.El(f))}T8(t,s,e,i,n,r,h,o,a,l,u,c,f){p.TS(t,s,e,i,n,r,h,o,a,l,u,c,d.su.bu(f))}C8(t,s,e){p.ZE(t,s,e)}I8(t){p.sb(t)}line(t,s,e,i){p.Im(t,s,e,i)}G8(t,s,e,i,n,r){p.CS(t,s,e,i,n,r)}_8(t,s,e,i){p.ES(t,s,e,i)}P8(t){p.FS(d.Rect.El(t))}E8(t){p.OS(d.su.bu(t))}A8(t){p.VS(t)}k8(){p.jS()}F8(t){p.JS(t)}O8(){p.YS()}D8(t){n.nn(t,self.L8);const s=t?r.vB(t):null;p.NE(s)}B8(t,s){const e=self.$O.XO(t);if(e)return e.N8(p,{_x:s?._x??"clamp-to-edge",Px:s?.Px??"clamp-to-edge",Ex:s?.Ex??"trilinear",kx:s?.kx??!0});throw new Error("invalid IImageInfo")}W8(t){const s=self.$O.XO(t);if(!s)throw new Error("invalid IImageInfo");s.CG()}o6(t){const s=self.$O.XO(t);if(!s)throw new Error("invalid IImageInfo");const e=s.X2();return self.L8.V8(r,e)}j8(t,s,e){n.bi(t),n.bi(s);const i=p.B2(t,s,{_x:e?._x??"clamp-to-edge",Px:e?.Px??"clamp-to-edge",Ex:e?.Ex??"trilinear",kx:e?.kx??!0});return self.L8.V8(r,i)}H8(t,s,e){n.sn(s,self.L8);const i=r.vB(s);p.F_(t,i,{premultiplyAlpha:e?.premultiplyAlpha??!0})}deleteTexture(t){n.sn(t,self.L8);const s=r.vB(t);p.j2(s)}U8(){const t=p.wb();return new self.z8(r,t)}J8(){r.ND().q8(p)}X8(t){n.sn(t,globalThis.bB);const s=r.vB(t);s.Y8(p)}}}{const mn=new WeakMap,gn=new WeakMap;self.L8=class{constructor(t,s){mn.set(this,{runtime:t,Z8:s}),gn.set(s,this),t.bL(this,s),Object.defineProperties(this,{width:{value:s.am(),writable:!1},height:{value:s.vm(),writable:!1}})}static V8(t,s){if(!s)return null;const e=gn.get(s);return e||new self.L8(t,s)}}}{let i=function(t){return wn.get(t).K8};i;const yn=self.Xs,wn=new WeakMap;self.z8=class{constructor(t,s){wn.set(this,{runtime:t,K8:s}),t.bL(this,s)}release(){i(this).pr()}set Q8(t){yn.Ti(t),i(this).FG(t)}get Q8(){return i(this).DI()}set tH(t){yn.bi(t),i(this).OG(t)}get tH(){return i(this).DG()}set lineHeight(t){yn.bi(t),i(this).BG(t)}get lineHeight(){return i(this).NG()}set sH(t){i(this).WG(t)}get sH(){return i(this).VG()}set eH(t){i(this).jG(t)}get eH(){return i(this).HG()}setColor(t){yn.Ni(t),this.iH(t[0],t[1],t[2])}iH(t,s,e){i(this).XG(t,s,e)}nH(t){yn.Ti(t),i(this).cv(t)}set rH(t){i(this).$G(t)}get rH(){return i(this).YG()}set verticalAlign(t){i(this).ZG(t)}get verticalAlign(){return i(this).KG()}set hH(t){i(this).QG(t)}get hH(){return i(this).t_()}set oH(t){i(this).s_(t)}get oH(){return i(this).e_()}set text(t){yn.Ti(t),i(this).pf(t)}get text(){return i(this).i_()}nB(t,s,e){yn.bi(t),yn.bi(s),yn.bi(e),i(this).n_(t,s,e)}h6(){const{runtime:t,K8:s}=wn.get(this),e=s.X2();return self.L8.V8(t,e)}a6(){return i(this).O_().Pl()}aH(t){yn.Xi(t),i(this).GG=t}lH(){i(this).CG()}get uH(){return i(this).h_()}get cH(){return i(this).a_()}}}{let i=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const e=s.at(-1).toLowerCase();return bn.get(e)||""},r=function(i){return new Promise((t,s)=>{const e=document.createElement("script");e.onload=t,e.onerror=s,e.async=!1,e.type="module",e.src=i,document.head.appendChild(e)})};i,r;const g=self.Bs,Sn=new Set(["local","remote"]),bn=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);g.fH=class extends g.ur{constructor(t,s){super();const e=s.exportType,i=(this.uf=t,this.dH="folders",this.pH=new Map,this.mH="cordova"===e,this.gH=!!s.isiOSCordova,this.yH=!!s.isFileProtocol,this.wH=s.swClientId,this.SH=s.supportedAudioFormats||{},this.bH=new Map,this.vH=!1,this.xH=s.scriptFolder,this.MH="",this.TH="",this.CH="",this.IH=s.fileMap||new Map,this.GH=new Map,"html5"===e||"scirra-arcade"===e||"instant-games"===e);this._H=i?"remote":"local",this.PH=new Map,this.EH=[],this.RH=[],this.AH=!1,this.kH=0,this.FH=0,this.OH=0,this.DH=!1,this.LH=g.dr(g.Md,()=>this.BH(),50),this.NH=g.dr(g.pd,Math.max(g.hardwareConcurrency,8)),this.WH=g.dr(g.pd,20),this.VH=new self.zO(this)}pr(){for(const t of this.PH.values())t.pr();this.PH.clear(),g.jh(this.RH),this.uf=null}ZO(){return this.uf}jH(t){this.dH=t}rD(){return this.dH}HH(){return this.xH}UH(t){this.MH=t}aD(){return this.MH}zH(t){this.TH=t}JH(){return this.TH}qH(t){this.CH=t}XH(){return this.CH}$H(){return this.yH}_o(t,s){return s=s||this._H,g.Mo(t)?("flat"===this.dH&&(t=t.toLowerCase()),this.mH&&this.yH?this.YH(t):"playable-ad-single-file"===this.uf.OD()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):("local"===s?this.NH:this.WH).fc(()=>g._o(t))):g._o(t)}Po(t){return g.Mo(t)?("flat"===this.dH&&(t=t.toLowerCase()),this.mH&&this.yH?this.ZH(t):"playable-ad-single-file"===this.uf.OD()?g.Ro(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this._H?this.NH:this.WH).fc(()=>g.Po(t))):g.Po(t)}Io(t){return g.Mo(t)?("flat"===this.dH&&(t=t.toLowerCase()),this.mH&&this.yH?this.KH(t):"playable-ad-single-file"===this.uf.OD()?g.Ao(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this._H?this.NH:this.WH).fc(()=>g.Io(t))):g.Io(t)}async Go(t){const s=await this.Io(t);return JSON.parse(s)}QH(t,s){return"flat"===this.dH&&(t=t.toLowerCase()),this.uf.WO("runtime","cordova-fetch-local-file",{filename:t,as:s})}KH(t){return this.QH(t,"text")}async YH(t){const s=await this.QH(t,"buffer"),e=i(t);return new Blob([s],{type:e})}async t7(t){"flat"===this.dH&&(t=t.toLowerCase());let s=this.pH.get(t);if(!s){const e=await this.YH(t);s=URL.createObjectURL(e),this.pH.set(t,s)}return s}ZH(t){return this.QH(t,"buffer")}hD(t){"flat"===this.dH&&(t=t.toLowerCase());let s=this.MH+t;return"Gecko"===g.ue.ye&&"preview"===this.uf.OD()?this.s7(s):s}iD(t){return g.xo(t)?Promise.resolve(t):this.mH&&this.yH?this.t7(t):"playable-ad-single-file"===this.uf.OD()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.dH&&(t=t.toLowerCase()),Promise.resolve(t))}e7(s){if(g.xo(s)||"preview"!==this.uf.OD()||!this.wH||!s)return s;try{const t=new URL(s,location.href);return t.searchParams.set("__c3_client_id",this.wH),t.toString()}catch(t){return console.warn("Invalid iframe URL: "+s),s}}i7(t){return this.iD(t)}n7(t){if(t.r7&&!Sn.has(t.r7))throw new Error("invalid load policy");let s=this.PH.get(t.url);return s||(s=g.dr(g.h7,this,{url:t.url,size:t.size||0,r7:t.r7||this._H}),this.PH.set(s.o7(),s),this.AH)||(this.kH+=s.hc(),this.RH.push(s.a7().then(()=>this.l7(s.hc())))),s}u7(t){this.PH.delete(t.o7())}async c7(){try{await Promise.all(this.RH),this.OH=1}catch(t){console.error("Error loading: ",t),this.DH=!0,this.BH()}}f7(){this.AH=!0}d7(){return this.DH}l7(t){this.FH+=t,this.LH.Od()}BH(){const t=g.dr(g.Event,"loadingprogress");this.OH=g.br(this.FH/this.kH,0,1),t.progress=this.OH,this.uf.Hf().dispatchEvent(t)}rO(){return this.OH}oO(){return this.uf.m7().p7()}g7(t){g.Jh(this.EH,t),this.EH.length&&this.RH.push(this.y7())}async y7(){const t=[],s=[];for(const[e,i,n]of this.EH)this.kH+=n,t.push(this.w7(e,i,s).then(()=>this.l7(n)));await Promise.all(t),this.uf.$k()&&0<s.length&&await this.uf.WO("runtime","load-webfonts",{webfonts:s})}async w7(s,e,i){try{let t=await this.iD(e);"Gecko"===g.ue.ye&&(s=`'${s}'`),("Gecko"===g.ue.ye&&"preview"===this.uf.OD()||"playable-ad-single-file"===this.uf.OD())&&(t=this.s7(t));const n=new FontFace(s,`url('${t}')`);(this.uf.$k()?self:document).fonts.add(n),await n.load(),this.uf.$k()&&i.push({name:s,url:t})}catch(t){console.warn(`[C3 runtime] Failed to load web font '${s}': `,t)}}S7(t){return!!this.SH[t]}b7(t,s){this.vH=!!s;for(const[e,i,n]of t)this.bH.set(e,{fileName:e,v7:i.map(t=>({type:t[0],x7:t[1],M7:e+t[1],fileSize:t[2]})),T7:n})}C7(t){"flat"===this.dH&&(t=t.toLowerCase());const s=this.bH.get(t);if(!s)return null;let e=null;for(const i of s.v7)if(e||"audio/webm; codecs=opus"!==i.type||(e=i),this.S7(i.type))return i;return e}I7(t){const s=this.C7(t);return s?{url:this.hD(s.M7),type:s.type}:null}G7(){if(this.vH){const t=[];for(const s of this.bH.values())if(!s.T7){const e=this.C7(s.fileName);e&&t.push({_7:s.fileName,url:this.hD(e.M7),type:e.type,fileSize:e.fileSize})}return t}return[]}P7(t){return"preview"===this.uf.OD()&&(t=new URL(t,location.href).toString()),this.IH.get(t)||null}s7(t){let s=this.GH.get(t);if(!s){const e=this.P7(t);if(!e)return t;s=URL.createObjectURL(e),this.GH.set(t,s)}return s}Ok(){return this.VH}async cD(...t){const s=await Promise.all(t.map(t=>this.iD(t)));if(this.uf.$k())if(1===t.length){const e=t[0];await import((g.Mo(e)?"./":"")+e)}else{const i=t.map(t=>`import "${g.Mo(t)?"./":""}${t}";`).join("\n"),n=URL.createObjectURL(new Blob([i],{type:"application/javascript"}));await import(n)}else await Promise.all(s.map(t=>r(t)))}async dD(t){if(WebAssembly.compileStreaming){const s=await this.iD(t);return WebAssembly.compileStreaming(fetch(s))}{const e=await g.Po(t);return WebAssembly.compile(e)}}async mD(t){const s=await this.iD(t);return this.uf.WO("runtime","add-stylesheet",{url:s})}}}{const vn=self.Bs;vn.E7=class extends vn.ur{constructor(t,s){super(),this.R7=t,this.uf=t.ZO(),this.A7=s.url||"",this.k7=s.size,this.F7=s.r7,this.O7=s.blob||null,this.D7=!!this.O7,this.Lg=null}pr(){this.Lg=null,this.R7=null,this.uf=null,this.O7=null}o7(){return this.A7}hc(){return this.k7}a7(){return"local"===this.F7||this.O7?(this.D7=!0,Promise.resolve()):(this.Lg||(this.Lg=this.R7._o(this.A7,this.F7).then(t=>(this.D7=!0,this.Lg=null,this.O7=t)).catch(t=>{console.error("Error loading resource: ",t),this.Lg=null})),this.Lg)}L7(){return this.D7}B7(){return this.O7?Promise.resolve(this.O7):this.Lg||this.R7._o(this.A7,this.F7)}}}{const lr=self.Bs,ur=new lr.pd,cr=new Set;lr.h7=class extends lr.E7{constructor(t,s){super(t,s),this.N7=null,this.W7=null,this.f1=0,this.V7=-1,this.j7=-1,cr.add(this)}pr(){if(0!==this.f1)throw new Error("released image asset which still has texture references");this.R7.u7(this),this.N7=null,cr.delete(this),super.pr()}static H7(){for(const t of cr)t.N7=null,t.W7=null,t.f1=0}N8(t,s){return s=s||{},this.f1++,this.W7?Promise.resolve(this.W7):(this.N7||(s.Rx=this.uf.ND().U7(),this.N7=this.z7(t,s)),this.N7)}async z7(s,e){try{const i=await this.B7();return 0===this.f1?this.N7=null:await ur.fc(async()=>{const t=await s.xR(i,e);return this.N7=null,0===this.f1?(s.j2(t),null):(this.W7=t,this.V7=t.am(),this.j7=t.vm(),this.W7)})}catch(t){throw console.error("Failed to load texture: ",t),t}}CG(){if(this.f1<=0)throw new Error("texture released too many times");if(this.f1--,0===this.f1&&this.W7){const t=this.W7.jb();t.j2(this.W7),this.W7=null}}J7(){return this.f1}X2(){return this.W7}am(){return this.V7}vm(){return this.j7}async q7(){const t=await this.B7();return lr.He.ImageBitmap?createImageBitmap(t):lr.Fo(t)}}}{let t=function(t,s){return t.RO().X7()-s.RO().X7()};t;const fr=self.Bs;fr.Y7=class extends fr.ur{constructor(t,s,e){super(),this.Z7=t,this.el=s,this.il=e,this.K7=[],this.Q7=!0,this.tU=new Set,this.sU=!1}pr(){fr.jh(this.K7),this.tU.clear(),this.Z7=null}u0(){fr.jh(this.K7),this.Q7=!0,this.tU.clear(),this.sU=!1}eU(){this.Q7=!1}ic(){if(this.K7.length){if(this.K7.length>this.tU.size)return!1;this.iU()}return!0}nU(t){this.tU.has(t)?(this.tU.delete(t),0===this.tU.size&&(this.sU=!1)):(this.K7.push(t),this.Q7=1===this.K7.length)}x0(t){this.tU.add(t),this.sU=!0,50<=this.tU.size&&this.iU()}iU(){this.sU&&(this.K7.length===this.tU.size?this.u0():(fr.Zh(this.K7,this.tU),this.tU.clear(),this.sU=!1))}rU(){this.Q7||(this.K7.sort(t),this.Q7=!0)}hU(t){this.iU(),this.rU(),this.K7.length&&t.push(this.K7)}}}{const dr=self.Bs;dr.oU=class extends dr.ur{constructor(t,s){super(),this.aU=t,this.lU=s,this.uU=dr.dr(dr.tc)}pr(){this.uU.pr(),this.uU=null}cU(t,s,e){let i=this.uU.ne(t,s);return i||(e?(i=dr.dr(dr.Y7,this,t,s),this.uU.Set(t,s,i),i):null)}fU(t){return Math.floor(t/this.aU)}dU(t){return Math.floor(t/this.lU)}pU(i,n,r){if(n)for(let e=n.Cl(),t=n.Gl();e<=t;++e)for(let t=n.Il(),s=n._l();t<=s;++t)if(!r||!r.Zl(e,t)){const h=this.cU(e,t,!1);h&&(h.x0(i),h.ic())&&this.uU.nc(e,t)}if(r)for(let e=r.Cl(),t=r.Gl();e<=t;++e)for(let t=r.Il(),s=r._l();t<=s;++t)n&&n.Zl(e,t)||this.cU(e,t,!0).nU(i)}mU(t,s){let e=this.fU(t.Cl()),i=this.dU(t.Il()),n=this.fU(t.Gl()),r=this.dU(t._l());for(;e<=n;++e)for(let t=i;t<=r;++t){const h=this.cU(e,t,!1);h&&h.hU(s)}}gU(t){let s=t.Cl(),e=t.Il(),i=t.Gl(),n=t._l();for(;s<=i;++s)for(let t=e;t<=n;++t){const r=this.cU(s,t,!1);r&&r.eU()}}}}{let h=function(t,s){return t.RO().X7()-s.RO().X7()},t=function(t,s){return t.RO().Gv()-s.RO().Gv()};h,t;const S=self.Bs,pr=new S.Rect,mr=new S.su,gr=[],yr=(new S.Rect,new S.Rect,self.vs),Cn=yr.Ps,Hn=yr.Es,Tn=yr.Cs,wr=Tn.create(),Sr=Cn.create(),br=Hn.create(),vr=Cn.create(),xr=Cn.create(),Mr=Cn.create(),Tr=S.dr(S.sl),Cr=(S.dr(S.Rect),[]),Ir=[],Gr=[],_r={name:"",sid:-1,yU:!1,isVisible:!0,isInteractive:!0,YB:!1,backgroundColor:[1,1,1,1],c5:!0,wU:[1,1],opacity:1,p5:!1,SU:!1,bU:!1,vU:!1,scaleRate:1,_3:0,u5:0,xU:[],MU:[],TU:[]};S.CU=class extends S.ur{constructor(t,s,e){super(),e=Object.assign({},_r,e),this.IU=t,this.uf=t.ZO(),this.GU=s,this.yr=e.name,this.qg=-1,this._U=!!e.YB,this.PU=-1,this.EU=e.sid,this.RU=!!e.yU,this.AU=!!e.isVisible,this.kU=!!e.isInteractive,this.FU=S.dr(S.qo),this.FU.za(e.backgroundColor),this.OU=!!e.c5,this.DU=e.wU[0],this.LU=e.wU[1],this.ov=S.dr(S.qo,1,1,1,e.opacity),this.BU=S.dr(S.qo),this.NU=!!e.p5,this.WU=!!e.SU,this.VU=!!e.bU,this.jU=!!e.vU,this.HU=e.scaleRate,this.hv=e._3,this.UU=null,this.zU=1,this.av=e.u5,this.JU=0,this.qU=0,this.XU=0,this.$U=!1,this.vP=S.dr(S.Rect),this.YU=S.dr(S.Rect),this.ZU=S.dr(S.Rect),this.KU=!0,this.R2=Tn.create(),this.QU=!0,this.d3=Tn.create(),this.sz=!0,this.ez=S.dr(S.ty.hy),this.iz=!0,this.nz=[],this.rz=e.xU,this.hz=[],this.oz=[],this.az=new Map,this.K7=[],this.lz=!1,this.uz=!1,this.cz=!1;const n=this.uf.ND();this.fz=S.dr(S.dz,this,e.MU),this._k=S.dr(S.ty.MA,n.pz(),{fA:(t,s)=>{const e=s.bk(),i=e.wR();t.cv(e.mz()),t.IR(i),t.GR(i),n.gz(i)},pA:t=>this.tB().yz(t)}),this.wz=!0,this.Sz=!0,this.bz=null,this.vz=[],this.xz=!1,this.Mz=S.dr(S.Rect,0,0,-1,-1),this.Tz=S.dr(S.Rect,0,0,-1,-1),this.Cz=new self.bB(this),this.Iz(),this.Gz()&&(this.bz=S.dr(S.oU,this.uf.Zk(),this.uf.Qk())),this._z=e.TU.map(t=>S.CU.Pz(this.IU,this,t))}Ez(){for(const t of this.rz){const s=this.uf.Rz(t[1]);this.IU.Az(s),s.kz()||(s.Fz(t),s.Oz(this.qg)),this.hz.push(t),this.az.set(t[2],t)}S.Jh(this.nz,this.hz),this.rz=null}static Pz(t,s,e){return S.dr(S.CU,t,s,{name:e[0],sid:e[2],isVisible:e[3],isInteractive:e[13],YB:e[19],backgroundColor:e[4].map(t=>t/255),c5:e[5],wU:[e[6],e[7]],opacity:e[8],p5:e[9],SU:e[17],bU:e[18],vU:e[10],scaleRate:e[11],_3:e[12],u5:e[16],xU:e[14],MU:e[15],TU:e[20]})}pr(){for(const t of this._z)t.pr();S.jh(this._z);for(const s of this.K7)this.uf.H5(s);S.jh(this.K7),this.fz.pr(),this.fz=null,this._k.pr(),this._k=null,this.Cz=null,this.GU=null,this.IU=null,this.uf=null}Dz(t){return this.az.get(t)}Lz(n){let r=this.IU.Bz(),h=0,o=this.hz;for(let i=0,t=o.length;i<t;++i){let t=o[i],s=this.uf.Rz(t[1]),e=!0;if(!s.Nz()||r){const a=this.uf.Wz(t,this,!0);n.push(a),s.Vz()&&(e=!1,this.oz.push(a.Z5()))}e&&(o[h]=o[i],++h)}S.Vh(o,h),this.uf.KL(),this.LO()}jz(t,s){if(!t.RL().oL())throw new Error("instance is not of world type");const e=t.RO();if(e.AO()!==this)throw new Error("instance added to wrong layer");this.K7.push(t),0!==e.Gv()&&(this.cz=!0),s&&this.Gz()&&t.RO().t4(),this.LO(t)}Uz(t){this.K7.includes(t)||(this.K7.push(t),0!==t.RO().Gv()&&(this.cz=!0),this.LO(t))}zz(t,s){const e=t.RO();if(e.AO()!==this)throw new Error("instance added to wrong layer");this.K7.unshift(t),0!==e.Gv()&&(this.cz=!0),this.LO(t),s&&this.Gz()&&t.RO().t4()}Jz(t,s){const e=this.K7.indexOf(t);e<0||(s&&this.Gz()&&t.RO().qz(),this.K7.splice(e,1),this.LO(t),this.Xz())}$z(){this.cz=!0}Xz(){0===this.K7.length&&(this.cz=!1)}Yz(t){if(t){const s=new Set;for(const e of this.K7){const i=e.RO().X7();0<=i&&s.add(i)}let t=-1;for(const n of this.K7){const r=n.RO();if(!(0<=r.X7())){for(++t;s.has(t);)++t;r.Zz(t)}}}this.K7.sort(h)}Kz(){}Qz(){for(const t of this.K7)t.D5().Vz()||this.uf.H5(t);this.uf.KL(),S.jh(this.K7),this.cz=!1,this.LO()}tJ(s,t,e,i,n,r){const h=this.uf.cF(),o=this.uf.sJ(),a=s.eJ(),l=[];for(const u of this.hz){const c=u[0],f=c[0],d=c[1];if(t.Zl(f,d)){const p=o[u[1]];if(p!==s){if(!a)continue;if(!s.iJ(p))continue}let t=n;if(!t){const y=this.uf.PO();t=this.dO()===y?this:(t=y.nJ(this.Qc()))||y.FO(this.Ak())}const m=this.uf.Wz(u,t,!1,void 0,void 0,!1,r),g=(t.qL(m),m.RO());g.n4(e,i),g.t4(),h.XL(!0),m.$L(),h.XL(!1),l.push(m)}}return l}UL(){return this.K7.length}dO(){return this.IU}Qc(){return this.yr}rJ(t){this.qg=t}Ak(){return this.qg}hJ(t){this.PU=t}QV(){return this.PU}ZB(){return this._U}KB(t){this._U!==(t=!!t)&&(this._U=t,this.IU.oJ(),this.uf.BO())}aJ(){let t=this.BB();return(t?t.VB():this.dO().lJ()).indexOf(this)}uJ(){return this.EU}ZO(){return this.uf}cJ(){return this.RU}fJ(){for(const t of this.NB())if(t.cJ())return!0;return!1}YD(){return this.uf.YD()}tB(){return this.fz}Rk(){return this.dJ(),this._k}dJ(){const t=this.pJ();if(this.wz||t!==this.Sz||this._k.m3()){const s=this.tB().mJ();this._k.g3(s.map(t=>t.pT()),{gA:s.map(t=>t.Ak()),yA:!t,xA:!0}),this.wz=!1,this.Sz=t}}UW(){this.tB().UW(),this.wz=!0}Gz(){return this.jU&&!this.VU}gJ(){return this.bz}yJ(){this.xz=!1}qB(){for(const t of this.wJ())if(!t.UB())return!1;return!0}UB(){return this.AU}zB(t){this.AU!==(t=!!t)&&(this.AU=t,this.uf.BO())}$B(t){this.kU=!!t}XB(){return this.kU}t5(){for(const t of this.wJ())if(!t.XB())return!1;return!0}S5(t){if(this.$U!==(t=!!t)){if(this.$U=t){const s=this.dO();this.qU=s.uB(),this.XU=s.fB()}this.SJ(),this.uf.BO()}}bJ(){return this.$U}lB(t){const s=this.dO(),e=s.vJ(),i=s.xJ();this.qU!==(t=(t=i<t?i:t)<e?e:t)&&(this.qU=t,this.bJ())&&(this.SJ(),this.uf.BO())}cB(t){const s=this.dO(),e=s.MJ(),i=s.TJ();this.XU!==(t=(t=i<t?i:t)<e?e:t)&&(this.XU=t,this.bJ())&&(this.SJ(),this.uf.BO())}uB(){return this.bJ()?this.qU:this.dO().uB()}fB(){return this.bJ()?this.XU:this.dO().fB()}v5(){return this.CJ(),this.vP}IJ(){return this.CJ(),this.YU}GJ(){return this.CJ(),this.ZU}AB(){const t=this.dO();return[t._J(),t.PJ()]}mw(t){return this.uf.mw(t)}EJ(c,i){const n=this.IJ();if(0===c)i.G(n);else{let o=n.kl(),a=n.Fl(),t=this.RJ(c),s=n.width()/t,e=n.height()/t,[l,u]=this.AB();if(.5!==l||.5!==u){let t=this.AJ(),s=this.uf,e=this.mw()/t,i=(l-.5)*s.kJ()/e,n=(u-.5)*s.FJ()/e,r=this.aB(),h=(0!==r&&(Tr.set(i,n),Tr.rotate(r),i=Tr.hl(),n=Tr.al()),S.Lr(t,0,c));o+=S.Lt(i,0,h),a+=S.Lt(n,0,h)}i.set(o-s/2,a-e/2,o+s/2,a+e/2)}}FE(){return this.ov.da()}DE(t){t=S.br(t,0,1),this.ov.da()!==t&&(this.ov.aa(t),this.Iz(),this.uf.BO())}Iz(){this.BU.G(this.ov),this.BU.Ta()}mz(){return this.BU}pJ(){return this.ov.Sa(1,1,1,1)}n5(){return this.HU}i5(t){this.HU!==t&&(this.HU=t,this.SJ(),this.uf.BO())}o5(){return this.DU}l5(){return this.LU}OJ(t,s){this.DU===t&&this.LU===s||(this.DU=t,this.LU=s,this.SJ(),this.uf.BO())}h5(t){this.OJ(t,this.l5())}a5(t){this.OJ(this.o5(),t)}_v(t){this.av!==t&&(this.av=t,this.uf.BO())}Gv(){return this.av}oB(t){t=S.vr(t),this.JU!==t&&(this.JU=t,this.SJ(),this.uf.BO())}aB(){return S.vr(this.IU.aB()+this.JU)}r5(){return this.JU}DJ(){return 0<this.K7.length}OO(){return this.K7}LJ(){return this.BJ()&&this.VU?(S.Jh(Gr,this.OO()),Gr.sort((t,s)=>this.NJ(t,s)),Gr):this.OO()}WJ(t){S.Zn(t,this.LJ());for(const s of this._z)s.qB()&&0<s.FE()&&s.WJ(t)}NJ(t,s){const e=this.dO().VJ(),i=e[0],n=e[1],r=e[2],h=t.RO(),o=s.RO(),a=h.xv()-i,l=h.Cv()-n,u=h.Gv()-r,c=o.xv()-i,f=o.Cv()-n,d=o.Gv()-r;return c*c+f*f+d*d-(a*a+l*l+u*u)}w5(){return this.FU}d5(){return this.OU}f5(t){this.OU!==(t=!!t)&&(this.OU=t,this.uf.BO())}g5(){return this.NU}m5(t){this.NU!==(t=!!t)&&(this.NU=t,this.uf.BO())}jJ(){return!this.ZO().HJ()||!this.WU}BJ(){return!this.jJ()}UJ(){return this.BJ()&&this.dO().zJ()}JJ(){if(!this.UJ())return!1;for(const t of this._z)if(!t.JJ())return!1;return!0}uv(t){this.hv!==t&&(this.hv=t,this.uf.BO())}y5(){return this.hv}qJ(){return!this.GU}BB(){return this.GU}XJ(t){this.GU=t}VB(){return this._z}$J(){return 0<this._z.length}YJ(t,s=!0){s?this._z.push(t):this._z.unshift(t)}ZJ(t,s,e){let i=this._z.indexOf(s);if(-1===i)throw new Error("cannot find layer to insert by");e&&++i,this._z.splice(i,0,t)}KJ(t){const s=this._z.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this._z.splice(s,1)}QJ(){for(const t of this._z)if(t.tq())return!0;return!1}*HB(){for(const t of this._z)yield*t.HB();yield this}*NB(){let t=this.BB();for(;t;)yield t,t=t.BB()}*wJ(){yield this,yield*this.NB()}sq(t){for(const s of this.NB())if(s===t)return!0;return!1}eq(t){return this===t||this.DU===t.DU&&this.LU===t.LU&&this.zU===t.zU&&this.HU===t.HU&&this.JU===t.JU&&this.uB()===t.uB()&&this.fB()===t.fB()}iq(){return{parallaxX:this.o5(),parallaxY:this.l5(),scale:this.e5(),scaleRate:this.n5(),angle:this.r5(),hasOwnScroll:this.bJ(),scrollX:this.uB(),scrollY:this.fB()}}nq(t){this.OJ(t.parallaxX,t.parallaxY),this.s5(t.scale),this.i5(t.scaleRate),this.oB(t.angle),this.S5(t.hasOwnScroll),this.lB(t.scrollX),this.cB(t.scrollY),this.CJ()}rq(t){if(0!==t.size){const s=S.Zh(this.K7,t);0<s&&(this.Xz(),this.LO())}}LO(t){this.lz=!1,this.xz=!1,t&&!t.D5().RL().lL()||(this.uz=!1)}hq(){if(!this.lz){if(this.K7.sort(t),this.Gz())for(let t=0,s=this.K7.length;t<s;++t){const e=this.K7[t].RO();e.Zz(t),this.bz.gU(e.oq())}else for(let t=0,s=this.K7.length;t<s;++t)this.K7[t].RO().Zz(t);this.lz=!0}}aq(){if(!this.uz){let t=this.IU.lq(this.QV()),s=t.map(t=>[...t.HB()]).flat(),e=0;for(const i of s){for(const n of i.OO())n.D5().RL().lL()&&n.RO().uq(e++);i.cq()}}}cq(){this.uz=!0}fq(){return{isVisible:this.qB(),opacity:this.FE(),isInteractive:this.XB()}}pq(t,s,e){const i=t.RO(),n=s.RO();if(i.AO()!==this||n.AO()!==this)throw new Error("can't arrange Z order unless both objects on this layer");let r=i.kO(),h=n.kO();return r!==h+(e?1:-1)&&(S.qh(this.K7,r),r<h&&h--,e&&h++,h===this.K7.length?this.K7.push(t):this.K7.splice(h,0,t),this.LO(t),!0)}mq(t,s){let e=[],i=0,n=0,r=t.length,h=s.length;for(;i<r&&n<h;){const o=t[i],a=s[n];o.RO().X7()<a.RO().X7()?(e.push(o),++i):(e.push(a),++n)}for(;i<r;++i)e.push(t[i]);for(;n<h;++n)e.push(s[n]);return e}gq(s){const e=[],i=s.length;for(let t=0;t<i-1;t+=2){const n=s[t],r=s[t+1];e.push(this.mq(n,r))}return i%2==1&&e.push(s[i-1]),e}yq(t){for(;1<t.length;)t=this.gq(t);return t[0]}wq(){return this.hq(),S.jh(gr),this.bz.mU(this.v5(),gr),gr.length?1===gr.length?gr[0]:this.yq(gr):[]}tq(){return this.qB()&&0<this.FE()&&this.Sq()}Sq(){if(this.DJ()||!this.d5())return!0;for(const t of this._z)if(t.Sq())return!0;return!1}bq(){return this.g5()||!this.pJ()||0!==this.y5()||this.fz.vq()}xq(){if(this.bq())return!0;for(const t of this._z)if(t.xq())return!0;return!1}wR(){return this.UU}RJ(t){if(this.IU.DB())return 1;{const s=this.Mq();return s/(s-t)}}Tq(t){const s=this.uf.k5();if(this.IU.DB())return s;{const e=this.Mq(),i=this.mw();return i/Math.abs(e-t)*s}}SJ(){this.sz=!0,this.iz=!0,this.KU=!0}Cq(t){return this.sz&&(this.Iq(t,this.d3,0,0,null),this.sz=!1),this.d3}AJ(t){return this.mw(t)/this.Gq()}Mq(){return this.UJ()?this.dO().VJ()[2]:this.AJ()}_q(){if(this.UJ()){const t=this.dO().VJ();return[t[0],t[1],t[2]]}return this.Pq()}Pq(t=0,s=0,n=0){let r=this.uf,e=this.dO(),i=r.Eq(),h=r.Rq(),o=(this.uB()-i)*this.DU+i,a=(this.fB()-h)*this.LU+h,l=(r.eF()&&(o=Math.round(o),a=Math.round(a)),o+t),u=a+s,c=e.DB()?this.mw(n):this.AJ(n),[f,d]=this.AB();if(.5!==f||.5!==d){let t=this.mw(n)/c,s=(f-.5)*r.kJ()/t,e=(d-.5)*r.FJ()/t,i=this.aB();0!==i&&(Tr.set(s,e),Tr.rotate(i),s=Tr.hl(),e=Tr.al()),l+=s,u+=e}return[l,u,c]}Iq(t,s,e,i,n){const r=this.uf,h=this.dO();if(this.UJ()){Cn.G(vr,h.VJ()),Cn.G(xr,h.Aq()),Cn.G(Mr,h.kq());const o=r.Eq(),a=r.Rq(),l=xr[0]-vr[0],u=xr[1]-vr[1],c=xr[2]-vr[2];vr[0]=(vr[0]-o)*this.DU+o,vr[1]=(vr[1]-a)*this.LU+a,vr[2]*=Math.max(this.DU,this.LU),xr[0]=vr[0]+l,xr[1]=vr[1]+u,xr[2]=vr[2]+c}else{const[f,d,p]=this.Pq(e,i,n),m=(Cn.set(vr,f,d,p),Cn.set(xr,f,d,p-100),this.aB());0===m?Cn.set(Mr,0,1,0):Cn.set(Mr,Math.sin(m),Math.cos(m),0)}t.Aw(s,vr,xr,Mr,n||r.FJ())}Fq(){this.QU=!0,this.iz=!0,this.KU=!0}Oq(t){return this.QU&&(this.Dq(t),this.QU=!1),this.R2}Dq(t){const s=this.uf.ND(),[e,i]=this.AB();if(this.IU.DB())t.Rw(this.R2,s.Lq(),s.Bq());else if(.5===e&&.5===i)Tn.G(this.R2,s.Nq());else{const n=s.Lq(),r=s.Bq();t.Pw(this.R2,n/r,e,i)}}Y8(t,s=!0,e=0,i=0,n=0){s&&t.ME(this.Oq(t));let r;r=0===e&&0===i&&0===n?this.Cq(t):(this.Iq(t,wr,e,i,n),wr),t.PE(r)}Wq(t){this.Y8(t),t.gS(this.Gv())}Vq(t){let s=null;if(t.fb()&&this.uf.jq()){const e=this.uf.ND().Hq(this);e&&(s=e.aP(),t.kR(s))}return s}Uq(t){if(t.Ew()&&this.uf.jq()){const s=2*(this.Ak()+1);t.StartMeasuringRenderPassTime(s,1+s)}}Sx(t,s,e){let i=this.uf.ND(),n=this.bq(),r=null,h=this.Vq(t);if(this.Uq(t),n){const o={Ex:this.uf.tF(),w2:!0,zq:!!t.Ew()&&this.uf.Jq()};"low"===i.qq()&&(o.width=i.Lq(),o.height=i.Bq()),r=this.uf.Xq(o),this.UU=r,t.TR(r),this.d5()&&t.cR(0,0,0,0)}else this.UU=s,t.TR(s);if(this.d5()||t.ec(this.FU),this.IU.$q(t,this.UU,this._z,n&&this.d5()),this.Uq(t),this.Y8(t),t.gS(this.Gv()),t.pR(this.BJ()),this.Gq()>Number.EPSILON){this.hq();const a=this.Gz()&&0===this.Gv()&&!this.cz;this.UJ()?this.Yq(t):a?this.Zq(t):this.Kq(t,this.LJ())}t.gS(0),t.wS(0),n&&(t.pR(!1),this.Qq(t,r,s,e)),h&&t.OR(h),this.UU=null}Kq(e,i){let n=this.v5(),r=this.UU,h=this.dO().DB(),o=this.dO().t9(),a=null;for(let t=0,s=i.length;t<s;++t){const l=i[t];if(l!==a){const u=(a=l).RO();u.qB()&&u.s9(n,o,h)&&this.e9(l,u,e,r)}}}Yq(i){const n=this.UU,r=this.i9(),h=Cr,o=Ir,a=this.LJ();for(let s=0,e=a.length;s<e;){const l=a[s],u=l.RO();if(u.qB()&&u.n9(r)){(!l.r9()||0<u.h9())&&o.push(l);const c=l.RO().h4();h.push(l);let t=s+1;for(;t<e;++t){const f=a[t],d=f.RO();if(d.qB()&&d.n9(r)){if(d.h4()!==c)break;(f.r9()?(0<d.h9()&&o.push(f),h):o).push(f)}}if(1!==h.length||h[0].o9()){this.a9(i,h);for(let t=0,s=o.length;t<s;++t){const p=o[t],m=p.RO();m.l9(!0),this.e9(p,m,i,n),m.l9(!1)}}else{this.e9(l,u,i,n);for(let t=0,s=o.length;t<s;++t){const g=o[t];if(g!==l){const y=g.RO(),w=y.AO();w.e9(g,y,i,n)}}}s=t,S.jh(h),S.jh(o)}else++s}}a9(e,i){const n=this.UU;e.PR();for(let t=0,s=i.length;t<s;++t){const r=i[t],h=r.RO();h.u9(!0),this.c9(r,h,e)}e.ER();for(let t=0,s=i.length;t<s;++t){const o=i[t],a=o.RO();this.e9(o,a,e,n),a.u9(!1)}e.AR()}Zq(t){let s=this.bz,e=this.Tz,i=this.Mz,n=this.v5(),r;e.set(s.fU(n.Cl()),s.dU(n.Il()),s.fU(n.Gl()),s.dU(n._l())),this.xz&&e.equals(i)?r=this.vz:(r=this.wq(),this.xz=!0,i.G(e)),this.Kq(t,r),r!==this.vz&&S.Jh(this.vz,r)}e9(t,s,e,i){s.vq()?this.f9(t,s,e,i):this.c9(t,s,e)}c9(t,s,e){const i=s.d9();e.Qw()!==i&&i.lv(),t.Sx(e)}f9(t,s,e,i){this.p9(t,s,e,i,null)&&this.Y8(e)}p9(t,s,e,i,n){const r=s.KN().Rk();return r.I3(e,i,{G3:t,_3:s.y5(),devicePixelRatio:this.uf.m9(),time:t.g9(),P3:this.uf.y9()*this.Gq(),E3:this.aB(),Q3:s.a4(),tk:r.wk()?null:this.w9(s),D3:n&&n.D3,L3:n&&n.L3,B3:n&&n.B3,N3:n&&n.N3}),e.gS(this.Gv()),r.RE()}Qq(t,s,e,i){const n=this.fz.mJ(),r=this.uf;0===n.length?(t.TR(e),t.Bw(),i&&0===this.hv&&this.pJ()?t.CR(s):(t.uv(this.hv),t.cv(this.BU),t.IR(s)),t.GR(s),r.gz(s)):this.Rk().I3(t,e,{G3:this,_3:this.y5(),devicePixelRatio:r.m9(),P3:r.y9()*this.Gq(),E3:this.aB(),Q3:this.v5(),tk:null,mA:!0})}e5(){return this.zU}s5(t){this.zU!==t&&(this.zU=t,this.IU.S9(),this.SJ(),this.uf.BO())}k5(){return this.Gq()*this.uf.k5()}oj(){return this.Gq()*this.uf.oj()}Gq(){return(this.zU*this.IU.hB()-1)*this.HU+1}CJ(){if(this.KU){this.KU=!1;let t=this.uf.Eq(),s=this.uf.Rq(),e=(this.uB()-t)*this.DU+t,i=(this.fB()-s)*this.LU+s,n=this.Gq(),r=this.uf.kJ()/n,h=this.uf.FJ()/n,o=e-r/2,a=i-h/2;this.uf.eF()&&(o=Math.round(o),a=Math.round(a));const l=this.YU,u=(l.set(o,a,o+r,a+h),this.aB()),c=(0!==u&&(pr.G(l),pr.offset(-l.kl(),-l.Fl()),mr.Mu(pr,u),mr.Cu(pr),pr.offset(l.kl(),l.Fl()),l.G(pr)),this.av);this.EJ(c,this.vP),this.UJ()?this.b9(c,this.ZU):this.ZU.G(this.vP)}}b9(t,s){let e=this.uf.ND(),i=e.HD(),n=e.zD(),[r,h]=this.M5(0,0,t),[o,a]=this.M5(i,0,t),[l,u]=this.M5(i,n,t),[c,f]=this.M5(0,n,t),d=Math.min(r,o,l,c),p=Math.min(h,a,u,f),m=Math.max(r,o,l,c),g=Math.max(h,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}M5(t,s,e=0){return this.v9(t,s,e,this.oj())}P5(t,s,e=0){return this.v9(t,s,e,this.k5()*this.YD())}v9(t,s,e,i){const n=this.uf,r=n.jb(),h=this.Gq(),o=n.kJ()/h,a=n.FJ()/h,l=br,u=(Hn.set(l,0,0,o,a),t/=i,s=l[3]-s/i,this.Oq(r)),c=this.Cq(r),f=Sr,d=S.ty.ny(t,s,e,c,u,l,f);return d?[f[0],f[1]]:[NaN,NaN]}x9(t,s){const e=this.zU,i=this.HU,n=this.DU,r=this.LU,h=this.JU,o=(this.zU=1,this.HU=1,this.DU=1,this.LU=1,this.JU=0,this.SJ(),this.M5(t,s));return this.zU=e,this.HU=i,this.DU=n,this.LU=r,this.JU=h,this.SJ(),o}G5(t,s,e=0){return this.M9(t,s,e,this.oj())}R5(t,s,e=0){return this.M9(t,s,e,this.k5()*this.YD())}M9(t,s,e,i){const n=this.uf,r=n.jb(),h=this.Gq(),o=n.kJ()/h,a=n.FJ()/h,l=br,u=(Hn.set(l,0,0,o,a),this.Oq(r)),c=this.Cq(r),f=Sr,d=S.ty.ey(t,s,e,c,u,l,f);return d?[f[0]*i,(l[3]-f[1])*i]:[NaN,NaN]}T9(t,s){return t*=this.k5()*this.YD(),0!==s&&(t*=this.RJ(s)),t}w9(t){const s=t.a4(),e=t.h4(),i=t.h9(),l=e+i,u=s.Cl(),c=s.Il(),f=s.Gl(),d=s._l();if(this.UJ()){if(this.C9(u,c,e)||this.C9(f,c,e)||this.C9(f,d,e)||this.C9(u,d,e))return null;if(0<i&&(this.C9(u,c,l)||this.C9(f,c,l)||this.C9(f,d,l)||this.C9(u,d,l)))return null}else if(l>=this.AJ())return null;let[p,m]=this.R5(u,c,e),[g,y]=this.R5(f,d,e);if(0!==this.aB()||0<i||this.UJ()){const[w,S]=this.R5(f,c,e),[b,v]=this.R5(u,d,e);if(0<i){let[t,s]=this.R5(u,c,l),[e,i]=this.R5(f,c,l),[n,r]=this.R5(f,d,l),[h,o]=this.R5(u,d,l),a=Math.min(p,g,w,b,t,e,n,h);g=Math.max(p,g,w,b,t,e,n,h),p=a,a=Math.min(m,y,S,v,s,i,r,o),y=Math.max(m,y,S,v,s,i,r,o),m=a}else{let t=Math.min(p,g,w,b);g=Math.max(p,g,w,b),p=t,t=Math.min(m,y,S,v),y=Math.max(m,y,S,v),m=t}}return pr.set(p,m,g,y),pr}i9(){return this.iz&&(this.I9(),this.iz=!1),this.ez}I9(){const t=this.uf.jb(),s=this.Oq(t),e=this.Cq(t);this.ez.Sy(e,s)}C9(t,s,e){return this.i9().vy(t,s,e)}G9(){const t={d:this.cJ(),s:this.e5(),a:this.r5(),v:this.UB(),i:this.XB(),html:this.ZB(),bc:this.FU.toJSON(),t:this.d5(),sx:this.qU,sy:this.XU,hosp:this.$U,px:this.o5(),py:this.l5(),c:this.ov.toJSON(),sr:this.n5(),fx:this.fz.Ov(),cg:this.oz};return t}_9(t){this.RU=!!t.d,this.zU=t.s,this.JU=t.a,this.AU=!!t.v,this.kU=!t.hasOwnProperty("i")||t.i,this._U=!!t.html,this.FU.za(t.bc),this.OU=!!t.t,t.hasOwnProperty("sx")&&(this.qU=t.sx),t.hasOwnProperty("sy")&&(this.XU=t.sy),t.hasOwnProperty("hosp")&&(this.$U=!!t.hosp),this.DU=t.px,this.LU=t.py,this.ov.za(t.c),this.Iz(),this.HU=t.sr,S.Jh(this.oz,t.cg),S.Jh(this.hz,this.nz);let e=new Set(this.oz),i=0;for(let t=0,s=this.hz.length;t<s;++t)e.has(this.hz[t][2])||(this.hz[i]=this.hz[t],++i);S.Vh(this.hz,i),this.fz.Dv(t.fx),this.wz=!0}P9(){this.Yz(!1),this.LO(),this.SJ(),this.Fq()}mB(){return this.Cz}qL(t,s=!1){if(this.K7.includes(t))s&&this.K7.sort((t,s)=>{const e=t.RO().E9(),i=s.RO().E9();return e-i});else if(t.R9()){const e=[...t.B4()];e.push(t),e.sort((t,s)=>{const e=t.RO().E9(),i=s.RO().E9();return e-i});for(const i of e)if(i.X5())for(const n of i.Y5())if(!e.includes(n)){const r=[...n.B4()];r.push(n),r.sort((t,s)=>{const e=t.RO().E9(),i=s.RO().E9();return e-i}),r&&r.length&&e.splice(e.length,0,...r)}for(const h of e)h.RL().oL()&&this.jz(h,!0)}else if(t.RL().oL()&&this.jz(t,!0),t.X5())for(const o of t.Y5()){const a=[...o.B4()];if(a.push(o),a.sort((t,s)=>{const e=t.RO().E9(),i=s.RO().E9();return e-i}),a&&a.length)for(const l of a)l.RL().oL()&&this.jz(l,!0)}}}}{let l=function(t,s,e,i){return t[0]===Math.fround(s)&&t[1]===Math.fround(e)&&t[2]===Math.fround(i)},v=function(t,s){G!==t&&(t.Wq(s),G=t)},x=(l,v,self.Bs),i=self.C3Debugger,n=(x.dr(x.Rect),x.dr(x.Rect),x.dr(x.Rect)),M=x.dr(x.qo),t=self.vs,u=t.Ps,a=[],T=[],C=[],I=[],G=null;x.A9=class extends x.ur{constructor(t,s,e){super(),this.k9=t,this.uf=t.ZO(),this.yr=e[0],this.F9=e[1],this.O9=e[2],this.qm=e[1],this.Xm=e[2],this.D9=!!e[3],this.L9=!!e[4],this.B9=e[5],this.N9=e[6],this.W9=e[7],this.V9=null,this.EU=e[8],this.qg=s,this.qU=0,this.XU=0,this.zU=1,this.JU=0,this.j9=new Set,this.H9=new Set,this.U9=new Set,this.z9=[],this.J9=[],this.q9=new Map,this.X9=new Map,this.Y9=[],this.Z9=!1,this.K9=u.create(),this.Q9=u.create(),this.tX=u.create(),this.sX=[],this.eX=[],this.iX=new Map,this.nX=new Map,this.rX=-1;const n=this.uf.ND();this.fz=x.dr(x.dz,this,e[11]),this._k=x.dr(x.ty.MA,n.pz(),{fA:(t,s)=>{const e=s.bk(),i=e.wR();t.LE(),t.IR(i),t.GR(i),n.gz(i)},pA:t=>this.tB().yz(t)}),this.wz=!0,this.hX=!1,this.UU=null,this.aX={},this.lX=new Map,this.uX=!0,this.cX=new self.QL(this),this.fX=x.dr(x.Event.Hf);for(const i of e[9])this.sX.push(x.CU.Pz(this,null,i));this.dX();for(const r of this.wB())r.Ez();for(const h of e[10]){const o=this.uf.Rz(h[1]);if(!o)throw new Error("missing nonworld object class");o.kz()||o.Fz(h),this.Y9.push(h),this.Az(o)}}pr(){for(const t of this.eX)t.pr();x.jh(this.eX),this.U9.clear(),this.V9=null,this.k9=null,this.uf=null}ZO(){return this.uf}Qc(){return this.yr}uJ(){return this.EU}Ak(){return this.qg}tB(){return this.fz}Rk(){return this.dJ(),this._k}dJ(){const t="low"===this.uf.ND().qq();if(this.wz||this.hX!==t||this._k.m3()){const s=this.tB().mJ();this._k.g3(s.map(t=>t.pT()),{gA:s.map(t=>t.Ak()),wA:t,xA:!0}),this.wz=!1,this.hX=t}}UW(){this.tB().UW(),this.wz=!0}pX(){let e=this.eX[0].Gq();for(let t=1,s=this.eX.length;t<s;++t){const i=this.eX[t];0===i.o5()&&0===i.l5()||(e=Math.min(e,i.Gq()))}return e}mX(){return.5*this.uf.kJ()/this.pX()}gX(){return.5*this.uf.FJ()/this.pX()}vJ(){return this.yX()?-1/0:this.mX()}xJ(){return this.yX()?1/0:this.am()-this.mX()}MJ(){return this.yX()?-1/0:this.gX()}TJ(){return this.yX()?1/0:this.vm()-this.gX()}lB(t){const s=this.vJ(),e=this.xJ();this.qU!==(t=(t=e<t?e:t)<s?s:t)&&(this.qU=t,this.wX(),this.uf.BO())}uB(){return this.qU}cB(t){const s=this.MJ(),e=this.TJ();this.XU!==(t=(t=e<t?e:t)<s?s:t)&&(this.XU=t,this.wX(),this.uf.BO())}fB(){return this.XU}yX(){return this.D9}S9(){this.lB(this.uB()),this.cB(this.fB());for(const t of this.eX)t.bJ()&&(t.lB(t.uB()),t.cB(t.fB()))}EB(t,s){this.B9===t&&this.N9===s||(this.B9=t,this.N9=s,this.SX()&&(this.bX(),this.wX(),this.uf.BO()))}_J(){return this.DB()?.5:this.B9}PJ(){return this.DB()?.5:this.N9}t9(){const t=this._J(),s=this.PJ();return t<0||1<t||s<0||1<s}kB(){this.L9&&(this.L9=!1,this.bX(),this.wX(),this.uf.BO())}OB(){this.L9||(this.L9=!0,this.bX(),this.wX(),this.uf.BO())}DB(){return this.L9}SX(){return!this.DB()}vX(t){this.Z9!==(t=!!t)&&(this.Z9=t,this.wX(),this.uf.BO())}zJ(){return this.Z9}xX(t,s,e,i,n,r,h,o,a){l(this.K9,t,s,e)&&l(this.Q9,i,n,r)&&l(this.tX,h,o,a)||(u.set(this.K9,t,s,e),u.set(this.Q9,i,n,r),u.set(this.tX,h,o,a),this.MX())}MX(){this.wX(),this.uf.BO()}VJ(){return this.K9}Aq(){return this.Q9}kq(){return this.tX}hB(){return this.zU}rB(t){this.zU!==t&&(this.zU=t,this.wX(),this.S9(),this.uf.BO())}oB(t){t=x.vr(t),this.JU!==t&&(this.JU=t,this.wX(),this.uf.BO())}aB(){return this.JU}am(){return this.qm}ym(t){!isFinite(t)||t<1||(this.qm=t)}vm(){return this.Xm}lm(t){!isFinite(t)||t<1||(this.Xm=t)}TX(){return this.V9}lJ(){return this.sX}*wB(){for(const t of this.sX)yield*t.HB()}yB(){return this.eX}CX(){return this.eX.length}AO(t){return"number"==typeof t?this.FO(t):this.nJ(t.toString())}FO(t){return t=x.br(Math.floor(t),0,this.eX.length-1),this.eX[t]}nJ(t){return this.iX.get(t.toLowerCase())||null}IX(t){return!!this.nJ(t)}GX(t){return this.nX.get(t)||null}bX(){for(const t of this.eX)t.Fq()}wX(){for(const t of this.eX)t.SJ()}xB(t,s,e){if(this.IX(t))throw new Error(`layer name '${t}' already in use`);if(!s&&e<2)throw new Error("invalid insert position");const i=2<=e?s:s.BB(),n=x.dr(x.CU,this,i,{name:t,sid:Math.floor(1e15*Math.random()),yU:!0});this._X(n,s,e),this.ZO().BO(),this.oJ()}TB(t,s,e){if(!s&&e<2)throw new Error("invalid insert position");t===s&&e<2||(this.PX(t),this._X(t,s,e),this.ZO().BO(),this.oJ())}IB(t){if(this.PX(t)){const s=this.uf.cF();s.XL(!0),t.pr(),s.XL(!1),this.ZO().BO(),this.oJ()}}_B(){const t=new Set;for(const s of this.wB())s.cJ()&&!s.fJ()&&t.add(s);if(0!==t.size){const e=this.uf.cF();e.XL(!0);for(const i of t)this.PX(i),i.pr();e.XL(!1),this.ZO().BO(),this.oJ()}}_X(s,e,i){if(2<=i)if(e){if(e===s||e.sq(s))throw new Error(`cannot move layer '${s.Qc()}' to sub-layer of itself`);e.YJ(s,2===i),s.XJ(e)}else 2===i?this.sX.push(s):this.sX.unshift(s),s.XJ(null);else{const t=e.BB();if(t){if(e.sq(s))throw new Error(`cannot move layer '${s.Qc()}' to sub-layer of itself`);t.ZJ(s,e,0===i),s.XJ(t)}else{let t=this.sX.indexOf(e);if(-1===t)throw new Error("cannot find layer to insert by");0===i&&++t,this.sX.splice(t,0,s),s.XJ(null)}}}PX(t){const s=t.BB();if(s)return s.KJ(t),!0;if(1<this.sX.length){const e=this.sX.indexOf(t);if(-1===e)throw new Error("cannot find layer to remove");return this.sX.splice(e,1),!0}return!1}dX(){this.eX=[...this.wB()],this.iX.clear(),this.nX.clear();for(let t=0,s=this.eX.length;t<s;++t){const e=this.eX[t];e.rJ(t),this.iX.set(e.Qc().toLowerCase(),e),this.nX.set(e.uJ(),e)}}EX(){let t=0;for(const s of this.sX){for(const e of s.HB())e.hJ(t);s.ZB()&&t++}}RX(){return this.sX.at(-1).QV()+1}async oJ(){this.dX(),this.EX(),this.rX=this.RX()}AX(){return this.rX}kX(){this.rX=-1}lq(t){const s=[];for(const e of this.sX){const i=e.QV();if(i===t)s.push(e);else if(t<i)break}return s}iq(){return{scrollX:this.uB(),scrollY:this.fB(),scale:this.hB(),angle:this.aB(),vpX:this._J(),vpY:this.PJ()}}nq(t){this.lB(t.scrollX),this.cB(t.scrollY),this.rB(t.scale),this.oB(t.angle),this.EB(t.vpX,t.vpY)}FX(){let t=this.sX.filter(t=>t.tq())[0];for(;t;){if(!t.d5())return M.la(t.w5()),M.aa(1),M;if(t.bq())return M.Ko(0,0,0,0),M;t=t.VB().filter(t=>t.tq())[0]}return M.Ko(0,0,0,0),M}Bz(){return this.uX}OX(){return[...this.j9]}Az(t){if(t.X5())for(const s of t.LX().DX())this.j9.add(s);else this.j9.add(t)}BX(){return[...this.H9]}NX(t,s){if(t===this||!s)return Promise.resolve();t&&(x.No(this.H9,t.H9),t.H9.clear());const e=[];for(const i of this.j9)this.H9.has(i)||(e.push(i.WX(s)),this.H9.add(i));return Promise.all(e)}async VX(t){if(t.eJ())throw new Error("cannot load textures for family");const s=this.uf.jb();if(s&&!s.k_()&&!this.H9.has(t)){this.H9.add(t);const e=t.WX(s);this.jX(e),await e,t.HX(),this.uf.BO()}}jX(t){this.U9.add(t),t.then(()=>this.U9.delete(t)).catch(()=>this.U9.delete(t))}UX(){return Promise.all([...this.U9])}zX(t){if(t.eJ()||0<t.UL())throw new Error("cannot unload textures");const s=this.uf.jb();s&&this.H9.has(t)&&(this.H9.delete(t),t.JX(s))}qX(t,s){if(t!==this&&s)for(const e of this.H9)e.Vz()||t.j9.has(e)||(e.JX(),this.H9.delete(e))}XX(){this.H9.clear()}async $X(t){const s=this.uf,e=this.k9,i=s.cF(),n=(this.W9&&(this.V9=i.YX(this.W9),this.V9.ZX()),e.KX(this),this.qm=this.F9,this.Xm=this.O9,this.qU=s.Zk()/2,this.XU=s.Qk()/2,this.S9(),this.bX(),this.wX(),this.EX(),await this.uf.ND().QX(this.RX(),!0),this.t$(t),this.uf.s$(!0),this.e$(),this.uX||this.i$(),this.n$(this.z9),this.n$(this.J9),this.r$(),e.h$(),s.KL(),this.uf.s$(!1),this.uf.o$());if(await Promise.all(n),x.jh(n),!s.a$()){for(const r of this.z9)r.l$();for(const h of this.J9)h.u$(this.q9,this.X9);for(const[o,a]of Object.entries(this.aX)){const l=this.uf.Wj(parseInt(o,10));l&&!l.eJ()&&l.Nz()&&x.jh(a)}for(const u of this.z9)u.c$();for(const c of this.J9)c.c$();for(const f of this.z9)f.H4()||f.f$();for(const d of this.J9)d.H4()||d.f$()}x.jh(this.z9),x.jh(this.J9),this.q9.clear(),this.X9.clear(),await Promise.all([...this.j9].map(t=>t.d$(this.uf.jb()))),t&&(s.Hf().dispatchEvent(new x.Event("beforefirstlayoutstart")),await s.p$(new x.Event("beforeprojectstart"))),await this.m$(new x.Event("beforeanylayoutstart")),s.Hf().dispatchEvent(new x.Event("beforelayoutstart")),await this.p$(new x.Event("beforelayoutstart")),s.a$()||await s.IN(x.S$.w$.y$.g$,null,null),s.Hf().dispatchEvent(new x.Event("afterlayoutstart")),await this.p$(new x.Event("afterlayoutstart")),await this.m$(new x.Event("afteranylayoutstart")),t&&(s.Hf().dispatchEvent(new x.Event("afterfirstlayoutstart")),await s.p$(new x.Event("afterprojectstart"))),i.b$(e),await this.UX(),this.uX=!1}t$(t){for(const s of this.uf.sJ())if(!s.eJ()&&s.oL())for(const e of s.VL()){const i=e.RO(),n=i.AO(),r=x.br(n.Ak(),0,this.eX.length-1),h=this.eX[r];i.DO(h,!0),h.Uz(e)}if(!t)for(const o of this.eX)o.Yz(!1)}e$(){for(const t of this.eX)t.Lz(this.z9),t.Kz()}i$(){let s=!1;for(const[t,e]of Object.entries(this.aX)){const i=this.uf.Wj(parseInt(t,10));if(i&&!i.eJ()&&i.Nz())for(const n of e){let t=null;if(!i.oL()||(t=n.hasOwnProperty("instJson")?this.GX(n.instJson.w.l):this.GX(n.w.l))){const r=this.uf.Wz(i,t,!1,0,0,!0);n.hasOwnProperty("instJson")?r.Dv(n.instJson):r.Dv(n),s=!0,this.J9.push(r),n.hasOwnProperty("instJson")&&(this.q9.set(r,n),this.X9.set(n.index,r))}}}for(const h of this.eX)h.Yz(!0),h.LO();s&&(this.uf.KL(),this.uf.v$())}n$(s){for(const e of s)if(e.X5()){const i=e.RO(),t=e.Q5();for(const n of e.D5().LX().x$())if(n!==e.D5()){const r=n.VL();if(r.length>t)e.M$(r[t]);else{let t;t=i?this.uf.Wz(n,i.AO(),!0,i.xv(),i.Cv(),!0):this.uf.Wz(n,null,!0,0,0,!0),this.uf.KL(),n.T$(),e.M$(t),s.push(t)}}}}r$(){for(const t of this.Y9){const s=this.uf.Rz(t[1]);s.X5()||this.uf.Wz(t,null,!0)}}C$(){let e=[],i=this.Y9,n=0;for(let t=0,s=i.length;t<s;++t){const r=i[t],h=this.uf.Rz(r[1]);h.Vz()?h.X5()&&h.LX().I$()||e.push(this.uf.Wz(r,null,!0)):(i[n]=r,++n)}x.Vh(i,n),this.uf.KL(),this.n$(e)}tJ(t,s,e,i,n,r,h){if(e)return e.tJ(t,s,n,r,i,h);{const o=[];for(const a of this.eX)o.push(a.tJ(t,s,n,r,i,h));return o.flat()}}async G$(){const t=this.k9;this.uf.a$()||(await this.m$(new x.Event("beforeanylayoutend")),await this.p$(new x.Event("beforelayoutend")),await this.uf.IN(x.S$.w$.y$._$,null,null),await this.p$(new x.Event("afterlayoutend")),await this.m$(new x.Event("afteranylayoutend"))),t.P$(!0),this.uf.cF().E$(),this.uX||this.R$();for(const s of this.eX)s.Qz();for(const e of this.uf.sJ())if(!(e.Vz()||e.oL()||e.RL().rL()||e.eJ())){for(const i of e.VL())this.uf.H5(i);this.uf.KL()}t.P$(!1),t.lO()===this&&t.KX(null)}A$(t,s){const e=t.D5().uJ().toString(),i=(this.aX.hasOwnProperty(e)||(this.aX[e]=[]),this.aX[e]),n={index:s,instJson:t.Ov(),sceneGraphJson:{children:[]}};i.push(n),this.lX.set(t,n)}k$(t){const s=this.lX.get(t);for(const e of t.F$()){const i=this.lX.get(e);i&&s.sceneGraphJson.children.push({index:i.index,flags:x.D$.O$(e.RO())})}}R$(){this.lX.clear();let t=0;for(const s of this.eX){s.hq();for(const e of s.OO()){const i=e.D5();!i.Vz()&&i.Nz()&&(this.A$(e,t),t++)}}for(const n of this.eX)for(const r of n.OO()){const h=r.D5();!h.Vz()&&h.Nz()&&this.k$(r)}this.lX.clear()}L$(){this.aX={},this.uX=!0}wR(){return this.UU}bq(){const t=this.uf,s=t.jb().fb();return"low"===t.ND().qq()||s&&t.Jq()||this.fz.vq()||s&&t.HJ()}B$(t){const s=this.uf.ND();if(this.bq()){t.TR(null),t.cR(0,0,0,0);const e={Ex:this.uf.tF(),w2:t.Ew()||this.uf.Jq()||this.fz.vq(),zq:!!t.Ew()&&this.uf.Jq()};"low"===s.qq()&&(e.width=s.Lq(),e.height=s.Bq()),this.UU=this.uf.Xq(e)}else this.UU=null}N$(t){this.uf.W$(t)&&(t.pR(!1),t.TR(null),t.Bw(),t.CR(this.UU))}V$(t){this.bq()&&(t.pR(!1),this.j$(t,this.UU))}H$(t){t.TR(this.UU),t.ec(this.FX()),this.uf.HJ()&&t.dR();const s=this.lq(0);this.$q(t,this.UU,s,!0),t.Ew()&&t.StartMeasuringRenderPassTime(0,1),this.V$(t),this.UU=null}U$(t,s){let e=null;this.uf.W$(t)&&(e=this.UU),t.TR(e),t.cR(0,0,0,0),this.uf.HJ()&&t.dR();const i=this.lq(s);this.$q(t,e,i,!0),this.N$(t),t.rb(),this.uf.ND().z$(s)}$q(t,i,s,n){const r=s.filter(t=>t.tq());for(let s=0,e=r.length;s<e;){const h=r[s];if(h.JJ()&&!h.xq()){a.push(h);for(let t=s+1;t<e;++t){const o=r[t];if(!o.JJ()||o.xq())break;a.push(r[t])}if(2<=a.length||1===a.length&&a[0].QJ()){this.J$(t,i,a),s+=a.length,x.jh(a);continue}x.jh(a)}h.Sx(t,i,n&&0===s),++s}}j$(t,s){const e=this.fz.mJ(),i=this.uf;0===e.length?(t.TR(null),t.Bw(),t.CR(s),t.GR(s),i.gz(s)):(n.set(0,0,i.kJ(),i.FJ()),this.Rk().I3(t,null,{G3:this,_3:3,devicePixelRatio:this.uf.m9(),P3:this.uf.y9()*this.hB(),E3:this.aB(),Q3:n,tk:null,mA:!0}))}J$(i,n,t){t[0].d5()||(M.la(t[0].w5()),M.aa(1),i.ec(M)),this.uf.ND(),i.pR(!0);const r=T,h=C,o=I;for(const a of t)a.hq(),a.WJ(r);const s=t[0],e=s.Vq(i);s.Uq(i);for(let s=0,e=r.length;s<e;){const l=r[s],u=l.RO(),c=u.AO();if(u.qB()&&u.n9(c.i9())){(!l.r9()||0<u.h9())&&o.push(l);const f=l.RO().h4();h.push(l);let t=s+1;for(;t<e;++t){const d=r[t],p=d.RO();if(p.qB()&&p.n9(p.AO().i9())){if(p.h4()!==f)break;(d.r9()?(0<p.h9()&&o.push(d),h):o).push(d)}}if(1!==h.length||h[0].o9()){this.q$(i,n,h);for(let t=0,s=o.length;t<s;++t){const m=o[t],g=m.RO(),y=g.AO();g.l9(!0),v(y,i),y.e9(m,g,i,n),g.l9(!1)}}else{v(c,i),c.e9(l,u,i,n);for(let t=0,s=o.length;t<s;++t){const w=o[t];if(w!==l){const S=w.RO(),b=S.AO();v(b,i),b.e9(w,S,i,n)}}}s=t,x.jh(h),x.jh(o)}else++s}e&&i.OR(e),x.jh(r),G=null}q$(e,i,n){e.PR();for(let t=0,s=n.length;t<s;++t){const r=n[t],h=r.RO(),o=h.AO();h.u9(!0),v(o,e),o.c9(r,h,e)}e.ER();for(let t=0,s=n.length;t<s;++t){const a=n[t],l=a.RO(),u=l.AO();v(u,e),u.e9(a,l,e,i),l.u9(!1)}e.AR()}G9(){const t={sx:this.uB(),sy:this.fB(),s:this.hB(),a:this.aB(),w:this.am(),h:this.vm(),ortho:this.DB(),vpX:this._J(),vpY:this.PJ(),fv:this.uX,persist:this.aX,fx:this.fz.Ov(),layers:{},dynamicLayers:[]};for(const s of this.eX)if(s.cJ()){const e=s.BB();t.dynamicLayers.push({sid:s.uJ(),name:s.Qc(),parentSid:e?e.uJ():null,siblingIndex:s.aJ(),data:s.G9()})}else t.layers[s.uJ().toString()]=s.G9();return t}_9(t){this.qU=t.sx,this.XU=t.sy,this.zU=t.s,this.JU=t.a,this.qm=t.w,this.Xm=t.h,this.L9=!!t.ortho,t.hasOwnProperty("vpX")&&(this.B9=t.vpX),t.hasOwnProperty("vpY")&&(this.N9=t.vpY),this.uX=!!t.fv,this.aX=t.persist,this.fz.Dv(t.fx),this.wz=!0;for(const[s,e]of Object.entries(t.layers)){const i=parseInt(s,10),n=this.GX(i);n&&n._9(e)}if(t.hasOwnProperty("dynamicLayers")){this._B(),this.uf.KL();const r=new Map,h=t.dynamicLayers;for(let t=h.length-1;0<=t;--t){const o=h[t],a=o.sid,l=o.name,u=o.parentSid,c=o.siblingIndex,f=o.data;if(this.dX(),!this.IX(l)&&!this.GX(a)){let t,s;if(null===u)t=null,s=this.sX;else{if(!(t=this.GX(u)))continue;s=t.VB()}const d=x.dr(x.CU,this,t,{name:l,sid:a,yU:!0});s.push(d);let e=r.get(s);e||(e=[],r.set(s,e)),e.push({QN:d,siblingIndex:c}),d._9(f)}}for(const[p,m]of r){m.sort((t,s)=>t.siblingIndex-s.siblingIndex);for(const g of m){let t=g.QN,s=g.siblingIndex,e=p.indexOf(t);p.splice(e,1),p.splice(s,0,t)}}}this.oJ(),this.bX(),this.wX()}uO(){return this.cX}oF(){return this.fX}X$(t){t.layout=this.uO();const s=this.uf,e=s.kN()&&!s.cF().YL();e&&i.StartMeasuringScriptTime(),this.fX.dispatchEvent(t),e&&i.AddScriptTime()}p$(t){return t.layout=this.uO(),this.fX.Zf(t)}m$(t){return t.layout=this.uO(),this.uf.p$(t)}$$(){this.Y$(this.sX)}Y$(t,s=0){const e=t.slice(0);e.reverse();for(const i of e)console.log("\t".repeat(s)+"- "+i.Qc()),this.Y$(i.VB(),s+1)}}}{const Pr=self.Bs;Pr.Z$=class extends Pr.ur{#Vj;#K$=[];#Q$=new Map;#tY=new Map;#sY=null;#eY=[];#iY=null;#nY=0;#rY=null;constructor(t){super(),this.#Vj=t}pr(){this.#Vj=null,this.#sY=null,this.#iY=null,this.#rY=null,Pr.jh(this.#K$),this.#Q$.clear(),this.#tY.clear(),Pr.jh(this.#eY)}mM(t){const s=Pr.dr(Pr.A9,this,this.#K$.length,t);this.#K$.push(s),this.#Q$.set(s.Qc().toLowerCase(),s),this.#tY.set(s.uJ(),s)}ZO(){return this.#Vj}hY(t){this.#iY=t}aY(){if(this.#iY)return this.#iY;if(this.#K$.length)return this.#K$[0];throw new Error("no first layout")}lY(t){return this.#Q$.get(t.toLowerCase())||null}uY(t){return this.#tY.get(t)||null}cY(t){return t=Pr.br(Math.floor(t),0,this.#K$.length-1),this.#K$[t]}dO(t){return"number"==typeof t?this.cY(t):this.lY(t.toString())}mO(){return this.#K$}KX(t){this.#sY=t}lO(){return this.#sY}fY(t){if(this.#eY.includes(t))throw new Error("layout already running");this.#eY.push(t)}dY(t){const s=this.#eY.indexOf(t);if(-1===s)throw new Error("layout not running");this.#eY.splice(s,1)}*pY(){this.#sY&&(yield this.#sY),this.#eY.length&&(yield*this.#eY)}mY(t){return this.#sY===t||this.#eY.includes(t)}P$(t){if(t)this.#nY++;else{if(this.#nY<=0)throw new Error("already unset");this.#nY--}}ZL(){return 0<this.#nY}wO(t){this.#rY=t}h$(){this.#rY=null}yO(){return!!this.#rY}gY(){return this.#rY}yY(){const t=this.lO();t&&t.bX()}wY(){const t=this.lO();t&&t.wX()}}}{const b=self.Bs,Er=new RegExp("<(.+?)>","g");b.SY=class extends b.ur{constructor(t){super(),this.uf=t,this.bY=b.dr(b.vY),this.xY=null,this.MY=[],this.TY=new Map,this.CY=new Map,this.IY=new Map,this.GY=[],this._Y=[],this.PY=[],this.EY=!1,this.RY=!1,this.AY=!1,this.kY=()=>this.FY(),this.OY=()=>this.DY(),this.LY=()=>this.BY(),this.NY=()=>this.WY(),this.VY=t=>this.jY(t.LW),this.HY=t=>this.UY(),this.zY=t=>this.JY(),this.qY=t=>this.XY(),this.$Y=[],this.YY=0}pr(){this.ZY(),this.kY=null,this.OY=null,this.LY=null,this.NY=null,this.VY=null,this.zY=null;for(const t of this.MY)t.A6(),t.pr();b.jh(this.MY),this.MY=null,this.bY.pr(),this.bY=null,b.jh(this.GY),this.GY=null,b.jh(this._Y),this._Y=null,b.jh(this.PY),this.PY=null,this.TY.clear(),this.TY=null,this.CY.clear(),this.CY=null,this.IY.clear(),this.IY=null,b.jh(this.$Y),this.$Y=null,this.uf=null}KY(){const t=this.uf.Hf();t.addEventListener("pretick",this.kY),t.addEventListener("tick2",this.OY),t.addEventListener("beforelayoutchange",this.LY),t.addEventListener("layoutchange",this.NY),t.addEventListener("instancedestroy",this.VY),t.addEventListener("beforeload",this.HY),t.addEventListener("afterload",this.zY),t.addEventListener("afterlayoutstart",this.qY)}ZY(){const t=this.uf.Hf();t.removeEventListener("pretick",this.kY),t.removeEventListener("tick2",this.OY),t.removeEventListener("beforelayoutchange",this.LY),t.removeEventListener("layoutchange",this.NY),t.removeEventListener("instancedestroy",this.VY),t.removeEventListener("beforeload",this.HY),t.removeEventListener("afterload",this.zY),t.removeEventListener("afterlayoutstart",this.qY)}mM(t){this.bY.fc(t);const s=b.tZ.QY(t,this);this.fc(s),this.sZ(s),this.IY.set(s.Qc(),0)}eZ(t){const s=this.iZ(),e=t.sN(),i=s.ne(e),n=b.tZ.eZ(e+":"+this.IY.get(e),i,this);return this.nZ(e),this.fc(n),n}nZ(t){this.IY.set(t,this.IY.get(t)+1)}rZ(){for(const t of this.MY)if(!t.hZ()){const s=t.sN();this.nZ(s)}}oZ(){for(const t of this.IY.keys())this.IY.set(t,0)}fc(t){this.MY.push(t),this.TY.set(t.Qc().toLowerCase(),t)}x0(t){t.aZ(),t.hZ()||(b.Xh(this.MY,t),b.Xh(this.GY,t),b.Xh(this._Y,t),b.Xh(this.PY,t),this.TY.delete(t.Qc().toLowerCase()),this.lZ(t),t.E6())||t.pr()}TN(t){this.uf.TN(t,this.xY,null)}ZO(){return this.uf}iZ(){return this.bY}uZ(t){this.xY=t}cZ(){return this.xY}*fZ(){for(const t of this.MY)yield t}*dZ(){for(const t of this._Y)yield t}pZ(t,s){this.CY.has(t)||this.CY.set(t,new Set),this.CY.get(t).add(s)}sZ(t){for(const s of t.mZ())this.pZ(s,t)}lZ(t){for(const[s,e]of this.CY.entries())e.has(t)&&(e.delete(t),0===e.size)&&this.CY.delete(s)}gZ(t){if(this.CY.has(t))return this.CY.get(t)}yZ(t,s){if(s)for(const e of this.MY){const i=s.every(t=>e.wZ(t.LW,t.trackId));if(i&&e.Qc().includes(t.Qc()))return e}}SZ(t){return this.TY.get(t.toLowerCase())||null}bZ(t){for(const s of this.GY)if(s.Qc()===t)return s;for(const e of this._Y)if(e.Qc()===t)return e;return null}*vZ(e){if(Er.test(e)){Er.lastIndex=0;let t,s=new Set;do{if(t=Er.exec(e)){const i=t[1].split(",");for(const n of i)s.add(n)}}while(t);for(const r of s.values()){const h=this.SZ(r);h&&(yield h)}s.clear()}else{const t=this.SZ(e);t&&(yield t)}}*xZ(t){for(const s of this.MY)s.F6(t)&&(yield s)}MZ(t){this.GY.includes(t)||this.GY.push(t),this.TZ()}CZ(t){b.Xh(this._Y,t),this.IZ()}GZ(t){this._Y.includes(t)?(t._Z(!0),t.PZ(!1),t.EZ(!1)):(t._Z(!1),t.PZ(!0),t.EZ(!1),this.GY.includes(t)||this.GY.push(t)),this.TZ()}RZ(t){t._Z(!1),t.PZ(!1),t.AZ(),b.Xh(this.GY,t),this.IZ()}kZ(t){t._Z(!1),t.PZ(!1),this._Y.includes(t)&&(t.EZ(!0),this.PY.push(t),b.Xh(this._Y,t)),this.GY.includes(t)&&t.EZ(!0)}FZ(t){t._Z(!1),t.PZ(!1),t.EZ(!1),t.j6(1),b.Xh(this._Y,t)}OZ(t){this.kZ(t),t.AZ()}FY(){if(!this.ZO().a$()&&this.EY&&!this.RY){for(this.AY=!0;this.GY.length;){const t=this.GY.pop();(t.DZ()?(t.LZ(),this.PY):(t.BZ(),this._Y)).push(t),0!==t.NZ()&&(this.YY=1)}const s=this.uf.WZ(),e=this.uf.VZ(),i=this.uf.WF();for(let t=this._Y.length-1;0<=t;t--){const n=this._Y[t];n&&n.jZ(s,i,e)}this.AY=!1,0!==this.YY&&this.ZO().BO()}}DY(){if(!this.ZO().a$()&&this.EY&&!this.RY){let e;for(let t=0,s=this.PY.length;t<s;t++){const i=this.PY[t];e=e||new Set,i.aZ(),this.HZ(i),e.add(i)}if(e){b.Zh(this.PY,e);for(let t=this.YY=0,s=this._Y.length;t<s;t++)if(0!==this._Y[t].NZ()){this.YY=1;break}}this.IZ()}}HZ(t){t.E6()||t.UZ()&&t.zZ()&&t.JZ()&&t.qZ()}TZ(){this.EY||(this.EY=!0)}IZ(){this.PY.length||this._Y.length||this.GY.length||this.AY||(this.EY=!1)}BY(){for(this.RY=!0;this.GY.length;)this.RZ(this.GY.pop());const t=new Set;for(const s of this._Y){const e=s.BY();e&&(s.aZ(),t.add(s))}b.Zh(this._Y,t),t.clear();for(const i of this.PY){const n=i.BY();n&&(i.aZ(),t.add(i))}b.Zh(this.PY,t),this.IZ();for(const r of this.MY)r.XZ()}WY(){this.RY=!1}jY(t){const s=t.D5(),e=this.gZ(s);if(e)if(this.uf.a$())this.$Y.push(t);else for(const i of e)i.hZ()||(i.E6()?this.x0(i):i.UZ()||(this.HZ(i),this.x0(i)))}UY(){for(const t of this.GY.map(t=>t))this.HZ(t),this.x0(t);for(const s of this._Y.map(t=>t))this.HZ(s),this.x0(s)}JY(){for(const t of this.$Y)this.jY(t);b.jh(this.$Y);for(const s of this.MY)s.JY()}XY(){const t=this.uf.fO(),s=t.lO();if(s)for(const e of this.MY){const i=e.$Z();i&&s.Qc()===i&&this.GZ(e)}}G9(){return{timelinesJson:this.YZ(),scheduledTimelinesJson:this.ZZ(),playingTimelinesJson:this.KZ(),markedForRemovalTimelinesJson:this.QZ(),hasRuntimeListeners:this.EY,changingLayout:this.RY,isTickingTimelines:this.AY}}_9(t){t&&(this.oZ(),this.tK(t.timelinesJson),this.sK(t.scheduledTimelinesJson),this.eK(t.playingTimelinesJson),this.iK(t.markedForRemovalTimelinesJson),this.EY=!t.hasRuntimeListeners,this.RY=!!t.changingLayout,this.AY=!!t.isTickingTimelines,this.rZ(),this.TZ(),this.IZ())}YZ(){return this.MY.map(t=>t.G9())}tK(t){for(const s of t){let t=this.SZ(s.name);if(t)t._9(s);else{const e=this.nK(s);if(!e)continue;const i=this.SZ(e);(t=this.eZ(i))._9(s)}t.rK()||this.x0(t)}}nK(t){const s=t.name,e=s.split(":");return e&&2===e.length?e[0]:null}ZZ(){return this.hK(this.GY)}sK(t){this.oK(t,this.GY)}KZ(){return this.hK(this._Y)}eK(t){this.oK(t,this._Y)}QZ(){return this.hK(this.PY)}iK(t){this.oK(t,this.PY)}aK(t,s){if(s)for(const e of s)if(e===t.Qc())return!0;return!1}hK(t){return t.map(t=>t.Qc())}oK(t,s){const e=new Set;for(const i of s)this.aK(i,t)||e.add(i);if(b.Zh(s,e),t)for(const n of t){const r=this.SZ(n);if(r){const h=s.find((s=>t=>t.Qc()===s)(n));h||s.push(r)}}}}}{const Rr=self.Bs,Ar=[0,0],kr=[0,0],Fr=[0,0],Or=[0,0,0,0,0],Dr=new Array(4),Lr=[{x:0,y:0,t:0,Rt:0},{x:0,y:0,t:0,Rt:0},{x:0,y:0,t:0,Rt:0}],Br={x:0,y:0,t:0,Rt:0};Rr.lK=class{constructor(t,s){this.uK=!1,this.cK=t,this.fK=[];let e=null;if(e=s?this.cK.dK(s):Rr.first(this.cK.pK())){const i=e.aV("offsetX"),n=e.aV("offsetY");if(i&&n){this.mK=i,this.gK=n;const r=i.yK(),h=n.yK();for(let t=1,s=Math.min(r.length,h.length);t<s;++t){const o=r[t],a=(o.wK(),o.SK()),l=h[t],u=(l.wK(),l.SK());a&&"cubic-bezier"===a.bK()&&u&&"cubic-bezier"===u.bK()?this.fK.push(Rr.dr(Rr.vK,a,u,o,l,this.fK.length)):(a&&"line"===a.bK()&&u&&u.bK(),this.fK.push(Rr.dr(Rr.xK,o,l,this.fK.length)))}this.uK=!0}}}pr(){for(const t of this.fK)t.pr();Rr.jh(this.fK),this.fK=null,this.cK=null,this.mK=null,this.gK=null}MK(){return this.uK}TK(){return this.fK}CK(t){const s="relative"===this.mK.IK()?t.xv():0,e="relative"===this.gK.IK()?t.Cv():0;for(const i of this.fK)i.CK(s,e)}ey(s,e,t){let i=NaN,n=this.fK.length;for(let t=0;t<n;t++){const r=this.fK[t];if("cubic-bezier"===r.yT()){const h=r.ey(s,e);(isNaN(i)||h[3]<i)&&(i=h[3],Fr[0]=h[2],Fr[1]=r.Ak())}}return Fr}GK(s,e,t){const i=t.tRange;Rr.di(i[0])||(i[0]=0),Rr.di(i[1])||(i[1]=1);let n=NaN,r=this.fK.length;for(let t=0;t<r;t++){const h=this.fK[t];if("cubic-bezier"===h.yT()){const o=h._K(s,e,i);(isNaN(n)||o[3]<n)&&(n=o[3],Fr[0]=o[2],Fr[1]=h.Ak())}}return Fr}PK(t,s){return this.fK[s].PK(t)}EK(t,s){return this.fK[s].EK(t)}},Rr.vK=class{constructor(t,s,e,i,n){this.qg=n;const r=t.RK("cubic-bezier"),h=e.RK("cubic-bezier"),o=s.RK("cubic-bezier"),a=i.RK("cubic-bezier");this.AK=t.kK(),this.FK=s.kK(),this.DK=t.kK()+r.LK(),this.BK=s.kK()+o.LK(),this.NK=e.kK()+h.WK(),this.VK=i.kK()+a.WK(),this.jK=e.kK(),this.HK=i.kK(),this.UK=0,this.zK=0,this.JK=0,this.qK=0,this.XK=0,this.$K=0,this.YK=0,this.ZK=0,this.KK=0,this.QK=0,this.tQ=0,this.sQ=0,this.eQ=0,this.iQ=0,this.nQ=0,this.rQ=0,this.hQ=0,this.oQ=0,this.aQ=0,this.lQ=0,this.uQ=NaN,this.uK=!1,this.cQ=100,this.fQ=new Array(this.cQ+1),this.fQ[0]=0,this.dQ=0,this.pQ=[],this.mQ=[];for(let t=0;t<100;t++)this.mQ.push({x:0,y:0,t:0,Rt:0});this.gQ()}pr(){Rr.jh(this.fQ),this.fQ=null,Rr.jh(this.pQ),this.pQ=null,Rr.jh(this.mQ),this.mQ=null}yT(){return"cubic-bezier"}Ak(){return this.qg}yQ(){return Math.floor(this.dQ/25)}wQ(){return 1/this.yQ()}CK(t,s){this.SQ=t,this.bQ=s,this.fQ=new Array(this.cQ+1),this.fQ[0]=0,this.gQ(),this.UK=this.AK+this.SQ,this.zK=this.FK+this.bQ,this.JK=this.DK+this.SQ,this.qK=this.BK+this.bQ,this.XK=this.NK+this.SQ,this.$K=this.VK+this.bQ,this.YK=this.jK+this.SQ,this.ZK=this.HK+this.bQ,this.KK=3*(this.JK-this.UK),this.QK=3*(this.qK-this.zK),this.tQ=3*(this.XK-this.JK),this.sQ=3*(this.$K-this.qK),this.eQ=3*(this.YK-this.XK),this.iQ=3*(this.ZK-this.$K),this.nQ=3*(this.JK-this.UK),this.rQ=3*(this.UK+this.XK-2*this.JK),this.hQ=this.YK-this.UK+3*(this.JK-this.XK),this.oQ=3*(this.qK-this.zK),this.aQ=3*(this.zK+this.$K-2*this.qK),this.lQ=this.ZK-this.zK+3*(this.qK-this.$K)}Map(t){if(!this.uK)return NaN;const s=this.vQ(t);return kr[0]=this.xQ(s),kr[1]=this.MQ(s),kr}ey(t,s){const e=this.TQ(100),i=this.CQ(t,s,e),n=this.IQ(t,s,e,i);return Or[0]=n.x,Or[1]=n.y,Or[2]=n.t,Or[3]=n.Rt,Or}_K(t,s,e){const i=this.TQ(100),n=this.GQ(t,s,i,e),r=this.IQ(t,s,i,n);return Or[0]=r.x,Or[1]=r.y,Or[2]=r.t,Or[3]=r.Rt,Or}PK(t){const s=1-t,e=s*s,i=2*s*t,n=t*t,r=e*this.KK+i*this.tQ+n*this.eQ,h=e*this.QK+i*this.sQ+n*this.iQ,o=Rr.Cr(r,h);return Ar[0]=r/o,Ar[1]=h/o,Ar}EK(t){const s=1-t,e=s*s,i=2*s*t,n=t*t,r=e*this.KK+i*this.tQ+n*this.eQ,h=e*this.QK+i*this.sQ+n*this.iQ;return Math.atan2(h,r)}vQ(n){if(this.uK){let t=n*this.fQ[this.cQ],s=0,e=this.cQ,i=0;for(;s<e;)i=s+((e-s)/2|0),this.fQ[i]<t?s=i+1:e=i;this.fQ[i]>t&&i--;const r=this.fQ[i];return r===t?i/this.cQ:(i+(t-r)/(this.fQ[i+1]-r))/this.cQ}}xQ(t){return this.uK?self.yc.kc("cubicbezier")(t,this.AK+this.SQ,this.DK+this.SQ,this.NK+this.SQ,this.jK+this.SQ):NaN}MQ(t){return this.uK?self.yc.kc("cubicbezier")(t,this.FK+this.bQ,this.BK+this.bQ,this.VK+this.bQ,this.HK+this.bQ):NaN}TQ(s){if(!(this.pQ.length>=(s=s||100))){this.pQ=new Array(s),s++;for(let t=0;t<s-1;t++){const e=t/(s-1),i=e**2,n=e**3,r=this.nQ*e,h=this.rQ*i,o=this.hQ*n,a=this.oQ*e,l=this.aQ*i,u=this.lQ*n,c=this.UK+r+h+o,f=this.zK+a+l+u;this.mQ[t].x=c,this.mQ[t].y=f,this.mQ[t].t=e,this.mQ[t].Rt=0,this.pQ[t]=this.mQ[t]}}return this.pQ}CQ(s,e,i,t=0,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.uQ))for(let t=0;t<100;t++){const h=i[t],o=h.x-s,a=h.y-e;h.Rt=o*o+a*a,h.Rt<n&&(n=h.Rt,r=t)}else{for(let t=this.uQ;t<this.uQ+5&&!(t>=i.length);t++){const l=i[t],u=l.x-s,c=l.y-e;l.Rt=u*u+c*c,l.Rt<n&&(n=l.Rt,r=t)}for(let t=this.uQ;t>this.uQ-5&&!(t<0);t--){const f=i[t],d=f.x-s,p=f.y-e;f.Rt=d*d+p*p,f.Rt<n&&(n=f.Rt,r=t)}}return this.uQ=r}GQ(s,e,i,n,r=Number.MAX_SAFE_INTEGER){let h=0;if(isNaN(this.uQ))for(let t=0;t<100;t++){const o=i[t],a=o.x-s,l=o.y-e;o.Rt=a*a+l*l,o.t>=n[0]&&o.t<=n[1]&&o.Rt<r&&(r=o.Rt,h=t)}else{for(let t=this.uQ;t<this.uQ+5&&!(t>=i.length);t++){const u=i[t],c=u.x-s,f=u.y-e;u.Rt=c*c+f*f,u.t>=n[0]&&u.t<=n[1]&&u.Rt<r&&(r=u.Rt,h=t)}for(let t=this.uQ;t>this.uQ-5&&!(t<0);t--){const d=i[t],p=d.x-s,m=d.y-e;d.Rt=p*p+m*m,d.t>=n[0]&&d.t<=n[1]&&d.Rt<r&&(r=d.Rt,h=t)}}return this.uQ=h}IQ(h,o,a,l){let u=a[l],t=1,c=Number.MAX_SAFE_INTEGER;t:do{let t=a.length,s=0===l?0:l-1,e=l===t-1?t-1:l+1,i=a[s].t,n=a[e].t,r=(n-i)/4;if(r<.001)break;Dr[0]=a[s];for(let t=1;t<=2;t++){const f=i+t*r,d=f**2,p=f**3,m=this.nQ*f,g=this.rQ*d,y=this.hQ*p,w=this.oQ*f,S=this.aQ*d,b=this.lQ*p,v=this.UK+m+g+y,x=this.zK+w+S+b,M=v-h,T=x-o,C=M*M+T*T;if(C<c){c=C,l=t,Br.x=v,Br.y=x,Br.t=f,Br.Rt=C,u=Br;break t}const I=Lr[t-1];I.x=v,I.y=x,I.t=f,I.Rt=C,Dr[t]=I}Dr[3]=a[e],a=Dr}while(t++<20);return u}gQ(){this.uK=!0;let s=this.xQ(0),e=this.MQ(0),i=0;for(let t=1;t<=this.cQ;t++){const n=this.xQ(.01*t),r=this.MQ(.01*t),h=s-n,o=e-r;i+=Rr.Cr(h,o),this.fQ[t]=i,s=n,e=r}this.dQ=i}},Rr.xK=class{constructor(t,s,e){this.qg=e,this._Q=t.kK(),this.PQ=s.kK(),this.SQ=0,this.bQ=0}pr(){}yT(){return"line"}Ak(){return this.qg}CK(t,s){this.SQ=t,this.bQ=s}xv(){return this._Q+this.SQ}Cv(){return this.PQ+this.bQ}}}{const v=self.Bs;v.tZ=class extends v.ur{constructor(t,s,e){super(),this.uf=e.ZO(),this.EQ=e,this.RQ=s,this.yr=t,this.AQ=[],this.kQ=0,this.FQ=null,this.OQ=0,this.DQ(),this.LQ=null,this.BQ=null,this.NQ=0,this.WQ=0,this.VQ=1,this.jQ=0,this.HQ=1,this.UQ=!1,this.zQ=!1,this.JQ=!1,this.qQ=!0,this.XQ=!1,this.$Q=!1,this.YQ=-1,this.ZQ=!1,this.KQ=!1,this.QQ=!1,this.ttt=!1,this.stt=NaN,this.ett=[""],this.itt="",this.ntt=!1,this.YY=0,this.htt=0,this.ott=null}static QY(t,s){const e=s.iZ(),i=e.att(),n=e.ne(t[i]),r=v.dr(v.tZ,t[i],n,s);return r.ltt(!0),r}static eZ(t,s,e){return v.dr(v.tZ,t,s,e)}pr(){if(!this.E6()){const t=this.uf.Hf();this.EQ.RZ(this),this.EQ.OZ(this);for(const s of this.AQ)s.pr();v.jh(this.AQ),this.AQ=null,this.uf=null,this.EQ=null,this.RQ=null,this.XQ=!0,this.LQ=null,this.BQ=null,this.utt(t)}}utt(t){const s=v.dr(v.Event,"timelinestatereleased");s.ctt=this,t.dispatchEvent(s)}yT(){return 0}DQ(){for(const t of this.RQ.dtt().ftt())this.kQ=this.AQ.push(v.ptt.mM(this,t))}mtt(){return this.EQ}ZO(){return this.uf}pK(){return this.AQ}gtt(i,n,r,h){if(this.htt){let e;for(let s=0;s<this.AQ.length;s++){let t=this.AQ[s];if(i===t.eV()){const o=t.aV(r);o&&n.constructor===o.ytt().constructor&&o.IK()===h.IK()&&(e=e||[]).push(o)}}return e}}rK(){return!!this.AQ.length}dK(t){for(const s of this.AQ)if(v.wn(s.hV(),t))return s;return null}wtt(t){for(const s of this.AQ)if(!s.Stt()&&v.wn(s.Qc(),t))return s;return null}Zj(t){this.yr=t}Qc(){return this.yr}btt(){return this.RQ}sN(){return this.RQ.Qc()}L6(){return this.RQ.L6()}D6(t){this.RQ.D6(t)}vtt(){return this.RQ.vtt()}xtt(t){this.RQ.xtt(t)}Mtt(){return this.RQ.Mtt()}Ttt(t){this.RQ.Ttt(t)}IK(){return this.RQ.IK()}Ctt(t){this.RQ.IK(t)}sV(t){for(const s of this.pK())s.sV(t)}N6(){return this.RQ.N6()}B6(t){return this.RQ.B6(t)}V6(){return this.RQ.V6()}W6(t){return this.RQ.W6(t)}ZW(){return this.RQ.ZW()}Itt(t){return this.RQ.Itt(t)}j6(t){return this.VQ=t}H6(){return this.VQ}$Z(){return this.RQ.$Z()}Gtt(){return this.RQ.Gtt()}_tt(){return this.RQ._tt()}Ptt(){return this.jQ}Ett(){return!this.IsPlaying()||0<this.VQ}z6(){return this.LQ||(this.LQ=new Promise(t=>{this.BQ=t})),this.LQ}AZ(){this.LQ&&(this.BQ(),this.LQ=null,this.BQ=null)}Rtt(t){this.ett=v.tZ.Att(t),this.ntt=!0}U6(){return this.ett}ktt(){return this.ntt&&(this.itt=this.ett.join(" ")),this.ntt=!1,this.itt}F6(t){if(!this.ett)return!1;if(!this.ett.length)return!1;const s=v.tZ.Att(t);return!!s&&!!s.length&&s.every(v.tZ.Ftt,this)}Ott(){v.S$.Timeline&&this.constructor===v.tZ&&(v.S$.Timeline.y$.PushTriggerTimeline(this),this.EQ.TN(v.S$.Timeline.y$.OnTimelineStarted),this.EQ.TN(v.S$.Timeline.y$.OnTimelineStartedByName),this.EQ.TN(v.S$.Timeline.y$.OnTimelineStartedByTags),this.EQ.TN(v.S$.Timeline.y$.OnAnyTimelineStarted),v.S$.Timeline.y$.PopTriggerTimeline())}Dtt(){this.YQ=this.uf.Ltt()}qZ(){this.QQ||(this.QQ=!0,v.S$.Timeline&&this.constructor===v.tZ&&(v.S$.Timeline.y$.PushTriggerTimeline(this),this.EQ.TN(v.S$.Timeline.y$.OnTimelineFinished),this.EQ.TN(v.S$.Timeline.y$.OnTimelineFinishedByName),this.EQ.TN(v.S$.Timeline.y$.OnTimelineFinishedByTags),this.EQ.TN(v.S$.Timeline.y$.OnAnyTimelineFinished),v.S$.Timeline.y$.PopTriggerTimeline()))}_Z(t){this.UQ=t}Btt(){return this.YQ===this.uf.Ltt()}IsPlaying(t=!1){return!!this.Btt()||!(!this.Ntt()||t)||this.UQ}Wtt(){return this.IsPlaying(!0)}q6(){return this.Vtt()}Vtt(){return!(this.E6()||this.Ntt()||this.Wtt()||this.zZ())}PZ(t){this.zQ=t}Ntt(){return this.zQ}jtt(t){this.qQ=t;const s=this.uA();(s<=0||s>=this.L6())&&(this.qQ=!0)}zZ(){return this.qQ}E6(){return this.XQ}EZ(t){this.$Q=t}DZ(){return this.$Q}Htt(t){this.ZQ=t}Utt(){return this.ZQ}ltt(t){this.KQ=!!t}hZ(){return this.KQ}JZ(){return this.JQ}uA(){return this.NQ}O6(t){const s=this.uA();this.ztt(t),this.jtt(!1),this.zZ()||this.Htt(!0),!this.Wtt()&&!this.Ntt()&&this.JQ||(this.Wtt()||this.Ntt()||this.JQ?this.Wtt()?this.A6():this.Ntt()&&(this.EQ.RZ(this),this.Jtt()):this.Jtt()),this.qtt(),this.Xtt(this.uA(),!1,!0,!0,s),this.$tt(),this.YY&&this.ZO().BO(),this.Ytt()}ztt(t){(t=v.di(t)?t:this.L6())<0?this.NQ=0:t>=this.L6()?this.NQ=this.L6():this.NQ=t}Ztt(t){(t=v.di(t)?t:this.L6())<0?this.NQ=0:t>=this.L6()?this.NQ=this.L6():this.NQ=t;for(const s of this.AQ)s.Ktt()}Ytt(){v.S$.Timeline&&this.constructor===v.tZ&&(v.S$.Timeline.y$.PushTriggerTimeline(this),this.EQ.TN(v.S$.Timeline.y$.OnTimeSet),this.EQ.TN(v.S$.Timeline.y$.OnTimeSetByName),this.EQ.TN(v.S$.Timeline.y$.OnTimeSetByTags),v.S$.Timeline.y$.PopTriggerTimeline())}Qtt(){if(!this.N6())if(this.V6()&&1===this.jQ){if(this.Ett()){if(this.uA()>=this.L6())return!1}else if(this.uA()<=0)return!1}else if(!this.N6()&&!this.V6())if(this.Ett()){if(this.uA()>=this.L6())return!1}else if(this.uA()<=0)return!1;return!0}k6(){this.E6()||this.Qtt()&&this.Play(!0)}Play(t=!1){return!this.E6()&&!this.Ntt()&&(this.Wtt()&&this.Btt()?this.tst():!this.Wtt()&&!!(this.zZ()||t||this.Utt())&&this.sst())}tst(){return this.Htt(!1),this.EQ.CZ(this),this.EQ.GZ(this),this.z6(),!0}sst(){return this.Htt(!1),this.EQ.GZ(this),this.z6(),!0}A6(t=!1){this.E6()||(this.jtt(t),this.EQ.kZ(this),this.zZ()&&this.AZ())}u0(t=!0,s=!1){if(!this.E6()){if(!this.Wtt()&&this.Ntt())return this.EQ.RZ(this);if(!this.zZ()){this.A6(!0),this.Ett()?this.ztt(0):this.ztt(this.L6());const e=this.uA();this.qtt(),s?this.est(e):this.Xtt(e,!1,!1,!0),t&&this.Ytt(),this.$tt(),this.YY&&t&&this.ZO().BO()}}}ist(){this.u0(!1,!0)}est(t){this.Xtt(t,!1,!1,!0,NaN,!1,!0)}BY(){if(!this.E6()){if(!this.ZO().a$()&&this.nst())return!1;this.EQ.FZ(this),this.ZO().a$()||this.ist()}return!0}Jtt(){this.BZ(!0)}LZ(){this.BZ(!1,!0),this._Z(!1),this.PZ(!1)}BZ(t=!1,s=!1){if(!this.DZ()||s){if(t){this.QQ=!1,this.JQ=!0,this.ttt=!0,this.qtt();for(const e of this.AQ)e.BZ()}else if(this._Z(!0),this.PZ(!1),this.Ott(),this.zZ()){this.YQ=-1,0!==this.jQ&&(this.VQ=Math.abs(this.VQ)),this.jQ=0,this.HQ=1,this.qQ=!1,this.QQ=!1,this.JQ=!0,this.ttt=!0,this.Ett()?this.ztt(0):this.ztt(this.L6()),this.qtt();for(const i of this.AQ)i.BZ()}else{this.ttt=!0,this.QQ=!1,this.qtt();for(const n of this.AQ)n.rst()}this.$tt()}}NZ(){return this.YY}qtt(){this.htt=0;for(const t of this.AQ)t.eP()&&(this.htt=1)}$tt(){this.YY=0;for(const t of this.AQ)t.hst(),0===this.YY&&1===t.NZ()&&(this.YY=1),this.FQ||1!==t.ost()||(this.FQ||(this.FQ=[]),this.OQ=this.FQ.push(t))}jZ(t,s,e){if(this._tt()){if(0===t&&0===this.stt)return;this.stt=t,t=e}else{if(0===e&&0===this.stt)return;t=this.stt=e,s=1}const i=this.NQ+this.WQ,n=t*s*this.VQ,r=i+n,h=this.RQ.ast;r<0?(this.NQ=0,this.WQ=-r):h<=r?(this.NQ=h,this.WQ=this.NQ-r):(this.NQ=r,this.WQ=0);let o=!1,a=!1,l=this.N6(),u=this.V6();l||u?l&&!u?0<this.VQ?this.NQ>=h&&(this.Ztt(0),a=!0):this.NQ<=0&&(this.Ztt(h),a=!0):!l&&u?0<this.VQ?this.NQ>=h&&(this.ztt(h),this.j6(-1*this.H6()),a=!0,1===this.jQ?this.HQ<this.ZW()?(this.HQ++,this.jQ=0):o=!0:0===this.jQ&&(this.jQ=1)):this.NQ<=0&&(this.ztt(0),this.j6(-1*this.H6()),a=!0,1===this.jQ?this.HQ<this.ZW()?(this.HQ++,this.jQ=0):o=!0:0===this.jQ&&(this.jQ=1)):l&&u&&(0<this.VQ?this.NQ>=h&&(this.ztt(h),this.j6(-1*this.H6()),a=!0,this.jQ++,v.wrap(this.jQ,0,2)):this.NQ<=0&&(this.ztt(0),this.j6(-1*this.H6()),a=!0,this.jQ++,v.wrap(this.jQ,0,2))):0<this.VQ?this.NQ>=h&&(this.HQ<this.ZW()?(this.HQ++,this.Ztt(0),a=!0):(this.ztt(h),o=!0)):this.NQ<=0&&(this.HQ<this.ZW()?(this.HQ++,this.Ztt(h),a=!0):(this.ztt(0),o=!0));let c,f=this.kQ;if(o){for(c=0;c<f;c++)this.AQ[c].lst();this.A6(!0),this.Dtt()}else{const d=this.OQ;for(c=0;c<d;c++)this.FQ[c].ust();if(1===this.htt)for(c=0;c<f;c++){const p=this.AQ[c],m=p.cst(),g=this.NQ-m,y=i-m;g<0&&0<y?(this.NQ=m<0?0:h<=m?h:m,p.Hc(m,!0,!1,a,this.ttt,!1)):p.Hc(this.NQ,!0,!1,a,this.ttt,!1)}else for(c=0;c<f;c++)this.AQ[c].Hc(this.NQ,!0,!1,a,this.ttt,!1);for(c=0;c<d;c++)this.FQ[c].fst();this.ttt&&(this.ttt=!1)}}Xtt(s,e=!1,i=!1,n=!1,r=NaN,t=!1,h=!1){for(const o of this.AQ)o.ust();for(const a of this.AQ){let t=s;if("number"==typeof r&&!isNaN(r)){const l=this.uA(),u=l-a.cst(),c=r-a.cst();u<0&&0<c&&(t=a.cst(),this.ztt(t))}a.Hc(t,e,i,n,this.ttt,h)}for(const f of this.AQ)f.fst();this.ttt&&t&&(this.ttt=!1)}dst(){const t=this.RQ.dtt().pst(),s=v.ptt.mM(this,t);return this.kQ=this.AQ.push(s),s}aZ(){if(!this.E6())for(const t of this.AQ)t.mst()}XZ(){for(const t of this.AQ)t.XZ()}gst(){for(const t of this.AQ)t.yst()}wst(t,s,e){if(s){if("number"==typeof e&&0<=e){const i=this.AQ[e];return i?(i.Sst(s),void this.EQ.pZ(s.D5(),this)):void 0}for(const n of this.AQ)if(n.Stt())if(t){if(n.hV()===t){n.Sst(s),this.EQ.pZ(s.D5(),this);break}}else if(!n.bst()){n.Sst(s),this.EQ.pZ(s.D5(),this);break}}}wZ(t,s){for(const e of this.AQ)if(e.Stt())if(s){if(s===e.hV()&&t===e.eV())return!0}else if(t===e.eV())return!0;return!1}UZ(){return this.AQ.some(t=>!t.Stt()||t.vst())}nst(){return this.AQ.some(t=>{if(t.Stt()){if(!t.vst())return!1;const s=t.D5();return!!s&&s.Vz()}return!1})}aV(t){for(const s of this.pK())for(const e of s.xst())if(e.Mst()===t)return e}Tst(t){for(const s of this.AQ)if(t===s.eV())return s;return null}Cst(t){let s=t?t.split(" "):[],e=new Set(s.map(t=>t.toLowerCase().trim()));s=[...e.values()];for(const i of this.pK())for(const n of i.Ist()){const r=s.every(t=>n.Gst(t));if(r)return n}}mZ(){const t=[];for(const s of this.pK())t.push(s.D5());return t.filter(t=>t)}JY(){for(const t of this.pK())t.JY()}G9(){return{tracksJson:this._st(),name:this.yr,playheadTime:this.uA(),playbackRate:this.VQ,pingPongState:this.jQ,currentRepeatCount:this.HQ,isPlaying:this.UQ,isScheduled:this.zQ,initialStateSet:this.JQ,finishedTriggers:this.QQ,complete:this.qQ,released:this.XQ,markedForRemoval:this.$Q,completedTick:this.YQ,implicitPause:this.ZQ,isTemplate:this.KQ,tags:this.ett.join(" "),stringTags:this.itt,tagsChanged:this.ntt,firstTick:this.ttt}}_9(t){t&&(this.Pst(t.tracksJson),this.yr=t.name,this.NQ=t.playheadTime,this.VQ=t.playbackRate,this.jQ=t.pingPongState,this.HQ=t.currentRepeatCount,this.UQ=!!t.isPlaying,this.zQ=!!t.isScheduled,this.JQ=!!t.initialStateSet,this.QQ=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.qQ=!!t.complete,this.XQ=!!t.released,this.$Q=!!t.markedForRemoval,this.YQ=t.completedTick,this.ZQ=!!t.implicitPause,this.KQ=!!t.isTemplate,this.ett=t.tags.split(" "),this.itt=t.stringTags,this.ntt=!!t.tagsChanged,this.ttt=!!t.firstTick)}_st(){return this.AQ.map(t=>t.G9())}Pst(t){this.gst(),t.forEach((t,s)=>{const e=this.AQ[s];e._9(t)}),this.AQ.filter(t=>t.vst())}static Ftt(t){const s=this.U6();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static Att(t){if(v.Bi(t))return t.slice(0);if(v.Mi(t))return t.split(" ");throw new Error("invalid tags")}Est(){return this.ott||(this.ott=v.dr(self.Y6,this)),this.ott}}}{const Nr=self.Bs;Nr.ptt=class extends Nr.ur{constructor(t,s){super(),this.cK=t,this.Rst=s,this.Ast=s.dtt(),this.kst=NaN,this.Fst=NaN,this.Ost=null,this.Dst=null,this.Lst=!1,this.Y_=0<s.cst(),this.Bst=!1,this.Nst=!1,this.Wst=NaN,this.Vst=null,this.jst=this.Rst.Ust().Hst(),this.zst=[],this.Jst(),this.qst=0,this.YY=0,this.Xst=0}static mM(t,s){return Nr.dr(Nr.ptt,t,s)}pr(){this.jst=null;for(const t of this.zst)t.pr();Nr.jh(this.zst),this.zst=null,this.cK=null,this.Ost=null,this.Dst=null,this.Rst=null,this.Vst=null}Jst(){for(const t of this.Rst.Yst().$st())this.zst.push(Nr.Zst.mM(this,t))}mst(){for(const t of this.zst)t.mst()}XZ(){for(const t of this.zst)t.XZ();this.Ost=null,this.Dst=null}Kst(){return this.cK}ZO(){return this.cK.ZO()}Ist(){return this.jst||(this.jst=this.Rst.Ust().Hst()),this.jst}xst(){return this.zst}aV(s){for(let t=0;t<this.zst.length;t++){const e=this.zst[t];if(e.Mst()===s)return e}}Qst(){this.Ost||this.eV()}tet(){return!!this.Ost&&!this.Ost.hj()}vst(){if(!this.Stt())return!1;const t=this.eet(),s=this.ZO().IO(t);return!!s&&!s.hj()}D5(){if(this.Stt()){const t=this.iet();if(-1!==t)return this.ZO().Rz(t)}}net(){return this.cK.pK().indexOf(this)}yst(){this.Ost=null,this.kst=NaN,this.Dst=null,this.Fst=NaN,this.Lst=!0}bst(){return!!this.Ost}eV(){if(!this.Lst){if(!this.Ost||!this.tet()){const t=this.eet();this.Ost=this.ZO().IO(t)}return this.Ost}}Sst(t){if(this.Lst=!1,this.Ost!==t){this.XZ(),this.Ost=t,this.Fst=t.D5().Ak(),this.kst=t.Z5(),this.Dst=t.RO();for(const s of this.ret()){const e=s.het,i=s.oet,n=e.aet();switch(n){case"instance-variable":{i.let();const r=t.D5(),h=r.uet(s.name),o=r.cet(h),a=r.fet(h);o===s.name&&a===s.type&&i.det(h);break}case"behavior":{const l=s.FW,u=this.D5(),c=t.D5(),f=i.DW(c);if(l&&f){const d=l.Qc();u.pet(d),c.pet(d),i.let(),i.met(f.uJ())}break}}}}}*ret(){for(const t of this.zst){const s=t.ytt(),e=this.D5(),i={het:t,oet:s};switch(t.aet()){case"world-instance":i.property=t.Mst();break;case"instance-variable":{const n=s.let();i.name=e.cet(n),i.type=e.fet(n);break}case"effect":{const r=e.tB(),h=s.yet(r);i.wet=h;break}case"behavior":{const o=s.DW(e);i.FW=o;break}case"plugin":i.EL=e.RL()}yield i}}RO(){if(!this.Dst||!this.tet()){const t=this.eV();t&&(this.Dst=t.RO())}return this.Dst}bet(){return this.Rst}eet(){return isNaN(this.kst)?this.Rst.eet():this.kst}vet(t){this.Rst.vet(t)}Mtt(){return this.Rst.Mtt()}Ttt(t){this.Rst.Ttt(t)}IK(){return this.Rst.IK()}hV(){return this.Rst.hV()}cst(){return this.Rst.cst()}xet(){return this.Rst.xet()}Met(t){this.Rst.Met(t)}Ctt(t){this.Rst.Ctt(t)}sV(t){for(const s of this.Ist())s.sV(t);for(const e of this.xst())e.sV(t)}Tet(){return this.Rst.Tet()}Cet(t){this.Rst.Cet(t)}iet(){return isNaN(this.Fst)?this.Rst.iet():this.Fst}Iet(t){this.Rst.Iet(t)}Get(t){this.Rst.Get(t)}_et(){const t=this.eV();if(t){const s=t.IW();if(s.Pet())return t.IW()._et()}return this.Rst._et()}Eet(t){this.Rst.Eet(t)}Ret(){const t=this.eV();if(t){const s=t.IW();if(s.Pet())return t.IW().Ret()}return this.Rst.Ret()}yT(){return this.Rst.yT()}Qc(){return this.Rst.Qc()}Stt(){return 0===this.yT()}Aet(){return 1===this.yT()}ket(){return 2===this.yT()}Fet(){return this.qst}NZ(){return this.YY}ost(){return this.Xst}eP(){return this.Y_}Ktt(){for(const t of this.zst)t.Ktt()}BZ(){if(this.Qst(),this.tet()||!this.Stt()){const t=this.Kst(),s=t.Ett(),e=s?0:this.xet();for(const n of this.zst)n.BZ(e),0===this.qst&&1===n.Fet()&&(this.qst=1),0===this.YY&&1===n.NZ()&&(this.YY=1);this.Xst=0;const i=this.zst.some(t=>t.ost());i&&(this.Xst=1),this.Vst=this.Oet(e),this.Bst=!1,this.Nst=!1,this.Hc(e),this.Det(this.Oet(e))}}rst(){if(this.Qst(),this.tet()||!this.Stt()){this.cK.Ett();const t=this.cK.uA()-this.cst();this.Vst=this.Oet(t);for(const s of this.zst)s.rst(t)}}lst(){if(!this.Kst().zZ()&&(this.Qst(),this.tet()||!this.Stt())&&!this.Y_){const t=this.cK.uA(),s=this.cst()+this.xet();s<=t?this.Hc(this.xet(),!0,!1,!0,!1,!1,!0):t<=0&&this.Hc(0,!0,!1,!0,!1,!1,!0)}}hst(){for(let t=0,s=this.zst.length;t<s;t++){const e=this.zst[t];e.hst(),0===this.qst&&1===e.Fet()&&(this.qst=1),0===this.YY&&1===e.NZ()&&(this.YY=1)}}ust(){const s=this.zst.length;for(let t=0;t<s;t++)this.zst[t].ust()}Hc(e,t=!1,i=!1,n=!1,s=!1,r=!1,h=!1){this.Ost||this.eV();const o=this.Ost&&!this.Ost.hj(),a=0===this.Rst.wf;if((o||!a)&&!(r&&a&&this.D5().Vz()||(e-=this.cst())<0)){this.Let(e,t),this.Bet(e,t,s);for(let t=0,s=this.zst.length;t<s;t++)this.zst[t].Hc(e,i,n,h);this.Net(e,t),0!==this.qst&&(this.Dst||(this.Dst=this.Ost.RO()),this.Dst)&&this.Dst.t4()}}fst(){const s=this.zst.length;for(let t=0;t<s;t++)this.zst[t].fst()}Let(t,s){if(s&&this.Y_&&!this.Bst){const e=this.Kst();if(e.Ett()){if(t<0)return}else if(t>this.xet())return;for(const i of this.zst)i.BZ();this.Bst=!0}}Net(t,s){if(s&&this.Y_&&!this.Nst){const e=this.Kst();if(e.Ett()){if(t>=this.xet()){for(const i of this.zst)i.Hc(this.xet(),!1,!0);this.Nst=!0}}else if(t<=0){for(const n of this.zst)n.Hc(0,!1,!0);this.Nst=!0}}}Bet(t,s,e){if(!e&&s&&Nr.S$.Timeline){const i=this.Kst(),n=this.Vst.wK(),r=this.Vst.uA(),h=n?n.uA():i.L6();if(t<=r||h<=t)if(this.Vst=this.Ast.Wet(t,this.Rst),i.Ett())n&&this.Det(this.Vst);else{const o=this.Vst.wK();o&&this.Det(o)}}}Oet(t){const s=this.Ast.Vet(t,this.Rst);return s||this.Ast.Wet(t,this.Rst)}Det(t){if(Nr.S$.Timeline){const s=this.Kst(),e=s.mtt();Nr.S$.Timeline.y$.PushTriggerTimeline(s),Nr.S$.Timeline.y$.PushTriggerKeyframe(t),e.TN(Nr.S$.Timeline.y$.OnAnyKeyframeReached),e.TN(Nr.S$.Timeline.y$.Det),Nr.S$.Timeline.y$.PopTriggerTimeline(s),Nr.S$.Timeline.y$.PopTriggerKeyframe(t)}}jet(){const t=this.Rst.Ust(),s=t.Het();return s}Uet(){const t=this.Rst.Yst(),s=t.zet(),e=Nr.Zst.mM(this,s);return this.zst.push(e),e}Jet(t){const s=this.Rst.Ust();s.qet(t)}Xet(t){for(const s of this.zst)s.Xet(t)}$et(){for(const t of this.zst)t.$et()}Yet(){if(this.Qst(),this.tet()||!this.Stt())for(const t of this.zst)t.Yet()}Zet(){if(this.Qst(),this.tet()||!this.Stt()){let t=!1;for(const s of this.zst){const e=s.Zet();!t&&e&&(t=!0)}if(t){const i=this.jet();i.O6(this.Kst().uA()),i.sV("noease"),i.Cet(!0),i.Rtt("")}}}JY(){isNaN(this.Wst)||this.Ket(this.Wst),this.Wst=NaN}G9(){const t=this.eV(),s=t?t.Z5():this.eet();return{propertyTracksJson:this.Qet(),lastKeyframeDataItemJson:this.tit(),initialStateOfNestedSet:this.Bst,endStateOfNestedSet:this.Nst,instanceUid:s,cleared:this.Lst}}_9(t){if(t){this.sit(t.propertyTracksJson),this.eit(t.lastKeyframeDataItemJson),this.Wst=t.instanceUid,this.Bst=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.Bst=t.initialStateOfNestedSet),this.Nst=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.Nst=t.endStateOfNestedSet),this.Lst=!!t.hasOwnProperty("cleared")&&t.cleared;for(const s of this.zst)0===this.qst&&1===s.Fet()&&(this.qst=1),0===this.YY&&1===s.NZ()&&(this.YY=1);this.Xst=0,this.zst.some(t=>t.ost())&&(this.Xst=1)}}tit(){const t=this.Rst.Ust();return t.iit(this.Vst)}Qet(){return this.zst.map(t=>t.G9())}sit(t){t.forEach((t,s)=>{const e=this.zst[s];e._9(t)})}Ket(t){if(Nr.di(t)){const s=this.ZO().IO(t);if(s){const e=this.Kst();e.wst(this.Rst.hV(),s,this.net())}}}eit(t){const s=this.Rst.Ust();this.Vst=s.nit(t)}}}{const Wr=self.Bs;Wr.Zst=class extends Wr.ur{constructor(t,s){super(),this.rit=t,this.hit=s,this.oit=s.Yst(),this.qst=0,this.YY=0,this.Xst=0,this.ait=this.ytt(),this.lit=this.hit.cit().uit(),this.dit=null,this.pit=null}static mM(t,s){return Wr.dr(Wr.Zst,t,s)}pr(){this.rit=null,this.ait&&(this.ait.pr(),this.ait=null),this.lit=null,this.hit=null,this.oit=null}Fet(){return this.qst}NZ(){return this.YY}ost(){return this.Xst}mit(){return!!this.pit}git(t){this.pit=t}yit(){return this.pit}wit(){return this.rit}Sit(){return this.hit}Yst(){return this.oit}Kst(){return this.rit.Kst()}ZO(){return this.rit.ZO()}eV(){return this.rit.eV()}ytt(){if(!this.ait){let t=this.hit.aet(),s;switch(t){case"behavior":s=new Wr.Zst.bit(this);break;case"effect":s=new Wr.Zst.vit(this),this.YY=1;break;case"instance-variable":s=new Wr.Zst.xit(this);break;case"plugin":s=new Wr.Zst.Mit(this),this.YY=1;break;case"world-instance":s=new Wr.Zst.Tit(this),this.YY=1,this.qst=1;break;case"value":s=new Wr.Zst.Cit(this);break;case"audio":s=new Wr.Zst.Iit(this)}this.ait=s}return this.ait}aet(){return this.hit.aet()}Git(t){this.hit.Git(t)}_it(){return this.hit.Pit()}Eit(t){this.hit.Rit(t)}oV(){return this.ytt().Ait()}Mst(){return this.hit.kit()}Fit(t){this.hit.Oit(t)}Dit(){return this.hit.yT()}Lit(t){this.hit.Bit(t)}Nit(){return this.Yst().Wit(this.hit).yT()}Vit(){return this.hit.Vit()}jit(t){this.hit.jit(t)}Hit(){return this.hit.Hit()}Uit(t){this.hit.Uit(t)}Tet(){return this.hit.Tet()}Cet(t){this.hit.Cet(t)}Mtt(){return this.hit.Mtt()}Ttt(t){this.hit.Ttt(t)}IK(){return this.hit.IK()}Ctt(t){this.hit.Ctt(t)}sV(t){for(const s of this.zit())s.sV(t)}Jit(){return this.hit.Jit()}zit(){return this.lit||(this.lit=this.hit.cit().uit()),this.lit}yK(){return this.hit.cit().yK()}qit(t){return this.oit.qit(t,this.hit)}Xit(t){return this.oit.Xit(t,this.hit)}$it(t){let s=this.oit.qit(t,this.hit),e;return e=s?this.oit.Yit(t,this.hit):(s=this.oit.Xit(t,this.hit),this.oit.Zit(t,this.hit)),{start:s,end:e}}*Kit(){for(const t of this.zit())yield t.kK()}*Qit(){for(const t of this.zit())yield t.uA()}mst(){this.ytt().mst()}XZ(){this.ytt().XZ()}tnt(){return this.ytt().tnt()}Ktt(){this.ytt().Ktt()}BZ(t){this.ytt().BZ(),this.dit=this.snt(t),this.hst()}rst(t){this.ytt().rst(),this.dit=this.snt(t)}hst(){const t=this.wit();if(this.Xst=0,t.Stt()){const s=this.Kst(),e=t.eV(),i=this.ytt(),n=this.Mst(),r=i.ent();if(r){const h=s.gtt(e,i,n,this);h&&h.length&&(this.Xst=1)}else this.Xst=0}}snt(t){const s=this.Kst(),e=this.oit.qit(t,this.hit);return e||(s.Ett()?this.oit.Xit(t,this.hit):this.oit.Zit(t,this.hit))}ust(){this.ait.ust()}Hc(t,s=!1,e=!1,i=!1){let n,r,h=!1;if(s)n=this.oit.Xit(t,this.hit);else{if(this.dit){const o=this.Kst(),a=this.dit.wK(),l=this.dit.uA(),u=a?a.uA():o.L6();(t<=l||u<=t)&&(this.dit=this.oit.Xit(t,this.hit),h=!0)}else this.dit=this.oit.Xit(t,this.hit),h=!0;n=this.dit}n&&(r=n.wK()),this.ait.Hc(t,n,r,s,e,i,h)}int(t){if(this.dit){const i=this.Kst(),n=this.dit.wK(),r=this.dit.uA(),h=n?n.uA():i.L6();(t<=r||h<=t)&&(this.dit=this.oit.Xit(t,this.hit))}else this.dit=this.oit.Xit(t,this.hit);const s=this.dit,e=s.wK();return this.ait.int(t,s,e)}nnt(t,s,e){return this.ait.int(t,s,e)}fst(){this.ait.fst()}static rnt(t,s){const e=s.Sit(),i=s.oit;return i.Xit(t,e)}static hnt(t,s){const e=s.Sit(),i=s.oit;return i.Zit(t,e)}ont(){const t=this.hit.cit(),s=t.ant();return this.dit=null,s}Xet(t){this.dit=null;const s=this.hit.cit();s.lnt(t)}$et(){this.ytt().$et()}Yet(){const t=this.ytt().Yet();if(t){const s=this.oit.Wit(this.hit),e=this.ytt().tnt();s.unt(e)}}Zet(){const t=this.ytt().Zet();return t&&this.cnt(),this.ytt().fnt(),t}cnt(){const t=this.Kst().uA(),s=this.ytt(),e=Wr.Zst.rnt(t,this),i=this.ont();i.Bit(e.yT()),i.O6(t),i.sV(e.dnt()),i.Cet(!0),i.pnt(s.mnt()),i.unt(s.tnt())}G9(){return{sourceAdapterJson:this.ytt().G9()}}_9(t){t&&this.ytt()._9(t.sourceAdapterJson)}}}{const Vr=self.Bs,jr=Vr.Zst;jr.Tit=class{constructor(t){this.gnt=t,this.ynt=null,this.wnt()}pr(){this.ynt&&(this.ynt.pr(),this.ynt=null),this.gnt=null}ent(){return this.ynt.ent()}aV(){return this.gnt}mst(){this.ynt&&this.ynt.mst()}XZ(){this.ynt&&this.ynt.XZ()}wnt(){return this.ynt||(this.ynt=this.Snt()),this.ynt}let(){}Ak(){return this.let()}bnt(){}Ktt(){this.wnt().Ktt()}BZ(){this.wnt().BZ()}rst(){this.wnt().rst()}ust(){this.ynt.vnt()}Hc(t,s,e,i,n,r,h){let o=this.gnt.Nit(),a;switch(o){case"numeric":a=jr.xnt.Hc(t,s,e,this.gnt);break;case"angle":a=jr.Mnt.Hc(t,s,e,this.gnt);break;case"boolean":a=jr.Tnt.Hc(t,s,e,this.gnt);break;case"color":a=jr.Cnt.Hc(t,s,e,this.gnt);break;case"text":a=jr.Int.Hc(t,s,e,this.gnt)}this.ynt.Gnt(t,a,s,e,i,n,r,h)}int(t,s,e){switch(this.gnt.Nit()){case"numeric":return jr.xnt.Hc(t,s,e,this.gnt);case"angle":return jr.Mnt.Hc(t,s,e,this.gnt);case"boolean":return jr.Tnt.Hc(t,s,e,this.gnt);case"color":return jr.Cnt.Hc(t,s,e,this.gnt);case"text":return jr.Int.Hc(t,s,e,this.gnt)}}fst(){this.ynt._nt()}$et(){this.wnt().Pnt()}fnt(){this.wnt().fnt()}tnt(){return this.wnt().tnt()}Yet(){return this.wnt().Yet()}Zet(){return this.wnt().Zet()}mnt(){const t=this.gnt,s=t.wit(),e=s.Kst().uA(),i=jr.rnt(e,t),n=i.wK(),r=t.Nit();switch(r){case"numeric":return jr.xnt.Hc(e,i,n,t);case"angle":return jr.Mnt.Hc(e,i,n,t);case"boolean":return jr.Tnt.Hc(e,i,n,t);case"color":return jr.Cnt.Hc(e,i,n,t);case"text":return jr.Int.Hc(e,i,n,t)}}Snt(){const t=this.gnt,s=t.Jit()?t.Nit():"";switch(s){case"combo":case"boolean":case"text":case"string":return new jr.Rnt.Ent(this);case"numeric":case"number":case"angle":return new("combo"===this.gnt.Dit()?jr.Rnt.Ent:jr.Rnt.Ant)(this);case"color":case"offsetColor":return new jr.Rnt.knt(this);default:return new jr.Rnt.Ant(this)}}G9(){return{propertyAdapterJson:this.wnt().G9()}}_9(t){t&&this.wnt()._9(t.propertyAdapterJson)}}}{const Hr=self.Bs;class Ur extends Hr.Zst.Tit{constructor(t){super(t),this.Fnt=NaN}let(){return this.gnt.Sit().Pit()[0]}Ak(){return this.Fnt||super.Ak()}bnt(){return this.gnt.wit().eV()}det(t){const s=this.gnt.Sit().Pit()[0];s!==t&&(this.Fnt=t)}Hc(t,s,e,i,n,r,h){this.wnt().Ont(s.Ait())&&super.Hc(t,s,e,i,n,r,h)}int(t,s,e){if(this.wnt().Ont(s.Ait()))return super.int(t,s,e)}G9(){return Object.assign(super.G9(),{index:this.Fnt})}_9(t){t&&(super._9(t),this.Fnt=t.index)}}Hr.Zst.xit=Ur}{const zr=self.Bs;class Jr extends zr.Zst.Tit{constructor(t){super(t),this.EU=NaN}let(){const t=this.gnt.Sit();return t.Pit()[1]}bnt(){const t=this.gnt.Sit(),s=this.gnt.wit(),e=this.EU||t.Pit()[0],i=s.eV(),n=i.Dnt(e),r=i.Lnt()[n];return r.IW()}DW(t){const s=this.gnt.Sit(),e=s.Pit()[2];return t.Bnt(e)}met(t){const s=this.gnt.Sit();s.Pit()[0]!==t&&(this.EU=t)}Hc(t,s,e,i,n,r,h){const o=this.gnt.wit(),a=o.eV();this.DW(a.D5())&&super.Hc(t,s,e,i,n,r,h)}int(t,s,e){const i=this.gnt.wit(),n=i.eV();if(this.DW(n.D5()))return super.int(t,s,e)}G9(){return Object.assign(super.G9(),{sid:this.EU})}_9(t){t&&(super._9(t),this.EU=t.sid)}}zr.Zst.bit=Jr}{const qr=self.Bs;class Xr extends qr.Zst.Tit{constructor(t){super(t)}let(){return this.gnt.Sit().Pit()[1]}bnt(){const t=this.gnt,s=t.wit(),e=s.RO(),i=e.KN(),n=i.tB(),r=this.yet(n),h=r.Ak();return i.jW(h)?i.Nnt(h):null}yet(t){const s=this.gnt,e=s.Sit().Pit()[0];return t.Wnt(e)}Hc(t,s,e,i,n,r,h){this.Vnt()&&super.Hc(t,s,e,i,n,r,h)}int(t,s,e){if(this.Vnt())return super.int(t,s,e)}Vnt(){const t=this.gnt,s=t.wit(),e=s.RO(),i=e.KN(),n=i.tB(),r=this.yet(n);if(r){const h=r.Ak();return i.jW(h)}}}qr.Zst.vit=Xr}{const $r=self.Bs;class Yr extends $r.Zst.Tit{constructor(t){super(t)}let(){return this.gnt.Sit().Pit()[0]}bnt(){return this.gnt.wit().eV().IW()}Hc(t,s,e,i,n,r,h){const o=this.gnt.wit(),a=o.D5().RL(),l=o.eV().D5().RL();a===l&&super.Hc(t,s,e,i,n,r,h)}int(t,s,e){const i=this.gnt.wit(),n=i.D5().RL(),r=i.eV().D5().RL();if(n===r)return super.int(t,s,e)}jnt(){const t=this.gnt.wit(),s=t.D5().RL();if($r.S$.Hnt&&s instanceof $r.S$.Hnt&&("initial-frame"===this.gnt.Mst()||"initial-animation"===this.gnt.Mst()))switch(this.gnt.IK()){case"relative":case"absolute":return null}}}$r.Zst.Mit=Yr}{const Zr=self.Bs;class Kr extends Zr.Zst.Tit{constructor(t){super(t),this.Unt=0,this.znt=!1}ent(){return!1}BZ(){let t=this.gnt.Yst(),s=this.gnt.Sit();s=t.Wit(s),this.Unt=s.kK()}rst(){}Ait(){return this.znt||this.gnt.Hc(0),this.Unt}Hc(t,s,e,i,n,r,h){this.Unt=Zr.Zst.xnt.Hc(t,s,e,this.gnt),this.znt=!0}$et(){}fnt(){}tnt(){return this.Unt}Yet(){return!1}Zet(){return!1}G9(){return{value:this.Unt,init:this.znt}}_9(t){t&&(this.Unt=t.value,this.znt=!t.hasOwnProperty("init")||t.init)}}Zr.Zst.Cit=Kr}{const Qr=self.Bs;class th extends Qr.Zst.Tit{constructor(t){super(t),this.Jnt=!1,this.qnt=null,this.Xnt=null,this.$nt=null,this.cK=this.gnt.Kst(),this.rit=this.gnt.wit(),this.Ynt=this.gnt._it(),this.Znt=this.Ynt[0],this.Knt=this.Ynt[1],this.Ynt[3]?this.Qnt=this.Ynt[3]:this.Qnt=Math.random().toString(36).slice(2),this.trt=NaN,this.srt=NaN,this.ert=NaN,this.irt=null,this.nrt()}pr(){super.pr(),this.qnt=null,this.Xnt=null,this.$nt=null,this.cK=null,this.rit=null,this.Ynt=null,this.Znt=null,this.irt=null}nrt(){if(self.Bs.S$.Audio){const t=this.gnt.ZO(),s=t.rrt(self.Bs.S$.Audio);s&&(this.qnt=s._L().IW()),this.Xnt=self.Bs.S$.Audio.hrt,this.$nt=self.Bs.S$.Audio.ort}}art(){if(!this.irt){const t=this.gnt.wit(),s=t.aV("audioSource");s&&(this.irt=s.ytt())}}lrt(){const t=this.gnt.wit(),s=t.aV("volume");return(s?s.ytt():this).srt}mst(){super.mst(),this.Jnt=!1,this.qnt&&(this.$nt&&(this.trt=this.$nt.PlaybackTime.call(this.qnt,this.Qnt),this.srt=this.$nt.Volume.call(this.qnt,this.Qnt)),this.Xnt)&&this.Xnt.A6.call(this.qnt,this.Qnt)}urt(){return this.Qnt}crt(){return this.ert}frt(t){this.ert=t}BZ(){super.BZ(),this.trt=NaN,this.Jnt=!1}rst(){super.rst();const t=this.gnt.Kst(),s=t.uA();switch(this.trt=s-this.Knt,this.gnt.Mst()){case"audioSource":break;case"volume":this.srt=this.gnt.int(s)}this.Jnt=!1}Hc(t,s,e,i,n,r,h){if(this.qnt)switch(this.gnt.Mst()){case"audioSource":{if(!this.cK.Ett())return;if(i)return void(this.Xnt&&this.Xnt.A6.call(this.qnt,this.Qnt));if(t<this.Knt)return void(this.Jnt=!1);const o=this.$nt.drt.call(this.qnt,this.Qnt),a=this.cK.H6();if(a!==o&&this.Xnt.j6.call(this.qnt,this.Qnt,a),this.Jnt)return;if(!this.gnt.Kst().IsPlaying())return;if(this.Jnt=!0,isNaN(this.trt)){const l=self.performance.now(),u=t-this.Knt,c=this.qnt.GetAudioContextState();if("suspended"===c)return void(this.Jnt=!1);const f=self.performance.now(),d=(f-l)/1e3,p=u+d;if(this.Xnt){let t=this.crt();isNaN(t)?(this.frt(0),t=0):this.frt(t),this.Xnt.PlayFromTimeline.call(this.qnt,this.Znt,t,this.Qnt,p)}}else{const m=this.trt,g=(this.trt=NaN,this.lrt()),y=(this.srt=NaN,this.qnt.GetAudioContextState());if("suspended"===y)return void(this.Jnt=!1);this.Xnt&&(this.frt(g),this.Xnt.PlayFromTimeline.call(this.qnt,this.Znt,g,this.Qnt,m))}break}case"volume":this.art(),super.Hc(t,s,e,i,n,r,h)}}int(t,s,e){if(this.qnt)switch(this.gnt.Mst()){case"audioSource":return;case"volume":return this.art(),super.int(t,s,e)}}prt(t,s){return this.irt?this.irt.crt():0}mrt(t,s,e,i){this.irt&&this.irt.frt(this.prt()+s),this.Xnt&&this.irt&&this.Xnt.frt.call(this.qnt,this.irt.urt(),this.irt.crt())}grt(t,s,e){this.irt&&this.irt.frt(s),this.Xnt&&this.irt&&this.Xnt.frt.call(this.qnt,this.irt.urt(),this.irt.crt())}yrt(){return!0}G9(){return{audioPlaybackStarted:this.Jnt,audioTag:this.Qnt,pauseTime:this.trt,pauseVolume:this.srt,volume:this.ert}}_9(t){t&&(this.Jnt=t.audioPlaybackStarted,this.Qnt=t.audioTag,this.trt=t.pauseTime,this.srt=t.pauseVolume,this.ert=t.volume,this.nrt())}}Qr.Zst.Iit=th}{const sh=self.Bs;sh.Zst.Rnt=class{constructor(t){this.ait=t,this.gnt=t.aV(),this.Dst=this.gnt.wit().RO(),this.wrt=this.gnt.Mst(),this.Srt=!1,this.brt=null,this.vrt=null}pr(){this.ait=null,this.gnt=null,this.Dst=null,this.brt=null,this.vrt=null}ent(){return!1}mst(){}XZ(){this.Dst=null,this.brt=null,this.vrt=null}ytt(){return this.ait}aV(){return this.gnt}RO(){return this.Dst||(this.Dst=this.gnt.wit().RO()),this.Dst}xrt(t){this.Srt=!!t}Mrt(){return this.Srt}Ktt(){}BZ(){}rst(){}Pnt(){this.brt=this.tnt()}fnt(){this.brt=null}tnt(){}Yet(){}Zet(){}Ont(t){const s=typeof this.Trt(),e=typeof t;return s==e}vnt(){}Gnt(t,s,e,i,n,r,h,o){}_nt(){}Crt(){const t=this.Irt(()=>{const t=this.gnt.Sit(),s=this.gnt.Yst();return s.Wit(t)},()=>{const t=this.gnt.Sit(),s=this.gnt.Yst();return s.Grt(t)});return t._rt()}Prt(){const t=this.gnt.Kst(),i=t.uA()-this.gnt.wit().cst(),s=this.Irt(()=>{const t=this.gnt.Sit(),s=this.gnt.Yst();return s.Xit(i,t)},()=>{const t=this.gnt.Sit(),s=this.gnt.Yst(),e=s.Zit(i,t);return e||s.Grt(t)});return s._rt()}Irt(t,s){const e=this.gnt.Kst();return(e.Ett()?t:s)()}Ert(t,s){const e=this.gnt.IK();return("relative"===e?t:s)()}Rrt(t,s){return(this.Mrt()?(this.xrt(!1),t):s)()}Art(t){}krt(){return this.ait.Ak()}Frt(){return this.vrt||(this.vrt=this.ait.bnt()),this.vrt}Ort(t,s,e,i,n,r){const h=this.gnt.aet();switch(h){case"behavior":return t();case"effect":return s();case"instance-variable":return e();case"plugin":return i();case"world-instance":return n();case"audio":return r()}}G9(){return{firstAbsoluteUpdate:this.Srt,saveState:this.brt}}_9(t){t&&(this.Srt=t.firstAbsoluteUpdate,this.brt=t.saveState)}Drt(t,s=!1){const e=[];for(const i of t){const n=i.wit().cst();for(const r of i.zit())(s&&0===r.uA()||!s)&&e.push({time:n+r.uA(),value:r._rt()})}return e.sort((t,s)=>t.time-s.time)}Lrt(t,s,e){return this.Brt(s,e)}Brt(s,e){for(let t=e.length-1;0<=t;t--){const i=e[t].time;if(i<=s)return e[t]}return null}}}{const eh=self.Bs,ih=new Map,nh=[0,0,0];class rh extends eh.Zst.Rnt{constructor(t){super(t)}Ktt(){}BZ(){}rst(){}tnt(){const t=this.gnt.aet(),s=this.Frt(),e=this.krt();switch(t){case"behavior":return this.Nrt(s.Wrt(e));case"effect":return this.Nrt(s[e]);case"plugin":return this.Nrt(s.Wrt(e));case"world-instance":return this.Nrt(this.Trt())}}Yet(){const t=this.Crt();return!this.Vrt(t,this.Trt())}Zet(){return!eh.yi(this.brt)&&!this.Vrt(this.brt,this.Trt())}Vrt(t,s){return t=this.jrt(t),s=this.jrt(s),t.ya(s)}Crt(){const t=super.Crt();return this.jrt(t)}Prt(){const t=super.Prt();return this.jrt(t)}Art(t){}Nrt(t){return(eh.Qi(t,eh.qo)?t.toArray():t).slice(0,3)}jrt(t){return eh.Qi(t,eh.qo)?t:new eh.qo(t[0],t[1],t[2],1)}Ont(t){return!0}ent(){return!0}vnt(){const t=this.gnt.Kst(),s=this.gnt.eV(),e=this.gnt.ytt(),i=t.gtt(s,e,this.wrt,this.gnt);if(i&&1<i.length){ih.has(s)||ih.set(s,new Map);const n=ih.get(s),r=this.gnt.aet(),h=(n.has(r)||n.set(r,new Map),n.get(r));h.has(this.wrt)||h.set(this.wrt,{Hrt:!1,color:new eh.qo(0,0,0,1)})}}Urt(t,s,e){const i=ih.get(t).get(s).get(e);return i.Hrt=!0,i.color}Gnt(t,s,e,i,n,r,h,o){const a=this.gnt.Kst(),l=this.gnt.wit(),u=this.gnt.eV(),c=this.gnt.ytt(),f=this.gnt.aet(),d=this.wrt,p=a.gtt(u,c,d,this.gnt);if(p&&1<p.length){const m=this.Drt(p,!0),g=this.Lrt(a,a.uA(),m);if(g){const y=l.cst(),w=g.time-y;if(0==w)this.Urt(u,f,this.wrt).ta(s[0],s[1],s[2]);else if(!(w<0)){const S=s[0],b=s[1],v=s[2],x=this.gnt.Hc(w,!1,!0),M=eh.qo.$a(S,x[0]),T=eh.qo.$a(b,x[1]),C=eh.qo.$a(v,x[2]);this.Urt(u,f,this.wrt).ta(M,T,C)}}}else this.zrt(s[0],s[1],s[2])}_nt(){const t=this.gnt.eV();if(ih.has(t)){const s=ih.get(t),e=this.gnt.aet();if(s.has(e)){const i=s.get(e);if(i.has(this.wrt)){const n=i.get(this.wrt),r=n.Hrt,h=n.color;r&&this.zrt(h.ua(),h.ca(),h.fa()),0===i.size&&s.delete(e),0===s.size&&ih.delete(t)}}}}Trt(){const t=this.gnt.aet(),s=this.Frt(),e=this.krt();switch(t){case"behavior":return this.jrt(s.Wrt(e));case"effect":return s[e].clone();case"plugin":return this.jrt(s.Wrt(e));case"world-instance":return this.RO().m4().clone()}}zrt(t,s,e){const i=this.gnt.aet(),n=this.Frt(),r=this.krt();switch(i){case"behavior":nh[0]=t,nh[1]=s,nh[2]=e,n.Jrt(r,nh);break;case"effect":n[r].Qo(t,s,e);break;case"plugin":nh[0]=t,nh[1]=s,nh[2]=e,n.Jrt(r,nh);break;case"world-instance":this.RO().qrt(t,s,e)}}G9(){}_9(t){}}eh.Zst.Rnt.knt=rh}{const hh=self.Bs,oh=hh.Zst;class ah extends hh.Zst.Rnt{constructor(t){super(t)}Ktt(){}BZ(){}rst(){}tnt(){return this.Trt()}Yet(){const t=this.Crt();return t!==this.tnt()}Zet(){return!hh.yi(this.brt)&&this.brt!==this.tnt()}ent(){return!1}Gnt(t,s,e,i,n,r,h,o){const a=this.gnt,l=a.wit(),u=a.aet(),c=a.Kst(),f=l.eV(),d=a.ytt(),p=this.wrt,m=c.gtt(f,d,p,a);if(m&&1<m.length){const y=this.Drt(m),w=t+l.cst(),S=this.Lrt(c,w,y);S&&(s=S.value)}const g=a.Nit();switch(g){case"numeric":if(oh.xnt.Xrt(this.krt(),this.Frt(),s,u))break;return;case"angle":if(oh.Mnt.Xrt(this.krt(),this.Frt(),s,u))break;return;case"boolean":if(oh.Tnt.Xrt(this.krt(),this.Frt(),s,u))break;return;case"color":if(oh.Cnt.Xrt(this.krt(),this.Frt(),s,u))break;return;case"text":if(!oh.Int.Xrt(this.krt(),this.Frt(),s,u))return}this.zrt(s)}Trt(){const t=this.gnt.aet(),s=this.Frt(),e=this.krt();switch(t){case"behavior":return s.Wrt(e);case"effect":return s[e];case"instance-variable":return s.$rt(e);case"plugin":return s.Wrt(e)}}zrt(t){const s=this.gnt.aet(),e=this.Frt(),i=this.krt();switch(s){case"behavior":e.Jrt(i,t);break;case"effect":e[i]=t;break;case"instance-variable":e.Yrt(i,t);break;case"plugin":e.Jrt(i,t)}}}hh.Zst.Rnt.Ent=ah}{const lh=self.Bs,uh=(lh.Zst.Rnt,new Map),ch=(t,s,e,i,n,r=!1,h=null,o=null)=>{uh.set(t,{Zrt:s,Krt:e,Qrt:i,round:n,tht:r,init:h,reset:o})};ch("offsetX",(t,s,e,i)=>{"relative"===i.gnt.IK()?t.sht(s,e.Kst().Gtt()):t.sht(s)},(t,s)=>t.Mv(s),t=>t.xv(),!0),ch("offsetY",(t,s,e,i)=>{"relative"===i.gnt.IK()?t.eht(s,e.Kst().Gtt()):t.eht(s)},(t,s)=>t.Iv(s),t=>t.Cv(),!0),ch("offsetWidth",(s,t,o,e,i)=>{if(0!==t){const n="relative"===e.gnt.IK(),l=1===e.iht.yT();if((n||l)&&s.H4()&&s.Z4()){if(isNaN(e.nht)){let i=[],t=s.P4();for(;t;)i.push(t),t=t.P4();i.reverse();let a=(t,s)=>s.Kst().Tst(t.eV()),n=(t,s)=>{const e=a(t,s);if(e)return e._et();const i=t.eV().IW();return i.Pet()?i._et():t.hht().rht()},r=(t,s,e,i=0)=>{const n=a(t,s);if(!n)return i;const r=n.aV(e);if(!r)return i;const h=r.Sit().cit();if(!h)return i;const o=h.Grt();return o?o.Ait():i},h;if(l){let t=i[i.length-1];h=t.am()}else{let s=i[0],t=s.hht().rht(),e=s.hht().oht();h=t*e,h=(h+=r(s,o,"offsetWidth"))+n(s,o)*r(s,o,"offsetScaleX");for(let t=1;t<i.length;t++){const u=(s=i[t]).hht().oht();h=(h=(h*=u)+r(s,o,"offsetWidth"))+n(s,o)*r(s,o,"offsetScaleX")}}e.nht=0===h?Number.EPSILON:h}i||s.Hm(t/e.nht,!0)}else s.Hm(t)}},(t,s)=>t.ym(s),t=>t.am(),!0),ch("offsetHeight",(s,t,o,e,i)=>{if(0!==t){const n="relative"===e.gnt.IK(),a=1===e.iht.yT();if((n||a)&&s.H4()&&s.Q4()){if(isNaN(e.nht)){let i=[],t=s.P4();for(;t;)i.push(t),t=t.P4();i.reverse();let n=(t,s)=>{i=t;const e=s.Kst().Tst(i.eV());var i;if(e)return e.Ret();const n=t.eV().IW();return n.Pet()?n.Ret():t.hht().aht()},r=(t,s,e,i=0)=>{const n=s.Kst().Tst(t.eV());if(!n)return i;const r=n.aV(e);if(!r)return i;const h=r.Sit().cit();if(!h)return i;const o=h.Grt();return o?o.Ait():i},h;if(a){let t=i[i.length-1];h=t.vm()}else{let s=i[0],t=s.hht().aht(),e=s.hht().lht();h=t*e,h=(h+=r(s,o,"offsetHeight"))+n(s,o)*r(s,o,"offsetScaleY");for(let t=1;t<i.length;t++){const l=(s=i[t]).hht().lht();h=(h=(h*=l)+r(s,o))+n(s,o)*r(s,o,"offsetScaleY")}}e.nht=0===h?Number.EPSILON:h}i||s.uht(t/e.nht,!0)}else s.uht(t)}},(t,s)=>t.lm(s),t=>t.vm(),!0),ch("offsetAngle",(t,s,e,i,n)=>{t.cht(s)},(t,s)=>t.oB(s),t=>t.aB(),!1,!0),ch("offsetOpacity",(t,s,e,i,n)=>{const r=i.fht||1,h=(s/=r,t.FE()),o=h+s;if(0===i.dht)1<o?i.dht+=o-1:o<0&&(i.dht+=o),t.pht(s);else{const a=t.FE()+s;0<s&&0<i.dht?1<a&&(i.dht+=a-1):0<s&&i.dht<0?(i.dht+=s,0<i.dht&&(t.pht(i.dht),i.dht=0)):s<0&&0<i.dht?(i.dht+=s,i.dht<0&&(t.pht(i.dht),i.dht=0)):s<0&&i.dht<0&&a<0&&(i.dht+=a)}},(t,s)=>{t.DE(s)},t=>t.FE(),!1,!0,(r,n,h)=>{switch(r.dht=0,r.gnt.IK()){case"relative":{r.gnt.Yst();let t=r.gnt.Sit(),s=t.cit(),e=s.uit(),i=r.RO().FE(),n=i;for(const o of e){const a=o.uA(),l=r.gnt.int(a);n=i+l,n=lh.br(n,0,1)}r.mht=i-n,r.mht=Math.round(100*(r.mht+Number.EPSILON))/100,n=i;for(let t=e.length-1;0<=t;t--){const u=e[t].uA(),c=r.gnt.int(u);n-=c,n=lh.br(n,0,1)}r.ght=n,r.ght=Math.round(100*(r.ght+Number.EPSILON))/100;break}}const t="relative"===r.gnt.IK(),s=1===r.iht.yT();if((t||s)&&n.H4()&&n.rW()){let s=[],t=n.P4();for(;t;)s.push(t),t=t.P4();s.reverse();let e=(t,s,e)=>{const i=s.Kst().Tst(t.eV());if(!i)return 0;const n=i.aV(e);if(!n)return 0;const r=n.Sit().cit();if(!r)return 0;const h=r.Grt();return h?h.Ait():0},i=s[0].hht().yht();i+=e(s[0],h,"offsetOpacity");for(let t=1;t<s.length;t++)i+=e(s[t],h,"offsetOpacity");r.fht=0===i?1:i}},e=>{switch(e.gnt.IK()){case"relative":{e.dht=0;let t=e.RO(),s=t.FE();s=Math.round(100*(s+Number.EPSILON))/100,e.gnt.Kst().Ett()?(t.DE(s+e.mht),e.rC=0):(t.DE(s-e.ght),e.rC=e.ytt().mnt());break}}}),ch("offsetOriginX",(t,s)=>t.wht(s),(t,s)=>t.Sht(s),t=>t.d6(),!1),ch("offsetOriginY",(t,s)=>t.bht(s),(t,s)=>t.vht(s),t=>t.m6(),!1),ch("offsetZElevation",(t,s)=>t.xht(s),(t,s)=>t._v(s),t=>t.Gv(),!0),ch("offsetScaleX",(t,s,e,i)=>{if(0!==s){const n=t.am()<0?-1:1;if("relative"===i.gnt.IK()&&t.H4()&&t.Z4()){const r=e._et()*n*s;isNaN(i.nht)&&uh.get("offsetWidth").Zrt(t,1,e,i,!0),t.Hm(r/i.nht,!0)}else t.Hm(e._et()*n*s)}},(t,s,e)=>{t.ym(e._et()*s)},(i,n)=>{const r=i.am()<0?-1:1;if(i.Z4()){let t=i.P4(),s=n.Kst().Tst(t.eV()),e=NaN;if(s)e=t.am()/s._et();else{const h=t.eV().IW();e=h.Pet()?t.am()/h._et():1}return i.am()*r/(n._et()*e)}return i.am()*r/n._et()},!1),ch("offsetScaleY",(t,s,e,i)=>{if(0!==s){const n=t.vm()<0?-1:1;if("relative"===i.gnt.IK()&&t.H4()&&t.Q4()){const r=e.Ret()*n*s;isNaN(i.nht)&&uh.get("offsetHeight").Zrt(t,1,e,i,!0),t.uht(r/i.nht,!0)}else t.uht(e.Ret()*n*s)}},(t,s,e)=>{t.lm(e.Ret()*s)},(i,n)=>{const r=i.vm()<0?-1:1;if(i.Q4()){let t=i.P4(),s=n.Kst().Tst(t.eV()),e=NaN;if(s)e=t.vm()/s.Ret();else{const h=t.eV().IW();e=h.Pet()?t.vm()/h.Ret():1}return i.vm()*r/(n.Ret()*e)}return i.vm()*r/n.Ret()},!1);class fh extends lh.Zst.Rnt{constructor(t){super(t),this.rC=0,this.dht=0,this.mht=0,this.ght=0,this.fht=NaN,this.nht=NaN,this.Mht=void 0,this.Tht=void 0,this.Cht=null,this.Iht=null,this.Ght=null,this._ht=null,this.Pht=null,this.Eht=null,this.Rht=null,this.Aht=null,this.kht=!1,this.Fht=!1,lh.Qi(this.gnt.Kst(),lh.Oht)?this.iht=new lh.Zst.Rnt.Dht(this):this.iht=new lh.Zst.Rnt.Lht(this);const s=this.gnt.Mst();switch(this.gnt.aet()){case"world-instance":{const e=uh.get(s);this.Cht=e.Qrt,this.Iht=e.Zrt,this.Ght=e.Krt,this.kht=e.round,this.Fht=e.tht,this.Pht=e.init,this._ht=e.reset;break}case"audio":this.Eht=t.prt,this.Rht=t.mrt,this.Aht=t.grt,this.kht=!!t.yrt(),this.Fht=!1}}pr(){this.iht=null,this.Cht=null,this.Iht=null,this.Ght=null,this._ht=null,this.Pht=null,this.Eht=null,this.Rht=null,this.Aht=null,super.pr()}ent(){return this.iht.ent()}Bht(){return this.rC}Nht(t){this.rC=t}Ktt(){this._ht&&this._ht(this)}BZ(){const t=this.iht.BZ();if("number"==typeof t&&(this.rC=t),this.Pht){const s=this.RO(),e=this.gnt.wit();this.Pht(this,s,e)}}rst(){const t=this.iht.rst();"number"==typeof t&&(this.rC=t)}tnt(){return this.Trt()}Yet(){const t=this.Crt();return t!==this.tnt()}Zet(){return!lh.yi(this.brt)&&this.brt!==this.tnt()}vnt(){this.iht.vnt()}Gnt(t,s,e,i,n,r,h,o){return this.iht.Gnt(t,s,e,i,n,r,h,o)}_nt(){this.iht._nt()}Trt(){const t=this.Frt(),s=this.krt(),e=this.RO(),i=this.gnt.wit(),n=this.gnt.aet();switch(n){case"behavior":return t.Wrt(s);case"effect":return t[s];case"instance-variable":return t.$rt(s);case"plugin":return t.Wrt(s);case"world-instance":return this.Cht(e,i);case"audio":return this.Eht.call(this.ytt(),e,i)}}zrt(t,s,e){const i=this.Frt(),n=this.krt(),r=this.RO(),h=this.gnt.wit(),o=this.gnt.aet();switch(o){case"behavior":i.Wht(n,t);break;case"effect":i[n]+=t;break;case"instance-variable":i.Vht(n,t);break;case"plugin":i.Wht(n,t,this.ytt().jnt());break;case"world-instance":this.Iht(r,t,h,this);break;case"audio":this.Rht.call(this.ytt(),r,t,h,this)}}jht(t,s,e){let i=this.gnt.Mtt();if("discrete"!==(i="default"===i?"continuous":i)||s){if("discrete"===i&&e){const l=this.gnt.Kst(),u=l.uA(),c=this.gnt.qit(u);if(!c)return}const n=this.Frt(),r=this.krt(),h=this.RO(),o=this.gnt.wit(),a=this.gnt.aet();switch(a){case"behavior":n.Jrt(r,t);break;case"effect":n[r]=t;break;case"instance-variable":n.Yrt(r,t);break;case"plugin":n.Jrt(r,t,this.ytt().jnt());break;case"world-instance":this.Ght(h,t,o);break;case"audio":this.Aht.call(this.ytt(),h,t,o)}}}Hht(t,s,e,i,n,r,h,o){this.iht.Hht(t,s,e,i,n,r,h,o)}Uht(t,s,e,i,n){let r=(t="angle"===this.gnt.Dit()?lh.Tr(t):t).toString(),h=r.split(".")[1]||"",o=h.length,a=this.Trt(),l;switch(l=0===o?this.kht?Math.round(a):this.Fht?"angle"===this.gnt.Dit()?lh.Mr(Math.round(lh.Tr(a))):Number(lh.toFixed(a,2)):a:this.kht?Number(lh.toFixed(a,o)):(this.Fht,a),this.zrt(l-a,s,e),this.gnt.Mst()){case"offsetWidth":case"offsetScaleX":{const u=this.RO(),c=u.am(),f=Number(lh.toFixed(c,2));u.Hm(f-c);break}case"offsetHeight":case"offsetScaleY":{const d=this.RO(),p=d.vm(),m=Number(lh.toFixed(p,2));d.uht(m-p);break}}}G9(){return Object.assign(super.G9(),{v:this.rC,a:this.dht,fod:this.mht,bod:this.ght,of:this.fht,sf:this.nht,armorf:this.Mht,armandf:this.Tht})}_9(t){t&&(super._9(t),this.rC=t.v,this.dht=t.a,this.mht=lh.di(t.fod)?t.fod:0,this.ght=lh.di(t.bod)?t.bod:0,this.fht=lh.di(t.of)?t.of:NaN,this.nht=lh.di(t.sf)?t.sf:NaN,this.Mht=lh.di(t.armorf)?t.armorf:void 0,this.Tht=lh.di(t.armandf)?t.armandf:void 0)}}lh.Zst.Rnt.Ant=fh}{const dh=self.Bs;class ph{constructor(t){this.zht=!1,this.Unt=0,this.Jht=!1,this.qht=!1,this.zst=t;for(let t=0,s=this.zst.length;t<s;t++)this.zst[t].git(this)}xst(){return this.zst}Xht(){this.zht=!0}$ht(){return this.zht}pnt(t){this.Unt=t}Ait(){return this.Unt}Yht(t){this.Jht=t}Zht(){return this.Jht}lst(t){this.qht=t}Kht(){return this.qht}u0(){this.zht=!1,this.Unt=0,this.Jht=!1,this.qht=!1}}class mh{constructor(t){this.Qht=t}pr(){this.Qht=null}yT(){return 0}BZ(){const t=this.Qht;return this.Qht.aV(),t.Ert(()=>t.Irt(()=>0,()=>t.ytt().mnt()),()=>{})}rst(){}ent(){this.Qht;const t=this.Qht.aV();switch(t.IK()){case"relative":return!1;case"absolute":return!0}}vnt(){this.Qht;const t=this.Qht.aV(),s=t.Mst();switch(t.IK()){case"relative":break;case"absolute":if(t.mit()){const e=t.yit();e.u0()}else{const i=t.Kst(),n=t.eV(),r=t.ytt(),h=i.gtt(n,r,s,t);h&&1<h.length&&new ph(h)}}}Gnt(t,s,e,i,n,r,h,o){const a=this.Qht,l=this.Qht.aV();switch(l.IK()){case"relative":{const u=a.Bht();a.zrt(s-u,e,i),r&&this.Hht(t,e,i,n,u,s),a.Nht(s);break}case"absolute":{const c=l.Kst(),f=l.wit();if(l.eV(),l.ytt(),l.mit()){const d=l.yit(),p=d.xst(),m=a.Drt(p,!0),g=a.Lrt(c,c.uA(),m);if(g){const y=f.cst(),w=g.time-y;if(0==w)d.lst(h),d.Yht(o),d.Xht(),d.pnt(d.Ait()+s);else{if(w<0)return;const S=l.int(w);d.lst(h),d.Yht(o),d.Xht(),d.pnt(d.Ait()+(s-S))}}}else a.jht(s,o,h);break}}}_nt(){const t=this.Qht,s=this.Qht.aV();switch(s.IK()){case"relative":break;case"absolute":if(s.mit()){const e=s.yit();e.$ht()&&t.jht(e.Ait(),e.Zht(),e.Kht())}}}Hht(t,s,e,i,n,r){const h=this.Qht;i||(s&&t===s.uA()?h.Uht(s.kK(),s,e):e&&t===e.uA()?h.Uht(e.kK(),s,e):r-n==0&&h.Uht(s.kK(),s,e))}}dh.Zst.Rnt.Lht=mh}{const gh=self.Bs;class yh{constructor(t){this.Qht=t}pr(){this.Qht=null}yT(){return 1}BZ(){const t=this.Qht;return t.xrt(!0),this.Art(t.Crt())}rst(){const t=this.Qht;if(t.Crt()!==t.Prt())return t.xrt(!0),this.Art(t.Prt())}ent(){return!1}vnt(){}Gnt(t,s,e,i,n,r,h,o){const a=this.Qht,l=a.Bht();switch(a.aV().IK()){case"relative":a.zrt(s-l,e,i),r&&this.Hht(t,e,i,n,l,s,!1,h);break;case"absolute":a.Mrt()?(a.xrt(!1),a.zrt(l,e,i)):0===t&&0===a.aV().Kst().L6()?a.jht(s,!0,!1):(a.zrt(s-l,e,i),r&&this.Hht(t,e,i,n,l,s,this.tot(),h))}a.Nht(s)}_nt(){}Art(t){const s=this.Qht;return t-s.tnt()}tot(){let t=this.Qht,s=t.RO().eV(),e=t.aV().ZO(),i=e.mtt(),n=0;for(const r of i.dZ())0===r.yT()?r.wZ(s)&&n++:1===r.yT()&&r.eV()===s&&n++;return n<=1}Hht(t,s,e,i,n,r,h,o){const a=this.Qht;i?s&&t===s.uA()?a.Uht(s.kK(),s,e,h,o):e&&t===e.uA()?a.Uht(e.kK(),s,e,h,o):e||a.Uht(s.kK(),s,e,h,o):s&&t===s.uA()?a.Uht(s.kK(),s,e,h,o):e&&t===e.uA()?a.Uht(e.kK(),s,e,h,o):r-n==0&&a.Uht(s.kK(),s,e,h,o)}}gh.Zst.Rnt.Dht=yh}{const wh=self.Bs,Sh=self.yc;wh.Zst.xnt=class{constructor(){}static Xrt(t,s,e,i){let n;switch(i){case"behavior":n=s.Wrt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.$rt(t);break;case"plugin":n=s.Wrt(t)}return n!==e}static Hc(r,h,o,a){if(!o){let t=a.Sit(),s=a.Yst();return(t=s.Grt(t)).kK()}let l=a.Mtt();if("default"===l&&(l="continuous"),"discrete"===(l="combo"===a.Dit()?"discrete":l))return h.kK();if("continuous"===l||"step"===l){const u=a.Kst().vtt();if("step"===l&&0!==u){const g=1/u;r=Math.floor(r*g)/g}const c=h.kK(),f=o.kK(),d=h.RK("cubic-bezier"),p=o.RK("cubic-bezier"),m=d&&d.sot()&&p&&p.eot();if(!m&&c===f)return c;let t=h.uA(),s=o.uA(),e=("step"===l&&0!==u&&(r=wh.br(r,t,s)),wh.normalize(r,t,s)),i=h.dnt(),n;if(m){const y=s-t;n=Sh.kc(i)(y*e,0,1,y),n=Sh.kc("cubicbezier")(n,c,c+d.LK(),f+p.WK(),f)}else n=Sh.kc(i)((s-t)*e,c,f-c,s-t);return"integer"===a.Dit()?Math.floor(n):n}}}}{const bh=self.Bs;bh.Zst.Mnt=class{constructor(){}static Xrt(t,s,e,i){let n;switch(i){case"behavior":n=s.Wrt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.$rt(t);break;case"plugin":n=s.Wrt(t)}return n!==e}static Hc(t,s,e,i){if(!e){let t=i.Sit(),s=i.Yst();return(t=s.Grt(t)).kK()}let n=i.Mtt();if("default"===n&&(n="continuous"),"discrete"===(n="combo"===i.Dit()?"discrete":n))return s.kK();if("continuous"===n||"step"===n){const r=i.Kst().vtt();if("step"===n&&0!==r){const c=1/r;t=Math.floor(t*c)/c}const h=s.uA(),o=e.uA(),a=s.kK(),l=e.kK(),u=("step"===n&&0!==r&&(t=bh.br(t,h,o)),s.RK("angle"));if(!u){if(a===l)return a;const f=bh.normalize(t,h,o),d=self.yc.kc(s.dnt());return bh.kr(a,l,d(f,0,1,1))}{const p=u.iot();if(a===l&&0===p)return a;const m=bh.normalize(t,h,o),g=self.yc.kc(s.dnt()),y=g(m,0,1,1);switch(u.not()){case"closest":return bh.kr(a,l,y,p);case"clockwise":return bh.Fr(a,l,y,p);case"anti-clockwise":return bh.Or(a,l,y,p)}}}}}}{const vh=self.Bs;vh.Zst.Tnt=class{constructor(){}static Xrt(t,s,e,i){let n;switch(i){case"behavior":n=s.Wrt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.$rt(t);break;case"plugin":n=s.Wrt(t)}return!!n!=!!e}static Hc(t,s,e,i){if(e)return s.kK()?1:0;{let t=i.Sit(),s=i.Yst();return(t=s.Grt(t)).kK()?1:0}}}}{const xh=self.Bs,Mh=[0,0,0],Th=[0,0,0],Ch=[0,0,0];xh.Zst.Cnt=class{constructor(){}static Xrt(t,s,e,i){let n;switch(i){case"behavior":n=s.Wrt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.$rt(t);break;case"plugin":n=s.Wrt(t)}return Array.isArray(e)?(Mh[0]=e[0],Mh[1]=e[1],Mh[2]=e[2]):(Ch.ka(e),Mh[0]=Math.floor(255*Ch.ua()),Mh[1]=Math.floor(255*Ch.ca()),Mh[2]=Math.floor(255*Ch.fa())),Array.isArray(n)?(Th[0]=n[0],Th[1]=n[1],Th[2]=n[2]):(Ch.ka(n),Th[0]=Math.floor(255*Ch.ua()),Th[1]=Math.floor(255*Ch.ca()),Th[2]=Math.floor(255*Ch.fa())),Mh[0]!==Th[0]||Mh[1]!==Th[1]||Mh[2]!==Th[2]}static Hc(t,s,e,i){if(!e){let t=i.Sit(),s=i.Yst(),e=(t=s.Grt(t)).kK();return Mh[0]=e[0],Mh[1]=e[1],Mh[2]=e[2],Mh}let n=i.Mtt();if("discrete"===(n="default"===n?"continuous":n)){const r=s.kK();return Mh[0]=r[0],Mh[1]=r[1],Mh[2]=r[2],Mh}if("continuous"===n||"step"===n){const h=i.Kst().vtt();if("step"===n&&0!==h){const x=1/h;t=Math.floor(t*x)/x}const o=s.uA(),a=e.uA(),l=s.kK(),u=e.kK(),c=("step"===n&&0!==h&&(t=xh.br(t,o,a)),xh.normalize(t,o,a)),f=s.dnt(),d=l[0],p=l[1],m=l[2],g=u[0],y=u[1],w=u[2],S=self.yc.kc(f),b=a-o,v=b*c;return Mh[0]=d===g?d:S(v,d,g-d,b),Mh[1]=p===y?p:S(v,p,y-p,b),Mh[2]=m===w?m:S(v,m,w-m,b),Mh}}}}{const Ih=self.Bs;Ih.Zst.Int=class{constructor(){}static Xrt(t,s,e,i){let n;switch(i){case"behavior":n=s.Wrt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.$rt(t);break;case"plugin":n=s.Wrt(t)}return n!==e}static Hc(t,s,e,i){if(e)return s.kK();{let t=i.Sit(),s=i.Yst();return(t=s.Grt(t)).kK()}}}}{const Gh=self.Bs;Gh.vY=class{constructor(){this.rot=new Map}pr(){for(const t of this.rot.values())t.pr();this.rot.clear(),this.rot=null}fc(t){const s=new Gh.hot(t),e=s.Qc();this.rot.set(e,s)}ne(t){return this.rot.get(t)}att(){return 0}static oot(t,s,e,i){if(s)for(const n of s)Gh.vY.aot("create",n,t,e,i)}static lot(t,s,e,i){if(s)for(const n of s)Gh.vY.aot("create-including-disabled",n,t,e,i)}static uot(e,t,s,i){e.length?t.forEach((t,s)=>{e[s]._9(t)}):t.forEach(t=>{Gh.vY.aot("load",t,e,s,i)})}static aot(t,s,e,i,n){let r;if("function"==typeof i)switch(t){case"load":r=new i(null,n);break;case"create":case"create-including-disabled":r=new i(s,n)}else if("object"==typeof i){const h=i.prop,o=s[h],a=i.map.get(o);switch(t){case"load":r=new a(null,n);break;case"create":case"create-including-disabled":r=new a(s,n)}}switch(t){case"load":r._9(s),e.push(r);break;case"create":if("function"==typeof r.Tet&&!r.Tet())return r.pr();e.push(r);break;case"create-including-disabled":e.push(r)}}}}{const _h=self.Bs;_h.hot=class{constructor(t){this.yr="",this.ast=NaN,this.cot=0,this.dot="default",this.pot="default",this.mot=!1,this.got=!1,this.yot=1,this.Ast=null,this.wot="",this.Sot=!1,this.bot=!0,t&&(this.yr=t[0],this.ast=t[1],this.cot=t[2],this.dot=t[3],this.pot=t[4],this.mot=!!t[6],this.got=!!t[7],this.yot=t[8],this.wot=t[9],this.Sot=!!t[10],this.bot=!!t[11],this.Ast=new _h.vot(t[5],this))}pr(){this.Ast.pr(),this.Ast=null}dtt(){return this.Ast||(this.Ast=new _h.vot(null,this)),this.Ast}Qc(){return this.yr}Zj(t){this.yr=t}L6(){return this.ast}D6(t){this.ast=t}vtt(){return this.cot}xtt(t){this.cot=t}Mtt(){return this.dot}Ttt(t){this.dot=t}IK(){return this.pot}Ctt(t){this.pot=t}N6(){return this.mot}B6(t){this.mot=t}V6(){return this.got}W6(t){this.got=t}ZW(){return this.yot}Itt(t){this.yot=t}$Z(){return this.wot}Gtt(){return this.Sot}_tt(){return this.bot}G9(){return{trackDataJson:this.Ast.G9(),name:this.yr,totalTime:this.ast,step:this.cot,interpolationMode:this.dot,resultMode:this.pot,loop:this.mot,pingPong:this.got,repeatCount:this.yot,startOnLayout:this.wot,transformWithSceneGraph:!!this.Sot,useSystemTimescale:this.bot}}_9(t){t&&(this.dtt()._9(t.trackDataJson),this.yr=t.name,this.ast=t.totalTime,this.cot=t.step,this.dot=t.interpolationMode,this.pot=t.resultMode,this.mot=t.loop,this.got=t.pingPong,this.yot=t.repeatCount,this.wot=t.startOnLayout,this.Sot=!!t.transformWithSceneGraph,this.bot=!!t.useSystemTimescale)}}}{const Ph=self.Bs;class Eh{constructor(t,s){this.Ast=s,this.xot=null,this.Mot=null,this.kst=NaN,this.Fst=NaN,this.dot="default",this.pot="default",this.Nu=!1,this.Tot=null,this.oit=null,this.ff="",this.Cot=null,this.Iot=0,this.Got=this.Ast.btt().L6(),this.wf=0,this.yr="",t&&(t[0]&&(this.xot=t[0],this.kst=t[0][2],this.Fst=t[0][1]),this.dot=t[1],this.pot=t[2],this.Nu=!!t[3],t[6]&&(this.ff=t[6]),t[7]&&(this.Cot=t[7],this.Iot=t[7][0],this.Got=t[7][1]),t[8]&&(this.Mot=t[8]),t[8]&&(this.Mot=t[8]),t[9]&&(this.wf=t[9]),t[10]&&(this.yr=t[10]),this.Tot=new Ph._ot(t[4],this),this.oit=new Ph.Pot(t[5],this))}pr(){this.xot=null,this.Ast=null,this.Tot&&(this.Tot.pr(),this.Tot=null),this.oit&&(this.oit.pr(),this.oit=null),this.Cot=null}dtt(){return this.Ast}Ust(){return this.Tot||(this.Tot=new Ph._ot(null,this)),this.Tot}Yst(){return this.oit||(this.oit=new Ph.Pot(null,this)),this.oit}Eot(){return this.xot}iet(){return this.Fst}Iet(t){this.Fst=t}eet(){return this.kst}vet(t){this.kst=t}Mtt(){return this.dot}Ttt(t){this.dot=t}IK(){return this.pot}Ctt(t){this.pot=t}Tet(){return this.Nu}Cet(t){this.Nu=!!t}hV(){return this.ff}cst(){return this.Iot}xet(){return this.Got}Met(t){this.Got=t}_et(){return this.Mot[0]}Get(t){this.Mot||(this.Mot=[]),this.Mot[0]=t}Ret(){return this.Mot||(this.Mot=[]),this.Mot[1]}Eet(t){this.Mot||(this.Mot=[]),this.Mot[1]=t}yT(){return this.wf}Qc(){return this.yr}G9(){return{keyframeDataJson:this.Tot.G9(),propertyTrackDataJson:this.oit.G9(),instanceData:this.xot,additionalInstanceData:this.Mot,instanceUid:this.kst,objectClassIndex:this.Fst,interpolationMode:this.dot,resultMode:this.pot,enabled:this.Nu,id:this.ff,nestedData:this.Cot,type:this.wf,name:this.yr}}_9(t){t&&(this.xot=t.instanceData,this.kst=t.instanceUid,this.Fst=t.objectClassIndex,this.dot=t.interpolationMode,this.pot=t.resultMode,this.Nu=t.enabled,this.ff=t.id,this.wf=t.type||0,this.yr=t.name||"",this.Got=this.Ast.btt().L6(),t.nestedData&&(this.Cot=t.nestedData,this.Iot=this.Cot[0],this.Got=this.Cot[1]),t.additionalInstanceData&&(this.Mot=t.additionalInstanceData),this.Ust()._9(t.keyframeDataJson),this.Yst()._9(t.propertyTrackDataJson))}}Ph.vot=class{constructor(t,s){this.RQ=s,this.Rot=[],Ph.vY.oot(this.Rot,t,Eh,this)}pr(){this.RQ=null;for(const t of this.Rot)t.pr();Ph.jh(this.Rot),this.Rot=null}btt(){return this.RQ}pst(){const t=new Eh(null,this);return this.Rot.push(t),t}Aot(t){return t.Ust().Hst()[0]}kot(t){const s=t.Ust().Hst();return s.at(-1)}Vet(s,t){const e=t.Ust().Hst(),i=e.length;for(let t=0;t<i;t++){const n=e[t];if(n.uA()===s)return n}}Fot(s,t){const e=t.Ust().Hst(),i=e.length;for(let t=0;t<i;t++){const n=e[t];if(n.uA()>s)return n}}Oot(s,t){const e=t.Ust().Hst(),i=e.length;for(let t=0;t<i;t++){const n=e[t];if(n.uA()>=s)return n}}Wet(s,t){const e=t.Ust().Hst();for(let t=e.length-1;0<=t;t--){const i=e[t];if(i.uA()<=s)return i}}*ftt(){for(const t of this.Rot)yield t}G9(){return{trackDataItemsJson:this.Rot.map(t=>t.G9())}}_9(t){t&&Ph.vY.uot(this.Rot,t.trackDataItemsJson,Eh,this)}}}{const Rh=self.Bs;class Ah{constructor(t,s){this.oit=s,this.Dot="",this.Lot=null,this.wrt=null,this.wf=null,this.Bot=NaN,this.Not=NaN,this.dot="default",this.pot="default",this.Nu=!1,this.Wot=null,this.Vot=!0,t&&(this.Dot=t[0][0],this.Lot=t[0].slice(1),this.wrt=t[1],this.wf=t[2],this.Bot=t[3],this.Not=t[4],this.dot=t[5],this.pot=t[6],this.Nu=!!t[7],this.Wot=new Rh.jot(t[8],this),this.Vot=t[9])}pr(){this.Wot.pr(),this.Wot=null,this.oit=null,this.Lot=null}Yst(){return this.oit}cit(){return this.Wot||(this.Wot=new Rh.jot(null,this)),this.Wot}aet(){return this.Dot}Git(t){this.Dot=t}Pit(){return this.Lot}Rit(t){this.Lot=t}kit(){return this.wrt}Oit(t){this.wrt=t}yT(){return this.wf}Bit(t){this.wf=t}Vit(){return this.Bot}jit(t){this.Bot=t}Hit(){return this.Not}Uit(t){this.Not=t}Mtt(){return this.dot}Ttt(t){this.dot=t}IK(){return this.pot}Ctt(t){this.pot=t}Tet(){return this.Nu}Cet(t){this.Nu=!!t}Jit(){return!!this.Vot}G9(){return{propertyKeyframeDataJson:this.Wot.G9(),sourceAdapterId:this.Dot,sourceAdapterArguments:this.Lot,property:this.wrt,type:this.wf,min:this.Bot,max:this.Not,interpolationMode:this.dot,resultMode:this.pot,enabled:this.Nu,canHavePropertyKeyframes:this.Vot}}_9(t){t&&(this.Dot=t.sourceAdapterId,this.Lot=t.sourceAdapterArguments,this.wrt=t.property,this.wf=t.type,this.Bot=t.min,this.Not=t.max,this.dot=t.interpolationMode,this.pot=t.resultMode,this.Nu=t.enabled,this.Vot=t.canHavePropertyKeyframes,this.cit()._9(t.propertyKeyframeDataJson))}}Rh.Pot=class{constructor(t,s){this.Rst=s,this.Hot=[],Rh.vY.oot(this.Hot,t,Ah,this)}pr(){this.Rst=null;for(const t of this.Hot)t.pr();Rh.jh(this.Hot),this.Hot=null}bet(){return this.Rst}zet(){const t=new Ah(null,this);return this.Hot.push(t),t}Wit(t){const s=t.cit();return s.uit()[0]}Grt(t){const s=t.cit(),e=s.uit();return e.at(-1)}qit(s,t){const e=t.cit(),i=e.uit(),n=i.length;for(let t=0;t<n;t++){const r=i[t];if(r.uA()===s)return r}}Yit(s,t){const e=t.cit(),i=e.uit(),n=i.length;for(let t=0;t<n;t++){const r=i[t];if(r.uA()>s)return r}}Zit(s,t){const e=t.cit(),i=e.uit(),n=i.length;for(let t=0;t<n;t++){const r=i[t];if(r.uA()>=s)return r}}Xit(s,t){const e=t.cit(),i=e.uit();for(let t=i.length-1;0<=t;t--){const n=i[t];if(n.uA()<=s)return n}}*$st(){for(const t of this.Hot)yield t}G9(){return{propertyTrackDataItemsJson:this.Hot.map(t=>t.G9())}}_9(t){t&&Rh.vY.uot(this.Hot,t.propertyTrackDataItemsJson,Ah,this)}}}{const kh=self.Bs;class Fh{constructor(t,s){if(this.Tot=s,this.h3=-1,this.Uot="noease",this.zot=!1,this.ett=null,this.Jot=null,t){this.h3=t[0],this.Uot=t[1],this.zot=!!t[2];const e=t[3];this.ett=e?e.split(" "):[],this.Jot=new Set(this.ett.map(t=>t.toLowerCase())),this.qot=null}}pr(){this.Tot=null,kh.jh(this.ett),this.ett=null,this.Jot.clear(),this.Jot=null,this.qot=null}Ust(){return this.Tot}wK(){return this.qot}Xot(t){this.qot=t}uA(){return this.h3}O6(t){this.h3=t,this.Tot.$ot()}dnt(){return this.Uot}sV(t){this.Uot=t}Tet(){return this.zot}Cet(t){this.zot=!!t}U6(){return this.ett}Rtt(t){this.ett=t?t.split(" "):[],this.Jot=new Set(this.ett.map(t=>t.toLowerCase()))}Yot(){return this.Jot}Gst(t){return this.Jot.has(t.toLowerCase())}G9(){return{time:this.h3,ease:this.Uot,enable:this.zot,tags:this.ett}}_9(t){t&&(this.h3=t.time,this.Uot=t.ease,this.zot=t.enable,this.ett=t.tags,this.Jot=new Set(this.ett.map(t=>t.toLowerCase())))}}kh._ot=class{constructor(t,s){this.Rst=s,this.jst=[],kh.vY.oot(this.jst,t,Fh,this),this.$ot()}pr(){this.Rst=null;for(const t of this.jst)t.pr();kh.jh(this.jst),this.jst=null}$ot(){this.jst.sort((t,s)=>t.uA()-s.uA());for(let t=0;t<this.jst.length;t++){const s=this.jst[t];s.Xot(this.jst[t+1])}}bet(){return this.Rst}Zot(){return this.jst.length}Hst(){return this.jst}Het(){const t=new Fh(null,this);return this.jst.push(t),this.$ot(),t}qet(t){for(const s of this.jst)if(t(s)){const e=this.jst.indexOf(s);-1!==e&&(s.pr(),this.jst.splice(e,1))}this.Kot(),this.$ot()}Kot(){this.jst.sort((t,s)=>t.uA()-s.uA())}iit(t){return this.jst.indexOf(t)}nit(t){return this.jst[t]}*Qot(){for(const t of this.jst)yield t}*tat(){for(let t=this.jst.length-1;0<=t;t--)yield this.jst[t]}G9(){return{keyframeDataItemsJson:this.jst.map(t=>t.G9())}}_9(t){t&&(kh.vY.uot(this.jst,t.keyframeDataItemsJson,Fh,this),this.$ot())}}}{const Oh=self.Bs;class Dh{constructor(t,s){this.Wot=s,this.Unt=null,this.sat=null,this.wf="",this.h3=NaN,this.Uot="noease",this.zot=!1,this.eat=null,this.iat=void 0,this.nat="line",t&&(this.Unt=t[0][0],this.sat=t[0][1],this.wf=t[0][2],this.h3=t[1],this.Uot=t[2],this.zot=!!t[3],this.nat=t[5],this.eat=null,t[4]&&(this.eat=new Oh.rat(t[4],this)),this.qot=null,this.hat=null)}pr(){this.Wot=null,this.eat&&(this.eat.pr(),this.eat=null),this.qot=null,this.hat=null}oat(){return this.eat}Xot(t){this.qot=t}wK(){return this.qot}aat(t){this.hat=t}SK(){return this.hat}Ait(){return this.Unt}pnt(t){"color"===this.wf&&Oh.di(t)?(this.Unt[0]=Oh.Zr(t),this.Unt[1]=Oh.Kr(t),this.Unt[2]=Oh.Qr(t)):this.Unt=t}_rt(){return this.sat}unt(t){"color"===this.wf&&Oh.di(t)?(this.sat[0]=Oh.Zr(t),this.sat[1]=Oh.Kr(t),this.sat[2]=Oh.Qr(t)):this.sat=t}kK(){const t=this.Wot.Sit().IK();return"relative"===t?this.Ait():"absolute"===t?this._rt():void 0}yT(){return this.wf}Bit(t){this.wf=t}uA(){return this.h3}O6(t){this.h3=t,this.Wot.lat()}dnt(){return this.Uot}sV(t){this.Uot=t}Tet(){return this.zot}Cet(t){this.zot=!!t}bK(){return this.nat}RK(s){if(this.eat){if(!this.iat&&null!==this.iat){const e=this.eat.uat();if(e){const i=e.length;for(let t=0;t<i;t++){const n=e[t];if(n.hV()===s)return this.iat=n,this.iat}}this.iat=null}return this.iat}}G9(){const t=this.eat;return{addonDataJson:t&&t.G9(),value:this.Unt,aValue:this.sat,type:this.wf,time:this.h3,ease:this.Uot,enable:this.zot}}_9(t){t&&(t.addonDataJson&&this.eat._SetFromJson(t.addonDataJson),this.Unt=t.value,this.sat=t.aValue,this.wf=t.type,this.h3=t.time,this.Uot=t.ease,this.zot=t.enable)}}Oh.jot=class{constructor(t,s){this.hit=s,this.lit=[],this.cat=[],Oh.vY.oot(this.lit,t,Dh,this),Oh.vY.lot(this.cat,t,Dh,this),this.lat()}pr(){this.hit=null;for(const t of this.lit)t.pr();Oh.jh(this.lit),this.lit=null;for(const s of this.cat)s.pr();Oh.jh(this.cat),this.cat=null}lat(){let s=this.lit;s.sort((t,s)=>t.uA()-s.uA());for(let t=0;t<s.length;t++){const e=s[t];t+1<s.length&&e.Xot(s[t+1]),0<=t-1&&e.aat(s[t-1])}(s=this.cat).sort((t,s)=>t.uA()-s.uA());for(let t=0;t<s.length;t++){const i=s[t];t+1<s.length&&i.Xot(s[t+1]),0<=t-1&&i.aat(s[t-1])}}ant(){const t=new Dh(null,this);return this.lit.push(t),this.lat(),t}lnt(t){for(const s of this.lit)if(t(s)){const e=this.lit.indexOf(s);-1!==e&&(s.pr(),this.lit.splice(e,1))}this.fat(),this.lat()}fat(){this.lit.sort((t,s)=>t.uA()-s.uA())}Sit(){return this.hit}dat(){return this.lit.length}Grt(){return this.lit[this.lit.length-1]}uit(){return this.lit}yK(){return this.cat}*pat(){for(const t of this.lit)yield t}*mat(){for(let t=this.lit.length-1;0<=t;t--)yield this.lit[t]}G9(){const t=this.lit,s=this.cat;return{propertyKeyframeDataItemsJson:t.map(t=>t.G9()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.G9())}}_9(t){t&&(Oh.vY.uot(this.lit,t.propertyKeyframeDataItemsJson,Dh,this),Oh.vY.uot(this.cat,t.propertyKeyframeDataItemsIncludingDisabledJson,Dh,this),this.lat())}}}{const Lh=self.Bs;class Bh{constructor(t,s){this.eat=s,this.ff=t[0],this.gat=t[1]}pr(){this.eat=null,this.gat=null}oat(){return this.eat}hV(){return this.ff}G9(){return{id:this.ff,data:this.gat}}_9(t){t&&(this.ff=t.id,this.gat=t.data)}}class Nh extends Bh{constructor(t,s){super(t,s),this.yat=this.gat[0],this.wat=!!this.gat[1],this.Sat=this.gat[2],this.bat=!!this.gat[3]}pr(){super.pr()}LK(){return this.yat}sot(){return this.wat}WK(){return this.Sat}eot(){return this.bat}G9(){return Object.assign(super.G9(),{startAnchor:this.yat,startEnable:!!this.wat,endAnchor:this.Sat,endEnable:!!this.bat})}_9(t){t&&(super._9(t),this.yat=t.startAnchor,this.wat=!!t.startEnable,this.Sat=t.endAnchor,this.bat=!!t.endEnable)}}class Wh extends Bh{constructor(t,s){super(t,s),this.vat=this.gat[0],this.xat=this.gat[1]}pr(){super.pr()}not(){return this.vat}iot(){return this.xat}G9(){return Object.assign(super.G9(),{direction:this.vat,revolutions:this.xat})}_9(t){t&&(super._9(t),this.vat=t.direction,this.xat=t.revolutions)}}Lh.rat=class{constructor(t,s){this.Mat=s,this.Tat=[],Lh.vY.oot(this.Tat,t,{prop:0,map:new Map([["cubic-bezier",Nh],["angle",Wh]])},this)}pr(){this.Mat=null;for(const t of this.Tat)t.pr();Lh.jh(this.Tat),this.Tat=null}Cat(){return this.Mat}uat(){return this.Tat}*Iat(){for(const t of this.Tat)yield t}G9(){return{addonDataItemsJson:this.Tat.map(t=>t.G9())}}_9(t){t&&Lh.vY.uot(this.Tat,t.addonDataItemsJson,{prop:"id",map:new Map([["cubic-bezier",Nh],["angle",Wh]])},this)}}}{let m=self.Bs,e=0;m.Oht=class extends m.tZ{constructor(t,s){super("tween-"+e++,t,s),this.ff="",this.Gat=!1,this._at="start-value",this.Ost=null,this.Pat=null,this.Eat=null,this.rit=null,this.Rat=null}utt(t){const s=m.dr(m.Event,"tweenstatereleased");s.Aat=this,t.dispatchEvent(s)}yT(){return 1}DQ(){for(const t of this.RQ.dtt().ftt())this.AQ.push(m.kat.mM(this,t));this.rit=this.AQ[0]}dst(){const t=this.RQ.dtt().pst(),s=m.kat.mM(this,t);return this.AQ.push(s),this.Fat(),s}Fat(){this.rit=this.AQ[0]}aV(t){return this.rit.xst()[0]}Lit(t){this.Oat=t}eV(){const t=this.pK();if(t&&t.length){const s=t[0];if(this.rit=s){const e=s.eV();return s.tet()?e:void 0}}}Dat(t){this.Eat||(this.Eat=[]),this.Eat.push(t)}Lat(t){this.Pat||(this.Pat=[]),this.Pat.push(t)}Bat(t){if(this.Eat){const s=this.Eat.indexOf(t);-1!==s&&this.Eat.splice(s,1)}}Nat(t){if(this.Pat){const s=this.Pat.indexOf(t);-1!==s&&this.Pat.splice(s,1)}}Wat(t,s){for(const e of this.AQ)for(const i of e.zst)if(i.Mst()===s){const n=i.Yst(),r=i.Sit(),h=n.Wit(r);h.pnt(t),h.unt(t)}}Vat(t){for(const s of this.AQ)for(const e of s.zst)if(e.Mst()===t)return e}jat(t){for(const s of t){const e=this.Vat(s);this.Wat(e.tnt(),s)}if(this.Ett()){const i=this.L6()-this.uA();this.D6(i);for(const n of this.AQ)n.Met(i);this.ztt(0)}else{const r=this.uA();this.D6(r);for(const h of this.AQ)h.Met(r);this.ztt(r)}this.Jtt()}Hat(t,s){const e=this.Vat(s),i=e.Yst(),n=e.Sit(),r=i.Grt(n);r.O6(this.L6()),r.pnt(t),r.unt(t)}Uat(t){this.ff=t}hV(){return this.ff}zat(t){this._at=t}Jat(){return this._at}rV(t){this.Gat=t}nV(){return this.Gat}Ott(){if(this.Eat)for(const t of this.Eat)t(this);if(!this.zZ())for(const s of this.AQ)s.Zet()}Dtt(){this.YQ=this.uf.Ltt()}qZ(){if(!this.QQ&&(this.QQ=!0,this.Pat))for(const t of this.Pat)t(this)}O6(t){this.qat(),super.O6(t)}Ztt(t){(t=m.di(t)?t:this.L6())<0?this.NQ=0:t>=this.L6()?this.NQ=this.L6():this.NQ=t,this.rit.Ktt()}BZ(t){if(!this.JZ()&&"current-state"===this.Jat())for(const s of this.AQ)s.Yet();super.BZ(t)}A6(t=!1){if(super.A6(t),!this.zZ())for(const s of this.AQ)s.$et()}u0(t=!0,s=!1){this.qat(),super.u0(t,s)}qat(){for(const t of this.AQ){const s=t=>{const s=t.uA(),e=this.L6();return 0!==s&&s!==e};t.Jet(s),t.Xet(s)}}BY(){if(!this.E6()){const t=this.eV();if(t&&t.D5().Vz())return!1;this.EQ.FZ(this),this.ist()}return!0}jZ(n,t,s){if(this.Ost||(this.Ost=this.eV()),!this.Ost||this.Ost.hj())this.A6(!0),this.Dtt();else{const e=this.Ost.WF();if(0!==(n=-1!==e?s*e:n)||0!==this.stt){this.stt=n;const r=this.NQ+this.WQ,h=n*this.VQ,o=r+h,a=this.RQ.ast;o<0?(this.NQ=0,this.WQ=-o):a<=o?(this.NQ=a,this.WQ=this.NQ-o):(this.NQ=o,this.WQ=0);let t=!1,s=!1,e=this.N6(),i=this.V6();e||i?e&&!i?0<this.VQ?this.NQ>=a&&(this.Ztt(0),this.Xat(m.Zat.Yat.y$.$at),this.Xat(m.Zat.Yat.y$.Kat),s=!0):this.NQ<=0&&(this.Ztt(a),this.Xat(m.Zat.Yat.y$.$at),this.Xat(m.Zat.Yat.y$.Kat),s=!0):!e&&i?0<this.VQ?this.NQ>=a&&(this.ztt(a),this.j6(-1*this.H6()),s=!0,1===this.jQ?this.HQ<this.ZW()?(this.HQ++,this.Xat(m.Zat.Yat.y$.$at),this.Xat(m.Zat.Yat.y$.Kat),this.Xat(m.Zat.Yat.y$.Qat),this.Xat(m.Zat.Yat.y$.tlt),this.jQ=0):(this.Xat(m.Zat.Yat.y$.Qat),this.Xat(m.Zat.Yat.y$.tlt),t=!0):0===this.jQ&&(this.Xat(m.Zat.Yat.y$.Qat),this.Xat(m.Zat.Yat.y$.tlt),this.jQ=1)):this.NQ<=0&&(this.ztt(0),this.j6(-1*this.H6()),s=!0,1===this.jQ?this.HQ<this.ZW()?(this.HQ++,this.Xat(m.Zat.Yat.y$.$at),this.Xat(m.Zat.Yat.y$.Kat),this.Xat(m.Zat.Yat.y$.Qat),this.Xat(m.Zat.Yat.y$.tlt),this.jQ=0):(t=!0,this.Xat(m.Zat.Yat.y$.Qat),this.Xat(m.Zat.Yat.y$.tlt)):0===this.jQ&&(this.Xat(m.Zat.Yat.y$.Qat),this.Xat(m.Zat.Yat.y$.tlt),this.jQ=1)):e&&i&&(0<this.VQ?this.NQ>=a&&(this.ztt(a),this.j6(-1*this.H6()),s=!0,0===this.jQ&&(this.Xat(m.Zat.Yat.y$.Qat),this.Xat(m.Zat.Yat.y$.tlt)),1===this.jQ&&(this.Xat(m.Zat.Yat.y$.$at),this.Xat(m.Zat.Yat.y$.Kat),this.Xat(m.Zat.Yat.y$.Qat),this.Xat(m.Zat.Yat.y$.tlt)),this.jQ++,this.jQ=m.wrap(this.jQ,0,2)):this.NQ<=0&&(this.ztt(0),this.j6(-1*this.H6()),s=!0,0===this.jQ&&(this.Xat(m.Zat.Yat.y$.Qat),this.Xat(m.Zat.Yat.y$.tlt)),1===this.jQ&&(this.Xat(m.Zat.Yat.y$.$at),this.Xat(m.Zat.Yat.y$.Kat),this.Xat(m.Zat.Yat.y$.Qat),this.Xat(m.Zat.Yat.y$.tlt)),this.jQ++,this.jQ=m.wrap(this.jQ,0,2))):0<this.VQ?this.NQ>=a&&(this.HQ<this.ZW()?(this.HQ++,this.Ztt(0),this.Xat(m.Zat.Yat.y$.$at),this.Xat(m.Zat.Yat.y$.Kat),s=!0):(this.ztt(a),t=!0)):this.NQ<=0&&(this.HQ<this.ZW()?(this.HQ++,this.Ztt(a),this.Xat(m.Zat.Yat.y$.$at),this.Xat(m.Zat.Yat.y$.Kat),s=!0):(this.ztt(0),t=!0)),t?(this.rit.lst(),this.A6(!0),this.Dtt()):(this.rit.Hc(this.NQ,!0,!1,s,this.ttt,!1),this.ttt&&(this.ttt=!1))}}}Xat(t){const s=this.eV(),e=s.slt(m.Zat.Yat);e.elt(this),this.uf.TN(t,s,e.DW()),e.ilt()}G9(){const t=super.G9(),s=this.btt();return Object.assign(t,{tweenDataItemJson:s.G9(),id:this.ff,destroyInstanceOnComplete:this.Gat,initialValueMode:this._at})}_9(t){if(t){const s=this.btt();s._9(t.tweenDataItemJson),super._9(t),this.ff=t.id,this.Gat=t.destroyInstanceOnComplete,this._at=t.initialValueMode,this.Fat()}}static IsPlaying(t){return t.IsPlaying()}static q6(t){return t.q6()}static nlt(t){return!!t.V6()&&0===t.Ptt()}static rlt(t){return!!t.V6()&&1===t.Ptt()}static hlt(t){const s=t.runtime.mtt(),e=new m.hot;if(t.json){e._9(t.json.tweenDataItemJson);const i=new m.Oht(e,s);return i._9(t.json),i}{const n=new m.Oht(e,s),r=(m.Bi(t.olt)||(t.olt=[t.olt]),n.Uat(t.id),n.Rtt(t.tags),n.zat(t.initialValueMode),n.rV(t.llt),n.B6(t.loop),n.W6(t.pingPong),n.D6(t.time),n.xtt(0),n.Ttt("default"),n.Ctt(t.olt[0].resultMode),n.Itt(t.repeatCount),n.dst()),h=(r.vet(t.LW.Z5()),r.Ttt("default"),r.Ctt(t.olt[0].resultMode),r.Cet(!0),r.Iet(t.LW.D5().Ak()),t.LW.IW()),o=h.Pet()?h._et():t.LW.RO().am(),a=h.Pet()?h.Ret():t.LW.RO().vm(),l=(r.Get(o),r.Eet(a),r.jet()),u=(l.O6(0),l.sV("noease"),l.Cet(!0),l.Rtt(""),r.jet());u.O6(t.time),u.sV("noease"),u.Cet(!0),u.Rtt("");for(const c of t.olt){const f=r.Uet(),d=(f.Git(c.ult),f.Eit(c.clt),f.Fit(c.property),f.Lit(c.type),f.jit(NaN),f.Uit(NaN),f.Ttt("default"),f.Ctt(c.resultMode),f.Cet(!0),f.ont()),p=(d.Bit(c.valueType),d.O6(0),d.sV(c.ease),d.Cet(!0),d.pnt(c.flt),d.unt(c.flt),f.ont());p.Bit(c.valueType),p.O6(t.time),p.sV(c.ease),p.Cet(!0),p.pnt(c.dlt),p.unt(c.dlt),f.ytt()}return n}}static vet(t,s){if(!isNaN(s))for(const e of t.pK())e.vet(s)}plt(t,s){return this.Rat||(this.Rat=m.dr(self.Z6,this,t,s)),this.Rat}}}{const Vh=self.Bs;Vh.kat=class extends Vh.ptt{constructor(t,s){super(t,s),this.mlt=null,this.glt=null}static mM(t,s){return Vh.dr(Vh.kat,t,s)}ylt(){1===this.zst.length?this.mlt=this.zst[0]:(this.mlt=this.zst[0],this.glt=this.zst[1])}Jst(){for(const t of this.Rst.Yst().$st())this.zst.push(Vh.wlt.mM(this,t));this.ylt()}Uet(){const t=this.Rst.Yst(),s=t.zet(),e=Vh.wlt.mM(this,s);return this.zst.push(e),this.ylt(),e}BZ(){if(this.Qst(),this.tet()||!this.Stt()){const t=this.Kst(),s=t.Ett(),e=s?0:this.xet();for(const n of this.zst)n.BZ(e),0===this.qst&&1===n.Fet()&&(this.qst=1),0===this.YY&&1===n.NZ()&&(this.YY=1);this.Xst=0;const i=this.zst.some(t=>t.ost());i&&(this.Xst=1),this.Vst=this.Oet(e),this.Bst=!1,this.Nst=!1,this.Hc(e)}}ust(){}Hc(t,s=0,e=!1,i=!1,n,r=!1,h=!1){if(this.Ost||this.eV(),this.Ost){const o=!this.Ost.hj();return o&&(!r||!this.D5().Vz())&&((this.glt?(this.mlt.Hc(t,e,i,h),this.glt):this.mlt).Hc(t,e,i,h),void(0!==this.mlt.Fet()&&(this.Dst||(this.Dst=this.Ost.RO()),this.Dst)&&this.Dst.t4()))}}fst(){}_9(t){super._9(t),this.ylt()}}}{const jh=self.Bs;jh.wlt=class extends jh.Zst{constructor(t,s){super(t,s),this.Slt=!1}static mM(t,s){return jh.dr(jh.wlt,t,s)}Hc(t,s=!1,e=!1,i=!1){let n,r;if(this.Slt)n=this.lit[0],r=this.lit[1];else{if(s)n=this.oit.Xit(t,this.hit);else{if(this.dit){const h=this.Kst(),o=this.dit.wK(),a=this.dit.uA(),l=o?o.uA():h.L6();(t<=a||l<=t)&&(this.dit=this.oit.Xit(t,this.hit))}else this.dit=this.oit.Xit(t,this.hit);n=this.dit}r=n.wK()}this.ait.Hc(t,n,r,s,e,i)}ont(){const t=this.hit.cit(),s=t.ant();return this.dit=null,this.Slt=this.zit().length<=2,s}Xet(t){this.dit=null;const s=this.hit.cit();s.lnt(t),this.Slt=this.zit().length<=2}G9(){return{sourceAdapterJson:this.ytt().G9(),basic:this.Slt}}_9(t){t&&(this.ytt()._9(t.sourceAdapterJson),this.Slt=t.basic)}}}{const Hh=self.Bs,Uh=self.yc;Hh.Uc=class extends Hh.ur{constructor(t,s=!0){super(),this.yr=t[0],this.blt=t[2],this.vlt=[];for(const e of t[1]){const i=Hh.xlt.mM(this,e);this.vlt.push(i)}for(let t=0;t<this.vlt.length;t++){const n=this.vlt[t],r=this.vlt[t+1],h=this.vlt[t-1];n.Xot(r),n.aat(h)}this.Mlt=new Map,this.Tlt=new Map,this.Clt(),s&&Uh.Jc(this.yr,(t,s,e,i)=>this.Hc(t,s,e,i),null,{transition:this})}static mM(t){return Hh.dr(Hh.Uc,t)}pr(){for(const t of this.vlt)t.pr();Hh.jh(this.vlt),this.vlt=null,this.Mlt.clear(),this.Mlt=null,this.Tlt.clear(),this.Tlt=null}zc(t){this.blt=!!t}Ilt(t){const s=this.Tlt.get(t);if(s)return s;for(const e of this.vlt)if(e.Glt()===t)return this.Tlt.set(t,e),e}_lt(s){for(let t=this.vlt.length-1;0<=t;t--){const e=this.vlt[t],i=e.Glt();if(i<=s){let t=e;if(i<s)return t;if(i===s){for(;t;){const n=t.SK();if(!n)break;if(n.Glt()!==t.Glt())break;t=n}return t}}}}Hc(t,s,e,i){let n=t/i;if(this.blt){const w=this.Ilt(0),S=this.Ilt(1),b=s+(s+e)*w.Plt(),v=(s+e)*S.Plt(),x=v-b;return 0===i?b+x:Uh.Xc(t,b,x,i)}0===i&&(n=1);let r=this._lt(n),h=r.wK();if(!h){const M=r.SK(),T=r;r=M,h=T}const o=h.Glt()-r.Glt(),a=Hh.Sr(n,r.Glt(),h.Glt(),0,o);if(r.Elt()||0==o){const C=s+(s+e)*r.Plt(),I=(s+e)*h.Plt(),G=I-C;return 0==o?1===a?C+G:C:Uh.Xc(a,C,G,o)}let l=r.Glt(),u=r.Plt(),c=r.Glt()+r.Rlt(),f=r.Plt()+r.Alt(),d=h.Glt()+h.klt(),p=h.Plt()+h.Flt(),m=h.Glt(),g=h.Plt(),y=Uh.kc("spline")(a,l,u,c,f,d,p,m,g,this.Mlt.get(r));return(1-(y+=r.Plt()))*s+y*(s+e)}Clt(){this.Mlt.clear();for(let t=0;t<this.vlt.length-1;t++){const s=this.vlt[t];if(s.sot()){const e=s,i=this.vlt[t+1];if(i.eot()){const n=e.Glt(),r=e.Glt()+e.Rlt(),h=i.Glt()+i.klt(),o=i.Glt();this.Mlt.set(e,Uh.$c(n,r,h,o))}}}}}}{const zh=self.Bs;zh.xlt=class extends zh.ur{constructor(t,s){super(),this.Olt=t,this.Dlt=s[0],this.Llt=s[1],this.Blt=s[2],this.Nlt=s[3],this.Wlt=s[4],this.Vlt=s[5],this.wat=s[6],this.bat=s[7],this.jlt=s[8],this.qot=null,this.hat=null}pr(){this.Olt=null}static mM(t,s){return zh.dr(zh.xlt,t,s)}Xot(t){this.qot=t}wK(){return this.qot}aat(t){this.hat=t}SK(){return this.hat}Glt(){return this.Dlt}Plt(){return this.Llt}Rlt(){return this.Blt}Alt(){return this.Nlt}klt(){return this.Wlt}Flt(){return this.Vlt}sot(){return this.wat}eot(){return this.bat}Elt(){return"linear"===this.jlt}Hlt(){return"cubic"===this.jlt}}}{const Jh=self.Bs;Jh.Ult=class extends Jh.ur{constructor(t){super(),this.uf=t,this.zlt=[]}pr(){for(const t of this.zlt)t.pr();Jh.jh(this.zlt),this.zlt=null}mM(t){this.zlt.push(Jh.Uc.mM(t))}}}{const qh=self.Bs;qh.Jlt=class extends qh.ur{constructor(t){super(),this.uf=t,this.qlt=null,this.Xlt=null,this.VY=t=>this.jY(t.LW)}pr(){if(this.ZY(),this.qlt){for(const t of this.qlt.values())t.clear();this.qlt.clear()}this.qlt=null,this.uf=null}mM(t){if(this.qlt||(this.qlt=new Map),t){const s=t[0][16],e=s[0],i=t[1],n=(this.qlt.has(i)||this.qlt.set(i,new Map),this.qlt.get(i));n.set(e,t)}}KY(){const t=this.uf.Hf();t&&t.addEventListener("instancedestroy",this.VY)}ZY(){const t=this.uf.Hf();t&&t.removeEventListener("instancedestroy",this.VY)}$lt(){return!!this.qlt&&0!==this.qlt.size}Ylt(t,s){let e;if(e=t instanceof qh.Zlt?t.Ak():t,this.qlt.has(e)){const i=this.qlt.get(e).get(s);return i?JSON.parse(JSON.stringify(i)):void 0}}Klt(t,s){this.Xlt||(this.Xlt=new WeakMap),this.Xlt.has(t)||this.Xlt.set(t,s)}Qlt(t){if(!this.Xlt)return"";const s=this.Xlt.get(t);return s||""}jY(t){this.Xlt&&this.Xlt.has(t)&&this.Xlt.delete(t)}}}{const Xh=self.Bs;Xh.tut=class{constructor(t){this.uf=t,this.sut=new Xh.eut}pr(){this.sut.pr(),this.sut=null,this.uf=null}ZO(){return this.uf}mM(t){this.sut.fc(t)}iut(t){return this.sut.ne(t)}nut(){return this.sut.nut()}}}{const x=self.Bs;x.rut=class{constructor(t,s,e,i,n,r,h){this.uf=n.ZO(),this.hut=n,this.out=t,this.aut=e,this.lut=i,this.Xg=s,this.xY=r,this.uut=h??r.eV().Z5(),this.cut(),this.fut=this.mut?.dut()??-1,this.gut=[],this.yut=null,this.wut=NaN,this.Sut=null,this.but=null,this.vut=null,this.xut="",this.Mut=null,this.Tut="",this.Cut="",this.Iut=0,this.Gut=!1,this.XQ=!1}pr(){this.XQ||(x.jh(this.gut),this.gut=null,this.uf=null,this.hut=null,this.lut=null,this.xY=null,this.yut=null,this.wut=NaN,this.Sut&&this.Sut.clear(),this.Sut=null,this.but=null,this.vut=null,this.xut="",this.Mut=null,this.Tut="",this.Cut="",this.XQ=!0)}mr(){return this.XQ}_ut(){return this.hut}ZO(){return this.uf}Qc(){return this.out}Put(){return this.lut}P6(){return this.Xg}cZ(){return this.xY||(this.xY=this.uf.IO(this.uut).IW()),this.xY}Eut(){return this.Rut(this.fut)}Aut(){const t=this.Eut();return t?t.P6():""}kut(){const t=this.Eut();return t?t.U6():[]}Fut(t){const s=this.kut();if(!s)return!1;if(!s.length)return!1;const e=x.rut.Att(t);return!(!e||!e.length)&&e.every(x.rut.Ftt,s)}Out(t,s){const e=this.kut();if(!e)return!1;if(!e.length)return!1;const i=x.rut.Att(t);return!(!i||!i.length)&&i.every(t=>x.rut.Dut.call(e,t,s))}static Ftt(t){return""===t?1===this.length&&""===this[0]:this.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static Att(t){return t.trim().split(" ")}static Dut(s,e){return""===s?1===this.length&&""===this[0]:this.some(t=>x.compare(t.trim(),e,s.trim()))}Lut(t){const s=this.Eut();if(s){if(x.di(t)){const e=s.But(),i=e?e[t]:void 0;if(x.di(i))return this.Rut(i)}if("string"==typeof t)for(const n of s.But()){const r=this.Rut(n);if(r.F6(t))return this.Rut(r.dut())}}}Nut(t){const s=this.Lut(t);return s?s.P6():""}Wut(t){const s=this.Lut(t);return s?s.U6():""}Vut(t){const s=this.Eut();if(!s)return-1;const e=s.But();if(!e)return-1;const i=this.Lut(t);return i?e.indexOf(i.dut()):-1}jut(){const t=this.Eut();if(!t)return 0;const s=t.But();return s?s.length:0}Rut(t){return this.lut.Rut(t)}u0(){const t=this.Hut();t.Uut(!0)}Uut(t){if(this.zut()){for(const[s,e]of this.zut().entries())e.Uut(!1);this.zut().clear()}if(this.Sut=null,this.yut=null,this.Jut=null,this.but=null,this.xut="",this.Mut=null,this.Tut="",this.Cut="",this.gut=[],t){this.hut.qut(this);const i=this.mut.dut();i!==this.fut&&this.Xut(i)}else this.fut=this.mut.dut()}$ut(){const t=this.lut.Rut(this.fut);return t?t.Zut().Yut():0}Kut(t){const s=this.Qut(t);return s?s.Qc():""}tct(t){let s;return x.di(t)&&(s=this.Qut(t)),"string"==typeof t&&(s=this.sct(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.Ait():""}ect(t){let s;if(x.di(t)&&(s=this.Qut(t)),s="string"==typeof t?this.sct(t):s){const e=s.ict();x.di(e)&&(this.gut.push(this.fut),this.Xut(e))}}nct(t){const s=this.lut.rct(t);if(s){const e=this.lut.Rut(s.dut());e&&(this.gut.push(this.fut),this.Xut(e.dut()))}}hct(){const t=this.gut.pop();x.di(t)?this.Xut(t):this.oct()&&(this.hut.qut(this.oct(),!0,!1,!1),this.oct().Xut(this.lct()),this.Hut().uct(this.oct()))}cct(t){const s=this.Eut();if(s){s.dut();const e=this.Lut(t);e&&(this.gut.push(this.fut),this.Xut(e.dut()))}}fct(s){if(x.di(s)){const t=this.lut.Rut(this.fut),e=t.Zut().dct();return!!e[s]}if("string"==typeof s){const i=this.lut.Rut(this.fut),n=i.Zut().dct();for(let t=0;t<n.length;t++)if(n[t].Qc()===s)return!0}return!1}pct(){this.Gut=!0}mct(){return 0<this.Iut}gct(){this.Iut++}yct(){this.Iut--,0===this.Iut&&this.Gut&&this.hut.wct(this)}Xut(t){const e=this.fut,s=this.cZ().eV();if(this.gct(),this.hut.Sct(this),this.uf.TN(x.S$.Flowchart.y$.OnBeforeAnyNodeChange,s),this.uf.TN(x.S$.Flowchart.y$.OnBeforeTaggedNodeChange,s),this.uf.TN(x.S$.Flowchart.y$.OnBeforeAnyNodeChangeInFlowchart,s),this.uf.TN(x.S$.Flowchart.y$.OnBeforeTaggedNodeChangeInFlowchart,s),this.fut=t,this.uf.TN(x.S$.Flowchart.y$.OnAnyNodeChange,s),this.uf.TN(x.S$.Flowchart.y$.OnTaggedNodeChange,s),this.uf.TN(x.S$.Flowchart.y$.OnAnyNodeChangeInFlowchart,s),this.uf.TN(x.S$.Flowchart.y$.OnTaggedNodeChangeInFlowchart,s),this.hut.bct(),this.yct(),!this.mr()){const i=this.Rut(this.fut);if("reference"===i.yT()){const n=i.vct();if(this.xct(i)){this.gut.pop();const r=this.Mct(i),h=(this.hut.qut(r,!0,!0,!1),r.Tct(this,e),this.Hut());h.uct(r)}else{const o=i.Cct();if(n){this.gut.pop();let s=i.Ict();if(s){let t=this.hut.Gct(s);for(;t;)s=x.Y1(s),t=this.hut.Gct(s)}else{s=n+"-ref";let t=this.hut.Gct(s);for(;t;)s=x.Y1(s),t=this.hut.Gct(s)}const a=this.hut._ct(n,o,s,this.xY,!0),l=(a.Tct(this,e),this.Pct(i,a),this.Hut());a.Ect(l),l.uct(a)}}}}}Qut(t){const s=this.lut.Rut(this.fut);if(!s)return null;const e=s.Zut().dct();if(!e)return null;const i=e[t];return i||null}sct(t){const s=this.lut.Rut(this.fut);if(!s)return null;const e=s.Zut().Rct(t);return e||null}cut(s){if("number"==typeof s){let t=this.Rut(s);t=t||this.lut.Act(),this.mut=t}else{let t=this.lut.rct(this.aut);t=t||this.lut.Act(),this.mut=t}}G9(){return this.Gut?null:{flowchartName:this.out,flowchartTag:this.Xg,startNodeTag:this.aut,currentNodeId:this.fut,previousNodeIds:this.gut,pluginUID:this.xY.eV().Z5(),reference:{previousFlowchartTag:this.oct()?this.oct().P6():"",previousStartNodeId:x.di(this.lct())?this.lct():NaN,referencesJson:this.kct(),currentReferenceFlowchartTag:this.Fct()?this.Fct().P6():"",rootFlowchartTag:this.Hut()?this.Hut().P6():""}}}kct(){if(!this.Oct())return null;const t=[];for(const[s,e]of this.zut().entries())t.push({flowchartElementId:s.dut(),flowchartStateTag:e.P6()});return t.length?t:null}_9(t){if(t){if(this.out=t.flowchartName,this.Xg=t.flowchartTag,this.aut=t.startNodeTag,this.fut=t.currentNodeId,this.gut=t.previousNodeIds,this.uut=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.xut=s.previousFlowchartTag,this.wut=s.previousStartNodeId,this.Mut=s.referencesJson,this.Tut=s.currentReferenceFlowchartTag,this.Cut=s.rootFlowchartTag}this.cut()}}oct(){return"string"==typeof this.xut&&this.xut&&(this.yut=this.hut.Gct(this.xut),this.xut=""),this.yut}lct(){return this.wut}Tct(t,s){this.yut=t,this.wut=s}Fct(){return"string"==typeof this.Tut&&this.Tut&&(this.but=this.hut.Gct(this.Tut),this.Tut=""),this.but}uct(t){this.but=t,this.but===this&&(this.but=null)}Hut(){return"string"==typeof this.Cut&&this.Cut&&(this.vut=this.hut.Gct(this.Cut),this.Cut=""),this.vut||this}Ect(t){this.vut=t}Oct(){return this.Dct(),!!this.Sut}xct(t){return this.Dct(),this.Sut&&this.Sut.has(t)}Dct(){if(this.Mut){this.Sut&&this.Sut.clear(),this.Sut||(this.Sut=new Map);for(const t of this.Mut){const s=this.hut.Gct(t.flowchartStateTag),e=s.Rut(t.flowchartElementId);this.Sut.set(e,s)}this.Mut=null}}zut(){return this.Dct(),this.Sut}Mct(t){return this.Dct(),this.Sut.get(t)}Pct(t,s){this.Sut||(this.Sut=new Map),this.Sut.set(t,s)}}}{const $h=self.Bs;$h.Lct=class{constructor(t){this.uf=t,this.Bct=new Map,this.Nct=null,this.Wct=[],this.Vct=()=>this.JY(),this.jct=null}pr(){$h.jh(this.Wct),this.Wct=null,this.Bct.clear(),this.Bct=null,this.Nct=null,this.uf=null,this.jct=null}ZO(){return this.uf}_ct(t,s,e,i,n,r){const h=this.uf._ut().iut(t);if(h){if(!this.Bct.has(e)){const o=new $h.rut(t,e,s,h,this,i,r);return this.Bct.set(e,o),n&&this.qut(o,!0),o}{const a=this.Bct.get(e);a&&this.wct(a)}}else console.warn(`[Flowcharts] no flowchart found with name '${t}'`)}wct(t){if(t.pct(),!t.mct()){const s=t.P6();this.Bct.delete(s),t.pr(),this.Nct===t&&(this.Nct=null)}}Hct(t){t.u0()}Gct(t){return this.Bct.get(t)}Sct(t){this.Wct.push(t)}bct(){this.Wct.pop()}qut(t,s=!1,e=!1,i=!0){if(i){const n=t.Fct();t=n||t}t!==this.Nct&&(this.Uct(),this.zct(t,s,e))}Jct(t){return"string"==typeof t?this.Gct(t):this.Wct.length?this.Wct[this.Wct.length-1]:this.Nct}Uct(){if(this.Nct&&!this.Nct.mr()){const t=this.Nct.cZ().eV();this.Nct.gct(),this.Sct(this.Nct),this.uf.TN($h.S$.Flowchart.y$.OnBeforeFlowchartChange,t),this.bct(),this.Nct.yct()}}zct(t,s=!1,e=!1){if(this.Nct=t,this.Nct&&!this.Nct.mr()){const i=this.Nct.cZ().eV();this.Nct.gct(),this.Sct(this.Nct),this.uf.TN($h.S$.Flowchart.y$.OnFlowchartChange,i),!0!==e&&"number"!=typeof e||this.Nct.cut(e),s&&(this.uf.TN($h.S$.Flowchart.y$.OnAnyNodeChange,i),this.uf.TN($h.S$.Flowchart.y$.OnTaggedNodeChange,i)),this.bct(),this.Nct.yct()}}G9(){return{flowchartJsonObjects:[...this.Bct.values()].map(t=>t.G9()),currentFlowchartTag:this.Nct?this.Nct.P6():null}}_9(t){if(t){this.jct=t;const s=new Map;for(const e of this.jct.flowchartJsonObjects){const i=e.flowchartTag;if(this.Bct.has(i)){const n=this.Bct.get(i);n._9(e),s.set(i,n)}else{const r=this._ct(e.flowchartName,e.startNodeTag,e.flowchartTag,null,!1,e.pluginUID);r._9(e),s.set(e.flowchartTag,r)}}for(const[h,o]of this.Bct.entries())s.has(h)||o.pr();this.Bct.clear(),this.Bct=s,this.uf.a$()?this.uf.Hf().addEventListener("afterload",this.Vct):this.JY()}}JY(){this.uf.Hf().removeEventListener("afterload",this.Vct);const t=this.Bct.get(this.jct.currentFlowchartTag);t&&this.qut(t,!0),this.jct=null}}}{const Yh=self.Bs;Yh.eut=class{constructor(){this.qct=new Map}pr(){for(const t of this.qct.values())t.pr();this.qct.clear(),this.qct=null}fc(t){const s=new Yh.Xct(t),e=s.Qc();this.qct.set(e,s)}ne(t){return this.qct.get(t)}nut(){return!!this.qct.size}static $ct(t,s,e,i){if(s)for(const n of s){const r=new e(n,i);t.push(r)}}}}{const Zh=self.Bs;Zh.Xct=class{constructor(t){this.yr=t[0],this.Yct=new Zh.Zct(t[1],this)}pr(){this.Yct.pr(),this.Yct=null}Kct(){return this.Yct}Rut(t){return this.Yct.Rut(t)}rct(t){return this.Yct.rct(t)}Act(){return this.Yct.Act()}Qc(){return this.yr}}}{const Kh=self.Bs;class Qh{constructor(t,s){this.Yct=s,this.wf=t[7],this.Qct=t[0],this.Xg=t[1],this.Xg?this.ett=this.Xg.trim().split(" ").map(t=>t.trim()):this.ett=[],this.tft=t[2],this.eft=null,this.ift=null,"dictionary"===this.wf&&(this.eft=t[3],this.ift=t[4]),this.nft=t[6],this.rft=null,this.hft=null,this.oft=null,"reference"===this.wf&&(this.rft=t[8],this.hft=t[9],this.oft=t[10]),this.aft=new Kh.lft(t[5],this)}pr(){this.Yct=null}Kct(){return this.Yct}Zut(){return this.aft}dut(){return this.Qct}P6(){return this.Xg}U6(){return this.ett}F6(t){if(!this.ett)return!1;if(!this.ett.length)return!1;const s=Kh.rut.Att(t);return!(!s||!s.length)&&s.every(Kh.rut.Ftt,this.ett)}uft(){return this.nft}cft(t){this.nft=!!t}fft(){if("dictionary"===this.wf)return!0;if("reference"===this.wf)return!1;throw new Error("unexpected flowchart node type: "+this.wf)}But(){return this.tft}dft(){return this.eft}pft(){return this.ift}yT(){return this.wf}vct(){return this.rft}Cct(){return this.hft}Ict(){return this.oft}}Kh.Zct=class{constructor(t,s){this.lut=s,this.mft=[],this.gft=new Map,this.yft=new Map,this.wft=null,Kh.eut.$ct(this.mft,t,Qh,this);for(const e of this.mft){const i=e.dut(),n=e.P6(),r=e.U6(),h=e.uft();if(this.gft.set(i,e),n)for(const a of r)this.yft.has(a)||this.yft.set(a,new Set),this.yft.get(a).add(e);h&&(this.wft=e);const o=e.Zut();for(const l of o.Sft()){const u=l.dut();this.gft.set(u,l)}}this.wft||this.bft()}pr(){this.lut=null;for(const t of this.mft)t.pr();Kh.jh(this.mft),this.mft=null}Put(){return this.lut}Rut(t){return this.gft.get(t)}rct(t){if(!t||!t.length)return null;const e=[];for(const i of t.trim().split(" ")){let t=this.yft.get(i.trim())??new Set;if(0===t.size)return null;e.push(t)}const s=e.reduce((t,s)=>s.size<t.size?s:t);return[...s].filter(s=>e.every(t=>t.has(s)))[0]}Act(){return this.wft}*vft(){for(const t of this.mft)yield t}bft(){let t=0;for(const s of this.vft())s.uft()&&t++;if(0===t){for(const e of this.vft())if(e.fft()&&!e.uft())return void e.cft(!0)}else{if(1===t)return;if(1<t){let t=!0;for(const i of this.vft())i.fft()&&(i.uft()&&t?t=!1:i.uft()&&!t&&i.cft(!1))}}for(const n of this.vft())if(n.fft()&&n.uft())return void(this.wft=n)}}}{const to=self.Bs;class so{constructor(t,s){this.aft=s,this.Qct=t[0],this.yr=t[1],this.Unt=t[2],this.xft=t[3]}pr(){this.aft=null}Zut(){return this.aft}dut(){return this.Qct}Qc(){return this.yr}Ait(){return this.Unt}ict(){return this.xft}}to.lft=class{constructor(t,s){this.Mft=s,this.Tft=[],this.Cft=new Map,to.eut.$ct(this.Tft,t,so,this);for(const e of this.Tft)this.Cft.set(e.Qc(),e)}pr(){this.Mft=null;for(const t of this.Tft)t.pr();to.jh(this.Tft),this.Tft=null}Ift(){return this.Mft}Yut(){return this.Tft.length}dct(){return this.Tft}Rct(t){return this.Cft.get(t)}*Sft(){for(const t of this.Tft)yield t}}}{const eo=self.Bs;eo.Gft=class extends eo.ur{constructor(t){super(),this._ft=t,this.Pft=[],this.Pft.push(eo.dr(eo.Eft,this)),this.qg=0,this.Rft=this.Pft[0]}pr(){for(const t of this.Pft)t.pr();eo.jh(this.Pft),this.Rft=null,this._ft=null}D5(){return this._ft}jL(){return this.Rft}Aft(){return this.Pft[this.qg-1]}ec(){this.jL().ec()}kft(){const t=this.Pft,s=++this.qg;if(s===t.length){const e=eo.dr(eo.Eft,this);t.push(e),this.Rft=e}else{const i=t[s];i.u0(),this.Rft=i}}Fft(){const t=this.Pft,s=++this.qg,e=(s===t.length&&t.push(eo.dr(eo.Eft,this)),t[s]);e.P0(t[s-1]),this.Rft=e}h8(){this.Rft=this.Pft[--this.qg]}Oft(e){const i=this.Pft;for(let t=0,s=i.length;t<s;++t)i[t].Oft(e)}}}{const io=self.Bs;io.Eft=class extends io.ur{constructor(t){super(),this.Pft=t,this._ft=this.Pft.D5(),this.Dft=this._ft.ZO().TF(),this.Lft=!0,this.K7=[],this.Bft=[]}pr(){this.Nft(),this.Pft=null,this._ft=null,this.Dft=null}Nft(){io.jh(this.K7),io.jh(this.Bft)}D5(){return this._ft}Wft(){return this.Lft}Vft(){return this.Lft?!!this._ft.UL():!!this.K7.length}VL(){return this.Lft?this._ft.VL():this.K7}jft(){return!!this.Bft.length}Hft(){return this.Bft}Uft(){const t=this.VL();return t.length?t:this.Bft}u0(){this.Lft=!0,io.jh(this.Bft)}ec(){this.Lft=!0}P0(t){t.Wft()?this.u0():(this.Lft=!1,io.Jh(this.K7,t.K7),io.jh(this.Bft))}zft(t){this.K7.push(t)}Jft(t){this.Bft.push(t)}qft(t){this.Lft=!!t}Xft(){return this.K7}$ft(){return this.Bft}Yft(t){this.Lft=!1,io.jh(this.K7),this.K7.push(t)}Zft(t){this.Lft=!1,io.Jh(this.K7,t)}Kft(t){this.Lft=!1,io.jh(this.K7);for(const s of t)this.K7.push(s)}Qft(t,s){for(const e of s)t.has(e)||this.Bft.push(e)}t0t(t){for(const s of t)this.K7.push(s);io.Zh(this.Bft,t)}s0t(){io.jh(this.Bft)}e0t(t){if(t)if(this.Dft.Xj().yF().i0t()){this.Wft()&&(io.jh(this.K7),io.Jh(this.Bft,t.D5().VL()),this.Lft=!1);const s=this.Bft.indexOf(t);-1!==s&&(this.K7.push(this.Bft[s]),this.Bft.splice(s,1))}else this.Yft(t)}Oft(t){io.Zh(this.K7,t),io.Zh(this.Bft,t)}}}{const no=self.Bs;no.n0t=class extends no.ur{constructor(t){super(),this.r0t=t,this.uf=this.r0t.ZO(),this.Pft=[],this.Pft.push(no.dr(no.h0t,this,null)),this.qg=0,this.o0t=[]}pr(){for(const t of this.Pft)t.pr();no.jh(this.Pft),no.jh(this.o0t),this.r0t=null,this.uf=null}cF(){return this.r0t}ZO(){return this.uf}Xj(){return this.Pft[this.qg]}a0t(){return this.Pft}l0t(){return this.qg}$j(t){const s=this.Pft,e=++this.qg;if(e===s.length){const i=no.dr(no.h0t,this,t);return s.push(i),i}{const n=s[e];return n.u0(t),n}}h8(){--this.qg}u0t(t){this.o0t.push(t)}c0t(){this.o0t.pop()}MF(){const t=this.o0t;return 0===t.length?null:t.at(-1)}}}{const ro=self.Bs;ro.h0t=class extends ro.ur{constructor(t,s){super(),this.Pft=t,this.uf=this.Pft.ZO(),this.f0t=s,this.d0t=0,this.p0t=0,this.m0t=!1,this.g0t=!1,this.y0t=null,this.w0t=0,this.S0t=0,this.b0t=null}pr(){this.u0(null),this.Pft=null,this.uf=null}u0(t){this.f0t=t,this.d0t=0,this.p0t=0,this.m0t=!1,this.g0t=!1,this.b0t=null}v0t(t,s){this.f0t=t,this.d0t=0,this.p0t=s}x0t(){this.d0t=0,this.p0t=0}yF(){return this.f0t}M0t(t){this.f0t=t}T0t(){return this.d0t}C0t(t){this.d0t=t}I0t(){return this.p0t}G0t(t){this.p0t=t}_0t(t){this.m0t=!!t}P0t(){return this.m0t}E0t(t){this.g0t=!!t}R0t(){return this.g0t}A0t(t){this.y0t=t}k0t(){return this.y0t}F0t(t,s){this.w0t=t,this.S0t=s}CF(){return this.w0t}IF(t){this.S0t=t}O0t(){return this.S0t}D0t(){const t=this.f0t;return!!t.L0t()||this.d0t<t.B0t()-1&&!!t.qj().length}N0t(t){this.b0t=t}W0t(){return this.b0t}}}{const ho=self.Bs;ho.V0t=class extends ho.ur{constructor(t){super(),this.r0t=t,this.uf=this.r0t.ZO(),this.Pft=[],this.qg=-1,this.Rft=null,this.j0t=[]}pr(){ho.jh(this.Pft),this.r0t=null,this.uf=null}H0t(t){this.j0t=t;const s=this.j0t.slice(0);this.Pft.push(s),this.qg=0,this.Rft=s}cF(){return this.r0t}ZO(){return this.uf}U0t(){return this.Rft}$j(){const t=++this.qg,s=this.Pft;t===s.length?s.push(this.j0t.slice(0)):ho.Jh(s[t],this.j0t),this.Rft=s[t]}h8(){this.Rft=this.Pft[--this.qg]}}}{const oo=self.Bs;oo.z0t=class extends oo.ur{constructor(t){super(),this.r0t=t,this.uf=this.r0t.ZO(),this.Pft=[],this.qg=-1}pr(){oo.jh(this.Pft),this.r0t=null,this.uf=null}cF(){return this.r0t}ZO(){return this.uf}J0t(){return 0<=this.qg}U0t(){return this.Pft[this.qg]}$j(){if(++this.qg,this.qg===this.Pft.length){const t=oo.dr(oo.q0t,this);return this.Pft.push(t),t}{const s=this.Pft[this.qg];return s.u0(),s}}h8(){--this.qg}X0t(s){const e=this.Pft;for(let t=this.qg;0<=t;--t){const i=e[t];if(i.Qc()===s)return i}return null}$0t(){return this.Pft.slice(0,this.qg+1)}}}{const ao=self.Bs;ao.q0t=class extends ao.ur{constructor(t){super(),this.Y0t=t,this.yr="",this.qg=0,this.Z0t=!1,this.K0t=NaN}u0(){this.yr="",this.qg=0,this.Z0t=!1,this.K0t=NaN}Zj(t){this.yr=t}Qc(){return this.yr}i8(t){this.qg=t}Ak(){return this.qg}A6(){this.Z0t=!0}r8(){return this.Z0t}Q0t(t){this.K0t=t}tdt(){return this.K0t}}}{const lo=self.Bs;lo.sdt=class extends lo.ur{constructor(){super(),this.Pft=[],this.qg=-1}pr(){lo.jh(this.Pft)}U0t(){return this.Pft[this.qg]}$j(){if(++this.qg,this.qg!==this.Pft.length)return this.Pft[this.qg];{const t=[];return this.Pft.push(t),t}}h8(){--this.qg}}}{let t=function(t,s){return t.Ak()-s.Ak()},r=function(e,i){for(let t=0,s=e.length;t<s;++t)if(e[t]!==i[t])return!1;return!0};t,r;const uo=self.Bs;uo.edt=class extends uo.ur{constructor(t){super(),this.uf=t,this.idt=[],this.ndt=new Map,this.rdt=[],this.hdt=new Map,this.odt=new Map,this.adt=new Map,this.ldt=new Map,this.udt=new Map,this.cdt=new Map,this.fdt=0,this.ddt=[],this.pdt=[],this.mdt=[],this.gdt=new Map,this.ydt=new Map,this.Dft=uo.dr(uo.n0t,this),this.wdt=uo.dr(uo.V0t,this),this.Y0t=uo.dr(uo.z0t,this),this.Sdt=[],this.bdt=[],this.vdt=[],this.xdt=0,this.Mdt=0,this.Tdt=0,this.Cdt=[],this.Idt=[],this.Gdt=[],this._dt=new Map,this.Pdt=new Map,self.c3_callFunction=(t,s)=>this.Edt(t,s)}pr(){this.E$(),this.Dft.pr(),this.Dft=null,this.wdt.pr(),this.wdt=null,uo.jh(this.bdt),uo.jh(this.vdt),this.uf=null,uo.jh(this.idt),this.ndt.clear()}mM(t){const s=uo.dr(uo.Rdt,this,t);this.idt.push(s),this.ndt.set(s.Qc().toLowerCase(),s)}Adt(t){this.Sdt.push(t)}kdt(){for(const t of this.ydt.values())t.Fdt();for(const s of this.gdt.values())s.kdt();for(const e of this.ydt.values())e.kdt();for(const i of this.idt)i.kdt();for(const n of this.idt)n.ZX();for(const r of this.Sdt)r.kdt(!1);uo.jh(this.Sdt),this.wdt.H0t(this.mdt)}ZO(){return this.uf}YX(t){return this.ndt.get(t.toLowerCase())||null}Odt(t){this.rdt.push(t),this.hdt.set(t.Ddt(),t)}Ldt(t){this.odt.set(t.uJ(),t)}Bdt(t){this.adt.set(t.uJ(),t)}Ndt(t){this.ldt.set(t.uJ(),t)}Wdt(t){switch(t.Vdt()){case 0:this.gdt.set(t.jdt().toLowerCase(),t);break;case 1:this.ydt.set(t.jdt().toLowerCase(),t)}}Hdt(t){this.cdt.set(t.uJ(),t),(t.Vz()?this.ddt:this.pdt).push(t)}Udt(e){2<=e.length&&e.sort(t);let i=this.udt.get(e.length);i||(i=[],this.udt.set(e.length,i));for(let t=0,s=i.length;t<s;++t){const n=i[t];if(r(e,n))return n}return i.push(e),e}zdt(t){return this.mdt.push(t.Jdt()),this.fdt++}TF(){return this.Dft}qdt(){return this.TF().Xj()}yF(){return this.qdt().yF()}Xdt(){const t=this.qdt(),s=t.yF();return s.$dt(t.T0t())}Ydt(){const t=this.qdt(),s=t.yF();return s.Zdt(t.I0t())}Kdt(){return this.wdt}Yj(){return this.Y0t}Qdt(t){const s=[];for(t=t.t1t();t;)uo.Zn(s,t.s1t()),t=t.t1t();return s}e1t(t){const s={};for(const e of this.Qdt(t))s[e.i1t()]=e.n1t();return Object.create(Object.prototype,s)}r1t(t){return this.cdt.get(t)||null}h1t(t){return this.odt.get(t)||null}o1t(t){return this.adt.get(t)||null}a1t(t){return this.ldt.get(t)||null}fF(t){return this.gdt.get(t.toLowerCase())||null}l1t(t,s){let e=this.ydt.get((t.Qc()+"."+s).toLowerCase());if(e)return e;if(!t.eJ())for(const i of t.u1t())if(e=this.ydt.get((i.Qc()+"."+s).toLowerCase()))return e;return null}c1t(){return this.ddt}f1t(){return this.pdt}d1t(t){for(const s of this.ddt)s.p1t();if(t)for(const e of this.pdt)e.d2()&&e.p1t()}m1t(t){return this.hdt.get(t.toLowerCase())||null}g1t(t){const s=this.odt.get(t);return s&&s.y1t()?s:null}w1t(){return this.rdt}S1t(){for(const t of this.rdt)t.b1t()}v1t(){for(const t of this.idt)t.x1t()}M1t(t){this.v1t(),this.xdt++;for(const s of t.pY()){const e=s.TX();e&&(this.uf.T1t(s),e.FI(),this.uf.C1t())}this.xdt--}async I1t(t){this.v1t(),this.xdt++;for(const s of this.G1t(t))await this.uf._1t(s);this.xdt--}*G1t(t){for(const s of t.pY()){const e=s.TX();e&&(this.uf.T1t(s),yield*e.P1t(),this.uf.C1t())}}E1t(t,s,e,i){let n=!1;if(!t.lO())return this.R1t(s,e,i);this.Mdt++;for(const r of t.pY()){const h=r.TX();if(h){this.uf.T1t(r);for(const a of h.A1t()){const l=a.E1t(s,e,i);n=n||l}const o=h.E1t(s,e,i);n=n||o,this.uf.C1t()}}return this.Mdt--,n}*k1t(t,s,e,i){let n=!1;if(!t.lO())return this.R1t(s,e,i);this.Mdt++;for(const r of t.pY()){const h=r.TX();if(h){this.uf.T1t(r);for(const a of h.A1t()){const l=yield*a.k1t(s,e,i);n=n||l}const o=yield*h.k1t(s,e,i);n=n||o,this.uf.C1t()}}return this.Mdt--,n}R1t(t,s,e){return this.bdt.push([t,s,e]),!1}F1t(t,s,e){let i=null,n=new Promise(t=>i=t);return this.vdt.push([t,s,e,i]),n}*O1t(){if(this.uf.D1t())throw new Error("should not be in breakpoint");const t=this.uf.fO();for(;this.vdt.length;){const[s,e,i,n]=this.vdt.shift(),r=yield*this.k1t(t,s,e,i);n(r)}}async L1t(){for(const t of this.O1t())await this.uf._1t(t)}B1t(t,e,i,n){let r=!1,s=t.lO(),h=s.TX();if(h){this.Mdt++,this.uf.T1t(s);const o=h.A1t();for(let t=0,s=o.length;t<s;++t){const l=o[t].B1t(e,i,n);r=r||l}const a=h.B1t(e,i,n);return r=r||a,this.uf.C1t(),this.Mdt--,r}}*N1t(t,e,i,n){let r=!1,s=t.lO(),h=s.TX();if(h){this.Mdt++,this.uf.T1t(s);const o=h.A1t();for(let t=0,s=o.length;t<s;++t){const l=yield*o[t].N1t(e,i,n);r=r||l}const a=yield*h.N1t(e,i,n);return r=r||a,this.uf.C1t(),this.Mdt--,r}}W1t(){return this.Mdt}V1t(){return 0<this.W1t()}j1t(){return++this.Mdt}H1t(){--this.Mdt}U1t(){return 0<this.xdt}YL(){return this.U1t()||this.V1t()}b$(t){for(const[s,e,i]of this.bdt)this.E1t(t,s,e,i);uo.jh(this.bdt)}XL(t){t?this.Tdt++:this.Tdt--}U5(){return 0<this.Tdt}z1t(e){for(let t=0,s=e.length;t<s;++t)e[t].J1t().ec()}q1t(e){for(let t=0,s=e.length;t<s;++t)e[t].J1t().kft()}t8(e){for(let t=0,s=e.length;t<s;++t)e[t].J1t().Fft()}e8(e){for(let t=0,s=e.length;t<s;++t)e[t].J1t().h8()}wF(s){const e=new Set,i=this.Dft.a0t(),n=this.Dft.l0t();for(let t=0;t<=n;++t){const r=i[t].W0t();if(r)for(const h of r)s&&s.has(h)||e.add(h)}return e}X1t(t){const s=new Set([...t]),e=this.wF(s);if(0<e.size){for(const i of e)i.J1t().kft();return[...e]}return null}$1t(){const t=uo.dr(uo.Y1t,this);return this.Cdt.push(t),t}Z1t(){return this.Cdt}K1t(){if(this.Cdt.length){let e=this.qdt(),i=!1;this.xdt++;for(let t=0,s=this.Cdt.length;t<s;++t){const n=this.Cdt[t];n.Q1t()&&n.tpt(e),n.spt()&&(i=!0)}i&&(this.ept(),e.u0(null)),this.xdt--}}async ipt(){if(this.Cdt.length){let e=this.qdt(),i=!1;this.xdt++;for(let t=0,s=this.Cdt.length;t<s;++t){const n=this.Cdt[t];n.Q1t()&&await n.npt(e),n.spt()&&(i=!0)}i&&(this.ept(),e.u0(null)),this.xdt--}}ept(){const t=uo.Yh(this.Cdt,t=>t.spt());for(const s of t)s.pr()}E$(){for(const t of this.Cdt)t.pr();uo.jh(this.Cdt)}rpt(t){for(const s of this.Cdt)s.Oft(t);for(const e of t){const i=this.Pdt.get(e);if(this.Pdt.delete(e),i)for(const{resolve:n}of i.hpt.values())n(!0)}}opt(t){this.Idt.push({promise:t,apt:this.W1t()})}lpt(){uo.jh(this.Idt)}upt(){const s=this.W1t();this.Idt=this.Idt.filter(t=>t.apt<=s)}cpt(){const t=Promise.all(this.Idt.map(t=>t.promise));return this.Idt=[],t}GF(t){const s=t.toLowerCase();this.Gdt.push(s),this.uf.TN(uo.S$.w$.y$.fpt,null),this.Gdt.pop();for(const i of this.uf.cF().Z1t())i.dpt()&&i.ppt()===s&&i.mpt();const e=this._dt.get(s);e&&(e.resolve(),this._dt.delete(s))}PF(t){const e=t.toLowerCase(),s=this._dt.get(e);if(s)return s.promise;{let s=null,t=new Promise(t=>s=t);return this._dt.set(e,{promise:t,resolve:s}),t}}gpt(){if(0===this.Gdt.length)throw new Error("not in a signal");return this.Gdt.at(-1)}ypt(t){let s=this.Pdt.get(t);return s||(s={wpt:[],hpt:new Map},this.Pdt.set(t,s)),s}uN(t,s){const e=this.ypt(t),i=s.toLowerCase();e.wpt.push(i),this.uf.TN(t.RL().bpt().y$.Spt,t),e.wpt.pop();for(const r of this.uf.cF().Z1t())r.vpt()&&r.ppt()===i&&r.xpt(t);const n=e.hpt.get(i);n&&(n.resolve(!1),e.hpt.delete(i)),0===e.wpt.length&&0===e.hpt.size&&this.Pdt.delete(t)}cN(t,s){const e=this.ypt(t),i=s.toLowerCase(),n=e.hpt.get(i);if(n)return n.promise;{let s=null,t=new Promise(t=>s=t);return e.hpt.set(i,{promise:t,resolve:s}),t}}Mpt(t){const s=this.ypt(t);if(s&&0!==s.wpt.length)return s.wpt.at(-1);throw new Error("not in a signal")}G9(){return{groups:this.Tpt(),cnds:this.Cpt(),acts:this.Ipt(),vars:this.Gpt(),waits:this._pt()}}_9(t){this.Ppt(t.groups),this.Ept(t.cnds),this.Rpt(t.acts),this.Apt(t.vars),this.kpt(t.waits)}Tpt(){const t={};for(const s of this.w1t())t[s.uJ().toString()]=s.Fpt();return t}Ppt(t){for(const[s,e]of Object.entries(t)){const i=parseInt(s,10),n=this.g1t(i);n&&n.Opt(e)}}Cpt(){const t={};for(const[s,e]of this.adt){const i=e.G9();i&&(t[s.toString()]=i)}return t}Ept(t){const s=new Map;for(const[e,i]of Object.entries(t))s.set(parseInt(e,10),i);for(const[n,r]of this.adt)r._9(s.get(n)||null)}Ipt(){const t={};for(const[s,e]of this.ldt){const i=e.G9();i&&(t[s.toString()]=i)}return t}Rpt(t){const s=new Map;for(const[e,i]of Object.entries(t))s.set(parseInt(e,10),i);for(const[n,r]of this.ldt)r._9(s.get(n)||null)}Gpt(){const t={};for(const[s,e]of this.cdt)e.Dpt()||!e.Vz()&&!e.d2()||(t[s.toString()]=e.Ait());return t}Apt(t){for(const[s,e]of Object.entries(t)){const i=parseInt(s,10),n=this.r1t(i);n&&n.pnt(e)}}_pt(){return this.Cdt.filter(t=>!t.Lpt()).map(t=>t.G9())}kpt(t){this.E$();for(const s of t){const e=uo.Y1t.Bpt(this,s);e&&this.Cdt.push(e)}}Npt(){return[...this.uf.fO().pY()].map(t=>t.TX()).filter(t=>t).map(t=>t.Wpt())}Vpt(t){for(;t;){const s=t.t1t();if(s instanceof uo.jpt)return s;t=s}return null}Edt(t,s){Array.isArray(s)||(s=[]);const e=this.fF(t.toLowerCase());if(!e)return null;if(!e.Qu())return e.dF();const i=e.Hpt();if(s.length<i.length)for(s=s.slice(0);s.push(i[s.length].Jdt()),s.length<i.length;);const n=e.mF();return n.SF(n.gF(),!1,e.vF(),e.dF(),...s)}}}{const co=self.Bs;co.Rdt=class extends co.ur{constructor(t,s){super(),this.r0t=t,this.uf=t.ZO(),this.yr=s[0],this.Upt=[],this.zpt=new Map,this.Jpt=new Map,this.qpt=new Map,this.Xpt=!1,this.$pt=[],this.Ypt=[],this.Zpt=new Set;for(const e of s[1])this.Kpt(e,null,this.Upt);this.Qpt=this.uf.kN()?{type:"sheet",name:this.yr,tmt:0,children:[]}:null}pr(){this.r0t=null,this.uf=null}Kpt(t,s,e){switch(t[0]){case 0:case 3:this.smt(t,s,e);break;case 1:this.emt(t,s,e);break;case 2:this.imt(t,s,e);break;case 4:this.nmt(t,s);break;case 5:this.rmt(t,s,e);break;case 6:this.hmt(t,s);break;default:throw new Error("invalid event type")}}smt(t,s,e){const i=co.omt.mM(this,s,t);if(i.i0t()){e.push(i);const n=i.amt();for(let t=0,s=n.length;t<s;++t)n[t].lmt()&&this.umt(i,t)}else i.lmt()?this.umt(i,0):e.push(i)}nmt(t,s){const e=co.jpt.cmt(this,s,t);this.r0t.Wdt(e)}hmt(t,s){const e=co.jpt.fmt(this,s,t);this.r0t.Wdt(e)}emt(t,s,e){const i=co.dmt.mM(this,s,t);e.push(i)}imt(t,s,e){const i=co.pmt.mM(this,s,t);e.push(i)}rmt(t,s,e){const i=co.mmt.mM(this,s,t);e.push(i)}umt(n,r){n.i0t()||this.r0t.Adt(n);const h=n.$dt(r),o=h.gmt(),a=h.D5();if(h.ymt()){let t=this.Jpt.get(a),s=(t||(t=new Map,this.Jpt.set(a,t)),h.wmt().toLowerCase()),e=t.get(o),i=(e||(e=new Map,t.set(o,e)),e.get(s));i||(i=[],e.set(s,i)),i.push([n,r])}else{let t=this.zpt.get(a),s=(t||(t={Smt:new Map,bmt:new Map},this.zpt.set(a,t)),h.DW()),e,i=(s?(e=t.bmt.get(s))||(e=new Map,t.bmt.set(s,e)):e=t.Smt,e.get(o));i||(i=[],e.set(o,i)),i.push([n,r])}}kdt(){const e=this.Upt;for(let t=0,s=e.length;t<s;++t){const i=t<s-1&&e[t+1]instanceof co.omt&&e[t+1].vmt();e[t].kdt(i)}}xmt(t){this.$pt.push(t)}ZX(){co.jh(this.Ypt),this.Mmt(this),this.Zpt.clear()}Mmt(t){const s=t.Ypt,e=t.Zpt;for(const i of this.$pt){const n=i.Tmt();i.Cmt()&&t!==n&&!e.has(n)&&(e.add(n),n.Mmt(t),s.push(n))}}A1t(){return this.Ypt}cF(){return this.r0t}ZO(){return this.uf}Qc(){return this.yr}Imt(t,s){this.qpt.set(s,t)}Gmt(t){return this.qpt.get(t)||null}x1t(){this.Xpt=!1}FI(){if(!this.Xpt){const t=this.uf,s=t._mt(),e=s?performance.now():0,i=(this.Xpt=!0,this.cF()),n=i.qdt();for(const r of this.Upt)r.FI(n),i.z1t(r.qj()),i.lpt(),t.KL();n.u0(null),s&&(this.Qpt.tmt+=performance.now()-e)}}*P1t(){if(!this.Xpt){this.Xpt=!0;const t=this.uf,s=this.cF(),e=s.qdt();for(const i of this.Upt)yield*i.P1t(e),s.z1t(i.qj()),s.lpt(),t.KL();e.u0(null)}}E1t(i,n,r){if(!n)return this.Pmt(i,n,null,null);{let t=n.D5(),s=!1,e=this.Pmt(i,n,t,r);s=s||e;for(const h of t.u1t())e=this.Pmt(i,n,h,r),s=s||e}}Pmt(t,s,e,i){const n=this.zpt.get(e);if(!n)return!1;const r=i?n.bmt.get(i):n.Smt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[a,l]of h){const u=this.Emt(s,a,l);o=o||u}return o}*k1t(i,n,r){if(!n)return yield*this.Rmt(i,n,null,null);{let t=n.D5(),s=!1,e=yield*this.Rmt(i,n,t,r);s=s||e;for(const h of t.u1t())e=yield*this.Rmt(i,n,h,r),s=s||e}}*Rmt(t,s,e,i){const n=this.zpt.get(e);if(!n)return!1;const r=i?n.bmt.get(i):n.Smt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[a,l]of h){let t;t=a.Amt()?this.Emt(s,a,l):yield*this.kmt(s,a,l),o=o||t}return o}B1t(t,s,e){const i=s.D5(),n=this.Jpt.get(i);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(e);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const a=h[t],l=this.Emt(null,a[0],a[1]);o=o||l}return o}*N1t(t,s,e){const i=s.D5(),n=this.Jpt.get(i);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(e);if(!h)return!1;let o=!1;for(let n=0,t=h.length;n<t;++n){let t=h[n],s=t[0],e=t[1],i;i=s.Amt()?this.Emt(null,s,e):yield*this.kmt(null,s,e),o=o||i}return o}Emt(t,s,e){let i=this.uf,n=this.r0t,r=n.yF(),h=n.TF(),o=n.W1t(),a=!1;r&&n.q1t(r.gF()),n.q1t(s.gF());const l=1<o,u=(l&&n.Kdt().$j(),h.$j(s));if(t){const f=s.amt()[e].D5(),d=f.jL();d.Yft(t),t.X5()&&t.Fmt()}let c=!0;if(s.P4()){const p=s.Omt();for(let t=0,s=p.length;t<s;++t)if(!p[t].Dmt(u)){c=!1;break}}return c&&(s.i0t()?s.Lmt(u,e):s.FI(u),a=u.P0t()),h.h8(),l&&n.Kdt().h8(),n.e8(s.gF()),r&&n.e8(r.gF()),r||1!==o||(n.lpt(),n.U5())||i.KL(),a}*kmt(t,s,e){let i=this.uf,n=this.r0t,r=n.yF(),h=n.TF(),o=n.W1t(),a=!1;r&&n.q1t(r.gF()),n.q1t(s.gF());const l=1<o,u=(l&&n.Kdt().$j(),h.$j(s));if(t){const f=s.amt()[e].D5(),d=f.jL();d.Yft(t),t.X5()&&t.Fmt()}let c=!0;if(s.P4()){const p=s.Omt();for(let t=0,s=p.length;t<s;++t)if(!(yield*p[t].Bmt(u))){c=!1;break}}return c&&(s.i0t()?yield*s.Nmt(u,e):yield*s.P1t(u),a=u.P0t()),h.h8(),l&&n.Kdt().h8(),n.e8(s.gF()),r&&n.e8(r.gF()),r||1!==o||(n.lpt(),n.U5())||i.KL(),a}Wpt(){return this.Qpt}}}{let u=function(t,s){return!0};u;const fo=self.Bs,po=[];function*W(t,s){return!0}fo.omt=class extends fo.ur{constructor(t,s,e){super(),this.V9=t,this.uf=t.ZO(),this.Wmt=s,this.Vmt=null,this.Dft=this.uf.cF().TF(),this.jmt=[],this.Hmt=[],this.Umt=!1,this.zmt=!1,this.Jmt=!1,this.qmt=!1,this.Xmt=!!e[2],this.$mt=!1,this.Ymt=null,this.Zmt=[],this.Xnt=[],this.Kmt=[],this.Qmt=u,this.tgt=W,this.sgt=!1,this.egt=!1,this.igt="",this.ngt=!1,this.rgt=null,this.Qpt=null,this.EU=e[4],this.hgt=e[5],this.V9.Imt(this,this.hgt),this.ogt=this.uf.kN()?{agt:e[3][0],lgt:e[3][1],ugt:!1,cgt:!1,fgt:!1,dgt:!1}:null,this.cF().Ldt(this),3===e[0]&&this.pgt(e[1]);let i=0;for(const n of e[6]){const r=fo.mgt.mM(this,n,i++);this.Zmt.push(r),this.ggt(r.D5())}i=0;for(const h of e[7]){const o=fo.ygt.mM(this,h,i++);this.Xnt.push(o)}if(9===e.length){const a=e[8];for(const l of a)this.V9.Kpt(l,this,this.Kmt)}this.Zmt.length&&(this.$mt=null===this.Zmt[0].D5()&&this.Zmt[0].gmt()===fo.S$.w$.y$.wgt),0===this.Zmt.length&&(this.Zmt=po),0===this.Xnt.length&&(this.Xnt=po),0===this.Kmt.length&&(this.Kmt=po)}static mM(t,s,e){return fo.dr(fo.omt,t,s,e)}pgt(t){this.sgt=!0,this.egt=!!t[0],this.ngt=this.egt,this.igt=t[1].toLowerCase(),this.rgt=[],this.cF().Odt(this),this.uf.kN()&&(this.Qpt={type:"group",name:t[1],tmt:0,children:[]})}Sgt(t){this.rgt.push(t)}bgt(t,s){for(const e of t.LX().x$())s.includes(e)||s.push(e)}vgt(t,s){if(t)if(s.includes(t)||s.push(t),t.eJ())for(const e of t.xgt())e.X5()&&this.bgt(e,s);else t.X5()&&this.bgt(t,s)}ggt(t){this.vgt(t,this.jmt)}Mgt(t){this.vgt(t,this.Hmt)}Tgt(){this.jmt=this.uf.sJ()}kdt(t){this.qmt=!!t,this.Cgt(),this.Igt();for(const s of this.Zmt)s.kdt();if(0<this.Xnt.length){let t=!1;for(const i of this.Xnt)i.kdt(),i.Ggt()&&(t=!0);t?(this.Qmt=this._gt,this.tgt=this.Pgt):(this.Qmt=this.Egt,this.tgt=this.Rgt)}const e=this.Kmt;for(let t=0,s=e.length;t<s;++t){const n=t<s-1&&e[t+1]instanceof fo.omt&&e[t+1].vmt();e[t].kdt(n)}this.ogt&&this.Agt(),this.Qpt&&this.kgt().Wpt().children.push(this.Qpt)}Wpt(){return this.Qpt}kgt(){let t=this.P4();for(;t;){if(t.y1t())return t;t=t.P4()}return this.V9}Agt(){const t=this.ogt;t.ugt=this.Zmt.every(t=>t.Amt()),t.cgt=this.Xnt.every(t=>t.Amt()),t.fgt=this.Kmt.every(t=>t.Amt()),t.dgt=t.ugt&&t.cgt&&t.fgt}Fgt(){let t=this;for(;t.Agt(),t=t.P4(););}Cgt(){if(this.y1t()){let t=this.P4();for(this.Jmt=!0;t;){if(!t.y1t()){this.Jmt=!1;break}t=t.P4()}}}Ogt(){const t=this.uf.sJ();if(this.jmt===t)this.Hmt=t;else{this.Hmt=fo.eo(this.jmt);let t=this.P4();for(;t;){for(const e of t.jmt)this.Mgt(e);t=t.P4()}const s=this.cF();this.jmt=s.Udt(this.jmt),this.Hmt=s.Udt(this.Hmt)}}Igt(){if(this.Dgt()){this.Ymt=[];let t=this.P4();for(;t;)this.Ymt.push(t),t=t.P4();this.Ymt.reverse()}}Lgt(){this.zmt=!0,this.Wmt&&this.Wmt.Lgt()}L0t(){return this.zmt}qj(){return this.jmt}gF(){return this.Umt||(this.Umt=!0,this.Ogt()),this.Hmt}Bgt(t){return this.jmt.includes(t)}Omt(){return this.Ymt}TX(){return this.V9}cF(){return this.V9.cF()}ZO(){return this.uf}P4(){return this.Wmt}Ngt(t){this.Vmt=t}t1t(){return this.Vmt||this.Wmt}Wgt(){return this.hgt}Vgt(){return this.ogt&&this.ogt.lgt}jgt(){return this.Vgt()&&this.ogt.agt}Hgt(t){this.ogt.agt=!!t,this.Fgt()}y1t(){return this.sgt}Ugt(){return this.Jmt}vmt(){return this.$mt}zgt(){return this.qmt}Ddt(){return this.igt}Fpt(){return this.ngt}b1t(){this.Opt(this.egt)}Opt(t){if(t=!!t,!this.sgt)throw new Error("not a group");if(this.ngt!==t){this.ngt=t;for(const s of this.rgt)s.Jgt();if(this.rgt.length){const e=this.uf.PO(),i=e.TX();i&&i.ZX()}}}uJ(){return this.EU}i0t(){return this.Xmt}lmt(){return this.Zmt.length&&this.Zmt[0].lmt()}qgt(){return this.Vmt&&this.Vmt instanceof fo.jpt}Dgt(){return this.qgt()||this.Zmt.some(t=>t.lmt())}amt(){return this.Zmt}B0t(){return this.Zmt.length}$dt(t){if((t=Math.floor(t))<0||t>=this.Zmt.length)throw new RangeError("invalid condition index");return this.Zmt[t]}Xgt(t){return this.$dt(t)}$gt(t){let s=t.Ak();if(0!==s){--s;const e=t.Ygt()?t.Zgt():t.D5();for(;0<=s;--s){const i=this.Zmt[s];if(e===i.D5()||i.Ygt()&&i.Zgt()===e)return!1}}return!0}Kgt(){return this.Xnt}Qgt(){return this.Xnt.length}Zdt(t){if((t=Math.floor(t))<0||t>=this.Xnt.length)throw new RangeError("invalid action index");return this.Xnt[t]}tyt(s){s=Math.floor(s);const t=this.Xnt.find(t=>t.syt()===s);if(t)return t;throw new RangeError("invalid action debug index")}eyt(t){return 0<=(t=Math.floor(t))&&t<this.Xnt.length}iyt(){return this.Kmt}s1t(){return this.Kmt.filter(t=>t instanceof fo.dmt)}Dmt(e){e.M0t(this);let i=this.Zmt,n=0===i.length;for(let t=0,s=i.length;t<s;++t){const r=i[t];if(e.C0t(t),r.YW())throw new Error("trigger cannot be used as sub-event to a loop");if(r.FI())n=!0;else if(!this.Xmt)return!1}return!this.Xmt||n}Lmt(t,s){t.M0t(this),t.C0t(s),this.Zmt[s].FI()&&(this.Qmt(t,0)&&this.nyt(t),t._0t(!0))}*Bmt(e){e.M0t(this);let i=this.Zmt,n=0===i.length;for(let t=0,s=i.length;t<s;++t){const r=i[t];if(e.C0t(t),r.YW())throw new Error("trigger cannot be used as sub-event to a loop");if(r.Amt()?r.FI():yield*r.P1t())n=!0;else if(!this.Xmt)return!1}return!this.Xmt||n}*Nmt(t,s){t.M0t(this),t.C0t(s);let e=this.Zmt[s];if(e.Amt()?e.FI():yield*e.P1t())(this.ryt()?this.Qmt(t,0):yield*this.tgt(t,0))&&(this.hyt()?this.nyt():yield*this.oyt()),t._0t(!0)}FI(t){t.M0t(this),this.$mt||t.E0t(!1),this.Xmt?this.ayt(t):this.lyt(t)}*P1t(t){(this.jgt()||this.uf.uyt())&&(yield this),t.M0t(this),this.$mt||t.E0t(!1),this.Xmt?yield*this.cyt(t):yield*this.fyt(t)}ayt(e){let i=this.Zmt,n=0===i.length;for(let t=0,s=i.length;t<s;++t){const r=i[t];if(!r.lmt()){e.C0t(t);const h=r.FI();n=n||h}}e._0t(n),n&&(this.Qmt(e,0)&&this.nyt(e),this.qmt)&&e.E0t(!0)}*cyt(e){let i=this.Zmt,n=0===i.length;for(let s=0,t=i.length;s<t;++s){const r=i[s];if(!r.lmt()){e.C0t(s);let t;t=r.Amt()?r.FI():yield*r.P1t(),n=n||t}}if(e._0t(n),n)(this.ryt()?this.Qmt(e,0):yield*this.tgt(e,0))&&(this.hyt()?this.nyt():yield*this.oyt()),this.qmt&&e.E0t(!0)}lyt(e){const i=this.Zmt;for(let t=0,s=i.length;t<s;++t){const n=i[t],r=(e.C0t(t),n.FI());if(!r)return void e._0t(!1)}e._0t(!0),this.Qmt(e,0)&&this.nyt(e),e.P0t()&&this.qmt&&e.E0t(!0)}*fyt(e){const i=this.Zmt;for(let t=0,s=i.length;t<s;++t){const n=i[t];e.C0t(t);if(!(n.Amt()?n.FI():yield*n.P1t()))return void e._0t(!1)}e._0t(!0);(this.ryt()?this.Qmt(e,0):yield*this.tgt(e,0))&&(this.hyt()?this.nyt():yield*this.oyt()),e.P0t()&&this.qmt&&e.E0t(!0)}Egt(e,i){const n=this.Xnt;for(let t=i,s=n.length;t<s;++t){const r=n[t];e.G0t(t),r.FI()}return!0}*Rgt(e,i){const n=this.Xnt;for(let t=i,s=n.length;t<s;++t){const r=n[t];e.G0t(t),r.Amt()?r.FI():yield*r.P1t()}return!0}_gt(e,i){const n=this.cF(),r=this.Xnt;for(let t=i,s=r.length;t<s;++t){const h=r[t],o=(e.G0t(t),h.FI());if(h.dyt()&&!0===o)return!1;h.pyt()&&o instanceof Promise&&n.opt(o)}return!0}*Pgt(e,i){const n=this.cF(),r=this.Xnt;for(let s=i,t=r.length;s<t;++s){const h=r[s];e.G0t(s);let t;if(t=h.Amt()?h.FI():yield*h.P1t(),h.dyt()&&!0===t)return!1;h.pyt()&&t instanceof Promise&&n.opt(t)}return!0}myt(t){this.Qmt(t,t.I0t())&&this.nyt()}*gyt(t){(yield*this.tgt(t,t.I0t()))&&(yield*this.oyt())}nyt(){if(this.Kmt.length){const t=this.y1t()&&this.uf._mt(),s=t?performance.now():0,e=this.Dft,i=e.$j(this);this.zmt?this.yyt(i):this.wyt(i),e.h8(),t&&(this.Qpt.tmt+=performance.now()-s)}}yyt(i){const n=this.sgt,r=this.Jmt,h=this.cF(),o=this.Kmt;for(let t=0,s=o.length,e=s-1;t<s;++t){const a=o[t],l=a.qj(),u=!r||!n&&t<e;u&&h.t8(l),a.FI(i),u?h.e8(l):h.z1t(l)}}wyt(e){const i=this.Kmt;for(let t=0,s=i.length;t<s;++t)i[t].FI(e)}*oyt(){if(this.Kmt.length){const t=this.Dft,s=t.$j(this);this.zmt?yield*this.Syt(s):yield*this.byt(s),t.h8()}}*Syt(i){const n=this.sgt,r=this.Jmt,h=this.cF(),o=this.Kmt;for(let t=0,s=o.length,e=s-1;t<s;++t){const a=o[t],l=a.qj(),u=!r||!n&&t<e;u&&h.t8(l),yield*a.P1t(i),u?h.e8(l):h.z1t(l)}}*byt(e){const i=this.Kmt;for(let t=0,s=i.length;t<s;++t)yield*i[t].P1t(e)}s8(e,i){i.x0t();const n=this.Zmt;if(!this.i0t())for(let t=e.T0t()+1,s=n.length;t<s;++t){const r=n[t],h=(i.C0t(t),r.FI());if(!h)return!1}return this.Qmt(i,0)&&this.nyt(i),!0}*vyt(e,i){i.x0t();const n=this.Zmt;if(!this.i0t())for(let t=e.T0t()+1,s=n.length;t<s;++t){const r=n[t];i.C0t(t);if(!(r.Amt()?r.FI():yield*r.P1t()))return!1}return(this.ryt()?this.Qmt(i,0):yield*this.tgt(i,0))&&(this.hyt()?this.nyt():yield*this.oyt()),!0}Amt(){return!this.jgt()&&!this.uf.uyt()&&this.ogt.dgt}ryt(){return!this.uf.uyt()&&this.ogt.cgt}hyt(){return!this.uf.uyt()&&this.ogt.fgt}xyt(e){if(this.P4()){const i=this.Omt();for(let t=0,s=i.length;t<s;++t)if(!i[t].Dmt(e))return!1}return!0}*Myt(e){if(this.P4()){const i=this.Omt();for(let t=0,s=i.length;t<s;++t)if(!(yield*i[t].Bmt(e)))return!1}return!0}Tyt(t,s,e){if(0<s.length)if(e){const i=s.map(t=>t.ne(0));t.Kdt().$j(),this.Vmt.Cyt(i)}else this.Vmt.Iyt(s);else e&&t.Kdt().$j()}Gyt(t,s,e,i){let n,r,h=0<t.length,o=null,a=this.uf,l=this.Dft,u=a.cF(),c=this.Vmt,f=c.pyt(),d=u.j1t(),p=1<d;if(this.Tyt(u,s,p),h&&(e?u.t8(t):u.q1t(t)),null!==i){if(i._yt){const g=e?i._yt.jL():i._yt.J1t().Aft(),y=i.Pyt.jL();y.Zft(g.VL()),y.s0t(),e||i.Pyt.Eyt()}else if(i.Ryt){const w=i.Ryt.jL();w.Zft(i.Ayt),w.s0t()}i.kyt&&(o=u.X1t(t))}const m=l.$j(this);return e&&m.N0t(t),this.xyt(m)&&(m.M0t(this),f&&([r,n]=c.Fyt()),this.lyt(m),f)&&c.Oyt(r),l.h8(),p&&u.Kdt().h8(),null!==o&&u.e8(o),h&&u.e8(t),u.H1t(),f||u.upt(),n}*Dyt(t,s,e,i){let n,r,h=((this.jgt()||this.uf.uyt())&&(yield this),0<t.length),o=null,a=this.uf,l=this.Dft,u=a.cF(),c=this.Vmt,f=c.pyt(),d=u.j1t(),p=1<d;if(this.Tyt(u,s,p),h&&(e?u.t8(t):u.q1t(t)),null!==i){if(i._yt){const g=e?i._yt.jL():i._yt.J1t().Aft(),y=i.Pyt.jL();y.Zft(g.VL()),y.s0t(),e||i.Pyt.Eyt()}else if(i.Ryt){const w=i.Ryt.jL();w.Zft(i.Ayt),w.s0t()}i.kyt&&(o=u.X1t(t))}const m=l.$j(this);return e&&m.N0t(t),(yield*this.Myt(m))&&(m.M0t(this),f&&([r,n]=c.Fyt()),yield*this.fyt(m),f)&&c.Oyt(r),l.h8(),p&&u.Kdt().h8(),null!==o&&u.e8(o),h&&u.e8(t),u.H1t(),f||u.upt(),n}Lyt(t,s){const e=this.gF(),i=0<e.length,n=this.uf,r=this.Dft,h=n.cF(),o=h.j1t(),a=1<o,l=(a&&h.Kdt().$j(),this.Vmt.Cyt(t),i&&(s?h.t8(e):h.q1t(e)),r.$j(this));this.xyt(l)&&(l.M0t(this),this.lyt(l)),r.h8(),a&&h.Kdt().h8(),i&&h.e8(e),h.H1t(),h.upt()}*Byt(t,s){(this.jgt()||this.uf.uyt())&&(yield this);const e=this.gF(),i=0<e.length,n=this.uf,r=this.Dft,h=n.cF(),o=h.j1t(),a=1<o,l=(a&&h.Kdt().$j(),this.Vmt.Cyt(t),i&&(s?h.t8(e):h.q1t(e)),r.$j(this));(yield*this.Myt(l))&&(l.M0t(this),yield*this.fyt(l)),r.h8(),a&&h.Kdt().h8(),i&&h.e8(e),h.H1t(),h.upt()}SF(t,s,e,i,...n){let r,h,o=0<t.length,a=this.uf,l=this.Dft,u=a.cF(),c=this.Vmt,f=c.pyt(),d=u.j1t(),p=1<d,m=(p&&u.Kdt().$j(),0<n.length&&this.Vmt.Cyt(n),o&&(s?u.t8(t):u.q1t(t)),l.$j(this));return m.F0t(e,i),l.u0t(m),a.Kj(!1),this.xyt(m)&&(m.M0t(this),f&&([h,r]=c.Fyt()),this.lyt(m),f)&&c.Oyt(h),a.Kj(!0),l.h8(),l.c0t(),p&&u.Kdt().h8(),o&&u.e8(t),u.H1t(),f||u.upt(),r||m.O0t()}}}{let i=self.Bs,t=[],s=!1;i.mmt=class extends i.ur{constructor(t,s,e){super();const i=t.ZO(),n=t.cF(),r=(this.V9=t,this.r0t=n,this.uf=t.ZO(),this.Wmt=s,i.Nyt(e[1]));this.Wyt=r,this.hgt=e[2],this.V9.Imt(this,this.hgt),this.ogt=i.kN()?{agt:e[3][0],lgt:e[3][1]}:null}static mM(t,s,e){return i.dr(i.mmt,t,s,e)}kdt(){const t=this.Wyt,s=this.uf.cF().e1t(this);this.Wyt=t.bind(null,this.uf.iL(),s)}P4(){return this.Wmt}t1t(){return this.Wmt}TX(){return this.V9}Wgt(){return this.hgt}Vgt(){return this.ogt&&this.ogt.lgt}jgt(){return this.Vgt()&&this.ogt.agt}Hgt(t){this.ogt.agt=!!t}vmt(){return!1}qj(){return t}gF(){return this.Wmt?this.Wmt.gF():t}FI(t){t.M0t(this),this.r0t.opt(this.Vyt())}async Vyt(){try{await this.Wyt()}catch(t){console.error(`Unhandled exception running script %c${this.TX().Qc()}, event ${this.Wgt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),s||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),s=!0)}}*P1t(t){t.M0t(this),(this.jgt()||this.uf.uyt())&&(yield this),this.FI(t)}Amt(){return!this.jgt()&&!this.uf.uyt()}static jyt(){return s}static Hyt(){s=!0}}}{const mo=self.Bs;mo.jpt=class extends mo.ur{constructor(t,s,e){super(),this.V9=t,this.uf=t.ZO(),this.Wmt=s,this.Uyt=0,this.zyt="",this.Jyt=0,this.qyt=[],this.Xyt=!0,this.$yt="",this._ft=null,this.Yyt=!1,this.Zyt=[],this.Kyt=!1,this.Qyt=!1,this.twt=0,this.swt=-1,this.ewt=new Map,this.iwt=mo.omt.mM(t,s,e),this.iwt.Ngt(this)}nwt(t){this.Uyt=0,this.zyt=t[0],this.Jyt=t[1],this.qyt=t[2].map(t=>mo.dmt.mM(this.V9,this,t)),this.Xyt=t[3],this.Qyt=t[4],this.Kyt=t[5]}rwt(t){this.Uyt=1,this.$yt=t[1],this._ft=this.uf.Rz(t[2]),this.iwt.ggt(this._ft),this.zyt=this._ft.Qc()+"."+this.$yt,this.Jyt=t[3],this.qyt=t[4].map(t=>mo.dmt.mM(this.V9,this,t)),this.Xyt=t[5],this.Qyt=t[6],this.Kyt=t[7],this._ft.hwt(this)}static cmt(t,s,e){const i=mo.dr(mo.jpt,t,s,e),n=e[1];return i.nwt(n),i}static fmt(t,s,e){const i=mo.dr(mo.jpt,t,s,e),n=e[1];return i.rwt(n),i}Fdt(){if(this._ft&&this._ft.eJ())for(const t of this._ft.xgt())if(t.owt(this.$yt)){this.Yyt=!0;break}}kdt(){for(const t of this.qyt)t.kdt();this.iwt.kdt(!1)}Vdt(){return this.Uyt}s1t(){return this.qyt}Hpt(){return this.qyt}pF(){return this.qyt.length}awt(t){this.Zyt.push(t)}lwt(){return this.Zyt}Iyt(e){const i=this.qyt;for(let t=0,s=i.length;t<s;++t)i[t].pnt(e[t].ne(0))}Cyt(e){const i=this.qyt;for(let t=0,s=i.length;t<s;++t)i[t].pnt(e[t])}uwt(){return this.qyt.map(t=>t.Ait())}P4(){return this.Wmt}t1t(){return this.Wmt}jdt(){return this.zyt}cwt(){return this.$yt}fwt(){return this.Yyt}vF(){return this.Jyt}D5(){return this._ft}Qu(){return this.Xyt}dF(){switch(this.Jyt){case 0:return null;case 2:return"";default:return 0}}mF(){return this.iwt}bF(){return this.Kyt}pyt(){return this.Qyt}Fyt(){const t=this.twt++;this.swt=t;let s,e=new Promise(t=>s=t);return this.ewt.set(t,{resolve:s,dwt:0}),[t,e]}Oyt(t){const s=this.ewt.get(t);0===s.dwt&&(s.resolve(),this.ewt.delete(t)),this.swt=-1}pwt(){const t=this.ewt.get(this.swt);return t.dwt++,this.swt}mwt(t){this.swt=t;const s=this.ewt.get(t);s.dwt--}gwt(t,s){const e=new Map,i=[];for(const n of this._ft.jL().VL()){const r=n.D5();if(r.owt(this.$yt)){const h=e.get(r);Array.isArray(h)?h.push(n):e.set(r,[n])}else i.push(n)}if(0<i.length&&this.iwt.Gyt(t,s,this.Kyt,{Ryt:this._ft,Ayt:i}),0<e.size)for(const[o,a]of e){const l=o.ywt(this.$yt).mF(),u=[...new Set([...t,...l.qj()])];l.Gyt(u,s,this.Kyt,{Ryt:o,Ayt:a})}}*wwt(t,s){const e=new Map,i=[];for(const n of this._ft.jL().VL()){const r=n.D5();if(r.owt(this.$yt)){const h=e.get(r);Array.isArray(h)?h.push(n):e.set(r,[n])}else i.push(n)}if(0<i.length&&(yield*this.iwt.Dyt(t,s,this.Kyt,{Ryt:this._ft,Ayt:i})),0<e.size)for(const[o,a]of e){const l=o.ywt(this.$yt).mF(),u=[...new Set([...t,...l.qj()])];yield*l.Dyt(u,s,this.Kyt,{Ryt:o,Ayt:a})}}}}{const go=self.Bs,yo=[];go.dmt=class extends go.ur{constructor(t,s,e){super();const i=t.cF();this.V9=t,this.r0t=i,this.uf=t.ZO(),this.Wmt=s,this.wdt=i.Kdt(),this.yr=e[1],this.wf=e[2],this.Swt=e[3],this.Bx=!!e[4],this.bwt=!!e[5],this.vwt=s instanceof go.jpt,this.EU=e[6],this.xwt=this.uf.i1t(e[8]),this.Mwt=t=>this.pnt(t),this.Twt=()=>this.Ait(),this.Cwt=!this.Wmt||this.Bx||this.bwt,this.Unt=this.Swt,this.Iwt=-1,this.Gwt()&&(this.Unt=this.Unt?1:0),!this._wt()||this.d2()||this.Dpt()||(this.Iwt=i.zdt(this)),i.Hdt(this)}static mM(t,s,e){return go.dr(go.dmt,t,s,e)}kdt(){if(this._wt()&&!this.d2()&&!this.Dpt()&&!this.Pwt()){const t=this.r0t.Vpt(this);t&&t.awt(this)}}Qc(){return this.yr}i1t(){return this.xwt}P4(){return this.Wmt}t1t(){return this.P4()}Vz(){return!this.P4()}_wt(){return!this.Vz()}Pwt(){return this.vwt}d2(){return this.Bx}Dpt(){return this.bwt}fi(){return 0===this.wf}Mi(){return 1===this.wf}Gwt(){return 2===this.wf}vmt(){return!1}uJ(){return this.EU}Jdt(){return this.Swt}qj(){return yo}FI(t){!this._wt()||this.d2()||this.Dpt()||this.pnt(this.Jdt())}Amt(){return!0}*P1t(t){this.FI(t)}pnt(t){this.fi()?"number"!=typeof t&&(t=parseFloat(t)):this.Mi()?"string"!=typeof t&&(t=t.toString()):this.Gwt()&&(t=t?1:0),this.Cwt?this.Unt=t:this.wdt.U0t()[this.Iwt]=t}Ait(){return this.Cwt?this.Unt:this.wdt.U0t()[this.Iwt]}Ewt(){let t=this.Ait();return this.Gwt()?!!t:t}p1t(){this.Unt=this.Swt}n1t(){return{configurable:!1,enumerable:!0,get:this.Twt,set:this.Mwt}}}}{const wo=self.Bs,So=[];wo.pmt=class extends wo.ur{constructor(t,s,e){super();const i=t.cF();this.V9=t,this.r0t=i,this.uf=t.ZO(),this.Wmt=s,this.Rwt=null,this.Awt=e[1],this.l0=!0}static mM(t,s,e){return wo.dr(wo.pmt,t,s,e)}kdt(){this.Rwt=this.r0t.YX(this.Awt),this.V9.xmt(this);let t=this.P4();for(;t;)t instanceof wo.omt&&t.y1t()&&t.Sgt(this),t=t.P4();this.Jgt(),this.uf.kN()&&this.V9.Wpt().children.push(this.Rwt.Wpt())}P4(){return this.Wmt}qj(){return So}Tmt(){return this.Rwt}FI(t){const s=!!this.P4(),e=this.uf.sJ();s&&this.r0t.q1t(e),this.Rwt.FI(),s&&this.r0t.e8(e)}*P1t(t){const s=!!this.P4(),e=this.uf.sJ();s&&this.r0t.q1t(e),yield*this.Rwt.P1t(),s&&this.r0t.e8(e)}Amt(){return!1}Cmt(){return this.l0}Jgt(){let t=this.P4();for(;t;){if(t instanceof wo.omt&&t.y1t()&&!t.Fpt())return void(this.l0=!1);t=t.P4()}this.l0=!0}}}{let a=function(t,s){return s<=t?t%s:(t<0&&(t<=-s&&(t%=s),t<0)&&(t+=s),t)};a;const bo=self.Bs;bo.kwt=class extends bo.ur{constructor(t){super(),this.Hv=t,this.uf=t.ZO()}kdt(){}static Fwt(t,s){const e=s[0],i=[Co,Mo,To,Io,vo,xo];return bo.dr(i[e],t,s)}};class vo extends bo.kwt{constructor(t,s){super(t),this.Owt=this.uf.m7(),this.Wyt=this.uf.Nyt(s[1]),this.Wyt!==bo.S$.w$.ort.random&&this.Wyt!==bo.S$.w$.ort.Dwt||this.Hv.Lwt()}Bwt(){return this.Owt.Nwt(this.Wyt,this.Owt)}}class xo extends bo.kwt{constructor(t,s){super(t),this.Wwt=null,this.zyt=s[1],this.Hv.Lwt()}kdt(){const t=this.uf.cF(),s=(this.Wwt=t.fF(this.zyt),this.zyt=null,this.Hv.mF()),e=this.Wwt.mF();this.Vwt=[...new Set([...s.gF(),...e.gF()])],this.Vwt=t.Udt(this.Vwt)}Bwt(){const t=this.Wwt;if(t.Qu()){const s=t.mF();return bo.omt.prototype.SF.bind(s,this.Vwt,t.bF(),t.vF(),t.dF())}{const e=t.dF();return()=>e}}}class Mo extends bo.kwt{constructor(t,s){super(t),this._ft=this.uf.Rz(s[1]),this.Wyt=this.uf.Nyt(s[2]),this.jwt=!!s[3],this.Dft=this.uf.cF().TF(),this.Hv.Hwt(this._ft)}Bwt(){return this._ft.RL().Nwt(this.Wyt,this._ft._L().IW())}Uwt(...t){const s=this._ft,e=s.jL().Uft(),i=e.length;if(0===i)return this.jwt?"":0;const n=a(this.Hv.zwt(),i);return this.Dft.Xj().A0t(s),this.Wyt.apply(e[n].IW(),t)}Jwt(t,...s){const e=this._ft,i=e.VL(),n=i.length;if(0===n||"number"!=typeof t)return this.jwt?"":0;const r=a(t,n);return this.Dft.Xj().A0t(e),this.Wyt.apply(i[r].IW(),s)}}class To extends bo.kwt{constructor(t,s){super(t),this._ft=this.uf.Rz(s[1]),this.qwt=s[3],this.jwt=!!s[2],this.Hv.Hwt(this._ft)}Xwt(){const t=this._ft.jL().Uft(),s=t.length;if(0===s)return this.jwt?"":0;const e=a(this.Hv.zwt(),s);return t[e].$wt(this.qwt)}Ywt(){const t=this._ft,s=t.jL().Uft(),e=s.length;if(0===e)return this.jwt?"":0;const i=a(this.Hv.zwt(),e),n=s[i],r=n.D5().Zwt(t.Kwt());return n.$wt(this.qwt+r)}Qwt(t){const s=this._ft,e=s.VL(),i=e.length;if(0===i||"number"!=typeof t)return this.jwt?"":0;let n=a(t,i),r=e[n],h=0;return s.eJ()&&(h=r.D5().Zwt(s.Kwt())),r.$wt(this.qwt+h)}}class Co extends bo.kwt{constructor(t,s){super(t),this._ft=this.uf.Rz(s[1]),this.tSt=this._ft.Bnt(s[2]),this.sSt=this._ft.pet(s[2]),this.Wyt=this.uf.Nyt(s[3]),this.jwt=!!s[4],this.Dft=this.uf.cF().TF(),this.Hv.Hwt(this._ft)}eSt(...t){const s=this._ft,e=s.jL().Uft(),i=e.length;if(0===i)return this.jwt?"":0;let n=a(this.Hv.zwt(),i),r=(this.Dft.Xj().A0t(s),e[n]),h=0;return s.eJ()&&(h=r.D5().iSt(s.Kwt())),this.Wyt.apply(r.Lnt()[this.sSt+h].IW(),t)}nSt(t,...s){const e=this._ft,i=e.VL(),n=i.length;if(0===n||"number"!=typeof t)return this.jwt?"":0;let r=a(t,n),h=(this.Dft.Xj().A0t(e),i[r]),o=0;return e.eJ()&&(o=h.D5().iSt(e.Kwt())),this.Wyt.apply(h.Lnt()[this.sSt+o].IW(),s)}}class Io extends bo.kwt{constructor(t,s){super(t),this.rSt=null,this.hSt=s[1]}kdt(){this.rSt=this.uf.cF().r1t(this.hSt)}oSt(){return this.rSt}}}{let r=function(t){const s=self.aSt[t];if(s)return s;throw new Error("invalid expression number")};r;const Go=self.Bs;Go.lSt=class extends Go.ur{constructor(t,s,e){super(),this.Hv=t,this.qg=e,this.wf=s,this.ne=null,this.uSt=!1,this.bwt=!1}static mM(t,s,e){const i=s[0],n=[_o,Po,Do,Ro,ko,Eo,Fo,_o,Ro,Ro,Lo,Bo,Do,Wo,Po,Oo,Ao,No,Vo,jo,Ho,Uo];return Go.dr(n[i],t,i,e,s)}kdt(){}Lwt(){this.uSt=!0}Hwt(t){this.uSt||!t||t.RL().rL()||(this.uSt=!0)}cSt(){return this.uSt}Ak(){return this.qg}ZO(){return this.Hv.ZO()}mF(){return this.Hv.mF()}Dpt(){return this.bwt}fSt(){return 4===this.wf}};class _o extends Go.lSt{constructor(t,s,e,i){super(t,s,e),this.dSt=0;const n=i[1];this.pSt=n[0],this.mSt=[],this.gSt=null;for(let t=1,s=n.length;t<s;++t)this.mSt.push(Go.kwt.Fwt(this,n[t]));this.mSt.length?this.ne=this.ySt:(this.ne=r(this.pSt),this.bwt=!0)}wSt(t){if(t<0||t>=this.mSt.length)throw new RangeError("invalid numbered node");return this.mSt[t]}kdt(){for(const s of this.mSt)s.kdt();const t=r(this.pSt);this.mSt.length?this.gSt=t(this):this.gSt=t}zwt(){return this.dSt}ySt(t){return this.dSt=t,this.gSt()}}class Po extends _o{constructor(t,s,e,i){super(t,s,e,i),this.ne=this.SSt,14===s&&(this.mF().Tgt(),this.Hv instanceof Go.ygt)&&this.mF().Lgt()}SSt(t){this.dSt=t;const s=this.gSt();return"string"==typeof s?s:""}bSt(){return r(this.pSt)()}}class Eo extends _o{constructor(t,s,e,i){super(t,s,e,i),2<=t.vSt()?this.ne=this.mB:this.ne=this.AO,this.bwt=!1}AO(t){this.dSt=t;const s=this.gSt(),e=this.ZO().PO();return e.AO(s)}mB(t){const s=this.AO(t);return s?s.mB():null}}class Ro extends Go.lSt{constructor(t,s,e,i){super(t,s,e),this.xSt=i[1],this.ne=this.MSt,this.bwt=!0}MSt(){return this.xSt}}class Ao extends Go.lSt{constructor(t,s,e,i){super(t,s,e),this.TSt=i[1],this.ne=this.CSt,this.bwt=!0}CSt(){return this.TSt}}class ko extends Go.lSt{constructor(t,s,e,i){super(t,s,e),this._ft=this.ZO().Rz(i[1]),2<=t.vSt()?this.ne=this.CL:this.ne=this.D5;const n=this.mF();n.ggt(this._ft),this.Hv instanceof Go.ygt?n.Lgt():n.P4()&&n.P4().Lgt(),this.bwt=!0}D5(){return this._ft}CL(){return this._ft?this._ft.CL():null}}class Fo extends Go.lSt{constructor(t,s,e,i){super(t,s,e),this.IU=this.ZO().fO().lY(i[1]),2<=t.vSt()?this.ne=this.uO:this.ne=this.dO,this.bwt=!0}dO(){return this.IU}uO(){return this.IU?this.IU.uO():null}}class Oo extends Go.lSt{constructor(t,s,e,i){super(t,s,e),this.cK=this.ZO().mtt().SZ(i[1]),2<=t.vSt()?this.ne=this.Est:this.ne=this.Kst,this.bwt=!0}Kst(){return this.cK}Est(){return this.cK?this.cK.Est():null}}class Do extends Go.lSt{constructor(t,s,e,i){super(t,s,e),this.ISt=i[1],this.ne=this.GSt,this.bwt=!0}GSt(){return this.ISt}}class Lo extends Go.lSt{constructor(t,s,e,i){super(t,s,e),this._St=i[1];const n=this.Hv.D5();this.Hv instanceof Go.mgt&&this.Hv.d2()||!n||!n.eJ()?(this.ne=this.PSt,this.bwt=!0):(this.ne=this.ESt,this.Lwt())}PSt(){return this._St}ESt(t){t=t||0;let s=this.Hv.D5(),e=s.jL(),i=e.VL(),n=null;if(i.length)n=i[t%i.length].D5();else if(e.jft()){const r=e.Hft();n=r[t%r.length].D5()}else{if(!(0<s.UL()))return 0;{const h=s.VL();n=h[t%h.length].D5()}}return this._St+n.Zwt(s.Kwt())}}class Bo extends Go.lSt{constructor(t,s,e,i){super(t,s,e),this.hSt=i[1],this.rSt=null,2<=t.vSt()?this.ne=this.RSt:this.ne=this.ASt,this.bwt=!0}kdt(){this.rSt=this.ZO().cF().r1t(this.hSt)}ASt(){return this.rSt}RSt(){return null}}class No extends Go.lSt{constructor(t,s,e,i){super(t,s,e),this.kSt=i[1],this.Wwt=null,2<=t.vSt()?this.ne=this.FSt:this.ne=this.OSt,this.bwt=!0}kdt(){this.Wwt=this.ZO().cF().fF(this.kSt),this.kSt=null}OSt(){return this.Wwt}FSt(){return null}}class Wo extends Go.lSt{constructor(t,s,e,i){super(t,s,e),this.DSt=[],this.LSt=[],this.bwt=!0;for(let t=1,s=i.length;t<s;++t){const n=Go.lSt.mM(this.Hv,i[t],0);this.DSt.push(n),this.LSt.push(0),n.Dpt()||(this.bwt=!1)}this.ne=this.BSt}kdt(){for(const t of this.DSt)t.kdt()}BSt(){const e=this.DSt,i=this.LSt;for(let t=0,s=e.length;t<s;++t)i[t]=e[t].ne(0);return i}}class Vo extends Go.lSt{constructor(t,s,e,i){super(t,s,e),this.NSt=i[1],this.ne=this.dnt,this.bwt=!0}dnt(){return this.NSt}}class jo extends Go.lSt{constructor(t,s,e,i){super(t,s,e),this.WSt=i[1],this.ne=this.VSt,this.bwt=!0}VSt(){return this.WSt}}class Ho extends _o{constructor(t,s,e,i){super(t,s,e,i),this.ne=this.sN,this.bwt=!1}sN(){return this.gSt()}}class Uo extends Go.lSt{constructor(t,s,e,i){super(t,s,e),this.lut=this.ZO()._ut().iut(i[1]),this.ne=this.jSt,this.bwt=!0}jSt(){return this.lut.Qc()}}}{let i=function(e,i){for(let t=0,s=e.length;t<s;++t)i[t]=e[t].ne(0)};i;const zo=self.Bs,Jo=[],qo=function(){};zo.mgt=class extends zo.ur{constructor(t,e,s){if(super(),this.iwt=t,this.uf=t.ZO(),this.qg=s,this.Wyt=this.uf.Nyt(e[1]),this.HSt=0<e[3],this.USt=2===e[3],this.zSt=!!e[4],this.JSt=!!e[5],this.Bx=!!e[6],this.EU=e[7],this.qSt=this.iwt.i0t(),this._ft=null,this.tSt=null,this.sSt=-1,this.Owt=null,this.FI=qo,this.P1t=qo,this.Zs=[],this.XSt=[],this.$St=!1,this.YSt=null,this.ZSt=null,this.ogt=this.uf.kN()?{agt:e[8][0],KSt:e[8][1]}:null,-1===e[0]?this.Owt=this.uf.m7():(this._ft=this.uf.Rz(e[0]),e[2]&&(this.tSt=this._ft.Bnt(e[2]),this.sSt=this._ft.pet(e[2])),this.iwt.P4()&&this.iwt.P4().Lgt()),10===e.length){let s=e[9];for(let t of s)this.Zs.push(zo.lSt.mM(this,t,this.Zs.length)),this.XSt.push(0)}0===this.Zs.length&&(this.Zs=Jo,this.XSt=Jo),this.iwt.cF().Bdt(this)}static mM(t,s,e){return zo.dr(zo.mgt,t,s,e)}kdt(){for(const t of this.Zs)t.kdt(),t.cSt()&&(this.$St=!0);this.USt?(this.FI=this.QSt,this.P1t=this.tbt):this.Owt?(this.sbt(),this.P1t=this.ebt):this._ft.RL().rL()?(this.ibt(),this.P1t=this.nbt):this.Bx?(this.FI=this.rbt,this.P1t=this.hbt):(this.FI=this.obt,this.P1t=this.abt)}sbt(){const t=this.Owt,s=this.Owt;this.lbt(t,s,this.ubt)}ibt(){const t=this._ft.RL(),s=this._ft._L().IW();this.lbt(t,s,this.cbt)}lbt(t,s,e){const i=this.Wyt,n=this.JSt,r=this.Zs;if(0===r.length){const h=t.Nwt(i,s);n?this.FI=function(){return zo.xor(h(),n)}:this.FI=h}else if(1===r.length){const o=r[0];if(!n&&o.Dpt())this.FI=t.fbt(i,s,o.ne(0));else{const a=t.Nwt(i,s);this.FI=function(){return zo.xor(a(o.ne(0)),n)}}}else if(2===r.length){const l=r[0],u=r[1];if(!n&&l.Dpt()&&u.Dpt())this.FI=t.dbt(i,s,l.ne(0),u.ne(0));else{const c=t.Nwt(i,s);this.FI=function(){return zo.xor(c(l.ne(0),u.ne(0)),n)}}}else if(3===r.length){const f=r[0],d=r[1],p=r[2];if(!n&&f.Dpt()&&d.Dpt()&&p.Dpt())this.FI=t.pbt(i,s,f.ne(0),d.ne(0),p.ne(0));else{const m=t.Nwt(i,s);this.FI=function(){return zo.xor(m(f.ne(0),d.ne(0),p.ne(0)),n)}}}else this.FI=e}uJ(){return this.EU}gmt(){return this.Wyt}D5(){return this._ft}DW(){return this.tSt}mbt(){return this.tSt?this.tSt.kW():this._ft?this._ft.RL():null}vSt(){const t=this.mbt();return t?t.gbt():1}mF(){return this.iwt}ZO(){return this.uf}Ak(){return this.qg}syt(){return this.Ak()}lmt(){return this.HSt}ymt(){return this.USt}ybt(){return this.JSt}YW(){return this.zSt}d2(){return this.Bx}wbt(){return this.ogt.agt}Sbt(){return!!this.Owt}Ygt(){return this.Sbt()||this._ft.RL().rL()}Zgt(){for(const t of this.Zs)if(t.fSt())return t.D5();return null}bbt(t){this.ogt.agt=!!t,this.iwt.Fgt()}vbt(){return this.ogt.KSt}Amt(){return!this.wbt()&&!this.uf.uyt()&&!this.vbt()}xbt(){return this.YSt||(this.YSt=new Map),this.YSt}Mbt(){return this.ZSt||(this.ZSt=new Map),this.ZSt}ubt(){const t=this.XSt;return i(this.Zs,t),zo.xor(this.Wyt.apply(this.Owt,t),this.JSt)}*ebt(){if((this.wbt()||this.uf.uyt())&&(yield this),this.vbt()){const s=this.XSt;i(this.Zs,s);let t=this.Wyt.apply(this.Owt,s);return zo.zo(t)&&(t=yield*t),zo.xor(t,this.JSt)}return this.FI()}cbt(){const t=this.XSt,s=(i(this.Zs,t),this._ft._L().IW());return zo.xor(this.Wyt.apply(s,t),this.JSt)}*nbt(){if((this.wbt()||this.uf.uyt())&&(yield this),this.vbt()){let t=this.XSt,s=(i(this.Zs,t),this._ft._L().IW()),e=this.Wyt.apply(s,t);return zo.zo(e)&&(e=yield*e),zo.xor(e,this.JSt)}return this.FI()}QSt(){return!0}*tbt(){return(this.wbt()||this.uf.uyt())&&(yield this),!0}Tbt(){return this.tSt?2<=this.tSt.kW().gbt()?this.tSt.OW():this.tSt:2<=this._ft.RL().gbt()?this._ft.CL():this._ft}rbt(){const t=this.XSt,s=(i(this.Zs,t),this.Wyt.apply(this.Tbt(),t));return this._ft.Eyt(),s}*hbt(){if((this.wbt()||this.uf.uyt())&&(yield this),this.vbt()){const s=this.XSt;i(this.Zs,s);let t=this.Wyt.apply(this.Tbt(),s);return zo.zo(t)&&(t=yield*t),this._ft.Eyt(),t}return this.FI()}obt(){const e=this.Zs,i=this.XSt,t=this._ft.jL();for(let t=0,s=e.length;t<s;++t){const n=e[t];n.cSt()||(i[t]=n.ne(0))}return t.Wft()?this.Cbt(t):this.Ibt(t)}*abt(){return(this.wbt()||this.uf.uyt())&&(yield this),this.obt()}Gbt(e){const i=this.Zs,n=this.XSt;for(let t=0,s=i.length;t<s;++t){const r=i[t];r.cSt()&&(n[t]=r.ne(e))}}Cbt(e){const t=this._ft,i=t.eJ(),n=t.Kwt(),r=this.sSt,h=0<=r,o=t.VL(),a=this.$St,l=this.XSt,u=this.Wyt,c=this.JSt,f=this.qSt&&!this.HSt;e.Nft();for(let s=0,t=o.length;s<t;++s){const d=o[s];a&&this.Gbt(s);let t;if(h){const p=i?d.D5().iSt(n):0;t=u.apply(d.Lnt()[r+p].IW(),l)}else t=u.apply(d.IW(),l);zo.xor(t,c)?e.zft(d):f&&e.Jft(d)}return t._bt(!0),e.qft(!1),t.Eyt(),e.Vft()}Ibt(t){let s=this._ft,e=s.eJ(),i=s.Kwt(),n=s.X5(),r=this.sSt,h=0<=r,o=this.$St,a=this.XSt,l=this.Wyt,u=this.JSt,c=this.qSt&&!this.HSt,f=t.Xft(),d=t.$ft(),p=c&&!this.iwt.$gt(this),m=p?d:f,g=0,y=!1;for(let s=0,t=m.length;s<t;++s){const S=m[s];o&&this.Gbt(s);let t;if(h){const b=e?S.D5().iSt(i):0;t=l.apply(S.Lnt()[r+b].IW(),a)}else t=l.apply(S.IW(),a);zo.xor(t,u)?(y=!0,p?(f.push(S),n&&S.Pbt()):(m[g]=S,n&&S.Ebt(g),++g)):p?(m[g]=S,n&&S.Rbt(g),++g):c&&(d.push(S),n)&&S.Abt()}zo.Vh(m,g),n&&s.kbt(p,g);const w=y;return p&&!y&&(y=this.Fbt(f)),s._bt(w||c),c?y:t.Vft()}Fbt(e){const t=this._ft,i=t.eJ(),n=t.Kwt(),r=this.$St,h=this.sSt,o=0<=h,a=this.XSt,l=this.Wyt,u=this.JSt;for(let s=0,t=e.length;s<t;++s){const c=e[s];r&&this.Gbt(s);let t;if(o){const f=i?c.D5().iSt(n):0;t=l.apply(c.Lnt()[h+f].IW(),a)}else t=l.apply(c.IW(),a);if(zo.xor(t,u))return!0}return!1}Obt(t,s){return this.Zs[t].ne(s)}wmt(){const t=this.Zs;if(t.length)return t[0].bSt();throw new Error("no parameters")}G9(){if(!this.YSt||!this.YSt.size)return null;const s={};for(const[e,i]of this.YSt.entries()){let t=i;"collmemory"===e&&(t=[...i.entries()].map(t=>[t[0].Z5(),t[1].Z5(),t[2]])),s[e]=t}return{ex:s}}_9(t){if(this.YSt&&(this.YSt.clear(),this.YSt=null),t){const s=this.uf,e=t.ex;if(e){const i=this.xbt();i.clear();for(const[n,r]of Object.entries(e)){let t=r;"collmemory"===n&&(t=zo.dr(zo.tc,r.map(t=>[s.IO(t[0]),s.IO(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),i.set(n,t)}}}}}}{let n=function(e,i){for(let t=0,s=e.length;t<s;++t)i[t]=e[t].ne(0)};n;const Xo=self.Bs,$o=[],Yo=function(){},Zo=function*(){};Xo.ygt=class extends Xo.ur{constructor(t,s,e){super();const i=(this.iwt=t).ZO(),n=(this.uf=i,this.qg=e,this.EU=4<=s.length?s[3]:-1,this.Dbt=5<=s.length?255&s[4]:0,this.Lbt=5<=s.length?s[4]>>8:0,this.Wyt=null,this._ft=null,this.tSt=null,this.sSt=-1,this.Owt=null,this.Bbt="",this.Nbt=null,this.Wbt=null,this.FI=Yo,this.P1t=Yo,this.Zs=[],this.XSt=[],this.$St=!1,this.YSt=null,this.ZSt=null,-3===s[0]),r=n?s[2]:s[5];if(this.ogt=i.kN()||n?{agt:r[0],KSt:r[1],index:r[2]}:null,-1===s[0])this.Owt=i.m7(),this.Wyt=i.Nyt(s[1]);else if(-2===s[0])this.Bbt=s[1];else if(n){const h=i.Nyt(s[1]);this.Wyt=h,this.FI=this.Vbt,this.P1t=this.jbt,this.Lbt|=8}else this._ft=i.Rz(s[0]),4&this.Lbt?(this.Bbt=s[1],this.Nbt=i.Rz(s[2])):(s[2]&&(this.tSt=this._ft.Bnt(s[2]),this.sSt=this._ft.pet(s[2])),this.Wyt=i.Nyt(s[1]));if(7===s.length){const o=s[6];for(const a of o)this.Zs.push(Xo.lSt.mM(this,a,this.Zs.length)),this.XSt.push(0)}0===this.Zs.length&&(this.Zs=$o,this.XSt=$o),this.Hbt()&&(this.iwt.Tgt(),this.iwt.Lgt()),this.iwt.cF().Ndt(this)}static mM(t,s,e){return Xo.dr(Xo.ygt,t,s,e)}kdt(){for(const t of this.Zs)t.kdt(),t.cSt()&&(this.$St=!0);if(this.Owt)this.sbt(),this.P1t=this.ebt;else if(this.Bbt)4&this.Lbt?this.Ubt():this.zbt(),this.Bbt="",this.Nbt=null;else if(this.FI===this.Vbt){const s=this.Wyt,e=this.uf.cF().e1t(this.iwt);this.Wyt=s.bind(null,this.uf.iL(),e)}else this.tSt?this.pyt()?(this.FI=this.Jbt,this.P1t=this.qbt):(this.FI=this.Xbt,this.P1t=this.$bt):this._ft.RL().rL()?(this.ibt(),this.P1t=this.nbt):this.d2()?(this.FI=this.Ybt,this.P1t=this.Zbt):this.pyt()?(this.FI=this.Kbt,this.P1t=this.Qbt):this.tvt()?(this.FI=this.svt,this.P1t=this.evt):this.Zs.length?this.Zs.every(t=>t.cSt())?(this.FI=this.ivt,this.P1t=this.nvt):this.$St?(this.FI=this.rvt,this.P1t=this.hvt):this.Zs.every(t=>t.Dpt())?(n(this.Zs,this.XSt),this.FI=this.ovt,this.P1t=this.avt):(this.FI=this.lvt,this.P1t=this.uvt):(this.FI=this.ovt,this.P1t=this.avt)}sbt(){const t=this.Owt,s=this.Owt;this.lbt(t,s,this.ubt)}ibt(){const t=this._ft.RL(),s=this._ft._L().IW();this.lbt(t,s,this.cbt)}zbt(){const t=this.iwt.cF(),e=t.fF(this.Bbt);if(e.Qu()){const i=0!=(2&this.Lbt);this.Wbt=e.mF();let s=[...new Set([...this.iwt.gF(),...this.Wbt.gF()])];s=t.Udt(s);const n=!e.bF()&&this.cvt()?{kyt:!0}:null;if(this.FI=Xo.omt.prototype.Gyt.bind(this.Wbt,s,this.Zs,i,n),this.uf.kN()){const r=this;this.P1t=function*(){(r.wbt()||r.uf.uyt())&&(yield r);const t=yield*r.Wbt.Dyt(s,r.Zs,i,n);return t}}else this.P1t=Zo}else this.FI=Yo,this.P1t=Zo}Ubt(){const r=this.iwt.cF(),h=r.l1t(this.Nbt,this.Bbt);if(h.Qu()){const o=0!=(2&this.Lbt);this.Wbt=h.mF();let s=[...new Set([...this.iwt.gF(),...this.Wbt.gF(),this._ft,h.D5()])],t=(s=r.Udt(s),!this._ft.eJ()&&!h.D5().eJ()),e=!this._ft.eJ()&&h.D5().eJ(),i=this._ft.eJ(),n=null;if(!h.bF()&&this.cvt()&&((n=n||{}).kyt=!0),!e&&o||((n=n||{})._yt=this._ft,n.Pyt=h.D5()),t||e||i&&!h.fwt()?this.FI=Xo.omt.prototype.Gyt.bind(this.Wbt,s,this.Zs,o,n):i&&(this.FI=Xo.jpt.prototype.gwt.bind(h,s,this.Zs)),this.uf.kN()){const a=this;t||e||i&&!h.fwt()?this.P1t=function*(){(a.wbt()||a.uf.uyt())&&(yield a);const t=yield*a.Wbt.Dyt(s,a.Zs,o,n);return t}:i&&(this.P1t=function*(){(a.wbt()||a.uf.uyt())&&(yield a);const t=yield*h.wwt(s,a.Zs);return t})}else this.P1t=Zo}else this.FI=Yo,this.P1t=Zo}lbt(t,s,e){const i=this.Wyt,n=this.Zs;if(0===n.length)this.FI=t.Nwt(i,s);else if(1===n.length){const r=n[0];if(r.Dpt())this.FI=t.fbt(i,s,r.ne(0));else{const h=t.Nwt(i,s);this.FI=function(){return h(r.ne(0))}}}else if(2===n.length){const o=n[0],a=n[1];if(o.Dpt()&&a.Dpt())this.FI=t.dbt(i,s,o.ne(0),a.ne(0));else{const l=t.Nwt(i,s);this.FI=function(){return l(o.ne(0),a.ne(0))}}}else if(3===n.length){const u=n[0],c=n[1],f=n[2];if(u.Dpt()&&c.Dpt()&&f.Dpt())this.FI=t.pbt(i,s,u.ne(0),c.ne(0),f.ne(0));else{const d=t.Nwt(i,s);this.FI=function(){return d(u.ne(0),c.ne(0),f.ne(0))}}}else this.FI=e}uJ(){return this.EU}pyt(){return 0!=(8&this.Lbt)}dyt(){return 0!=(16&this.Lbt)}tvt(){return 1===this.Dbt}d2(){return 2===this.Dbt}Hbt(){return 0!=(1&this.Lbt)}Ggt(){return this.pyt()||this.dyt()}D5(){return this._ft}mbt(){return this.tSt?this.tSt.kW():this._ft?this._ft.RL():null}vSt(){const t=this.mbt();return t?t.gbt():1}mF(){return this.iwt}cvt(){let t=this.iwt;do{if(t instanceof Xo.jpt&&t.bF())return!0}while(t=t.t1t());return!1}ZO(){return this.uf}Ak(){return this.qg}syt(){return this.ogt.index}wbt(){return this.ogt.agt}bbt(t){this.ogt.agt=!!t,this.iwt.Fgt()}vbt(){return this.ogt.KSt}Amt(){return!this.wbt()&&!this.uf.uyt()&&!this.vbt()}xbt(){return this.YSt||(this.YSt=new Map),this.YSt}Mbt(){return this.ZSt||(this.ZSt=new Map),this.ZSt}ubt(){const t=this.XSt;return n(this.Zs,t),this.Wyt.apply(this.Owt,t)}*ebt(){if((this.wbt()||this.uf.uyt())&&(yield this),this.vbt()){const t=this.XSt,s=(n(this.Zs,t),yield*this.Wyt.apply(this.Owt,t));return s}return this.FI()}cbt(){const t=this.XSt;return n(this.Zs,t),this.Wyt.apply(this._ft._L().IW(),t)}*nbt(){if((this.wbt()||this.uf.uyt())&&(yield this),this.vbt()){const t=this.XSt,s=(n(this.Zs,t),yield*this.Wyt.apply(this._ft._L().IW(),t));return s}return this.FI()}ovt(){const e=this.XSt,i=this._ft.jL().VL();for(let t=0,s=i.length;t<s;++t)this.Wyt.apply(i[t].IW(),e)}*avt(){if((this.wbt()||this.uf.uyt())&&(yield this),this.vbt()){const e=this.XSt,i=this._ft.jL().VL();for(let t=0,s=i.length;t<s;++t)yield*this.Wyt.apply(i[t].IW(),e)}else this.ovt()}lvt(){const e=this.XSt,i=(n(this.Zs,e),this._ft.jL().VL());for(let t=0,s=i.length;t<s;++t)this.Wyt.apply(i[t].IW(),e)}*uvt(){if((this.wbt()||this.uf.uyt())&&(yield this),this.vbt()){const e=this.XSt,i=(n(this.Zs,e),this._ft.jL().VL());for(let t=0,s=i.length;t<s;++t)yield*this.Wyt.apply(i[t].IW(),e)}else this.lvt()}ivt(){const i=this.Zs,n=this.XSt,s=this.Wyt,r=this._ft.jL().VL();for(let e=0,t=r.length;e<t;++e){const h=r[e];for(let t=0,s=i.length;t<s;++t)n[t]=i[t].ne(e);s.apply(h.IW(),n)}}*nvt(){if((this.wbt()||this.uf.uyt())&&(yield this),this.vbt()){const i=this.Zs,n=this.XSt,s=this.Wyt,r=this._ft.jL().VL();for(let e=0,t=r.length;e<t;++e){const h=r[e];for(let t=0,s=i.length;t<s;++t)n[t]=i[t].ne(e);yield*s.apply(h.IW(),n)}}else this.ivt()}rvt(){const i=this.Zs,n=this.XSt,s=this.Wyt,r=this._ft.jL().VL();for(let t=0,s=i.length;t<s;++t){const e=i[t];e.cSt()||(n[t]=e.ne(0))}for(let e=0,t=r.length;e<t;++e){const h=r[e];for(let t=0,s=i.length;t<s;++t){const o=i[t];o.cSt()&&(n[t]=o.ne(e))}s.apply(h.IW(),n)}}*hvt(){if((this.wbt()||this.uf.uyt())&&(yield this),this.vbt()){const i=this.Zs,n=this.XSt,s=this.Wyt,r=this._ft.jL().VL();for(let t=0,s=i.length;t<s;++t){const e=i[t];e.cSt()||(n[t]=e.ne(0))}for(let e=0,t=r.length;e<t;++e){const h=r[e];for(let t=0,s=i.length;t<s;++t){const o=i[t];o.cSt()&&(n[t]=o.ne(e))}yield*s.apply(h.IW(),n)}}else this.rvt()}svt(){const i=this.Zs,n=this.XSt,s=this.Wyt,t=this._ft,e=t.fvt(),r=t.jL().VL();e.dvt(s);for(let e=0,t=r.length;e<t;++e){const h=r[e];for(let t=0,s=i.length;t<s;++t)n[t]=i[t].ne(e);s.apply(h.IW(),n)}e.pvt(s)}*evt(){if((this.wbt()||this.uf.uyt())&&(yield this),this.vbt()){const i=this.Zs,n=this.XSt,s=this.Wyt,t=this._ft,e=t.fvt(),r=t.jL().VL();e.dvt(s);for(let e=0,t=r.length;e<t;++e){const h=r[e];for(let t=0,s=i.length;t<s;++t)n[t]=i[t].ne(e);yield*s.apply(h.IW(),n)}e.pvt(s)}else this.svt()}mvt(){return this.tSt?2<=this.tSt.kW().gbt()?this.tSt.OW():this.tSt:2<=this._ft.RL().gbt()?this._ft.CL():this._ft}Ybt(){const t=this.XSt;return n(this.Zs,t),this.Wyt.apply(this.mvt(),t)}*Zbt(){if((this.wbt()||this.uf.uyt())&&(yield this),this.vbt()){const s=this.XSt;n(this.Zs,s);let t=this.Wyt.apply(this.mvt(),s);return Xo.zo(t)?yield*t:t}return this.Ybt()}Xbt(){const t=this._ft,s=t.eJ(),i=t.Kwt(),n=this.Zs,r=this.$St,h=this.XSt,o=this.Wyt,a=this.sSt,l=t.jL().VL();for(let t=0,s=n.length;t<s;++t){const e=n[t];e.cSt()||(h[t]=e.ne(0))}for(let e=0,t=l.length;e<t;++e){const u=l[e];if(r)for(let t=0,s=n.length;t<s;++t){const f=n[t];f.cSt()&&(h[t]=f.ne(e))}const c=s?u.D5().iSt(i):0;o.apply(u.Lnt()[a+c].IW(),h)}}*$bt(){if((this.wbt()||this.uf.uyt())&&(yield this),this.vbt()){const t=this._ft,s=t.eJ(),i=t.Kwt(),n=this.Zs,r=this.$St,h=this.XSt,o=this.Wyt,a=this.sSt,l=t.jL().VL();for(let t=0,s=n.length;t<s;++t){const e=n[t];e.cSt()||(h[t]=e.ne(0))}for(let e=0,t=l.length;e<t;++e){const u=l[e];if(r)for(let t=0,s=n.length;t<s;++t){const f=n[t];f.cSt()&&(h[t]=f.ne(e))}const c=s?u.D5().iSt(i):0;yield*o.apply(u.Lnt()[a+c].IW(),h)}}else this.Xbt()}Kbt(){const i=this.Zs,n=this.XSt,s=this.Wyt,r=this._ft.jL().VL(),h=[];for(let e=0,t=r.length;e<t;++e){const o=r[e];for(let t=0,s=i.length;t<s;++t)n[t]=i[t].ne(e);h.push(s.apply(o.IW(),n))}return Promise.all(h)}*Qbt(){if((this.wbt()||this.uf.uyt())&&(yield this),this.vbt()){const i=this.Zs,n=this.XSt,s=this.Wyt,r=this._ft.jL().VL(),h=[];for(let e=0,t=r.length;e<t;++e){const o=r[e];for(let t=0,s=i.length;t<s;++t)n[t]=i[t].ne(e);h.push(yield*s.apply(o.IW(),n))}return Promise.all(h)}return this.Kbt()}Jbt(){const t=this._ft,s=t.eJ(),i=t.Kwt(),n=this.Zs,r=this.XSt,h=this.Wyt,o=this.sSt,a=t.jL().VL(),l=[];for(let e=0,t=a.length;e<t;++e){const u=a[e];for(let t=0,s=n.length;t<s;++t)r[t]=n[t].ne(e);const c=s?u.D5().iSt(i):0;l.push(h.apply(u.Lnt()[o+c].IW(),r))}return Promise.all(l)}*qbt(){if((this.wbt()||this.uf.uyt())&&(yield this),this.vbt()){const t=this._ft,s=t.eJ(),i=t.Kwt(),n=this.Zs,r=this.XSt,h=this.Wyt,o=this.sSt,a=t.jL().VL(),l=[];for(let e=0,t=a.length;e<t;++e){const u=a[e];for(let t=0,s=n.length;t<s;++t)r[t]=n[t].ne(e);const c=s?u.D5().iSt(i):0;l.push(yield*h.apply(u.Lnt()[o+c].IW(),r))}return Promise.all(l)}return this.Jbt()}async Vbt(){try{await this.Wyt()}catch(t){console.error(`Unhandled exception running script %c${this.iwt.TX().Qc()}, event ${this.iwt.Wgt()}, action ${this.syt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),Xo.mmt.jyt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),Xo.mmt.Hyt())}}*jbt(){return(this.wbt()||this.uf.uyt())&&(yield this),this.Vbt()}G9(){return this.YSt&&this.YSt.size?{ex:Xo.jo(this.YSt)}:null}_9(t){if(this.YSt&&(this.YSt.clear(),this.YSt=null),t){const s=t.ex;s&&(this.YSt=Xo.Ho(s))}}}}{let d=function(t){return t instanceof o?w.vB(t):t.eV()},u=function(t){return d(t).RO()},n=function(t){return w.vB(t)},m=function(t){return t instanceof a?w.vB(t):t},s=function(t){return t instanceof c?w.vB(t):t},_=function(t,s,e,i){const n=s.Z5(),r=e.Z5();n<r?t.Set(s,e,i):t.Set(e,s,i)},P=function(t,s,e){const i=s.Z5(),n=e.Z5();i<n?t.nc(s,e):t.nc(e,s)},E=function(t,s){t.rc(s)},R=function(t,s,e){const i=s.Z5(),n=e.Z5();return i<n?t.ne(s,e):t.ne(e,s)},i=function(t,s,e,i){if(!s)return!1;const n=0!==e||0!==i,r=t.RO(),h=w.Nk(),o=w.Xdt(),a=o.mF().i0t(),l=o.D5(),u=o.ybt(),c=s.jL(),f=l!==s;I=s,C=f&&!u;let d,p=0,m=0,g=G=!1;c.Wft()?(S.G(r.a4()),S.offset(e,i),h.gvt(r.AO(),s,S,b),d=b):!a||w.yvt()&&!c.$ft().length&&c.Xft().length?d=c.Xft():(d=c.$ft(),G=!0),n&&(p=r.xv(),m=r.Cv(),r.n4(e,i),r.t4());for(const y of d)if(h.wD(t,y)){if(g=!0,u)break;f&&F.add(y)}return n&&(r.s4(p,m),r.t4()),A.jh(b),g},e=function(t){const s=w.yF().i0t(),e=I.jL(),i=e.Xft(),n=e.$ft();e.Wft()?(e.Kft(F),s&&(A.jh(n),e.Qft(F,I.VL()))):s?G?e.t0t(F):(e.Qft(F,i),e.Kft(F)):e.Kft(F),I.Eyt()},v=function(t,s){C&&(s&&e(),F.clear(),I=null,C=!1)},r=function(t,s){const e=w.IO(s);if(e){const i=t.jL();if(i.Wft()||i.Xft().includes(e))if(t.eJ()){if(e.D5().wvt(t))return i.e0t(e),t.Eyt(),!0}else if(e.D5()===t)return i.e0t(e),t.Eyt(),!0}return!1},h=function(t,n){const r=t.jL();if(r.Wft()){r.qft(!1),r.Nft();const e=t.VL();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.Z5()===n?r.Jft(i):r.zft(i)}return t.Eyt(),!!r.Xft().length}{let e=r.Xft(),i=0;for(let t=0,s=e.length;t<s;++t){const h=e[t];(e[i]=h).Z5()===n?r.Jft(h):++i}return A.Vh(e,i),t.Eyt(),!!e.length}},A=(d,u,n,m,s,_,P,E,R,i,e,v,r,h,self.Bs),l=new A.qo,x={},M={},T={},w=null,o=(A.Svt=function(t){w=t},self.F5),a=self.PL,c=self.bB,S=(M.bvt=function(t,s){return A.compare(this.RO().xv(),t,s)},T.bvt=function(t,s){return A.compare(this.x,t,s)},M.vvt=function(t,s){return A.compare(this.RO().Cv(),t,s)},T.vvt=function(t,s){return A.compare(this.y,t,s)},M.xvt=function(){return this.RO().f4()},T.xvt=function(){return this.c4()},x.Mvt=function(){const t=u(this),s=t.dO(),e=t.a4();return e.Gl()<0||e._l()<0||e.Cl()>s.am()||e.Il()>s.vm()},x.Tvt=function(e,i,n){const t=m(this),s=t.jL(),r=s.VL();if(!r.length)return!1;let h=r[0],o=h.RO(),a=h,l=A._r(o.xv(),o.Cv(),i,n);for(let t=1,s=r.length;t<s;++t){h=r[t],o=h.RO();const u=A._r(o.xv(),o.Cv(),i,n);(0===e&&u<l||1===e&&u>l)&&(l=u,a=h)}return s.e0t(a),!0},M.Mv=function(t){const s=this.RO();s.xv()!==t&&(s.Mv(t),s.t4())},T.Mv=function(t){this.x=+t},M.Iv=function(t){const s=this.RO();s.Cv()!==t&&(s.Iv(t),s.t4())},T.Iv=function(t){this.y=+t},M.Cvt=function(t,s){const e=this.RO();e.Ivt(t,s)||(e.s4(t,s),e.t4())},T.Cvt=function(t,s){this.setPosition(t,s)},x.Gvt=function(t,s){if(t=m(t)){const e=d(this),i=t.NL(e);if(i){const[n,r]=i._vt(s),h=e.RO();h.xv()===n&&h.Cv()===r||(h.s4(n,r),h.t4())}}},x.Pvt=function(t){if(0!==t){const s=u(this);s.n4(s.Evt()*t,s.Rvt()*t),s.t4()}},M.Avt=function(t,s){if(0!==s){const e=this.RO();t=A.Mr(t),e.n4(Math.cos(t)*s,Math.sin(t)*s),e.t4()}},T.Avt=function(t,s){0!==s&&(t=A.Mr(t),this.i4(Math.cos(t)*s,Math.sin(t)*s))},M.xv=function(){return this.RO().xv()},T.xv=function(){return this.x},M.Cv=function(){return this.RO().Cv()},T.Cv=function(){return this.y},x.AF=function(){return w.AF(d(this))},M.kvt=function(t,s){return A.compare(this.RO().am(),t,s)},T.kvt=function(t,s){return A.compare(this.width,t,s)},M.Fvt=function(t,s){return A.compare(this.RO().vm(),t,s)},T.Fvt=function(t,s){return A.compare(this.height,t,s)},M.ym=function(t){const s=this.RO();s.am()!==t&&(s.ym(t),s.t4())},T.ym=function(t){this.width=t},M.lm=function(t){const s=this.RO();s.vm()!==t&&(s.lm(t),s.t4())},T.lm=function(t){this.height=t},M.n_=function(t,s){const e=u(this);e.am()===t&&e.vm()===s||(e.n_(t,s),e.t4())},T.n_=function(t,s){this.nB(t,s)},M.am=function(){return this.RO().am()},T.am=function(){return this.width},M.vm=function(){return this.RO().vm()},T.vm=function(){return this.height},x.Ovt=function(){return u(this).a4().Cl()},x.Dvt=function(){return u(this).a4().Il()},x.Lvt=function(){return u(this).a4().Gl()},x.Bvt=function(){return u(this).a4()._l()},x.Nvt=function(){const t=u(this).a4();return(t.Cl()+t.Gl())/2},x.Wvt=function(){const t=u(this).a4();return(t.Il()+t._l())/2},x.Vvt=function(t,s){return A.Er(u(this).aB(),A.Mr(s))<=A.Mr(t)},x.jvt=function(t){return A.Ar(u(this).aB(),A.Mr(t))},x.Hvt=function(t,s){const e=A.Mr(t),i=A.Mr(s),n=u(this).aB(),r=!A.Ar(i,e);return r?!(!A.Ar(n,e)&&A.Ar(n,i)):A.Ar(n,e)&&!A.Ar(n,i)},M.oB=function(t){const s=this.RO(),e=A.vr(A.Mr(t));isNaN(e)||s.aB()===e||(s.oB(e),s.t4())},T.oB=function(t){this.o4=t},x.Uvt=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.oB(s.aB()+A.Mr(t)),s.t4()}},x.zvt=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.oB(s.aB()-A.Mr(t)),s.t4()}},x.Jvt=function(t,s){const e=u(this),i=e.aB(),n=A.Rr(i,A.Mr(s),A.Mr(t));isNaN(n)||i===n||(e.oB(n),e.t4())},x.qvt=function(t,s,e){const i=u(this),n=i.aB(),r=s-i.xv(),h=e-i.Cv(),o=Math.atan2(h,r),a=A.Rr(n,o,A.Mr(t));isNaN(a)||n===a||(i.oB(a),i.t4())},x.Xvt=function(t,s){const e=u(this),i=e.aB(),n=t-e.xv(),r=s-e.Cv(),h=Math.atan2(r,n);isNaN(h)||i===h||(e.oB(h),e.t4())},M.aB=function(){return A.Tr(this.RO().aB())},T.aB=function(){return this.o4},x.$vt=function(t,s){return A.compare(A.Jr(100*u(this).FE(),6),t,s)},M.qB=function(){return this.RO().qB()},T.qB=function(){return this.isVisible},x.zB=function(t){const s=u(this);t=2===t?!s.qB():0!==t,s.qB()!==t&&(s.zB(t),w.BO())},x.DE=function(t){const s=A.br(t/100,0,1),e=u(this);if(e.rW()){if(e.hht().Yvt()===s)return}else if(e.FE()===s)return;e.DE(s),w.BO()},x.Zvt=function(t){l.Ia(t);const s=u(this);s.m4().ya(l)||(s.g4(l),w.BO())},x.BE=function(){const t=u(this).m4();return A.$r(t.ua(),t.ca(),t.fa(),t.da())},x.FE=function(){return A.Jr(100*u(this).FE(),6)},x.Kvt=function(t){return!!(t=s(t))&&u(this).AO()===t},x.Qvt=function(e){const t=m(this),s=t.jL(),i=s.VL();if(!i.length)return!1;let n=i[0],r=n;for(let t=1,s=i.length;t<s;++t){const h=i[t],o=h.RO(),a=r.RO(),l=o.AO().Ak(),u=a.AO().Ak();0===e?(u<l||l===u&&o.kO()>a.kO())&&(r=h):(l<u||l===u&&o.kO()<a.kO())&&(r=h)}return s.e0t(r),!0},M.txt=function(t,s,e){const i=this.RO(),n=0===t?i.Gv():i.h4();return A.compare(n,s,e)},T.txt=function(t,s,e){const i=0===t?this.u5:this.r4;return A.compare(i,s,e)},M.sxt=function(){this.RO().w4()},T.sxt=function(){this.y4()},M.ixt=function(){this.RO().b4()},T.ixt=function(){this.S4()},x.nxt=function(t){(t=s(t))&&u(this).x4(t)},x.rxt=function(t,s){const e=0===t;if(s=m(s)){const i=d(this),n=s.hxt(i);n&&i.RO().T4(n,e)}},M._v=function(t){const s=this.RO();s.Gv()!==t&&(s._v(t),w.BO())},T._v=function(t){this.u5=t},x.oxt=function(){return u(this).AO().Ak()},x.axt=function(){return u(this).AO().Qc()},M.lxt=function(){return this.RO().kO()},T.lxt=function(){return this.zIndex},M.uxt=function(){return this.RO().Gv()},T.uxt=function(){return this.u5},M.cxt=function(){return this.RO().h4()},T.cxt=function(){return this.r4},x.fxt=function(t){const s=d(this),e=s.D5().tB().Wnt(t);if(e){const i=e.Ak(),n=s.RO().KN();return n.jW(i)}},x.dxt=function(t,s){const e=d(this),i=e.D5().tB().Wnt(s);if(i){const n=i.Ak(),r=1===t,h=e.RO().KN();h.jW(n)!==r&&(h.HW(n,r),h.UW(),w.BO())}},x.pxt=function(t,s,e){const i=d(this),n=i.D5().tB().Wnt(t);if(n){s=Math.floor(s);const r=n.pT().gT(s);if(r){"color"===r?(l.Ia(e),e=l):"percent"===r&&(e/=100);const h=n.Ak(),o=i.RO().KN(),a=o.JW(h,s,e);a&&o.jW(h)&&w.BO()}}},A.dr(A.Rect)),k=[],b=[],C=!1,I=null,G=!1,F=new Set;x.mxt=function(y){const t=m(this),w=(y=m(y),t.ZO());if(w.gxt())return function*(w){if(w){let t=this.ZO(),s=t.Nk(),i=t.cF(),e=i.TF(),n=i.Xdt(),r=n.D5(),h=n.xbt(),o=n.Mbt(),a=e.Xj(),l=t.Ltt(),u=l-1,c=a.yF(),f=e.$j(c),d=h.get("collmemory"),p=(d||(d=A.dr(A.tc),h.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.Hf().addEventListener("instancedestroy",t=>E(d,t.LW))),r.jL()),m=w.jL(),g=p.VL(),y=null;for(let t=0;t<g.length;++t){const S=g[t];m.Wft()?(s.gvt(S.RO().AO(),w,S.RO().a4(),k),y=k,s.yxt(S,w,y)):y=m.VL();for(let t=0;t<y.length;++t){const b=y[t];if(s.wD(S,b)||s.wxt(S,b)){let t=R(d,S,b),s=!1,e=-2;"number"==typeof t&&(s=!0,e=t);const v=!s||e<u;if(_(d,S,b,l),v){const x=c.qj(),M=(i.t8(x),r.jL()),T=w.jL();if(M.qft(!1),T.qft(!1),r===w){const C=M.Xft();A.jh(C),C.push(S),C.push(b),r.Eyt()}else{const I=M.Xft(),G=T.Xft();A.jh(I),A.jh(G),I.push(S),G.push(b),r.Eyt(),w.Eyt()}yield*c.vyt(a,f),i.e8(x)}}else P(d,S,b)}A.jh(k)}e.h8()}return!1}.call(t,y);if(y){let s=w.Nk(),i=w.cF(),t=i.TF(),e=i.Xdt(),n=e.D5(),r=e.xbt(),h=e.Mbt(),o=t.Xj(),a=w.Ltt(),l=a-1,u=o.yF(),c=t.$j(u),f=r.get("collmemory"),d=(f||(f=A.dr(A.tc),r.set("collmemory",f)),h.get("collisionCreatedDestroyCallback")||(h.set("collisionCreatedDestroyCallback",!0),w.Hf().addEventListener("instancedestroy",t=>E(f,t.LW))),n.jL()),p=y.jL(),m=d.VL(),g=null;for(let t=0;t<m.length;++t){const S=m[t];p.Wft()?(s.gvt(S.RO().AO(),y,S.RO().a4(),k),g=k,s.yxt(S,y,g)):g=p.VL();for(let t=0;t<g.length;++t){const b=g[t];if(s.wD(S,b)||s.wxt(S,b)){let t=R(f,S,b),s=!1,e=-2;"number"==typeof t&&(s=!0,e=t);const v=!s||e<l;if(_(f,S,b,a),v){const x=u.qj(),M=(i.t8(x),n.jL()),T=y.jL();if(M.qft(!1),T.qft(!1),n===y){const C=M.Xft();A.jh(C),C.push(S),C.push(b),n.Eyt()}else{const I=M.Xft(),G=T.Xft();A.jh(I),A.jh(G),I.push(S),G.push(b),n.Eyt(),y.Eyt()}u.s8(o,c),i.e8(x)}}else P(f,S,b)}A.jh(k)}t.h8()}return!1},x.Sxt=function(t){return t=m(t),i(d(this),t,0,0)},x.bxt=function(t,s,e){return t=m(t),i(d(this),t,s,e)},x.vxt=function(){return!0},x.H4=function(){return u(this).H4()},x.R9=function(){return u(this).R9()},x.xxt=function(e,i){const t=m(this),s=(e=m(e),t.ZO()),n=this.jL(),r=n.VL();if(0===r.length)return!1;let h=e.jL(),o=h.VL();if(h.Wft()){const u=[...s.Mxt(e)];0<u.length&&(o=o.concat(u))}if(0===o.length)return!1;const a=h.Wft()?null:new Set(o),l=new Set;for(let t=0,s=r.length;t<s;++t){const c=r[t];if(1===i)for(const f of c.A4())f.Txt(e)&&(null===a||a.has(f))&&l.add(f);else{let t;if(0===i){if(null===(t=c.P4()))continue}else t=c.R4();t.Txt(e)&&(null===a||a.has(t))&&l.add(t)}}return 0!==l.size&&(h.Kft(l),e.Eyt(),!0)},x.Cxt=function(e,i){const t=m(this),s=(e=m(e),t.ZO()),n=t.jL(),r=n.VL();if(0===r.length)return!1;let h=e.jL(),o=h.VL();if(h.Wft()){const u=[...s.Mxt(e)];0<u.length&&(o=o.concat(u))}if(0===o.length)return!1;const a=h.Wft()?null:new Set(o),l=new Set;for(let t=0,s=r.length;t<s;++t){const c=r[t];2!==i||c.R9()||!c.Txt(e)||null!==a&&!a.has(c)||l.add(c);for(const f of 0===i?c.children():c.B4())2===i&&f.R9()||f.Txt(e)&&(null===a||a.has(f))&&l.add(f)}return 0!==l.size&&(h.Kft(l),e.Eyt(),!0)},x.Ixt=function(e,i,n){const t=m(this),s=(e=m(e),t.ZO()),r=t.jL(),h=r.VL();if(0===h.length)return!1;let o=e.jL(),a=o.VL();if(o.Wft()){const c=[...s.Mxt(e)];0<c.length&&(a=a.concat(c))}if(0===a.length)return!1;const l=o.Wft()?null:new Set(a),u=[];for(let t=0,s=h.length;t<s;++t){const f=h[t];if(0===i){const d=f.L4(n);null!==d&&d.Txt(e)&&(null===l||l.has(d))&&u.push(d)}else if(1===i)for(const p of f.children())if(p.Txt(e)){if(0===n){null!==l&&!l.has(p)||u.push(p);break}--n}}return 0!==u.length&&(o.Zft(u),e.Eyt(),!0)},x.Gxt=function(t,s,e){const i=d(this);switch(t){case 0:default:return A.compare(i.O4(),s,e);case 1:return A.compare(i._xt(),s,e)}},x.W4=function(t,s,e,i,n,r,h,o,a,l){t=m(t);const u=d(this),c=w.Ydt().D5();for(const f of t.Pxt(u,c)){if(!f.RL().yL())return;u.W4(f,{z4:s,q4:e,Y4:i,K4:n,tW:r,nW:h,eW:o,hW:a,aW:l})}},x.V4=function(t){t=m(t);const s=d(this),e=w.Ydt().D5();for(const i of t.Pxt(s,e))s.V4(i)},x.Ext=function(){const t=d(this);if(t.H4()){const s=t.P4();s.V4(t)}},x.Rxt=function(){const t=d(this).P4();return t?t.Z5():-1},x.Axt=function(){return d(this).O4()},x.kxt=function(){return d(this)._xt()},x.Fxt=function(t,s){t=Math.floor(t),s=Math.floor(s);const e=u(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(e.dW(),e.t4()):e.cW(t,s)},x.mW=function(t,s,e,i,n,r,h,o){const a=u(this),l=a.mW(t,s,{mode:0===e?"absolute":"relative",x:i,y:n,u5:r,u:h,v:o});l&&a.t4()},x.Oxt=function(){const t=u(this);return t.yW()?t.wW().Zv():0},x.Dxt=function(){const t=u(this);return t.yW()?t.wW().Kv():0},x.Lxt=function(t){const s=u(this);t=2===t?!s.qB():0!==t,s.qB()!==t&&s.zB(t)},x.EW=function(t,s){this instanceof self.F5?this.cj(t,s):this.EW(t,s)},x.Bxt=function(t,s){this instanceof self.F5?this.fj(t,""+s):this.Bxt(t,""+s)},x.Nxt=function(t){this instanceof self.F5?this.dj(t):this.Nxt(t)},x.Wxt=function(){this instanceof self.F5?this.aj():this.GW()},x.Vxt=function(){this instanceof self.F5?this.lj():this._W()},x.jxt=function(){return this instanceof self.F5?this.uj():this.jxt()},x.Hxt=function(t){this instanceof self.F5?this._setEnabled(0!==t):this.Uxt(0!==t)},x.zxt=function(){return this instanceof self.F5?this.Xyt():this.Jxt()},M.qxt=function(t,s,e){return A.compare(this.eV().$rt(t),s,e)},T.qxt=function(t,s,e){return A.compare(n(this).$rt(t),s,e)},M.Xxt=function(t){return!!this.eV().$rt(t)},T.Xxt=function(t){return!!n(this).$rt(t)},x.$xt=function(e,i){const n=m(this),t=n.jL(),r=t.VL();if(!r.length)return!1;let h=n.eJ(),o=null,a=0;for(let t=0,s=r.length;t<s;++t){const l=r[t],u=h?l.D5().Zwt(n.Kwt()):0,c=l.$rt(u+i);(null===o||0===e&&c<a||1===e&&c>a)&&(a=c,o=l)}return t.e0t(o),!0},x.Yxt=function(t){const s=m(this);return(s.ZO().Xdt().ybt()?h:r)(s,t)},x.F6=function(t){const s=new Set(A.ro(t)),e=d(this).hN();return s.isSubsetOf(e)},x.Zxt=function(){return d(this).Kxt()},x.Qxt=function(){return d(this).hN().size},x.t2t=function(t){return d(this).s2t(t)},x.e2t=function(t,s){const e=A.ro(s);if(0!==e.length){const i=d(this),n=new Set(i.hN());if(0===t)for(const r of e)n.add(r);else if(1===t)for(const h of e)n.delete(h);i.aN(n)}},x.i2t=function(){w.H5(d(this))},x.n2t=function(){return!0},x.r2t=function(){return!0},M.h2t=function(t,s){this.eV().Yrt(t,s)},T.h2t=function(t,s){n(this).Yrt(t,s)},M.o2t=function(t,s){const e=this.eV(),i=e.$rt(t);"number"==typeof i&&"number"!=typeof s?s=parseFloat(s):"string"==typeof i&&"string"!=typeof s&&(s=s.toString()),e.Yrt(t,i+s)},T.o2t=function(t,s){const e=n(this),i=e.$rt(t);"number"==typeof i&&"number"!=typeof s?s=parseFloat(s):"string"==typeof i&&"string"!=typeof s&&(s=s.toString()),e.Yrt(t,i+s)},M.a2t=function(t,s){const e=this.eV(),i=e.$rt(t);"number"==typeof i&&("number"!=typeof s&&(s=parseFloat(s)),e.Yrt(t,i-s))},T.a2t=function(t,s){const e=n(this),i=e.$rt(t);"number"==typeof i&&("number"!=typeof s&&(s=parseFloat(s)),e.Yrt(t,i-s))},M.l2t=function(t,s){this.eV().Yrt(t,s?1:0)},T.l2t=function(t,s){n(this).Yrt(t,s?1:0)},M.u2t=function(t){const s=this.eV();s.Yrt(t,0===s.$rt(t)?1:0)},T.u2t=function(t){const s=n(this);s.Yrt(t,0===s.$rt(t)?1:0)},x.c2t=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const e=d(this);w.f2t(),e.UY("state"),e.Dv(s,"state"),w.d2t("state",{p2t:!0})},x.m2t=function(){return JSON.stringify(d(this).Ov("state"))},x.g2t=function(){return d(this).D5().Qc()},x.y2t=function(){let t=w.qdt().k0t(),s=t.UL();for(const e of w.Mxt(t))++s;return s},x.w2t=function(){return w.qdt().k0t().jL().VL().length},M.Q5=function(){return this.eV().Q5()},T.Q5=function(){return n(this).Q5()},M.Z5=function(){return this.eV().Z5()},T.Z5=function(){return n(this).Z5()},x.Spt=function(t){const s=d(this);return t.toLowerCase()===w.cF().Mpt(s)},x.uN=function(t){const s=d(this);w.cF().uN(s,t)},x.S2t=function(t){const s=m(this);return w.cF().$1t().b2t(s.jL().VL(),t),!0},x.v2t=function(){return d(this).sN()},A.x2t=function(t,s,e){const i=t[1],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.y$,w=s.hrt,S=s.ort,b=Object.assign({},x,2<=e?T:M);n&&(y.bvt=b.bvt,y.vvt=b.vvt,y.xvt=b.xvt,y.Mvt=b.Mvt,y.Tvt=b.Tvt,w.Mv=b.Mv,w.Iv=b.Iv,w.Cvt=b.Cvt,w.Gvt=b.Gvt,w.Pvt=b.Pvt,w.Avt=b.Avt,S.M2t=b.xv,S.T2t=b.Cv,S.dt=b.AF),r&&(y.kvt=b.kvt,y.Fvt=b.Fvt,w.ym=b.ym,w.lm=b.lm,w.n_=b.n_,S.C2t=b.am,S.I2t=b.vm,S.G2t=b.Ovt,S._2t=b.Dvt,S.P2t=b.Lvt,S.E2t=b.Bvt,S.R2t=b.Nvt,S.A2t=b.Wvt),h&&(y.k2t=b.Vvt,y.F2t=b.jvt,y.Hvt=b.Hvt,w.oB=b.oB,w.Uvt=b.Uvt,w.zvt=b.zvt,w.Jvt=b.Jvt,w.qvt=b.qvt,w.Xvt=b.Xvt,S.O2t=b.aB),o&&(y.qB=b.qB,y.$vt=b.$vt,w.zB=b.zB,w.DE=b.DE,w.Zvt=b.Zvt,S.Opacity=b.FE,S.D2t=b.BE),a&&(y.Kvt=b.Kvt,y.Qvt=b.Qvt,y.txt=b.txt,w.sxt=b.sxt,w.ixt=b.ixt,w.nxt=b.nxt,w.rxt=b.rxt,w._v=b._v,S.oxt=b.oxt,S.axt=b.axt,S.lxt=b.lxt,S.uxt=b.uxt,S.cxt=b.cxt),l&&(y.fxt=b.fxt,w.dxt=b.dxt,w.pxt=b.pxt),d&&(y.vxt=b.vxt,y.H4=b.H4,y.R9=b.R9,y.xxt=b.xxt,y.Cxt=b.Cxt,y.Ixt=b.Ixt,y.Gxt=b.Gxt,w.W4=b.W4,w.V4=b.V4,w.Ext=b.Ext,S.Rxt=b.Rxt,S.Axt=b.Axt,S.kxt=b.kxt),p&&(w.Fxt=b.Fxt,w.mW=b.mW,S.Oxt=b.Oxt,S.Dxt=b.Dxt),u&&(y.qB=b.qB,w.zB=b.Lxt,w.L2t=b.EW,w.B2t=b.Bxt,w.N2t=b.Nxt),c&&(y.W2t=b.jxt,w.V2t=b.Wxt,w.j2t=b.Vxt),f&&(y.Qu=b.zxt,w.H2t=b.Hxt),m&&(y.mxt=b.mxt,y.Sxt=b.Sxt,y.bxt=b.bxt,s.U2t=v),i||(y.qxt=b.qxt,y.Xxt=b.Xxt,y.$xt=b.$xt,y.Yxt=b.Yxt,y.F6=b.F6,w.h2t=b.h2t,w.o2t=b.o2t,w.a2t=b.a2t,w.l2t=b.l2t,w.u2t=b.u2t,w.e2t=b.e2t,y.n2t=b.n2t,y.r2t=b.r2t,w.i2t=b.i2t,w.c2t||(w.c2t=b.c2t),S.m2t||(S.m2t=b.m2t),S.y2t=b.y2t,S.w2t=b.w2t,S.z2t=b.Q5,S.J2t=b.Z5,S.g2t=b.g2t,S.Zxt=b.Zxt,S.Qxt=b.Qxt,S.t2t=b.t2t,y.Spt=b.Spt,w.uN=b.uN,w.S2t=b.S2t),g&&(S.v2t=b.v2t)}}{const Ko=self.Bs;Ko.Y1t=class extends Ko.ur{constructor(t){super(),this.r0t=t,this.wf="",this.h3=-1,this.q2t="",this.X2t=!1,this.$2t=null,this.p0t=0,this.jmt=[],this.b0t=null,this.Y2t=new Map,this.Z2t=null,this.K2t=null,this.Q2t=-1,this.qyt=null,this.tMt=null,this.sMt=!1}pr(){this.wf="",this.h3=-1,this.q2t="",this.$2t=null,this.K2t=null,this.qyt=null,this.tMt=null,this.Q2t=-1,Ko.jh(this.jmt),this.b0t&&(this.b0t.clear(),this.b0t=null);for(const t of this.Y2t.values())t.pr();this.Y2t.clear(),this.Z2t=null}vv(){const t=this.r0t,s=t.ZO().sJ(),e=t.qdt(),i=(this.$2t=e.yF(),this.p0t=e.I0t()+1,t.Vpt(this.$2t));i&&(this.K2t=i,this.qyt=i.uwt(),this.tMt=i.lwt().map(t=>t.Ait()),i.pyt())&&(this.Q2t=i.pwt());for(const r of s){const h=r.jL();h.Wft()&&!this.$2t.Bgt(r)||(this.jmt.push(r),this.Y2t.set(r,Ko.dr(Ko.eMt,h)))}const n=t.wF();this.b0t=0<n.size?n:null}iMt(t){this.wf="timer",this.vv(),this.h3=this.r0t.ZO().DF()+t}nMt(t){this.wf="walltimer",this.vv(),this.h3=this.r0t.ZO().BF()+t}rMt(t){this.wf="signal",this.vv(),this.q2t=t.toLowerCase()}b2t(t,s){this.wf="instance-signals",this.vv(),this.q2t=s.toLowerCase(),this.Z2t=new Set(t)}hMt(t){this.wf="promise",this.vv(),t.then(()=>this.mpt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.mpt()})}oMt(){return"timer"===this.wf}aMt(){return"walltimer"===this.wf}dpt(){return"signal"===this.wf}vpt(){return"instance-signals"===this.wf}Lpt(){return"promise"===this.wf}ppt(){return this.q2t}lMt(){return this.X2t}mpt(){this.X2t=!0}xpt(t){this.Z2t.delete(t),0===this.Z2t.size&&this.mpt()}Q1t(){return this.oMt()?this.h3<=this.r0t.ZO().DF():this.aMt()?this.h3<=this.r0t.ZO().BF():this.lMt()}uMt(t){t.v0t(this.$2t,this.p0t);for(const[e,i]of this.Y2t.entries()){const n=e.jL();i.v0t(n)}this.b0t&&t.N0t([...this.b0t]);const s=this.K2t;s&&(s.Cyt(this.qyt),s.lwt().map((t,s)=>t.pnt(this.tMt[s])),s.pyt())&&s.mwt(this.Q2t)}tpt(t){this.uMt(t),this.$2t.myt(t),this.K2t&&this.K2t.pyt()&&this.K2t.Oyt(this.Q2t),this.r0t.z1t(this.jmt),this.sMt=!0}async npt(t){this.uMt(t);for(const s of this.$2t.gyt(t))await this.r0t.ZO()._1t(s);this.K2t&&this.K2t.pyt()&&this.K2t.Oyt(this.Q2t),this.r0t.z1t(this.jmt),this.sMt=!0}spt(){return this.sMt}Oft(t){for(const s of this.Y2t.values())s.Oft(t);if("instance-signals"===this.wf){for(const e of t)this.Z2t.delete(e);0===this.Z2t.size&&this.mpt()}}G9(){const t={},s={wt:this.wf,t:this.h3,st:this.q2t,s:this.X2t,ev:this.$2t.uJ(),sm:this.jmt.map(t=>t.uJ()),dsm:this.b0t?[...this.b0t].map(t=>t.uJ()):null,sols:t};this.$2t.eyt(this.p0t)&&(s.act=this.$2t.Zdt(this.p0t).uJ());for(const[e,i]of this.Y2t)t[e.uJ().toString()]=i.G9();return"instance-signals"===this.wf&&(s.pi=[...this.Z2t].map(t=>t.Z5())),s}static Bpt(t,s){const e=t.ZO(),i=t.h1t(s.ev);if(!i)return null;let n=0;if(s.hasOwnProperty("act")){const h=t.a1t(s.act);if(!h)return null;n=h.Ak()}const r=Ko.dr(Ko.Y1t,t);r.h3=s.t,s.hasOwnProperty("wt")?r.wf=s.wt:r.wf=-1===r.h3?"signal":"timer",r.q2t=s.st,r.X2t=s.s,r.$2t=i,r.p0t=n;for(const o of s.sm){const a=e.Wj(o);a&&r.jmt.push(a)}if(Array.isArray(s.dsm))for(const l of s.dsm){const u=e.Wj(l);u&&(r.b0t||(r.b0t=new Set),r.b0t.add(u))}for(const[c,f]of Object.entries(s.sols)){const d=parseInt(c,10),p=e.Wj(d);if(p){const m=Ko.dr(Ko.eMt,null);m._9(t,f),r.Y2t.set(p,m)}}if("instance-signals"===r.wf){r.Z2t=new Set;for(const g of s.pi){const y=e.IO(g);y&&r.Z2t.add(y)}}return r}}}{const Qo=self.Bs;Qo.eMt=class extends Qo.ur{constructor(t){super(),this._ft=null,this.cMt=!0,this.K7=[],t&&(this._ft=t.D5(),this.cMt=t.Wft(),Qo.Jh(this.K7,t.Xft()))}pr(){this._ft=null,Qo.jh(this.K7)}v0t(t){t.qft(this.cMt),Qo.Jh(t.Xft(),this.K7)}Oft(t){Qo.Zh(this.K7,t)}G9(){return{sa:this.cMt,insts:this.K7.map(t=>t.Z5())}}_9(t,s){const e=t.ZO();this.cMt=!!s.sa,Qo.jh(this.K7);for(const i of s.insts){const n=e.IO(i);n&&this.K7.push(n)}}}}{let l=function(t,s){let e=t.get(s);return e||(e=new Map,t.set(s,e)),e};l;const ta=self.Bs;ta.fMt=class extends ta.ur{constructor(t){super(),this.uf=t.runtime,this.yr=t.name??"",this.dMt=!!t.nL,this.pMt=!!t.mMt,this.gMt=!!t.uL,this.yMt=!!t.wMt,this.SMt=!!t.fL,this.bMt=!!t.vMt,this.xMt=!!t.wL,this.MMt=!!t.aL,this.TMt=!!t.pL,this.CMt=t.IMt,this.GMt=null,this._Mt=new Map,this.PMt=new Map,this.EMt=new Map,this.RMt=new Map,this.AMt=t.kMt,this.FMt=null}pr(){this.uf=null}ZO(){return this.uf}Qc(){return this.yr}OMt(){}bpt(){return(2<=this.gbt()?this.FMt:this).constructor}gbt(){return this.CMt}DMt(t=!1){let s=this.AMt;return t&&"function"!=typeof s&&2<=this.gbt()?globalThis.lV:s}rL(){return this.dMt}oL(){return this.pMt}lL(){return this.MMt}mL(){return this.TMt}cL(){return this.gMt}qb(){return this.yMt}dL(){return this.SMt}yL(){return this.bMt}SL(){return this.xMt}Nwt(t,s){if(!s)throw new Error("missing 'this' binding");let e=this._Mt.get(t);return e||(e=t.bind(s),this._Mt.set(t,e)),e}fbt(t,s,e){if(!s)throw new Error("missing 'this' binding");let i=l(this.PMt,t),n=i.get(e);return n||(n=t.bind(s,e),i.set(e,n)),n}dbt(t,s,e,i){if(!s)throw new Error("missing 'this' binding");let n=l(this.EMt,t),r=l(n,e),h=r.get(i);return h||(h=t.bind(s,e,i),r.set(i,h)),h}pbt(t,s,e,i,n){if(!s)throw new Error("missing 'this' binding");let r=l(this.RMt,t),h=l(r,e),o=l(h,i),a=o.get(n);return a||(a=t.bind(s,e,i,n),o.set(n,a)),a}LMt(t){if(!this.rL())throw new Error("must be single-global plugin");this.GMt=t}IL(){if(this.rL())return this.GMt;throw new Error("must be single-global plugin")}_L(){if(this.rL())return this.GMt._L();throw new Error("must be single-global plugin")}BMt(){const t=this.gbt(),s=(ta.eL.NMt(this,t),this.DMt(!0));if(s){if(this.FMt=new s,!(this.FMt instanceof self.QD))throw new TypeError("plugin class must derive from IPlugin")}else this.FMt=new self.QD;ta.eL.WMt(t)}ML(){return this.FMt}}}{const sa=self.Bs;sa.VMt=class extends sa.fMt{constructor(t,s){super(t),this.jMt=s,this.HMt=0,this.UMt=new Map,this.zMt("elem-focused",t=>t.JMt()),this.zMt("elem-blurred",t=>{t&&t.qMt()})}pr(){super.pr()}XMt(t){const s=this.HMt++;return this.UMt.set(s,t),s}$Mt(t){this.UMt.delete(t)}zMt(t,e){this.uf._N(this.jMt,t,t=>{const s=this.UMt.get(t.elementId);e(s,t)})}}}{const ea=self.Bs;ea.YMt=class extends ea.ur{constructor(t){super(),this._ft=t,this.uf=t.ZO(),this.ZMt=t.RL()}pr(){this._ft=null,this.uf=null,this.ZMt=null}D5(){return this._ft}ZO(){return this.uf}RL(){return this.ZMt}u6(){return this._ft.u6()}OMt(){}_bt(t){}dvt(t){}pvt(t){}WX(t){}JX(){}HX(){}d$(t){}KMt(){}DMt(){return null}QMt(t,s,e){const i=ea.dr(ea.Event,t,s);i.tTt=this,e&&Object.assign(i,e),this.D5().X$(i)}}}{const ia=self.Bs;ia.sTt=class extends ia.ur{constructor(t,s){super(),this.Ie=t,this.jMt=s,this.eTt=null,this.uf=t.ZO(),this._ft=this.Ie.D5(),this.iTt=this._ft.fvt(),this.kY=null,this.OY=null,this.ON=!1,this.LN=!1,this.v0=null,this._G=!1}pr(){this._G=!0,this.nTt(),this.rTt(),this.kY=null,this.OY=null,this.v0&&(this.v0.pr(),this.v0=null),this.Ie=null,this.uf=null,this._ft=null,this.iTt=null}mr(){return this._G}eV(){return this.Ie}ZO(){return this.uf}D5(){return this._ft}RL(){return this.iTt.RL()}fvt(){return this.iTt}hTt(){return this.Ie.GO()}TN(t){return this.uf.TN(t,this.Ie,null)}oTt(t){return this.uf.oTt(t,this.Ie,null)}IN(t){return this.uf.IN(t,this.Ie,null)}aTt(t,s){return this.uf.aTt(t,this.Ie,s)}lTt(t,s){return this.uf.lTt(t,this.Ie,s)}uTt(t){return this.uf.uTt(t)}cTt(t,s){this.uf._N(this.jMt,t,s)}fTt(t){for(const[s,e]of t)this.cTt(s,e)}dTt(t,s){this.uf.df(this.jMt,t,s)}pTt(t,s){return this.uf.WO(this.jMt,t,s)}mTt(t,s){if(!this.uf.$k())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.jMt,handler:t,data:s,responseId:null});this.dTt(t,s)}gTt(t){if(!t)throw new Error("cannot set empty component id");this.eTt=t}yTt(){if(this.eTt)return this.uf.jN(this.eTt);throw new Error("wrapper extension component id not set")}UN(t,s){if(!this.eTt)throw new Error("wrapper extension component id not set");this.uf.UN(this.eTt,t,s)}wTt(t){for(const[s,e]of t)this.UN(s,e)}Ej(t,s){if(!this.eTt)throw new Error("wrapper extension component id not set");this.uf.Ej(this.eTt,t,s)}Rj(t,s){if(this.eTt)return this.uf.Rj(this.eTt,t,s);throw new Error("wrapper extension component id not set")}jZ(){}STt(){}bTt(){if(!this.ON){if(!this.kY)if(this.uf.kN()){const s=globalThis.C3Debugger,e=this.RL();this.kY=()=>{const t=performance.now();this.jZ(),s.AddIndividualPluginTickTime(e,performance.now()-t)}}else this.kY=()=>this.jZ();this.uf.Hf().addEventListener("tick",this.kY),this.ON=!0}}nTt(){this.ON&&(this.uf.Hf().removeEventListener("tick",this.kY),this.ON=!1)}vTt(){return this.ON}xTt(){if(!this.LN){if(!this.OY)if(this.uf.kN()){const s=globalThis.C3Debugger,e=this.RL();this.OY=()=>{const t=performance.now();this.STt(),s.AddIndividualPluginTickTime(e,performance.now()-t)}}else this.OY=()=>this.STt();this.uf.Hf().addEventListener("tick2",this.OY),this.LN=!0}}rTt(){this.LN&&(this.uf.Hf().removeEventListener("tick2",this.OY),this.LN=!1)}MTt(){return this.LN}TTt(){return[]}Ov(){return null}Dv(t){}Wrt(t){}Jrt(t,s){}Wht(t,s,e){if(0!==s){const i=this.Wrt(t);if("number"!=typeof i)throw new Error("expected number");this.Jrt(t,i+s,e)}}CTt(t,s,e,i){}ITt(t,...s){t.call(this,...s)}GTt(t,...s){return t.call(this,...s)}DMt(){return null}QMt(t,s,e){if(this.Ie._Tt()){const i=this.hTt(),n=ia.dr(ia.Event,t,s);n.LW=i,e&&Object.assign(n,e),i.dispatchEvent(n)}}qb(){return!1}}}{const na=self.Bs;na.PTt=class extends na.sTt{constructor(t,s){super(t,s),this.Dst=t.RO(),this.ETt=null,this.RTt=null}pr(){if(this.ETt){const t=this.uf.Hf();t.removeEventListener("renderercontextlost",this.ETt),t.removeEventListener("renderercontextrestored",this.RTt),this.ETt=null,this.RTt=null}this.Dst=null,super.pr()}ATt(){this.kTt()}FTt(){}OTt(){}kTt(){if(!this.ETt){this.ETt=()=>this.H7(),this.RTt=()=>this.DTt();const t=this.uf.Hf();t.addEventListener("renderercontextlost",this.ETt),t.addEventListener("renderercontextrestored",this.RTt)}}H7(){this.FTt()}DTt(){this.OTt()}RO(){return this.Dst}Pet(){return!1}_et(){if(!this.Pet())throw new Error("original size not known");const t=this.LTt();if(t)return t.am()}Ret(){if(!this.Pet())throw new Error("original size not known");const t=this.LTt();if(t)return t.vm()}LTt(){return null}BTt(){const t=this.LTt();if(t){const s=t.X2();if(s)return[s.am(),s.vm()]}return[100,100]}NTt(){const t=this.LTt();return t?t.O_():null}WTt(){const t=this.LTt();return t?t.VTt():null}jTt(){const t=this.LTt();return!!t&&t.HTt()}_vt(t){const s=this.Ie.RO();return[s.xv(),s.Cv(),s.h4()]}KMt(t,s,e){}UTt(t,s){}r9(){return!0}}}{const ra=self.Bs,ha=ra.dr(ra.Rect);ra.zTt=class extends ra.PTt{constructor(t,s){super(t,s),this.JTt=this.RL().XMt(this),this.qTt=!0,this.XTt=!1,this.$Tt=!1,this.YTt=-.2,this.ZTt=ra.dr(ra.Rect,0,0,-1,-1);const e=this.uf.ND();this.KTt=e.JV(),this.QTt=e.qV(),this.tCt=-1,this.sCt=-1,this.eCt=!1,this.bTt()}pr(){this.RL().$Mt(this.JTt),this.iCt("destroy"),this.JTt=-1,super.pr()}TW(){if(this.uf.$k())throw new Error("not valid in worker mode");return this.nCt("get-element")}iCt(t,s){(s=s||{}).elementId=this.JTt,this.dTt(t,s)}nCt(t,s){return(s=s||{}).elementId=this.JTt,this.mTt(t,s)}rCt(t,s){return(s=s||{}).elementId=this.JTt,this.pTt(t,s)}hCt(t){t=t||{};const s=this.RO();t.elementId=this.JTt,t.isVisible=s.qB(),t.htmlIndex=s.AO().QV(),t.htmlZIndex=s.tj(),Object.assign(t,this.oCt()),this.qTt=!!t.isVisible,this.mTt("create",t),this.aCt(!0)}Lxt(t){this.qTt!==(t=!!t)&&(this.qTt=t,this.iCt("set-visible",{isVisible:t}))}jZ(){this.aCt(!1)}lCt(){const t=this.uf.ND().rj();return"Android"===ra.ue.fe&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}aCt(u){if(!this.eV().hj()){let t=this.RO(),s=t.AO(),e=t.a4(),[i,n]=s.G5(e.Cl(),e.Il()),[r,h]=s.G5(e.Gl(),e._l()),o=this.uf.ND(),a=o.HD(),l=o.zD();if(t.qB()&&s.qB())if(!this.lCt()&&(r<=0||h<=0||a<=i||l<=n))this.Lxt(!1);else{ha.set(i,n,r,h);const c=o.JV(),f=o.qV(),d=s.QV(),p=t.tj();if(!u&&ha.equals(this.ZTt)&&this.KTt===c&&this.QTt===f&&this.tCt===d&&this.sCt===p)this.Lxt(!0);else{this.ZTt.G(ha),this.KTt=c,this.QTt=f,this.tCt=d,this.sCt=p,this.Lxt(!0);let t=null;this.$Tt&&(t=s.oj()+this.YTt),this.iCt("update-position",{left:Math.round(this.ZTt.Cl()),top:Math.round(this.ZTt.Il()),width:Math.round(this.ZTt.width()),height:Math.round(this.ZTt.height()),htmlIndex:d,htmlZIndex:p,fontSize:t})}}else this.Lxt(!1)}}GW(){this.nCt("focus",{focus:!0})}_W(){this.nCt("focus",{focus:!1})}JMt(){this.XTt=!0}qMt(){this.XTt=!1}jxt(){return this.XTt}EW(t,s){this.iCt("set-css-style",{prop:ra.Uo(t),val:s})}Bxt(t,s){this.iCt("set-attribute",{name:t,val:s})}Nxt(t){this.iCt("remove-attribute",{name:t})}uCt(){this.eCt||(this.eCt=!0,Promise.resolve().then(()=>{this.eCt=!1,this.iCt("update-state",this.oCt())}))}oCt(){}cCt(){return this.JTt}}}{const oa=self.Bs,aa=self.WW;oa.fCt=class extends oa.ur{constructor(t){super(),this.uf=t.runtime,this.yr=t.name??"",this.dCt=oa.dr(oa.ac),this.pCt=oa.dr(oa.ac),this.CMt=t.IMt,this.AMt=t.kMt,this.mCt=null}pr(){this.pCt.pr(),this.dCt.pr(),this.uf=null}ZO(){return this.uf}Qc(){return this.yr}OMt(){}gbt(){return this.CMt}DMt(t=!1){let s=this.AMt;return t&&"function"!=typeof s&&2<=this.gbt()?globalThis.gj:s}gCt(t){this.dCt.fc(t)}mZ(){return this.dCt.dc()}jz(t){this.pCt.fc(t)}Jz(t){this.pCt.nc(t)}VL(){return this.pCt.dc()}BMt(){const t=this.gbt(),s=(oa.eL.NMt(this,t),this.DMt(!0));if(s){if(this.mCt=new s,!(this.mCt instanceof aa))throw new TypeError("behavior class must derive from IBehavior")}else this.mCt=new aa;oa.eL.WMt(t)}AW(){return this.mCt}}}{const la=self.Bs;la.yCt=class extends la.ur{constructor(t){super(),this.uf=t.ZO(),this.tSt=t,this._ft=t.D5(),this.wCt=t.kW(),this.wCt.gCt(this._ft)}pr(){this.uf=null,this.tSt=null,this._ft=null,this.wCt=null}OMt(){}DW(){return this.tSt}D5(){return this._ft}ZO(){return this.uf}kW(){return this.wCt}}}{const ua=self.Bs;ua.SCt=class extends ua.ur{constructor(t,s){super(),this.bCt=t,this.jMt=s,this.Ie=t.BW(),this.uf=t.ZO(),this.tSt=t.DW(),this.iTt=this.tSt.fvt(),this.ON=!1,this.LN=!1,this._j=!1,this.v0=null}pr(){this.nTt(),this.rTt(),this.vCt(),this.v0&&(this.v0.pr(),this.v0=null),this.bCt=null,this.Ie=null,this.uf=null,this.tSt=null,this.iTt=null}kW(){return this.tSt.kW()}xCt(){return this.bCt}BW(){return this.Ie}D5(){return this.Ie.D5()}RO(){return this.Ie.RO()}ZO(){return this.uf}DW(){return this.tSt}fvt(){return this.iTt}hTt(){return this.bCt.hTt()}TN(t){return this.uf.TN(t,this.Ie,this.tSt)}oTt(t){return this.uf.oTt(t,this.Ie,this.tSt)}IN(t){return this.uf.IN(t,this.Ie,this.tSt)}MCt(){}jZ(){}STt(){}TCt(){}bTt(){this.ON||(this.uf.xj(this),this.ON=!0)}nTt(){this.ON&&(this.uf.Mj(this),this.ON=!1)}vTt(){return this.ON}xTt(){this.LN||(this.uf.Tj(this),this.LN=!0)}rTt(){this.LN&&(this.uf.Cj(this),this.LN=!1)}MTt(){return this.LN}CCt(){this._j||(this.uf.Ij(this),this._j=!0)}vCt(){this._j&&(this.uf.Gj(this),this._j=!1)}ICt(){return this._j}TTt(){return[]}cTt(t,s){this.uf._N(this.jMt,t,s)}GCt(t,s){}Ov(){return null}Dv(t){}Wrt(t){}Jrt(t,s){}Wht(t,s){if(0!==s){const e=this.Wrt(t);if("number"!=typeof e)throw new Error("expected number");this.Jrt(t,e+s)}}CTt(t,s,e,i){}ITt(t,...s){t.call(this,...s)}GTt(t,...s){return t.call(this,...s)}DMt(){return null}QMt(t,s,e){if(this.bCt._Tt()){const i=this.hTt(),n=ua.dr(ua.Event,t,s);n._Ct=i,n.LW=i.LW,e&&Object.assign(n,e),i.dispatchEvent(n)}}}}{let s=function(t){if(t!==e)throw new Error("invalid internal API token")},r=(s,self.Bs),e=(r.S$={},r.Zat={},r.Ns()),i=[],n=[],h=[],o=null,a=null,t=null,l=null,u=new Map,c=new Map;r.eL=class extends r.ur{constructor(t,s){super(),this.uf=t,this.PCt=[],this.Owt=null,this.ECt=[],this.RCt=new Map,this.ACt=null,this.kCt=null,this.FCt=new Set(s)}OCt(t){const s=t[19],e=this.uf.Nyt(t[0]);if(!e)throw new Error("missing plugin");r.x2t(t,e,s);const i=2<=s?r.fMt:e,n=r.dr(i,{runtime:this.uf,nL:t[1],mMt:t[2],uL:t[5],fL:t[8],wMt:t[9],vMt:t[13],wL:t[14],aL:t[17],pL:t[18],IMt:s,name:t[20],kMt:2<=s?e:null});n.OMt(),this.PCt.push(n),u.set(e,n)}DCt(){this.Owt=r.dr(r.S$.w$,{runtime:this.uf,nL:!0}),this.Owt.OMt()}LCt(t){const e=t[1],i=t[2],n=this.uf.Nyt(t[0]);if(!n)throw new Error("missing behavior");this.RCt.set(n,()=>{const t=2<=e?r.fCt:n,s=r.dr(t,{runtime:this.uf,name:i,IMt:e,kMt:2<=e?n:null});s.OMt(),this.ECt.push(s),c.set(n,s),!this.ACt&&r.Zat.solid&&s instanceof r.Zat.solid?this.ACt=s:!this.kCt&&r.Zat.jumpthru&&s instanceof r.Zat.jumpthru&&(this.kCt=s),s.BMt()})}BCt(t){const s=this.RCt.get(t);s&&(s(),this.RCt.delete(t))}static NMt(t,s=1){if(r.eL.NMt!==o)throw new Error("invalid method");1===s&&i.push(t),n.push(t)}static WMt(t=1){if(r.eL.WMt!==a)throw new Error("invalid method");1===t&&i.pop(),n.pop()}static W5(){if(r.eL.W5!==t)throw new Error("invalid method");if(0===i.length)throw new Error("no init object set");return i.at(-1)}static sL(t){if(r.eL.sL!==l)throw new Error("invalid method");if(s(t),0===n.length)throw new Error("no init object set");return n.at(-1)}static NCt(t){h.push(t)}static WCt(){h.pop()}static xN(){if(0===h.length)throw new Error("no init properties set");return h.at(-1)}VCt(){for(const t of this.PCt)t.BMt()}static xL(t){return u.get(t)||null}static VW(t){return c.get(t)||null}m7(){return this.Owt}jCt(){return this.ACt}HCt(){return this.kCt}jN(t){return this.FCt.has(t)}},o=r.eL.NMt,a=r.eL.WMt,t=r.eL.W5,l=r.eL.sL}{const ca=self.Bs,fa=new Set;ca.UCt=class extends ca.ur{constructor(){super(),this.zCt=0,this.A7="",this.k7=0,this.JCt=0,this.qCt=0,this.qm=0,this.Xm=0,this.XCt=!1,this.$Ct=!1,this.YCt=null,this.ZCt="",this.xG=ca.dr(ca.Rect),this.KCt=ca.dr(ca.su),this.QCt="",this.tIt=new self.$O(this),fa.add(this)}pr(){this.CG(),this.YCt&&0===this.YCt.J7()&&this.YCt.pr(),this.YCt=null,fa.delete(this),this.sIt()}static H7(){for(const t of fa)t.ZCt="",t.xG.set(0,0,0,0),t.KCt.xu(t.xG)}eIt(t){this.A7=t[0],this.k7=t[1],this.JCt=t[2],this.qCt=t[3],this.qm=t[4],this.Xm=t[5],this.XCt=t[6],this.$Ct=!0}iIt(t,s){if(this.YCt)throw new Error("already loaded asset");this.A7=s;const e={};return ca.xo(s)&&(e.r7="remote"),this.YO(t,e),this.YCt.a7()}nIt(t,s){if(this.YCt)throw new Error("already loaded asset");this.A7="",this.k7=s.size,this.YCt=ca.dr(ca.h7,t.Dk(),{blob:s,size:this.k7,r7:"local"})}rIt(t){if(t===this)throw new Error("cannot replace with self");this.zCt++,this.CG(),this.A7=t.A7,this.k7=t.k7,this.JCt=t.JCt,this.qCt=t.qCt,this.qm=t.qm,this.Xm=t.Xm,this.XCt=t.XCt,this.$Ct=t.$Ct,this.YCt=t.YCt,this.ZCt=t.ZCt,this.xG=t.xG,this.KCt=t.KCt,this.sIt()}o7(){return this.A7}hc(){return this.k7}hIt(){return this.JCt}oIt(){return this.qCt}HTt(){return this.XCt}am(){return this.qm}vm(){return this.Xm}aIt(){return this.YCt.am()}lIt(){return this.YCt.vm()}YO(t,s){if(this.YCt)throw new Error("already got asset");s=Object.assign({},s,{url:this.o7(),size:this.hc()}),this.YCt=t.n7(s)}L7(){return this.YCt&&this.YCt.L7()}async N8(t,s){if(!this.YCt)throw new Error("no asset");if(this.ZCt)throw new Error("already loaded texture");const e=this.zCt,i=(this.ZCt="loading",await this.YCt.N8(t,s));if(this.zCt!==e)return null;if(!i)return this.ZCt="",null;this.ZCt="loaded",this.$Ct||(this.qm=i.am(),this.Xm=i.vm(),this.$Ct=!0);const n=this.XCt?this.Xm:this.qm,r=this.XCt?this.qm:this.Xm;return this.xG.set(this.JCt,this.qCt,this.JCt+n,this.qCt+r),this.xG.Pt(i.am(),i.vm()),this.KCt.xu(this.xG),this.XCt&&this.KCt._u(),i}CG(){this.ZCt&&(this.YCt&&this.YCt.CG(),this.ZCt="",this.xG.set(0,0,0,0),this.KCt.xu(this.xG))}X2(){return this.YCt&&"loaded"===this.ZCt?this.YCt.X2():null}O_(){return this.xG}VTt(){return this.KCt}xV(){return this.tIt}uIt(){return this.YCt}async cIt(t){t=t||await this.YCt.q7();const s=ca.Oo(this.qm,this.Xm),e=s.getContext("2d");return this.XCt?(e.rotate(Math.PI/-2),e.translate(-this.Xm,0),e.drawImage(t,this.JCt,this.qCt,this.Xm,this.qm,0,0,this.Xm,this.qm)):e.drawImage(t,this.JCt,this.qCt,this.qm,this.Xm,0,0,this.qm,this.Xm),s}async fIt(t){if(!this.QCt){const s=await this.cIt(t),e=await ca.Do(s);this.QCt=URL.createObjectURL(e)}return this.QCt}sIt(){this.QCt&&(URL.revokeObjectURL(this.QCt),this.QCt="")}}}{const da=self.Bs;da.dIt=class extends da.ur{constructor(t){super(),this.yr=t[0],this.pIt=t[1],this.zSt=!!t[2],this.yot=t[3],this.mIt=t[4],this.gIt=!!t[5],this.EU=t[6],this.yIt=t[7].map(t=>da.dr(da.wIt,t)),this.SIt=new self.qW(this)}static bIt(t,s){const e=da.dr(da.dIt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return e.yIt.push(da.wIt.bIt(t)),e}pr(){for(const t of this.yIt)t.pr();da.jh(this.yIt)}vIt(t){for(const s of this.yIt)s.u6().YO(t)}xIt(s,e){return Promise.all(this.yIt.map(t=>t.u6().N8(s,e)))}MIt(){for(const t of this.yIt)t.u6().CG()}Qc(){return this.yr}uJ(){return this.EU}e6(){return this.yIt.length}n6(){return this.yIt}TIt(t){if((t=Math.floor(t))<0||t>=this.yIt.length)throw new RangeError("invalid frame");return this.yIt[t]}CIt(t,s){(s=Math.floor(s))<0?this.yIt.unshift(t):s>=this.yIt.length?this.yIt.push(t):this.yIt.splice(s,0,t)}IIt(t){if((t=Math.floor(t))<0||t>=this.yIt.length)throw new RangeError("invalid frame");this.yIt[t].pr(),this.yIt.splice(t,1)}GIt(e){for(let t=0,s=this.yIt.length;t<s;++t)if(da.wn(this.yIt[t].P6(),e))return t;return-1}_It(t){if("string"!=typeof t)return t;{const s=this.GIt(t);if(-1===s)throw new Error("cannot find animation frame with tag "+t);return s}}XW(){return this.pIt}YW(){return this.zSt}ZW(){return this.yot}QW(){return this.mIt}s6(){return this.gIt}PIt(){return this.SIt}}}{const pa=self.Bs,ma=(()=>{const e=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),i=new Uint8Array(e.length);for(let t=0,s=e.length;t<s;++t)i[t]=e.charCodeAt(t);return new Blob([i],{type:"image/png"})})();pa.wIt=class extends pa.ur{constructor(t){super(),this.EIt=pa.dr(pa.UCt),this.EIt.eIt(t),this.RIt=t[7],this.AIt=pa.dr(pa.sl,t[8],t[9]),this.kIt=t[10].map(t=>pa.dr(pa.FIt,this,t)),this.OIt=new Map;for(const e of this.kIt)this.OIt.set(e.Qc().toLowerCase(),e);this.DIt=null;const s=t[11];6<=s.length&&(this.DIt=pa.dr(pa.Ou,s)),this.Xg=t[12]||"",this.LIt=new self.l6(this)}static bIt(t){const s=pa.dr(pa.wIt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.EIt.nIt(t,ma),s}pr(){this.DIt&&(this.DIt.pr(),this.DIt=null),this.EIt.pr(),this.EIt=null}u6(){return this.EIt}c6(){return this.RIt}d6(){return this.AIt.hl()}m6(){return this.AIt.al()}C6(){return this.DIt}M6(t){return this.OIt.get(t.toLowerCase())||null}x6(t){return(t=Math.floor(t))<0||t>=this.kIt.length?null:this.kIt[t]}w6(){return this.kIt.length}P6(){return this.Xg}r6(){return this.LIt}}}{const ga=self.Bs;ga.FIt=class extends ga.ur{constructor(t,s){super(),this.BIt=t,this.yr=s[0],this.NIt=ga.dr(ga.sl,s[1],s[2])}pr(){}Qc(){return this.yr}xv(){return this.NIt.hl()}Cv(){return this.NIt.al()}WIt(){return this.NIt}}}{const M=self.Bs,ya=self.C3Debugger,wa=self.PL;M.Zlt=class extends M.ur{constructor(s,t,e){super();const i=s.Nyt(e[1]),[n,r]=(this.uf=s,this.ZMt=M.eL.xL(i),this.iTt=null,this.VIt=i.Instance,this.qg=t,this.EU=e[11],this.yr=e[0],this.xwt=this.uf.i1t(e[14]),this.jIt=!!e[9],this.HIt=!!e[2],this.UIt=!!e[10],this.zIt=e[3].map(t=>({sid:t[0],type:t[1],name:t[2],JIt:s.i1t(t[3])})),this.qIt=e[4],this.XIt=e[5],this.pMt=this.ZMt.oL(),this.$It=M.dr(M.Event.Hf),this.fz=null,s.Nk().CD());if(this.YIt=M.dr(M.ZIt,n,r),this.KIt=!0,this.QIt=null,this.tGt=null,this.sGt=-1,this.eGt=null,this.iGt=null,this.nGt=null,this.rGt=null,this.hGt=null,this.oGt=!1,this.aGt=null,this.lGt=e[8].map(t=>M.uGt.mM(this,t)),this.cGt=[],this.fGt=new Map,this.dGt=new Map,this.pGt=new Set,this.mGt=new Map,this.gGt=M.dr(M.Gft,this),this.yGt=null,this.wGt=0,this.SGt=!1,this.aGt=null,this.EIt=null,this.bGt=null,this.vGt=null,this.xGt=null,this.MGt=0,this.YSt=new Map,this.ZSt=new Map,this.K7=[],this.TGt=new Map,this.CGt=!0,this.ZMt.dL()&&(this.fz=M.dr(M.dz,this,e[12])),e[6]&&(this.EIt=M.dr(M.UCt),this.EIt.eIt(e[6])),e[7]){this.bGt=e[7].map(t=>M.dr(M.dIt,t)),this.vGt=new Map,this.xGt=new Map;for(const a of this.bGt)this.vGt.set(a.Qc().toLowerCase(),a),this.xGt.set(a.uJ(),a)}this.HIt?(this.QIt=[],this.tGt=new Set,this.sGt=this.uf.IGt()):(this.eGt=[],this.iGt=new Set,this.nGt=[],this.rGt=[],this.hGt=[]);const h=this.ZMt.gbt();if(h<2&&(this.iTt=M.dr(i.GGt,this,e[15]),!(this.iTt instanceof M.YMt)))throw new Error("v1 sdk type must derive from SDKTypeBase");this._Gt=null,this.PGt=null,this.fX=M.dr(M.Event.Hf),M.eL.NMt(this,h);let o;if(o=2<=h?(o=i.GGt)||globalThis.SV:this.iTt.DMt()){if(this._Gt=new o(h<2?this:null),h<2&&!(this._Gt instanceof wa))throw new TypeError("script interface class must derive from IObjectClass");if(2<=h&&!(this._Gt instanceof globalThis.SV))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this._Gt=new wa;if(M.eL.WMt(h),e[13]){const l=e[13];if(l){const u=l[0],c=l[1],f=l[2];this.iTt.KMt(u,c,f)}}this.uf.EGt()&&!this.HIt&&!this.UIt&&this.pMt||this.OMt(),this.ZMt.rL()&&(this.ZMt.LMt(this),this.RGt(e)),this.AGt=null}static mM(t,s,e){return M.dr(M.Zlt,t,s,e)}pr(){if(this.$It.pr(),this.$It=null,this.EIt&&(this.EIt.pr(),this.EIt=null),this.bGt){for(const t of this.bGt)t.pr();M.jh(this.bGt),this.vGt.clear(),this.xGt.clear()}this.AGt=null,this.gGt.pr(),this.gGt=null,this.YSt.clear(),this.ZSt.clear(),this.aGt=null,this.uf=null}kGt(e){for(let t=1,s=e.length;t<s;++t){const i=this.uf.Rz(e[t]);this.QIt.push(i),this.tGt.add(i),i.eGt.push(this),i.iGt.add(this)}}FGt(t){this.oGt=!0,this.aGt=t}X5(){return this.oGt}LX(){return this.aGt}OGt(){let t=0;if(!this.HIt)for(const s of this.eGt)for(const e of s.DGt()){const i=e.Qc().toLowerCase();this.fGt.set(i,e),this.dGt.set(i,t),this.cGt.push(e),++t}for(const n of this.DGt()){const r=n.Qc().toLowerCase();this.fGt.set(r,n),this.dGt.set(r,t),this.cGt.push(n),++t}for(const h of this.cGt)this.pGt.add(h.kW().constructor);if(!this.HIt&&this.eGt.length){let t=this.uf.LGt(),s=(M.Uh(this.nGt,t,0),M.Uh(this.rGt,t,0),M.Uh(this.hGt,t,0),[]),e=0,i=0,n=0;for(const o of this.eGt){const a=o.Kwt(),l=(this.nGt[a]=e,e+=o.BGt(),this.rGt[a]=i,i+=o.NGt(),this.hGt[a]=n,n+=o.WGt(),o.tB());if(l&&this.fz)for(const u of l.sB())s.push(u.VGt(this.fz))}this.fz&&this.fz.jGt(s)}}RGt(t){const s=this.uf.HGt(),e=M.dr(M.Instance,{runtime:this.uf,O5:this,uid:s});e.UGt(t[16],[]),this.uf.zGt(s,e),this.K7.push(e)}fvt(){return this.iTt}JGt(){return this.UIt}Hf(){return this.$It}OMt(){this.HIt||(this.iTt?this.iTt.OMt():this._Gt.bV())}qGt(){return 0<this.MGt}async WX(t){this.HIt||(this.MGt++,1===this.MGt&&(this.iTt?await this.iTt.WX(t):await this._Gt.MV(this.uf.ND().XGt())))}JX(){if(!this.HIt){if(this.MGt--,this.MGt<0)throw new Error("released textures too many times");0===this.MGt&&(this.iTt?this.iTt.JX():this._Gt.TV(this.uf.ND().XGt()))}}HX(){if(this.HIt)throw new Error("not applicable to family");this.iTt?this.iTt.HX():this._Gt.CV()}async d$(t){this.HIt||(this.iTt?await this.iTt.d$(t):await this._Gt.IV(this.uf.ND().XGt()))}ZO(){return this.uf}RL(){return this.ZMt}$Gt(){return this.VIt}Qc(){return this.yr}i1t(){return this.xwt}Ak(){return this.qg}uJ(){return this.EU}eJ(){return this.HIt}Vz(){return this.jIt}oL(){return this.pMt}Kwt(){return this.sGt}DGt(){return this.lGt}NGt(){return this.qIt}YGt(t){return t&&this.pGt.has(t)}BGt(){return this.zIt.length}ZGt(){return this.zIt.map(t=>t.sid)}KGt(s){return this.zIt.findIndex(t=>t.sid===s)}uet(s){return this.zIt.findIndex(t=>t.name===s)}QGt(){return this.zIt.map(t=>t.name)}t_t(){return this.zIt.map(t=>t.JIt)}fet(t){if((t=Math.floor(t))<0||t>=this.zIt.length)throw new RangeError("invalid instance variable index");return this.zIt[t].type}cet(t){if((t=Math.floor(t))<0||t>=this.zIt.length)throw new RangeError("invalid instance variable index");return this.zIt[t].name}WGt(){return this.XIt}s_t(){return this.cGt}Bnt(t){return this.fGt.get(t.toLowerCase())||null}pet(t){const s=this.dGt.get(t.toLowerCase());return void 0===s?-1:s}tB(){return this.fz}dL(){return this.ZMt.dL()}e_t(){return this.fz&&this.fz.i_t()}J1t(){return this.gGt}jL(){return this.gGt.jL()}u6(){return this.EIt}Fz(t){this.yGt=t}kz(){return this.yGt}Oz(t){this.wGt=t}n_t(){return this.wGt}r_t(){return this.bGt}h_t(){return this.bGt.length}u1t(){return this.eGt}wvt(t){return this.iGt.has(t)}xgt(){return this.QIt}iJ(t){return this.tGt.has(t)}iSt(t){return this.rGt[t]}Zwt(t){return this.nGt[t]}hwt(t){this.mGt.set(t.cwt().toLowerCase(),t)}owt(t){return!!this.ywt(t)}ywt(t){const s=this.mGt.get(t.toLowerCase());return s&&s.Qu()?s:null}o_t(){return this.bGt}a_t(t){if(this.bGt)return this.vGt.get(t.toLowerCase())||null;throw new Error("no animations")}l_t(t){if(this.bGt)return this.xGt.get(t)||null;throw new Error("no animations")}u_t(t){if(this.a_t(t))throw new Error(`animation name '${t}' already exists`);const s=M.dIt.bIt(this.ZO(),t);return this.bGt.push(s),this.vGt.set(s.Qc().toLowerCase(),s),this.xGt.set(s.uJ(),s),s}c_t(t){const s=this.a_t(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.bGt.length)throw new Error("cannot remove last animation");const e=this.bGt.indexOf(s);this.bGt.splice(e,1),this.vGt.delete(s.Qc().toLowerCase()),this.xGt.delete(s.uJ()),s.pr()}f_t(){if(this.bGt)return this.bGt[0];throw new Error("no animations")}d_t(){return this.f_t().TIt(0)}p_t(){if(this.bGt){const t=this.d_t().u6();return[t.am(),t.vm()]}return this.EIt?[this.EIt.am(),this.EIt.vm()]:[100,100]}_L(){if(this.ZMt.rL())return this.K7[0];throw new Error("not a single-global plugin")}VL(){return this.K7}*instances(){yield*this.K7}*WL(){yield*this.K7,yield*this.uf.Mxt(this)}UL(){return this.K7.length}jz(t){this.K7.push(t)}m_t(){this.CGt=!0}T$(){if(this.CGt&&!this.HIt){let s=this.K7,e=0;for(let t=s.length;e<t;++e)s[e].g_t(e);const t=this.uf.y_t();for(const i of t)i.D5()===this&&i.g_t(e++);this.CGt=!1}}w_t(t){const s=this.K7;if(t<s.length)return s[t];t-=s.length;const e=this.uf.y_t();for(const i of e)if(i.D5()===this){if(0===t)return i;--t}return null}hxt(t){if(t&&t.X5()&&t.D5()!==this)for(const e of t.Y5())if(e.D5()===this)return e;const s=this.jL().VL();return s.length?s[0]:null}NL(t){const s=this.jL().VL();return 0<s.length?s[t.Q5()%s.length]:null}*Pxt(t,s){let e=this.jL().VL(),i=e.length,n=s.jL(),r=s.jL().VL(),h=r.length,o=t.Q5(),a=(!s.eJ()&&n.Wft()||(o=r.indexOf(t)),Math.ceil(i/h)),l=i%h,u=0,c;c=0==l||o<l?(u=o*a,a):(u=l*a+(o-l)*(a-1),a-1);for(let t=u,s=u+c;t<s;++t)yield e[t]}_bt(t){this.iTt?._bt(t)}Eyt(){if(this.oGt&&!this.HIt){this.T$();const t=this.jL(),s=t.Xft(),e=t.Wft(),i=this.uf.qdt(),n=i&&i.yF()&&i.yF().i0t();for(const r of this.aGt.x$())if(r!==this){r.T$();const h=r.jL();if(h.qft(e),!e){const o=h.Xft();M.jh(o);for(const a of s)o.push(r.w_t(a.Q5()));if(n){const l=t.$ft(),u=h.$ft();M.jh(u);for(const c of l)u.push(r.w_t(c.Q5()))}}}}}kbt(t,s){for(const e of this.LX().x$()){const i=e.jL();t?M.Vh(i.$ft(),s):M.Vh(i.Xft(),s)}}S_t(){return this.YIt}b_t(t){this.KIt=!!t}v_t(){if(this.KIt&&this.pMt){for(const t of this.K7)t.RO().x_t();for(const s of this.uf.y_t())s.D5()===this&&s.RO().x_t();this.KIt=!1}}M_t(s,t,e){if(t){const i=this.TGt.get(t);i&&(i.delete(s),0===i.size)&&this.TGt.delete(t)}if(e){let t=this.TGt.get(e);t||(t=new Set,this.TGt.set(e,t)),t.add(s)}}T_t(){if(this.eJ()){const t=new Set;for(const s of this.QIt)for(const e of s.T_t())t.add(e);return t.values()}return this.TGt.keys()}xbt(){return this.YSt||(this.YSt=new Map),this.YSt}Mbt(){return this.ZSt||(this.ZSt=new Map),this.ZSt}C_t(){return this.YGt(M.Zat.solid)}I_t(){return this.YGt(M.Zat.jumpthru)}G_t(){return this.YGt(M.Zat.NoSave)}Nz(){return this.YGt(M.Zat.Persist)}G9(){const t={instances:this.K7.map(t=>t.Ov())};return this.YSt&&this.YSt.size&&(t.ex=M.jo(this.YSt)),t}_9(t,i){this.YSt&&(this.YSt.clear(),this.YSt=null);const s=t.ex,n=(s&&(this.YSt=M.Ho(s)),this.K7),r=t.instances;for(let t=0,s=Math.min(n.length,r.length);t<s;++t)n[t].Dv(r[t]);for(let t=r.length,s=n.length;t<s;++t)this.uf.H5(n[t]);for(let e=n.length,t=r.length;e<t;++e){let t=r[e],s=null;if(!this.oL()||(s=this.uf.lO().GX(t.w.l))){const h=this.uf.Wz(this.yGt||this,s,!1,0,0,!0);h.Dv(t),i&&i.add(h)}}this.AGt=r,this.m_t()}__t(){return this.AGt}P_t(){this.AGt=null}E_t(){for(let t=0,s=this.K7;t<s;++t)this.K7[t].E_t()}CL(){return this._Gt}oF(){return this.fX}R_t(){return this.PGt}zL(t){this.PGt=t}X$(t){const s=this.uf,e=s.kN()&&!s.cF().YL();e&&ya.StartMeasuringScriptTime(),this.fX.dispatchEvent(t),e&&ya.AddScriptTime()}}}{const Sa=self.Bs;Sa.A_t=class extends Sa.ur{constructor(t,s){super(),this.uf=t,this.k_t=s;for(const e of this.k_t)e.FGt(this)}pr(){this.uf=null}ZO(){return this.uf}DX(){return this.k_t}x$(){return this.k_t}I$(){return this.k_t.some(t=>t.oL())}}}{let S=self.Bs,n=self.C3Debugger,h=S.eL,o=[],a=0,b=new WeakMap,i=new WeakMap;S.Instance=class extends S.ur{constructor(t){if(S.eL!==h)throw new Error("invalid addon manager");super(),this.uf=t.runtime,this.F_t=t.O5,this.Dst=null,this.O_t=null,this.D_t=null,this.L_t=0,this.B_t=t.uid,this.N_t=a++,this.Lbt=0,this.W_t=null;const s=S.ro(t.tags),e=(0<s.length&&(this.W_t=new Set(s)),this.V_t=o,this.j_t=o,this.F_t.s_t()),i=(0<e.length&&(this.j_t=e.map((t,s)=>S.dr(S.H_t,{runtime:this.uf,FW:t,LW:this,index:s}))),this.U_t=this.F_t.X5()?[]:null,this.z_t=-1,this.$It=null,this.RL());if(i.qb()&&(this.Lbt|=4),i.oL())if(this.Dst=S.dr(S.J_t,this,t.QN),t.q_t)this.Dst.X_t(t.q_t);else{this.Dst.$_t();const[n,r]=this.F_t.p_t();this.Dst.n_(n,r),this.D5().e_t()&&this.Dst.KN().Y_t()}t.Z_t?this.K_t(t.Z_t):this.Q_t()}pr(){if(this.D_t&&(this.D_t.V5(),this.D_t=null),0<this.j_t.length){for(const e of this.j_t)e.pr();S.jh(this.j_t)}this.O_t&&(this.O_t.pr(),this.O_t=null);const t=b.get(this),s=(t&&(t.clear(),b.delete(this)),i.get(this));s&&(s.clear(),i.delete(this)),this.U_t&&S.jh(this.U_t),this.$It&&(this.$It.pr(),this.$It=null),this.W_t&&this.W_t.clear(),this.W_t=null,this.uf=null,this.F_t=null,0<this.V_t.length&&S.jh(this.V_t),this.Dst&&(this.Dst.pr(),this.Dst=null)}K_t(t){0<t.length&&(this.V_t=[],S.Jh(this.V_t,t))}Q_t(){const s=this.F_t.BGt();if(0!==s){this.V_t=[];const e=[0,0,""];for(let t=0;t<s;++t)this.V_t.push(e[this.F_t.fet(t)])}}UGt(t,e){if(this.O_t)throw new Error("already got sdk instance");for(let t=0,s=this.j_t.length;t<s;++t){const i=this.j_t[t];i.UGt(e?e[t]:null)}const s=this.RL().gbt();if(s<2){if(this.O_t=S.dr(this.F_t.$Gt(),this,t),!(this.O_t instanceof S.sTt))throw new Error("sdk type must derive from SDKInstanceBase");!this.RL().oL()&&this.F_t.R_t()&&this.GO()}else{const n=this.RL().DMt();this.tPt(n.Instance,t)}}IW(){return this.O_t??this.D_t}RO(){return this.Dst}ZO(){return this.uf}WF(){return this.z_t}eN(){const t=this.z_t;return-1===t?this.ZO().WF():t}VF(t){((t=+t)<0||!isFinite(t))&&(t=0),this.z_t=t,this.D5().e_t()&&this.uf.sPt(this,!0)}nN(){this.z_t=-1,this.D5().e_t()&&this.uf.sPt(this,!1)}g9(){return this.uf.ePt(this)}Hf(){return this.$It||(this.$It=S.dr(S.Event.Hf)),this.$It}Sx(t){this.O_t?this.O_t.Sx(t):this.D_t.kV(this.uf.ND().XGt())}OMt(t){this.O_t.OMt(t)}iPt(){this.Lbt|=2}nPt(){return 0!=(2&this.Lbt)}rPt(){this.Lbt|=1}hj(){return 0!=(1&this.Lbt)}qb(){return 0!=(4&this.Lbt)||this.O_t.qb()}hPt(){this.Lbt|=32}o9(){return 0!=(32&this.Lbt)}oPt(){return 0!=(8&this.Lbt)}aPt(t){t?this.Lbt|=8:this.Lbt&=-9}lPt(){return 0!=(16&this.Lbt)}uPt(t){t?this.Lbt|=16:this.Lbt&=-17}cPt(){return 0!=(64&this.Lbt)}fPt(t){t?this.Lbt|=64:this.Lbt&=-65}dPt(t,s){t<<=16,s?this.Lbt|=t:this.Lbt&=~t}pPt(t){return 0!=(this.Lbt&t<<16)}LTt(){return this.O_t.LTt()}BTt(){return this.O_t.BTt()}NTt(){return this.O_t.NTt()}WTt(){return this.O_t.WTt()}jTt(){return this.O_t.jTt()}_vt(t){return this.O_t._vt(t)}D5(){return this.F_t}r9(){return this.O_t.r9()}Txt(t){return t.eJ()?t.iJ(this.D5()):this.D5()===t}mPt(n,t,s){const e=(t,s)=>{const e=s||t.D5(),i=n.get(e);i?i.add(t):n.set(e,new Set([t]))};if(e(this,t),this.X5())for(const i of this.Y5())e(i);if(s)for(const r of this.B4())e(r)}gPt(){if(!this.RL().yL())throw new Error("object does not support scene graph")}H4(){return null!==this.P4()}P4(){const t=this.RO();if(!t)return null;const s=t.P4();return s?s.eV():null}R4(){const t=this.RO();if(!t)return null;const s=t.R4();return s?s.eV():null}*A4(){const t=this.RO();if(t)for(const s of t.A4())yield s.eV()}yPt(t){if(t)for(const s of this.children())if(s===t)return!0;return!1}R9(){const t=this.RO();return!!t&&t.R9()}wPt(t){const s=this.RO();if(!s)return[];const e=t.Qc();return s.F$().map(t=>t.eV()).filter(t=>t.D5().Qc()===e)}F$(){const t=this.RO();return t?t.F$().map(t=>t.eV()):[]}*children(){const t=this.RO();if(t)for(const s of t.children())yield s.eV()}*B4(){const t=this.RO();if(t)for(const s of t.B4())yield s.eV()}O4(){const t=this.RO();return t?t.O4():0}SPt(){return[...this.A4()].length}_xt(){const t=this.RO();return t?t._xt():0}L4(t){const s=this.RO();if(!s)return null;const e=s.L4(t);return e?e.eV():null}bPt(){const t=this.RO();if(!t)return NaN;const s=t.P4();return s?s.vPt(t):NaN}xPt(t){for(const s of this.RO().F$())if(s.eV().Z5()===t)return!0;return!1}W4(t,s){this.gPt(),t.gPt(),this.RO().W4(t.RO(),s||{})}V4(t){const s=this.RO();s&&s.V4(t.RO())}lW(){const t=this.RO();return!!t&&t.lW()}l$(){const t=this.RO();if(t){const s=t.MPt();if(s)for(const e of s){const i=this.uf.IO(e[2]);if(i){const n=e[3];this.W4(i,{z4:!!(n>>0&1),q4:!!(n>>1&1),Y4:!!(n>>2&1),K4:!!(n>>3&1),tW:!!(n>>4&1),aW:!!(n>>5&1),eW:!!(n>>6&1),nW:!!(n>>7&1),hW:!!(n>>8&1)})}}}}u$(t,s){const e=t.get(this);if(e)for(const i of e.sceneGraphJson.children){const n=s.get(i.index);if(n){const r=i.flags;this.W4(n,{z4:!!(r>>0&1),q4:!!(r>>1&1),Y4:!!(r>>2&1),K4:!!(r>>3&1),tW:!!(r>>4&1),aW:!!(r>>5&1),eW:!!(r>>6&1),nW:!!(r>>7&1),hW:!!(r>>8&1)})}}}sN(){const t=this.uf.TPt();return t?t.Qlt(this):""}X5(){return null!==this.U_t}M$(t){this.U_t.push(t)}J5(){return this.U_t}CPt(t){return!!this.IPt(t)}IPt(t){const s=this.Y5();if(null===s||0===s.length)return!1;for(const e of s)if(e.D5()===t)return e;return null}Y5(){return this.U_t}Fmt(){for(const t of this.Y5())t.D5().jL().Yft(t)}Pbt(){for(const t of this.Y5())t.D5().jL().zft(t)}Ebt(t){for(const s of this.Y5())s.D5().jL().Xft()[t]=s}Abt(){for(const t of this.Y5())t.D5().jL().Jft(t)}Rbt(t){for(const s of this.Y5())s.D5().jL().$ft()[t]=s}RL(){return this.F_t.RL()}g_t(t){this.L_t=t}Q5(){return this.F_t.T$(),this.L_t}Z5(){return this.B_t}GPt(){return this.N_t}_Pt(t){t?this.aN(new Set(t)):this.W_t=null}aN(t){if(0===t.size)this.W_t=null;else{this.W_t?this.W_t.clear():this.W_t=new Set;for(const s of t)this.W_t.add(s)}}hN(){return this.W_t??new Set}Kxt(){return Array.from(this.hN()).join(" ")}s2t(t){t=Math.floor(t);for(const s of this.hN()){if(0===t)return s;--t}return""}Lnt(){return this.j_t}PPt(t){if(t)for(const s of this.j_t)if(s.kW()instanceof t)return s;return null}slt(t){if(!t)return null;const s=this.PPt(t);return s?s.IW():null}Dnt(e){const i=this.j_t;for(let t=0,s=i.length;t<s;++t)if(i[t].DW().uJ()===e)return t;return-1}EPt(){return this.V_t}QGt(){return this.F_t.QGt()}RPt(){return this.V_t.length}$rt(t){const s=this.V_t;if((t|=0)<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}$wt(t){return this.V_t[t]}APt(t){const s=this.V_t[t];return 0===this.F_t.fet(t)?!!s:s}Yrt(t,s){const e=this.V_t;if((t|=0)<0||t>=e.length)throw new RangeError("invalid instance variable");const i=this.F_t.fet(t);switch(i){case 0:e[t]=s?1:0;break;case 1:e[t]="number"==typeof s?s:parseFloat(s);break;case 2:e[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}Vht(t,s){if(0!==s){const e=this.V_t;if((t|=0)<0||t>=e.length)throw new RangeError("invalid instance variable");const i=e[t];if("number"!=typeof i)throw"boolean"==typeof i?new Error("can not set offset of boolean variable"):"string"==typeof i?new Error("can not set offset of string variable"):new Error("unknown instance variable type");e[t]+="number"==typeof s?s:parseFloat(s)}}xbt(){let t=b.get(this);return t||(t=new Map,b.set(this,t)),t}Mbt(){let t=i.get(this);return t||(t=new Map,i.set(this,t)),t}kPt(t){const s=this.D5();if(s.oF().Xf(t))return!0;for(const e of s.u1t())if(e.oF().Xf(t))return!0;return!!this.uf.oF().Xf(t)}$L(){const t=new Set,s=(t.add(this),this.RO());if(s&&s.R9())for(const e of this.B4())if(t.add(e),e.X5())for(const i of e.Y5())t.add(i);if(this.X5())for(const n of this.Y5())t.add(n);for(const r of t.values())r.c$();this.f$()}FPt(){this.F_t.R_t()&&this.GO();for(const t of this.j_t)t.MCt()}OPt(){this.FPt()}c$(){if(this.FPt(),this.kPt("instancecreate")){const t=this.D5(),s=new S.Event("instancecreate");s.LW=this.GO(),t.X$(s);for(const e of t.u1t())e.X$(s);this.uf.X$(s)}this.uf.TN(this.RL().bpt().y$.n2t,this,null)}f$(){if(this.RL().yL()){if(this.X$(new S.Event("hierarchyready")),this.kPt("hierarchyready")){const t=this.D5(),s=new S.Event("hierarchyready");s.LW=this.GO(),t.X$(s);for(const e of t.u1t())e.X$(s);this.uf.X$(s)}this.uf.TN(this.RL().bpt().y$.vxt,this,null)}}DPt(){this.uf.TN(this.RL().bpt().y$.r2t,this,null)}LPt(t){if(this.D_t){const s=new S.Event("destroy");s.BPt=t,this.X$(s)}if(this.kPt("instancedestroy")){const e=this.D5(),i=new S.Event("instancedestroy");i.LW=this.GO(),i.BPt=t,e.X$(i);for(const n of e.u1t())n.X$(i);this.uf.X$(i)}}NPt(){return this.O_t?this.O_t.TTt():this.D_t.BN()}Ov(t="full",s=null){const e={},i=("full"===t?e.uid=this.Z5():e.c3=!0,this.hN());if(0<i.size&&(e.tags=Array.from(i)),"visual-state"!==t){const r=b.get(this);if(r&&r.size&&(e.ex=S.jo(r)),-1!==this.WF()&&(e.mts=this.WF()),0<this.F_t.BGt()){const h={},o=this.F_t.ZGt();for(let t=0,s=this.V_t.length;t<s;++t)h[o[t].toString()]=this.V_t[t];e.ivs=h}if(this.j_t.length){const a={};for(const l of this.j_t){const u=l.Ov(t);u&&(a[l.DW().uJ().toString()]=u)}e.behs=a}}this.Dst&&(e.w=this.Dst.G9(t,s));const n=this.O_t?this.O_t.Ov():this.D_t.NN();return n&&(e.data=n),e}UY(t="full",s){this.Dst&&this.Dst.UY(t)}JY(t,s="full",e=null){this.Dst&&this.Dst.JY(t,s,e)}WPt(t,s="full",e=null){this.Dst&&this.Dst.WPt(t,s,e)}E_t(){this.RL().oL()&&this.Dst.E_t()}Dv(s,t="full",e){if("full"===t)this.B_t=s.uid;else if(!s.c3)return;if(this._Pt(s.tags),"visual-state"!==t){let t=b.get(this);t&&(t.clear(),b.delete(this));const n=s.ex,r=(n&&(t=S.Ho(n),b.set(this,t)),this.z_t=s.hasOwnProperty("mts")?s.mts:-1,s.ivs);if(r)for(const[h,o]of Object.entries(r)){const a=parseInt(h,10),l=this.F_t.KGt(a);if(!(l<0||l>=this.V_t.length)){let t=o;null===t&&(t=NaN),this.V_t[l]=t}}}if(this.RL().oL()){const u=s.w;if(u){const c=u.l;if(this.Dst.AO().uJ()!==c){const f=this.Dst.AO(),d=f.dO().GX(c);d?(this.Dst.DO(d),f.Jz(this,!0),d.jz(this,!0),d.LO(this),this.Dst.t4()):"full"===t&&this.uf.H5(this)}this.Dst._9(u,t)}}if("visual-state"!==t){const p=s.behs;if(p)for(const[m,g]of Object.entries(p)){const y=parseInt(m,10),w=this.Dnt(y);w<0||w>=this.j_t.length||this.j_t[w].Dv(g,t)}}const i=s.data;i&&(this.O_t?this.O_t.Dv(i,t):this.D_t.WN(i))}GO(){return this.D_t||this.tPt()}_Tt(){return!!this.D_t}tPt(t,s){const e=this.Dst?t?self.GV:self.bW:t?self.fN:self.F5,i=t||this.O_t.DMt(),n=this.F_t.R_t(),r=n||i||e,h=this.RL().gbt();if(S.eL.NMt(this,h),S.eL.NCt(s),this.D_t=new r,S.eL.WCt(),S.eL.WMt(h),i&&!(this.D_t instanceof e))throw new TypeError(`script interface class '${i.name}' does not extend the right base class '${e.name}'`);if(n){const o=i||e;if(!(this.D_t instanceof o))throw new TypeError(`setInstanceClass(): class '${n.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.D_t}L5(t){if(0!==this.V_t.length){const e={},i=this.F_t.t_t();for(let t=0,s=i.length;t<s;++t)e[i[t]]={configurable:!1,enumerable:!0,get:S.Instance.prototype.APt.bind(this,t),set:S.Instance.prototype.Yrt.bind(this,t)};const s=Object.create(Object.prototype,e);t.VPt={value:s,writable:!1}}}B5(t){const s=this.j_t;if(0!==s.length){const e={};for(const n of s)e[n.DW().i1t()]={value:n.hTt(),writable:!1};const i=Object.create(Object.prototype,e);t.bmt={value:i,writable:!1}}}X$(t){if(this._Tt()){const s=this.GO(),e=(t.LW=s,this.uf),i=e.kN()&&!e.cF().YL();i&&n.StartMeasuringScriptTime(),s.dispatchEvent(t),i&&n.AddScriptTime()}}}}{const ba=self.Bs;ba.D$=class extends ba.ur{constructor(i){super(),this.Hv=i,this.Wmt=null,this.jPt=[],this.HPt=i.am(),this.UPt=i.vm(),this.zPt=1,this.JPt=1,this.qPt=0,this.XPt=1,this.$Pt=i.FE(),this.YPt=null,this.ZPt=null,this.KPt=NaN,this.QPt=!1,this.F9=NaN,this.O9=NaN,this.tEt=t=>{if(t.LW===this.Wmt.eV()){const s=i.ZO(),e=(s.Hf().removeEventListener("instancecreate",this.tEt),this.Wmt.eV().IW());this.QPt=!!e.Pet(),this.F9=this.QPt?e._et():NaN,this.O9=this.QPt?e.Ret():NaN}}}pr(){this.Wmt=null,this.YPt=null,this.ZPt=null,this.KPt=NaN,this.QPt=!1,this.F9=NaN,this.O9=NaN,ba.jh(this.jPt)}sEt(t){if(this.XPt=this.Hv.FE(),this.$Pt=this.XPt,this.Wmt=t,this.qPt=t?t.aB():0,this.Wmt){const s=this.Hv,e=s.ZO(),i=this.Wmt.eV().RL().gbt();if(i<2){const n=this.Wmt.eV().IW();n?(this.QPt=!!n.Pet(),this.F9=this.QPt?n._et():NaN,this.O9=this.QPt?n.Ret():NaN):this.Wmt.eV().hj()||e.Hf().addEventListener("instancecreate",this.tEt)}else this.QPt=!1,this.F9=NaN,this.O9=NaN}else this.QPt=!1,this.F9=NaN,this.O9=NaN}P4(){return this.Wmt}R9(){return 0<this.jPt.length}F$(){return this.jPt}eEt(){this.R9()&&1!==this.jPt.length&&(this.ZPt?this.jPt.sort((t,s)=>{const e=this.ZPt.get(t.eV()),i=this.ZPt.get(s.eV());return ba.di(e)&&ba.di(i)?e-i:0}):this.jPt.sort((t,s)=>{const e=t.hht().iEt(),i=s.hht().iEt();return ba.di(e)&&ba.di(i)?e-i:0}))}iEt(){return this.KPt}oht(){return this.zPt}nEt(t){this.zPt=t}lht(){return this.JPt}rEt(t){this.JPt=t}yht(){return this.$Pt}Yvt(){return this.XPt}hEt(t){this.XPt=t}rht(){return 0===this.HPt?Number.EPSILON:this.HPt}aht(){return 0===this.UPt?Number.EPSILON:this.UPt}oEt(){if(this.Hv.Z4()){let t=this.Wmt,s=t.am(),e=t.hht().rht();return 0===s&&(s=Number.EPSILON),e===Number.EPSILON&&s===Number.EPSILON?1:e===Number.EPSILON&&s!==Number.EPSILON&&this.QPt?1+s/this.F9:s/e}return 1}aEt(){if(this.Hv.Q4()){let t=this.Wmt,s=t.vm(),e=t.hht().aht();return 0===s&&(s=Number.EPSILON),e===Number.EPSILON&&s===Number.EPSILON?1:e===Number.EPSILON&&s!==Number.EPSILON&&this.QPt?1+s/this.O9:s/e}return 1}lEt(){return 0}uEt(){return{sw:this.HPt,sh:this.UPt,sx:this.zPt,sy:this.JPt,psa:this.qPt,oo:this.XPt,so:this.$Pt,pi:this.Hv.eV().bPt()}}G9(t,s=null){const e=this.uEt();return s&&s.selfOnly?Object.assign(e,{p:null,c:[]}):Object.assign(e,{p:this.cEt(t),c:this.fEt(t)})}dEt(t){let s="";return t.J4()&&(s+="x"),t.X4()&&(s+="y"),t.Z4()&&(s+="w"),t.Q4()&&(s+="h"),t.sW()&&(s+="a"),t.iW()&&(s+="z"),t.lW()&&(s+="d"),t.rW()&&(s+="o"),t.oW()&&(s+="v"),s}cEt(t){return this.Wmt&&this.Wmt.eV()&&!this.Wmt.eV().hj()?this.pEt(this.Wmt,this.Hv,t):null}fEt(s){return this.jPt.map(t=>this.pEt(t,t,s)).filter(t=>t)}pEt(t,s,e){const i=t.eV();if(i&&i.hj())return null;const n={};return n.uid=i.Z5(),n.f=this.dEt(s),n.offsets=s.mEt(),n.data=ba.D$.gEt(i),n.oci=i.D5().Ak(),"state"===e?(n.inst=i.Ov("full",{selfOnly:!0}),n.instIndex=NaN):(n.instIndex=i.D5().VL().indexOf(i),n.inst=null),n}_9(t){this.HPt=t.sw,this.UPt=t.sh,this.zPt=t.sx,this.JPt=t.sy,this.qPt=t.psa,this.XPt=t.oo,this.$Pt=t.so,this.KPt=ba.di(t.pi)?t.pi:NaN}yEt(t,s){if(!t&&!s&&this.YPt)for(const e of this.YPt)e.hj()||e.H4()||e.ZO().H5(e);this.YPt=t,this.ZPt=s}JY(t,s){const e=this.Hv,i=e.ZO(),n=new Set;if(t.p&&!this.Wmt){const o=t.p.uid,a=i.IO(o);if(s?.p2t,a){const l=a.RO();if(a.yPt(e.eV()))this.Wmt=l;else{a.xPt(e.eV().Z5())?i.H5(e.eV()):a.W4(e.eV(),this.wEt(t.p.f)),n.has(e)||(e.SEt(t.p.offsets),this.bEt(a,t.p,s)),n.add(e);const u=a.RO();u.hht().eEt()}}else if(ba.di(t.p.oci)){const c=i.Rz(t.p.oci),f=(i.m7(),i.JL(c,e.AO(),0,0,!0));if(s?.p2t,f){const d=this.vEt(t.p,i),p=(d&&f.Dv(d),f.RO()),m=(p.AO().qL(f),f.W4(e.eV(),this.wEt(t.p.f)),f.RO());m.hht().eEt()}}}const r=[];for(const g of t.c){const y=g.uid,w=i.IO(y);w&&r.push(w)}let h=0;for(const S of t.c){const b=S.uid,v=i.IO(b);if(s?.p2t,v){if(this.YPt){if(this.YPt.includes(v)){const C=v;if(C.D5()!==v.D5()){h++;continue}if(C.hj()){h++;continue}const I=t.c[h];if(!s?.p2t&&this.xEt(C,r,e)){this.MEt(h,I,e,n,s),h++;continue}if(C.H4()&&C.P4()!==e.eV()){const G=this.TEt(I,s);this.CEt(G,I,n,s),h++;continue}this.CEt(C.RO(),I,n,s,!0),h++;continue}if(this.YPt[h]){const _=this.YPt[h];if(_.D5()!==v.D5()){h++;continue}if(_.hj()){h++;continue}const P=t.c[h];if(!s?.p2t&&this.xEt(_,r,e)){this.MEt(h,P,e,n,s),h++;continue}if(_.H4()&&_.P4()!==e.eV()){const E=this.TEt(P,s);this.CEt(E,P,n,s),h++;continue}this.CEt(_.RO(),P,n,s,!0),h++;continue}}const x=v.D5(),M=this.IEt(r,x),T=e.eV().wPt(x).length;if(M===T){const R=e.eV().L4(h);if(R){const A=R.RO();A&&(n.has(A)||(A.SEt(S.offsets),this.bEt(R,S,s)),n.add(A))}h++;continue}if(v.H4()&&v.P4()!==e.eV()){const k=this.TEt(S,s);this.CEt(k,S,n,s),h++;continue}this.CEt(v.RO(),S,n,s)}else if(this.YPt&&this.YPt[h]){const F=this.YPt[h],D=i.Rz(this.GEt(S));if(F.D5()!==D){h++;continue}if(F.hj()){h++;continue}const O=t.c[h];if(!s?.p2t&&this.xEt(F,r,e)){this.MEt(h,O,e,n,s),h++;continue}if(F.H4()&&F.P4()!==e.eV()){const L=this.TEt(O,s);this.CEt(L,O,n,s),h++;continue}this.CEt(F.RO(),O,n,s)}else{const B=this.TEt(S,s);this.CEt(B,S,n,s)}h++}}xEt(t,s,e){const i=t.D5(),n=this.IEt(s,i),r=e.eV().wPt(i).length;return n===r}MEt(t,s,e,i,n){const r=e.eV().L4(t,s);if(r){const h=r.RO();h&&(i.has(h)||(h.SEt(s.offsets),this.bEt(r,s,n)),i.add(h))}}wEt(t){const s={};return s.z4=t.includes("x"),s.q4=t.includes("y"),s.Y4=t.includes("w"),s.K4=t.includes("h"),s.tW=t.includes("a"),s.eW=t.includes("z"),s.aW=t.includes("d"),s.nW=t.includes("o"),s.hW=t.includes("v"),s}GEt(t){return ba.di(t.oci)?t.oci:t[1]}TEt(i,n){if(ba.di(i.oci)){let t=this.Hv,s=t.ZO(),e;if(i.data)e=s.Wz(i.data,t.AO(),!1,0,0,!1,!0);else{const r=s.Rz(i.oci);e=s.JL(r,t.AO(),0,0,!0)}if(n?.p2t,e){const h=this.vEt(i,s),o=(h&&e.Dv(h),e.RO());return o.AO().qL(e,!0),o}}}CEt(t,s,e,i,n=!0){const r=this.Hv,h=r.W4(t,this.wEt(s.f));h&&n&&(e.has(t)||(t.SEt(s.offsets),this.bEt(t.eV(),s,i)),e.add(t)),this.eEt()}bEt(t,s,e){let i=this.vEt(s,this.Hv.ZO());i&&((i=JSON.parse(JSON.stringify(i))).w=null,t.Dv(i))}IEt(t,s){return t.filter(t=>t.D5().Qc()===s.Qc()).length}vEt(t,s){if(ba.di(t.instIndex)){const e=s.Rz(t.oci),i=e.__t();return i?i[t.instIndex]:null}return ba.Mi(t.inst)?JSON.parse(t.inst):t.inst||void 0}static gEt(t){let s=t.RO().AO().Dz(t.Z5());if(!s)return null;s=JSON.parse(JSON.stringify(s));const e=[];for(const i of[...t.F$()]){const n=i.RO();e.push([n.dO().uJ(),n.AO().Ak(),i.Z5(),ba.D$.O$(n),i.D5().X5()?1:0,n.kO(),ba.D$.gEt(i)])}return ba.Bi(s[0][14])?s[0][14][1]=e:(s[0][14]=[],s[0][14][0]=ba.D$._Et(),s[0][14][1]=e,s[0][14][2]=t.RO().kO()),s}static O$(t){let s=0;return(s|=Number(t.oW())<<8)|Number(t.rW())<<7|Number(t.iW())<<6|Number(t.lW())<<5|Number(t.sW())<<4|Number(t.Q4())<<3|Number(t.Z4())<<2|Number(t.X4())<<1|Number(t.J4())<<0}static _Et(t){let s=0;return s,511}}}{let d=self.Bs,t=self.vs,r=(t.Ps,d.dr(d.Rect)),h=d.dr(d.su),s=d.dr(d.Event,"bboxchange",!1),f=d.dr(d.qo,0,0,0,0),u=d.dr(d.Ou),e=d.dr(d.qo,1,1,1,1),o=d.dr(d.Rect,0,0,-1,-1),n=d.dr(d.Rect,0,0,-1,-1),p=new Set(["absolute","relative"]),i=[],m=!0,g=new WeakMap,a=new WeakMap;d.J_t=class extends d.ur{constructor(t,s){super(),this.Ie=t,this._ft=t.D5(),this.uf=t.ZO(),this.PEt=s,this._ft.M_t(this,null,s),this.EEt=-1,this.REt=-1,this.Lbt=196635,this._ft.RL().cL()&&(this.Lbt|=128),this.el=NaN,this.il=NaN,this.av=NaN,this.AEt=NaN,this.kEt=NaN,this._2=NaN,this.Zo=NaN,this.FEt=NaN,this.OEt=NaN,this.DEt=NaN,this.LEt=NaN,this.BEt=d.dr(d.Rect),this.NEt=d.dr(d.su),this.WEt=n,this.VEt=o,this.jEt=null,this.HEt=null,this.UEt=null,this.ov=e,this.zEt=e,this.JEt=null,this.qEt=null,this.Ie.D5().e_t()&&(this.qEt=d.dr(d.XEt,this.Ie,this)),this.$Et=null,this.YPt=null,this.ZPt=null,this.YEt=-1,this.ZEt=null}rPt(){this.Lbt|=256}pr(){if(this._ft.M_t(this,this.PEt,null),this.JEt&&(this.uf.jb().nS(this.JEt),this.JEt=null),this.jEt=null,this.HEt&&(this.HEt.KEt.pr(),this.HEt=null),this.UEt&&(this.UEt.clear(),this.UEt=null),this.dW(),this.qEt&&this.qEt.pr(),this.H4()&&this.P4().V4(this),this.R9()){const t=[...this.F$()];for(const s of t)this.V4(s)}this.QEt(),this.tRt(),g.delete(this),a.delete(this),this.Ie=null,this._ft=null,this.uf=null,this.PEt=null}X_t(t){if(m=!1,this.s4(t[0],t[1]),this._v(t[2]),this.n_(t[3],t[4]),this._2=0,this.cL()?this.oB(t[6]):this.Zo=0,f.za(t[7]),this.sRt(f),this.Sht(t[8]),this.vht(t[9]),this.uv(t[10]),this.qEt&&this.qEt.eRt(t[12]),t[14]&&g.set(this,{iRt:t[14][1],nRt:t[14][2]}),t[15]){const s=t[15],i=(this.cW(s[0],s[1]),this.wW()),n=s[2];for(let e=0,t=n.length;e<t;++e){const r=n[e];for(let t=0,s=r.length;t<s;++t){const h=r[t],o=i.yx(t,e);o.Mv(h[0]),o.Iv(h[1]),o._v(h[2]),o.Ev(h[3]),o.Av(h[4])}}}if(t[16]){const e=t[16][0],a=t[16][1],l=!!a,u=!l,c=this.uf.TPt();l&&c&&c.Klt(this.eV(),a),u&&c&&c.Klt(this.eV(),e)}m=!0,this.rRt()}$_t(){this.el=0,this.il=0,this.av=0,this.AEt=0,this.kEt=0,this._2=0,this.Zo=0,this.FEt=0,this.OEt=1,this.DEt=0,this.LEt=0,this.rRt()}ZO(){return this.uf}D5(){return this._ft}eV(){return this.Ie}hRt(){return this.sW()?this.oRt(this.P4().aRt()-this.$Et.lEt()):0}Mv(t){if(t=+t,this.J4()){const s=this.$Et,e=t-this.xv(),i=-this.hRt();0==i?this.el+=e/s.oEt():(this.el+=Math.cos(i)*e/s.oEt(),this.X4()&&(this.il+=Math.sin(i)*e/s.aEt()))}else this.el=t}sht(t,s=!1){t=+t,!s&&this.J4()?this.Mv(this.xv()+t):this.el+=t}xv(){if(this.J4()){let t=this.el,s=this.$Et,e=this.P4(),i=this.hRt();return 0===i?t*=s.oEt():(t=t*s.oEt()*Math.cos(i),this.X4()&&(t-=this.il*s.aEt()*Math.sin(i))),e.xv()+t}return this.el}Iv(t){if(t=+t,this.X4()){const s=this.$Et,e=t-this.Cv(),i=-this.hRt();0==i?this.il+=e/s.aEt():(this.J4()&&(this.el-=Math.sin(i)*e/s.oEt()),this.il+=Math.cos(i)*e/s.aEt())}else this.il=t}eht(t,s=!1){t=+t,!s&&this.X4()?this.Iv(this.Cv()+t):this.il+=t}Cv(){if(this.X4()){let t=this.il,s=this.$Et,e=this.P4(),i=this.hRt();return 0===i?t*=s.aEt():(t=t*s.aEt()*Math.cos(i),this.J4()&&(t+=this.el*s.oEt()*Math.sin(i))),e.Cv()+t}return this.il}s4(t,s){if(t=+t,s=+s,this.lRt()){const e=this.J4(),i=this.X4(),n=this.$Et,r=t-this.xv(),h=s-this.Cv(),o=-this.hRt();if(0==o)e?this.el+=r/n.oEt():this.el=t,i?this.il+=h/n.aEt():this.il=s;else{const a=Math.sin(o),l=Math.cos(o);e?this.el+=i?(l*r-a*h)/n.oEt():l*r/n.oEt():this.el=t,i?this.il+=e?(a*r+l*h)/n.aEt():l*h/n.aEt():this.il=s}}else this.el=t,this.il=s}uRt(){return[this.xv(),this.Cv()]}n4(t,s){t=+t,s=+s,this.lRt()?this.s4(this.xv()+t,this.Cv()+s):(this.el+=t,this.il+=s)}Ivt(t,s){return this.xv()===t&&this.Cv()===s}_v(t){if(t=+t,this.iW()&&(t-=this.P4().Gv()),this.av!==t){this.av=t,this.cRt();const s=this.AO();0!==this.av&&s.$z(),s.LO(this)}}cRt(){if(this.rRt(),this.R9()){const e=this.F$();for(let t=0,s=e.length;t<s;t++){const i=e[t];i.iW()&&i.cRt()}}}xht(t){this._v(this.Gv()+t)}Gv(){return this.iW()?this.P4().Gv()+this.av:this.av}h4(){return this.AO().Gv()+this.Gv()}Pet(){const t=this.eV().RL().gbt();return t<2&&this.eV().IW().Pet()}ym(t){if(t=+t,this.Z4()){const s=this.am();0===s?this.AEt=Number.EPSILON:this.AEt*=t/s}else this.AEt=t;this.fRt()}Hm(t,s){t=+t,!s&&this.Z4()?this.ym(this.am()+t):this.AEt+=t,this.fRt()}am(){if(this.Z4()){const t=this.P4(),s=t.am(),e=t.hht().rht();return e===Number.EPSILON?(this.hht().rht()+s)*this.AEt:s*this.AEt}return this.AEt}lm(t){if(t=+t,this.Q4()){const s=this.vm();0===s?this.kEt=Number.EPSILON:this.kEt*=t/s}else this.kEt=t;this.fRt()}uht(t,s){t=+t,!s&&this.Q4()?this.lm(this.vm()+t):this.kEt+=t,this.fRt()}vm(){if(this.Q4()){const t=this.P4(),s=t.vm(),e=t.hht().aht();return e===Number.EPSILON?(this.hht().aht()+s)*this.kEt:s*this.kEt}return this.kEt}n_(t,s){if(t=+t,s=+s,this.Z4()){const e=this.am();0===e?this.AEt=Number.EPSILON:this.AEt*=t/e}else this.AEt=t;if(this.Q4()){const i=this.vm();0===i?this.kEt=Number.EPSILON:this.kEt*=s/i}else this.kEt=s;this.fRt()}hc(){return[this.am(),this.vm()]}h9(){return this._2}dRt(t){if(t<0)throw new RangeError("invalid depth");this._2=t}pRt(){if(this.H4()){const t=this.$Et;return Math.min(t.oEt(),t.aEt())}return 1}cL(){return 0!=(128&this.Lbt)}oB(t){t=+t,this.cL()&&(this.sW()&&(t-=this.P4().aB()),t=d.vr(t),this.Zo!==t)&&(this.Zo=t,this.fRt())}cht(t){0!=(t=+t)&&this.cL()&&(this.Zo=d.vr(this.Zo+t),this.fRt())}fRt(){if(this.Lbt|=1<<18,this.R9()){const e=this.F$();for(let t=0,s=e.length;t<s;t++)e[t].fRt()}}aB(){return this.sW()&&this.cL()?this.oRt(d.vr(this.P4().aRt()+this.Zo)):this.Zo}aRt(){return this.sW()&&this.cL()?d.vr(this.P4().aRt()+this.Zo):this.Zo}oRt(t){return this.Z4()&&this.R4().am()<0&&(t=d.vr(d.Dr(t,this.R4().aB()+Math.PI))),this.Q4()&&this.R4().vm()<0?d.Dr(t,this.R4().aB()):t}mRt(){const t=this.P4();return!!(this.Z4()&&t.am()<0)||!!(this.Q4()&&t.vm()<0)}gRt(){const t=this.P4();return!!(this.Z4()&&t.am()<0&&this.Q4()&&t.vm()<0)}yRt(){const t=this.Lbt;if(0!=(t&1<<18)){const s=this.aB();this.FEt=Math.sin(s),this.OEt=Math.cos(s),this.Lbt=-262145&t}}Rvt(){return this.yRt(),this.FEt}Evt(){return this.yRt(),this.OEt}Sht(t){this.DEt=+t}wht(t){this.DEt+=+t}d6(){return this.DEt}vht(t){this.LEt=+t}bht(t){this.LEt+=+t}m6(){return this.LEt}sRt(t){this.ov.equals(t)||(this.ov===e?(this.ov=d.dr(d.qo,t),this.zEt=d.dr(d.qo,t),this.zEt.Ta()):t.Sa(1,1,1,1)?(this.ov=e,this.zEt=e):(this.ov.set(t),this.zEt.set(t),this.zEt.Ta()),this.rRt())}DE(t){if(t=d.br(+t,0,1),this.rW()){if(this.hht().Yvt()===t)return;this.hht().hEt(t),t=this.FE()}else if(this.ov.a===t)return;this.wRt(t)}SRt(){if(this.R9()){const e=this.F$();for(let t=0,s=e.length;t<s;t++){const i=e[t];i.wRt(i.FE())}}}wRt(t){f.la(this.ov),f.a=t,this.sRt(f),this.SRt()}pht(t){this.rW()?this.DE(this.hht().Yvt()+t):this.DE(this.FE()+t)}FE(){return this.rW()?this.P4().FE()*this.hht().Yvt():this.ov.a}g4(t){this.ov.ya(t)||(f.la(t),f.a=this.FE(),this.sRt(f))}qrt(t,s,e){f.Qo(t,s,e),this.g4(f)}bRt(t,s,e){0===t&&0===s&&0===e||(f.la(this.ov),f.r+=t,f.g+=s,f.b+=e,this.g4(f))}m4(){return this.ov}mz(){return this.zEt}lW(){return 0!=(512&this.Lbt)}vRt(t){this.xRt(512,t)}J4(){return 0!=(1024&this.Lbt)}MRt(t){this.xRt(1024,t)}X4(){return 0!=(2048&this.Lbt)}lRt(){return 0!=(3072&this.Lbt)}TRt(t){this.xRt(2048,t)}Z4(){return 0!=(4096&this.Lbt)}CRt(t){this.xRt(4096,t)}Q4(){return 0!=(8192&this.Lbt)}IRt(t){this.xRt(8192,t)}sW(){return 0!=(16384&this.Lbt)}GRt(t){this.xRt(16384,t)}iW(){return 0!=(32768&this.Lbt)}_Rt(t){this.xRt(32768,t)}rW(){return 0!=(this.Lbt&1<<22)}PRt(t){this.xRt(1<<22,t)}oW(){return 0!=(this.Lbt&1<<23)}ERt(t){this.xRt(1<<23,t)}RRt(){this.Lbt&=-12647937}W4(t,s){if(t===this)return!1;if(t.H4())return!1;if(this.ARt(t))return!1;if(this.kRt(t))return!1;const e=t.xv(),i=t.Cv(),n=t.am(),r=t.vm(),h=t.aB(),o=t.Gv(),a=t.FE(),l=(t.FRt(this),t.MRt(s.z4),t.TRt(s.q4),t.CRt(s.Y4),t.IRt(s.K4),t.GRt(s.tW),t._Rt(s.eW),t.PRt(s.nW),t.ERt(s.hW),t.vRt(s.aW),e-this.xv()),u=i-this.Cv(),c=-this.aB(),f=Math.cos(c),d=Math.sin(c);if(s.z4&&(s.tW?t.el=l*f-u*d:t.el=l,s.Y4)){const p=this.am()/this.$Et.rht();0!=p&&(t.el/=p)}if(s.q4&&(s.tW?t.il=l*d+u*f:t.il=u,s.K4)){const m=this.vm()/this.$Et.aht();0!=m&&(t.il/=m)}if(s.Y4){const g=this.am();0===g||g===Number.EPSILON?(t.AEt=1,t.$Et.nEt(1)):(t.AEt=n/this.am(),t.$Et.nEt(t.AEt))}if(s.K4){const y=this.vm();0===y||y===Number.EPSILON?(t.kEt=1,t.$Et.rEt(1)):(t.kEt=r/this.vm(),t.$Et.rEt(t.kEt))}return s.tW&&(t.Zo=h-this.aB()),s.eW&&(t.av=o-this.Gv()),s.nW&&t.$Et.hEt(a),s.hW&&t.zB(this.qB()),this.ORt(t),this.t4(),this.SRt(),!0}V4(t){if(t.P4()===this){const s=t.xv(),e=t.Cv(),i=t.am(),n=t.vm(),r=t.aB(),h=t.Gv(),o=t.FE();t.FRt(null),t.RRt(),t.s4(s,e),t.n_(i,n),t.oB(r),t._v(h),t.DE(o),this.DRt(t),this.t4()}}LRt(){return this.YEt}BRt(){this.NRt();const t=[...this.children()];for(const e of t)this.V4(e);const s=this.P4();s&&s.V4(this),this.RRt()}NRt(){if(this.WRt(),!this.YPt){const s=[...this.children()];s.length&&(this.YPt=[],this.ZPt=new WeakMap);let t=0;for(const e of s){const i=e.eV();this.YPt.push(i),this.ZPt.set(i,t),t++}}const t=this.P4();t&&t.NRt()}WRt(){if(-1===this.YEt){const t=[...this.A4()];this.YEt=t.length;for(const e of t)e.WRt();const s=[...this.children()];for(const i of s)i.WRt()}}tRt(){this.YPt&&(this.YPt.length=0),this.YPt=null,this.ZPt=null;const t=this.P4();t&&t.tRt(),this.YEt=-1}H4(){return null!==this.P4()}P4(){const t=this.$Et;return null!==t?t.P4():null}R4(){let t=this;for(;t.H4();)t=t.P4();return t}*A4(){let t=this.P4();for(;t;)yield t,t=t.P4()}yPt(t){return this.F$().includes(t)}R9(){const t=this.$Et;return null!==t&&t.R9()}F$(){const t=this.$Et;return null!==t?t.F$():i}children(){return this.F$()}*B4(){for(const t of this.children())yield t,yield*t.B4()}O4(){return this.F$().length}_xt(){return[...this.B4()].length}L4(t){const s=this.F$();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}vPt(s){if(s){const e=this.F$();if(e)for(let t=0;t<e.length;t++)if(s===e[t])return t}return NaN}VRt(t){this.$Et||(this.$Et=d.dr(d.D$,this)),t&&this.$Et.sEt(t)}hht(){return this.$Et}QEt(){this.$Et&&(this.$Et.pr(),this.$Et=null)}FRt(t){t?(t.VRt(null),this.VRt(t)):(this.$Et&&this.$Et.sEt(null),this.R9()||this.QEt())}kRt(t){if(!this.H4())return!1;const s=this.P4();return s===t||s.kRt(t)}ARt(t){if(this.yPt(t))return!0;for(const s of this.F$())if(s.ARt(t))return!0;return!1}ORt(t){this.$Et.F$().push(t)}DRt(t){const s=this.$Et.F$(),e=s.indexOf(t);-1!==e&&s.splice(e,1),0!==s.length||this.H4()||this.QEt(),t.R9()||t.QEt()}MPt(){const t=g.get(this);return t?t.iRt:null}jRt(){const t=g.get(this);return t?t.nRt:NaN}E9(){const t=a.get(this);return d.di(t)?t:NaN}HRt(t){a.set(this,t)}URt(){this.xRt(1<<19,!0),this.rRt()}rRt(){if(m){const s=this.uf.jb();this.JEt&&s.nS(this.JEt);let t;t=0!=(this.Lbt&1<<19)?s.Ww()||"<point>":s.Lw()||"<default>",this.JEt=s.tS(t,this.y5(),this.zEt,this.Gv())}}d9(){return this.JEt}pJ(){return this.ov===e}uv(t){if((t|=0)<0||31<t)throw new RangeError("invalid blend mode");this.y5()!==t&&(this.Lbt=this.Lbt&~(31<<26)|t<<26,this.rRt())}y5(){return(this.Lbt&31<<26)>>26}DO(t,s){const e=s&&this.PEt!==t;e&&this.qz(),this._ft.M_t(this,this.PEt,t),this.PEt=t,e&&this.zRt(),0!==this.Gv()&&this.PEt.$z()}AO(){return this.PEt}dO(){return this.AO().dO()}Zz(t){this.EEt=0|t}kO(){return this.PEt.hq(),this.EEt}uq(t){this.REt=0|t}tj(){return this.PEt.aq(),this.REt}X7(){return this.EEt}xRt(t,s){s?this.Lbt|=t:this.Lbt&=~t}qB(){return 0!=(1&this.Lbt)}zB(t){if(this.xRt(1,t),this.R9())for(const s of this.F$())s.oW()&&s.zB(t)}I4(){return 0!=(8&this.Lbt)}G4(t){t=!!t,this.I4()!==t&&(this.xRt(8,t),t?this.t4():this.JRt())}qRt(t,s){if(this.xRt(32,t),this.UEt&&this.UEt.clear(),s.trim()){this.UEt||(this.UEt=new Set);for(const e of s.split(" "))e&&this.UEt.add(e.toLowerCase())}else this.UEt=null}XRt(t){const s=0!=(32&this.Lbt),e=this.UEt;if(t&&e)for(const i of e)if(t.has(i))return s;return!s}t4(){if(this.Lbt|=65554,this._ft.b_t(!0),this.uf.BO(),this.PEt.Gz()&&(this.$Rt(this.BEt,this.NEt,!0),this.Lbt&=-3,this.zRt()),0!=(4&this.Lbt)&&this.Ie.Hf().dispatchEvent(s),null!==this.$Et){const e=this.$Et.F$();for(let t=0,s=e.length;t<s;++t)e[t].t4()}}$Rt(t,s,e){const i=this.xv(),n=this.Cv(),r=this.am(),h=this.vm(),o=this.aB();t.yl(i-this.DEt*r,n-this.LEt*h,r,h),e&&this.yW()&&this.YRt(t),0===o?s.xu(t):(t.offset(-i,-n),s.Tu(t,this.Rvt(),this.Evt()),s.offset(i,n),s.Cu(t)),t.normalize()}ZRt(){const t=this.Lbt;0!=(2&t)&&(this.$Rt(this.BEt,this.NEt,!0),this.Lbt=-3&t)}a4(){return this.ZRt(),this.BEt}u4(){return this.ZRt(),this.NEt}KRt(t){const s=this.xv(),e=this.Cv(),i=Math.round(s)-s,n=Math.round(e)-e;return 0==i&&0==n?t:(h.G(t),h.offset(i,n),h)}QRt(t){this.BEt.G(t),this.NEt.xu(this.BEt),this.Lbt&=-3,this.x_t(),this.zRt()}tAt(t){this.xRt(4,t)}sAt(){return 0!=(4&this.Lbt)}s9(t,s,e){return s&&0!==this.h9()?this.n9(this.AO().i9()):0===this.Gv()||e?t.$l(this.a4()):this.eAt()}eAt(){const t=this.AO(),s=this.h4();return!(s>=t.AJ())&&(t.EJ(s,r),r.$l(this.a4()))}n9(t){const s=this.a4(),e=s.Cl(),i=s.Gl(),n=s.Il(),r=s._l(),h=this.h4(),o=h+this.h9();return t.by(e,n,h,i,r,o)}f4(){const t=this.AO();if(t.UJ())return this.n9(t.i9());{const s=t.dO();return this.s9(t.v5(),s.t9(),s.DB())}}u9(t){this.xRt(1<<20,t)}l9(t){this.xRt(1<<21,t)}iAt(){return 0!=(this.Lbt&1<<20)}nAt(){return 0!=(this.Lbt&1<<21)}rAt(t){this.jEt=t,this.hAt(),this.yW()&&(this.ZEt.oAt=null)}aAt(){return this.jEt}lAt(){return null!==this.jEt||this.yW()}uAt(){return this.cAt(this.am(),this.vm(),this.aB(),this.Rvt(),this.Evt())}fAt(t,s,e){let i=0,n=1;return 0!==e&&(i=Math.sin(e),n=Math.cos(e)),this.cAt(t,s,e,i,n)}cAt(n,r,t,h,o){let s=this.HEt;null===s&&(s={KEt:d.dr(d.Ou),width:NaN,height:NaN,angle:NaN},this.HEt=s);const a=s.KEt;if(s.width!==n||s.height!==r||s.angle!==t){const l=this.jEt;if(this.yW()){let t=this.d6(),s=this.m6(),e=this.wW(),i=this.ZEt.oAt;i||(l?(u.G(l),u.offset(t,s)):u.Hu(),i=e.vx(u),this.ZEt.oAt=i),e.xx(i,a),a.offset(-t,-s),a.qu(n,r,h,o)}else l?(a.G(l),a.qu(n,r,h,o)):a.Ju(this.u4(),-this.xv(),-this.Cv());s.width=n,s.height=r,s.angle=t}return a}hAt(){this.dAt(!0);const t=this.HEt;null!==t&&(t.width=NaN)}cW(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.eV().RL().SL())throw new Error("object does not support mesh");this.dW(),this.ZEt={pAt:d.dr(d.ty.Wv,t,s),mAt:d.dr(d.ty.Wv,t,s),oAt:null}}yW(){return null!==this.ZEt}wW(){if(this.yW())return this.ZEt.pAt;throw new Error("no mesh")}gAt(){if(this.yW())return this.ZEt.mAt;throw new Error("no mesh")}yAt(t){this.xRt(65536,t)}wAt(){return 0!=(65536&this.Lbt)}dAt(t){this.xRt(1<<17,t)}SAt(){return 0!=(this.Lbt&1<<17)}YRt(t){const s=this.ZEt.pAt,e=Math.min(s.nx(),0),i=Math.min(s.hx(),0),n=Math.max(s.ox(),1),r=Math.max(s.ux(),1),h=t.width(),o=t.height();t.offsetLeft(e*h),t.offsetTop(i*o),t.Ol((n-1)*h),t.Dl((r-1)*o),this._2=s.mx()}dW(){this.ZEt&&(this.ZEt.pAt.pr(),this.ZEt.mAt.pr(),this.ZEt=null,this.hAt())}mW(t,s,e){t=Math.floor(t),s=Math.floor(s);const i=e.mode||"absolute";if(!p.has(i))throw new Error("invalid mode");let n="relative"===i,r=e.x,h=e.y,o=e.u5,a="number"==typeof e.u?e.u:n?0:-1,l="number"==typeof e.v?e.v:n?0:-1;if(!this.yW())return!1;const u=this.wW(),c=u.yx(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.Gv()!==o&&(c._v(o),f=!0),n&&(r+=t/(u.Zv()-1),h+=s/(u.Kv()-1)),a=-1!==a||n?(n&&(a+=t/(u.Zv()-1)),d.br(a,0,1)):c.Pv(),l=-1!==l||n?(n&&(l+=s/(u.Kv()-1)),d.br(l,0,1)):c.Rv(),c.xv()===r&&c.Cv()===h&&c.Pv()===a&&c.Rv()===l?f:(c.Mv(r),c.Iv(h),c.Ev(a),c.Av(l),this.hAt(),!0)}nPt(){return this.Ie.nPt()}_4(t,s){return!!this.a4().Zl(t,s)&&!!this.u4().Zl(t,s)&&(this.nPt()?this.Ie.IW().UTt(t,s):!this.lAt()||this.uAt().Zl(t-this.xv(),s-this.Cv()))}bAt(){return 0!=(16&this.Lbt)}x_t(){if(this.bAt()&&this.I4()&&0==(256&this.Lbt)){const t=this.a4(),s=this._ft.S_t(),e=this.WEt;if(r.set(s.fU(t.Cl()),s.dU(t.Il()),s.fU(t.Gl()),s.dU(t._l())),!e.equals(r)){const i=this.Ie;e===n?(s.pU(i,null,r),this.WEt=d.dr(d.Rect,r)):(s.pU(i,e,r),e.G(r)),this.Lbt&=-17}}}vAt(){this.Lbt|=16}JRt(){const t=this.WEt;t!==n&&(this._ft.S_t().pU(this.Ie,t,null),this.WEt=n)}zRt(){const t=this.AO();if(t.Gz()&&0==(256&this.Lbt)){const s=t.gJ(),e=this.a4(),i=this.VEt;if(r.set(s.fU(e.Cl()),s.dU(e.Il()),s.fU(e.Gl()),s.dU(e._l())),!i.equals(r)){const n=this.Ie;i===o?(s.pU(n,null,r),this.VEt=d.dr(d.Rect,r)):(s.pU(n,i,r),i.G(r)),t.yJ()}}}qz(){const t=this.VEt;t!==o&&(this.AO().gJ().pU(this.Ie,t,null),this.VEt=o)}oq(){return this.VEt}w4(){const t=this.Ie,s=this.PEt,e=s.OO();e.length&&e.at(-1)===t||(s.Jz(t,!1),s.jz(t,!1),this.uf.BO())}b4(){const t=this.Ie,s=this.PEt,e=s.OO();e.length&&e[0]===t||(s.Jz(t,!1),s.zz(t,!1),this.uf.BO())}x4(t){const s=this.Ie,e=this.PEt;if(e.dO()!==t.dO())throw new Error("layer from different layout");t!==e&&(e.Jz(s,!0),this.DO(t),t.jz(s,!0),this.uf.BO())}T4(t,s){let e=this.Ie,i=!1,n=this.PEt;if(t.Z5()!==e.Z5()){const r=t.RO();if(!r)throw new Error("expected world instance");const h=r.AO(),o=(n.Ak()!==h.Ak()&&(n.Jz(e,!0),this.DO(h),h.jz(e,!0),i=!0),h.pq(e,t,!!s));(i||o)&&this.uf.BO()}}KN(){return this.qEt}xAt(t){this.xRt(64,t)}vq(){return 0!=(64&this.Lbt)}G9(t,s=null){const e={x:this.xv(),y:this.Cv(),w:this.am(),h:this.vm(),l:this.AO().uJ(),zi:this.kO()},i=(0!==this.Gv()&&(e.ze=this.Gv()),0!==this.aB()&&(e.a=this.aRt()),this.pJ()||(e.c=this.ov.toJSON()),.5!==this.d6()&&(e.oX=this.d6()),.5!==this.m6()&&(e.oY=this.m6()),0!==this.y5()&&(e.bm=this.y5()),this.qB()||(e.v=this.qB()),this.I4()||(e.ce=this.I4()),this.sAt()&&(e.be=this.sAt()),this.qEt&&(e.fx=this.qEt.G9()),0!=(32&this.Lbt));return i&&(e.sfi=i),this.UEt&&(e.sft=[...this.UEt].join(" ")),this.$Et&&"visual-state"!==t&&(e.sgi=this.$Et.G9(t,s),g.has(this))&&(e.sgcd=g.get(this).iRt,e.sgzid=g.get(this).nRt),this.yW()&&(e.mesh=this.wW().Ov()),e}mEt(){return{x:this.el,y:this.il,z:this.av,w:this.AEt,h:this.kEt,a:this.Zo,sgi:this.hht()?this.hht().uEt():null}}SEt(t){t&&(this.el=t.x,this.il=t.y,this.av=t.z,this.AEt=t.w,this.kEt=t.h,this.Zo=t.a,t.sgi&&this.hht()&&this.hht()._9(t.sgi),this.fRt(),this.t4())}E_t(){this.tRt(),this.BRt(),this.VRt(null),this.$Et&&this.$Et.yEt(this.YPt,this.ZPt)}UY(t){"visual-state"!==t&&this.BRt()}JY(t,s="full",e=null){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.Lbt)&&this.$Et.JY(t.sgi,e)}WPt(t,s="full",e){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.Lbt)&&(this.$Et.yEt(null,null),this.tRt(),this.t4())}_9(t,s){if(m=!1,this.Mv(t.x),this.Iv(t.y),this.ym(t.w),this.lm(t.h),this.Zz(t.zi),this._v(t.hasOwnProperty("ze")?t.ze:0),this.oB(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?f.za(t.c):t.hasOwnProperty("o")?(f.la(this.ov),f.a=t.o):f.Ko(1,1,1,1),this.sRt(f),this.Sht(t.hasOwnProperty("oX")?t.oX:.5),this.vht(t.hasOwnProperty("oY")?t.oY:.5),this.uv(t.hasOwnProperty("bm")?t.bm:0),this.zB(!t.hasOwnProperty("v")||t.v),this.G4(!t.hasOwnProperty("ce")||t.ce),this.tAt(!!t.hasOwnProperty("be")&&t.be),this.qRt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.qEt&&t.hasOwnProperty("fx")&&this.qEt._9(t.fx),!t.hasOwnProperty("sgi")&&"visual-state"!==s&&this.YPt)for(const e of this.YPt)e.hj()||this.uf.H5(e);if(t.hasOwnProperty("sgi")&&"visual-state"!==s){this.VRt(null);const i=this.$Et,n=t.sgi;i._9(n),i.yEt(this.YPt,this.ZPt),t.sgcd&&d.di(t.sgzid)&&g.set(this,{iRt:t.sgcd,nRt:t.sgzid})}if(t.hasOwnProperty("mesh")){const r=t.mesh;this.cW(r.cols,r.rows),this.wW().Dv(r)}else this.dW();this.t4(),m=!0,this.rRt(),"visual-state"!==s&&this.uf.MAt(this.eV(),t)}}}{const va=self.Bs;va.uGt=class extends va.ur{constructor(t,s){super();const e=t.ZO(),i=e.Nyt(s[1]),n=(e.TAt().BCt(i),this.uf=e,this._ft=t,this.wCt=va.eL.VW(i),this.iTt=null,this.CAt=null,this.VIt=i.Instance,this.EU=s[2],this.yr=s[0],this.xwt=this.uf.i1t(s[3]),this.wCt.gbt());if(n<2&&(this.iTt=va.dr(i.GGt,this),!(this.iTt instanceof va.yCt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(va.eL.NMt(this,n),2<=n){const r=i.GGt??globalThis.yj;if(this.CAt=new r,!(this.CAt instanceof globalThis.yj))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.CAt=new globalThis.NW;va.eL.WMt(n),this.OMt()}static mM(t,s){return va.dr(va.uGt,t,s)}pr(){this.uf=null,this.wCt=null,this.iTt&&(this.iTt.pr(),this.iTt=null),this.VIt=null}fvt(){return this.iTt}OMt(){this.iTt?this.iTt.OMt():this.CAt&&this.CAt.bV()}ZO(){return this.uf}D5(){return this._ft}kW(){return this.wCt}$Gt(){return this.VIt}Qc(){return this.yr}uJ(){return this.EU}OW(){return this.CAt}i1t(){return this.xwt}}}{const xa=self.Bs,Ma=self.RW;xa.H_t=class extends xa.ur{constructor(t){super(),this.uf=t.runtime,this.tSt=t.FW,this.wCt=this.tSt.kW(),this.Ie=t.LW,this.qg=t.index,this.O_t=null,this.D_t=null,this.wCt.jz(this.Ie)}pr(){this.D_t&&(this.D_t.V5(),this.D_t=null),this.wCt.Jz(this.Ie),this.O_t&&(this.O_t.pr(),this.O_t=null),this.uf=null,this.tSt=null,this.wCt=null,this.Ie=null}UGt(t){if(this.O_t)throw new Error("already got sdk instance");const s=this.kW().gbt();if(s<2){if(this.O_t=xa.dr(this.tSt.$Gt(),this,t),!(this.O_t instanceof xa.SCt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const e=this.kW().DMt();this.BMt(e.Instance,t)}}IW(){return this.O_t??this.D_t}BW(){return this.Ie}ZO(){return this.uf}DW(){return this.tSt}kW(){return this.wCt}krt(){return this.qg}MCt(){this.O_t?this.O_t.MCt():this.D_t.vj()}GCt(t,s){this.O_t&&this.O_t.GCt(t,s)}NPt(){return this.O_t?this.O_t.TTt():this.D_t.BN()}Ov(t="full"){return this.O_t?this.O_t.Ov(t):this.D_t.NN(t)}Dv(t,s="full"){if(this.O_t)return this.O_t.Dv(t,s);this.D_t.WN(t,s)}static IAt(t,s,e){let i=globalThis.wj,n,r;n=s instanceof i?t.vB(s):s.xCt(),r=e instanceof i?t.vB(e):e.xCt();const h=n.BW(),o=r.BW(),a=h.D5().Ak(),l=o.D5().Ak();if(a!==l)return a-l;const u=h.GPt(),c=o.GPt();return u!==c?u-c:n.krt()-r.krt()}BMt(t,s){const e=Ma,i=t??this.O_t.DMt(),n=i||e,r=this.kW().gbt();if(xa.eL.NMt(this,r),xa.eL.NCt(s),this.D_t=new n,xa.eL.WCt(),xa.eL.WMt(r),!i||this.D_t instanceof e)return this.D_t;throw new TypeError(`script interface class '${i.name}' does not extend the right base class '${e.name}'`)}hTt(){return this.D_t||this.BMt()}_Tt(){return!!this.D_t}}}{const Ta=self.Bs;Ta.dz=class extends Ta.ur{constructor(t,s){super(),this.Hv=t,this.GAt=[],this._At=[],this.PAt=new Map,this.EAt=[],this.RAt=[],this.AAt=new Set,this.Eb=!0;for(const e of s){const i=Ta.dr(Ta.kAt,this,e,this.GAt.length);this.GAt.push(i),this.PAt.set(i.Qc().toLowerCase(),i),3<=e.length&&this.EAt.push(this.FAt(i,e[2]))}this.ZO().OAt(this)}pr(){this.ZO().DAt(this);for(const t of this.RAt)t.pr();Ta.jh(this.RAt),Ta.jh(this.GAt),Ta.jh(this._At),this.PAt.clear(),Ta.jh(this.EAt),this.Hv=null}LAt(t){this.AAt.add(t)}BAt(t){this.AAt.delete(t)}NAt(t){t.Ew()&&(this.RAt=this.GAt.map(t=>{const s=t.pT();return 0<s.GetCustomParametersByteSize()?Ta.dr(Ta.ty.WebGPUEffectCustomParamsBuffer,s):null}),this.WAt());for(const s of this.AAt)s.NAt(t)}jGt(t){if(t.length){this.GAt=t.concat(this.GAt);for(const s of t)this.PAt.set(s.Qc().toLowerCase(),s);for(let t=0,s=this.GAt.length;t<s;++t)this.GAt[t].rJ(t)}}FAt(t,s){t.VAt(s[0]);const e=s.slice(1);for(let t=0,s=e.length;t<s;++t){const i=e[t];if(Array.isArray(i)){const n=Ta.dr(Ta.qo);n.za(i),e[t]=n}}return e}Qv(){return this.Hv}ZO(){return this.Hv.ZO()}UW(){Ta.jh(this._At);let t=!0;for(const s of this.GAt)s.Cmt()&&(this._At.push(s),s.pT().Xb()||(t=!1));this.Eb=t}sB(){return this.GAt}i_t(){return 0<this.GAt.length}Wnt(t){return this.PAt.get(t.toLowerCase())||null}jAt(t){if((t=Math.floor(+t))<0||t>=this.GAt.length)throw new RangeError("invalid effect type index");return this.GAt[t]}jW(t){return this.jAt(t).Cmt()}HW(t,s){this.jAt(t).VAt(s)}mJ(){return this._At}vq(){return 0<this._At.length}Xb(){return this.Eb}Nnt(t){return this.EAt[t]}yz(t){return(t<this.RAt.length?this.RAt:this.EAt)[t]}zW(t,s){if(t<0||t>=this.EAt.length)return null;const e=this.EAt[t];return s<0||s>=e.length?null:e[s]}JW(t,s,e){if(t<0||t>=this.EAt.length)return!1;const i=this.EAt[t];if(s<0||s>=i.length)return!1;const n=i[s];if(n instanceof Ta.qo){if(n.ya(e))return!1;n.la(e)}else{if(n===e)return!1;i[s]=e}return t<this.RAt.length&&this.RAt[t].SetParameterValue(s,e),!0}WAt(){const e=this.EAt,i=this.RAt;for(let t=0,s=Math.min(e.length,i.length);t<s;++t){const n=i[t],r=e[t];for(let t=0,s=r.length;t<s;++t)n.SetParameterValue(t,r[t])}}static HAt(t){return t&&t instanceof Ta.qo?{t:"color",v:t.toJSON()}:t}static UAt(t){if(null===t)return NaN;if("object"!=typeof t)return t;{const s=t.t;if("color"!==s)throw new Error("invalid effect parameter type");{const e=Ta.dr(Ta.qo);return e.za(t.v),e}}}static zAt(t){return t.map(Ta.dz.HAt)}static JAt(t){return t.map(Ta.dz.UAt)}Ov(){return this.GAt.map(t=>({name:t.Qc(),active:t.Cmt(),params:Ta.dz.zAt(this.EAt[t.Ak()])}))}Dv(t){for(const s of t){const e=this.Wnt(s.name);e&&(e.VAt(s.active),this.EAt[e.Ak()]=Ta.dz.JAt(s.params))}this.UW(),this.WAt()}}}{const Ca=self.Bs;Ca.kAt=class extends Ca.ur{constructor(t,s,e){super(),this.fz=t,this.ff=s[0],this.yr=s[1],this.qg=e,this.nv=null,this.l0=!0}pr(){this.fz=null,this.nv=null}VGt(t){const s=Ca.dr(Ca.kAt,t,[this.ff,this.yr],-1);return s.nv=this.nv,s.l0=this.l0,s}NAt(t){const s=t.Dw(this.ff);if(!s)throw new Error("failed to find shader program '"+this.ff+"'");this.nv=s}tB(){return this.fz}Qc(){return this.yr}rJ(t){this.qg=t}Ak(){return this.qg}Qv(){return this.fz.Qv()}ZO(){return this.fz.ZO()}VAt(t){this.l0=!!t}Cmt(){return this.l0}pT(){return this.nv}qAt(){const e=[];for(let t=0,s=this.nv.mT();t<s;++t){const i=this.nv.gT(t);if("float"===i||"percent"===i)e.push(0);else{if("color"!==i)throw new TypeError("unknown effect parameter type");e.push(Ca.dr(Ca.qo,1,1,1,1))}}return e}}}{const Ia=self.Bs;Ia.XEt=class extends Ia.ur{constructor(t,s){super(),this.Ie=t,this.XAt=s,this.fz=t.D5().tB(),this.$At=!0,this.Sz=!0,this.YAt=!1,this.ZAt=!1,this.KAt=!1,this.QAt=!1,this._k=Ia.dr(Ia.ty.MA,t.ZO().ND().pz(),{fA:(t,s)=>{const e=s.bk(),i=e.RO();t.cv(i.mz()),t.wS(i.h4()),e.Sx(t),t.wS(0)},dA:t=>{const s=t.NTt(),[e,i]=t.BTt();return{dk:s,pk:e,mk:i}},pA:t=>this.yz(t)}),this.t3t=[],this._At=[],this.Eb=!0,this.EAt=[],this.RAt=[],this.NAt(t.ZO().jb());for(let t=0,s=this.fz.sB().length;t<s;++t)this.t3t.push(!0);this.UW(),this.fz.LAt(this)}pr(){this.fz.BAt(this);for(const t of this.RAt)t&&t.pr();Ia.jh(this.RAt),this._k.pr(),this._k=null,Ia.jh(this.t3t),Ia.jh(this._At),Ia.jh(this.EAt),this.Ie=null,this.fz=null}NAt(t){t.Ew()&&(this.RAt=this.fz.sB().map(t=>{const s=t.pT();return 0<s.GetCustomParametersByteSize()?Ia.dr(Ia.ty.WebGPUEffectCustomParamsBuffer,s):null}))}eRt(t){let s=0;for(const e of t)this.EAt.push(this.FAt(s,e)),++s;this.WAt(),this.UW()}FAt(t,s){this.t3t[t]=s[0];const e=s.slice(1);for(let t=0,s=e.length;t<s;++t){const i=e[t];if(Array.isArray(i)){const n=Ia.dr(Ia.qo);n.za(i),e[t]=n}}return e}Y_t(){for(const t of this.fz.sB())this.EAt.push(t.qAt());this.WAt()}Qv(){return this.Hv}tB(){return this.fz}Rk(){return this.dJ(),this._k}ZO(){return this.Ie.ZO()}UW(){Ia.jh(this._At);let t=this.XAt,e=this.fz.sB(),i=this._At,n=this.t3t,r=!0;for(let t=0,s=e.length;t<s;++t)if(n[t]){const h=e[t];i.push(h),h.pT().Xb()||(r=!1)}this.Eb=r,t.xAt(!!i.length),this.$At=!0}dJ(){const t=this.Ie,s=this.XAt,e=s.pJ(),i=t.RL().mL(),n=0!==s.aB()||0!==s.AO().aB()||s.am()<0||s.vm()<0,r=t.jTt(),h=t.qb();(this.$At||e!==this.Sz||i!==this.YAt||n!==this.ZAt||r!==this.KAt||h!==this.QAt||this._k.m3())&&(this._k.g3(this._At.map(t=>t.pT()),{gA:this._At.map(t=>t.Ak()),yA:!e||h,SA:i,bA:r,vA:n}),this.$At=!1,this.Sz=e,this.YAt=i,this.ZAt=n,this.KAt=r,this.QAt=h)}mJ(){return this._At}Nnt(t){return this.EAt[t]}yz(t){return(t<this.RAt.length?this.RAt:this.EAt)[t]}zW(t,s){if(t<0||t>=this.EAt.length)return null;const e=this.EAt[t];return s<0||s>=e.length?null:e[s]}JW(t,s,e){if(t<0||t>=this.EAt.length)return!1;const i=this.EAt[t];if(s<0||s>=i.length)return!1;const n=i[s];if(n instanceof Ia.qo){if(n.ya(e))return!1;n.la(e)}else{if(n===e)return!1;i[s]=e}return t<this.RAt.length&&this.RAt[t].SetParameterValue(s,e),!0}WAt(){const e=this.EAt,i=this.RAt;for(let t=0,s=i.length;t<s;++t){const n=i[t],r=e[t];for(let t=0,s=r.length;t<s;++t)n.SetParameterValue(t,r[t])}}Xb(){return this.Eb}s3t(){return this._At.some(t=>t.pT().Zb())}jW(t){return this.t3t[t]}HW(t,s){this.t3t[t]=!!s}sB(){return this.fz.sB()}G9(){return this.fz.sB().map(t=>({name:t.Qc(),active:this.t3t[t.Ak()],params:Ia.dz.zAt(this.EAt[t.Ak()])}))}_9(t){for(const s of t){const e=this.fz.Wnt(s.name);e&&(this.t3t[e.Ak()]=s.active,this.EAt[e.Ak()]=Ia.dz.JAt(s.params))}this.UW(),this.WAt()}}}{let I=self.Bs,r=[],b=[],h=[],v=I.dr(I.Ou),w=I.dr(I.Ou),x=I.dr(I.su),d=I.dr(I.Rect),p=I.dr(I.Rect),m=null,g=null,y=null;I.e3t=class extends I.ur{constructor(t){super(),this.uf=t,this.i3t=0,this.n3t=0,this.r3t=[],this.h3t=0,this.o3t=0,this.a3t=0,this.l3t=0,this.u3t=new self.gD(this)}pr(){this.uf=null}ZO(){return this.uf}Bk(){return this.u3t}c3t(){this.o3t=this.h3t,this.h3t=0,this.l3t=this.a3t,this.a3t=0}f3t(){return this.o3t}d3t(){return this.l3t}p3t(t,s){const e=t.RO(),i=s.RO();e&&i&&e.I4()&&i.I4()&&this.r3t.push([t,s])}yxt(s,e,i){for(const[n,r]of this.r3t){let t=null;if(s===n)t=r;else{if(s!==r)continue;t=n}t.Txt(e)&&!i.includes(t)&&i.push(t)}}wxt(t,s){if(this.r3t.length)for(const[e,i]of this.r3t)if(t===e&&s===i||t===i&&s===e)return!0;return!1}m3t(){I.jh(this.r3t)}wD(t,s){if(!t||!s||t===s)return!1;const e=t.RO(),i=s.RO();if(!e.I4()||!i.I4())return!1;this.h3t++;const n=e.AO(),r=i.AO(),h=n.eq(r);return h?this.g3t(e,i):this.y3t(e,i)}g3t(t,s){if(!t.a4().$l(s.a4()))return!1;if(this.a3t++,!t.u4().Gu(s.u4()))return!1;if(t.nPt()&&s.nPt())return!1;if(t.nPt())return this.w3t(t,s);if(s.nPt())return this.w3t(s,t);if(!t.lAt()&&!s.lAt())return!0;const e=t.uAt(),i=s.uAt();return e.Xu(i,s.xv()-t.xv(),s.Cv()-t.Cv())}y3t(e,i){const t=e.nPt(),s=i.nPt();if(t&&!s)return this.S3t(e,i);if(s&&!t)return this.S3t(i,e);if(s||t)return!1;{const n=e.AO(),r=i.AO(),h=(v.G(e.uAt()),w.G(i.uAt()),v.Wu());for(let t=0,s=h.length;t<s;t+=2){const a=t+1,l=h[t],u=h[a],[c,f]=n.G5(l+e.xv(),u+e.Cv());h[t]=c,h[a]=f}const o=w.Wu();for(let t=0,s=o.length;t<s;t+=2){const d=t+1,p=o[t],m=o[d],[g,y]=r.G5(p+i.xv(),m+i.Cv());o[t]=g,o[d]=y}return v.Uu(),w.Uu(),this.a3t++,v.Xu(w,0,0)}}S3t(t,s){const e=t.AO(),i=s.AO(),n=(m=m||I.dr(I.Ou),g=g||I.dr(I.Rect),y=y||I.dr(I.su),s.xv()),r=s.Cv(),[h,o]=i.G5(n,r),[a,l]=e.M5(h,o),u=a-n,c=l-r;if(g.G(s.a4()),g.offset(u,c),!t.a4().$l(g))return!1;if(y.G(s.u4()),y.offset(u,c),this.a3t++,!t.u4().Gu(y))return!1;m.G(s.uAt());const f=m.Wu();for(let t=0,s=f.length;t<s;t+=2){const d=t+1;f[t]+=u,f[d]+=c}return m.Uu(),this.w3t(t,s,a,l,m,g,y)}w3t(t,i,s,e,n,r,h){const o=void 0!==r?r:i.a4(),a=t.xv(),l=t.Cv(),u=t.eV().IW(),c=void 0!==s?s:i.xv(),f=void 0!==e?e:i.Cv(),d=i.lAt(),p=void 0!==h?h:i.u4(),m=b;u.GetCollisionRectCandidates(o,m);for(let t=0,s=m.length;t<s;++t){const g=m[t],y=g.GetRect();if(this.h3t++,o.Yl(y,a,l)&&(x.xu(y),x.offset(a,l),x.Gu(p)))if(d){let t=void 0!==n?n:i.uAt(),s=c,e=f;void 0!==n&&(s=i.xv(),e=i.Cv());const w=g.GetPoly();if(w){if(this.a3t++,w.Xu(t,s-(a+y.Cl()),e-(l+y.Il())))return I.jh(m),!0}else if(v.Ju(x,0,0),v.Xu(t,s,e))return I.jh(m),!0}else{const S=g.GetPoly();if(!S)return I.jh(m),!0;if(v.Ju(p,0,0),S.Xu(v,-(a+y.Cl()),-(l+y.Il())))return I.jh(m),!0}}return I.jh(m),!1}b3t(t,o,a){const l=t.jL(),s=this.uf.yF();if(!s)throw new Error("cannot call outside event");const u=s.i0t(),e=new Map,c=t=>{let s=e.get(t);return void 0===s&&(s=t.t5(),e.set(t,s)),s};if(l.Wft()){a||(l.qft(!1),I.jh(l.Xft())),u&&I.jh(l.$ft());for(const i of t.VL()){let n=i.RO(),r=n.AO();if(!(!c(r)||!n.f4())&&o.some(([t,s])=>{const[e,i]=r.M5(t,s,n.h4());return n._4(e,i)})){if(a)return!1;l.zft(i)}else u&&l.Jft(i)}}else{let e,i=!1,h=(!u||s.$gt(this.uf.Xdt())||this.uf.yvt()&&!l.$ft().length&&l.Xft().length?e=l.Xft():(e=l.$ft(),i=!0),0);for(let s=0,t=e.length;s<t;++s){let t=e[s],n=t.RO(),r=n.AO();if(!(!c(r)||!n.f4())&&o.some(([t,s])=>{const[e,i]=r.M5(t,s,n.h4());return n._4(e,i)})){if(a)return!1;i?l.zft(t):e[h++]=t}else i?e[h++]=t:u&&l.Jft(t)}a||(e.length=h)}return t.Eyt(),e.clear(),!!a||l.Vft()}v3t(t,s){if(t)for(const e of s.T_t())if(!t.eq(e))return!1;return!0}gvt(t,s,e,i){if(s.eJ())for(const n of s.xgt())this.v3t(t,n)?(n.v_t(),n.S_t().mU(e,i)):I.Zn(i,n.VL());else this.v3t(t,s)?(s.v_t(),s.S_t().mU(e,i)):I.Zn(i,s.VL())}_D(t,s,e,i){for(const n of s)this.gvt(t,n,e,i)}x3t(t,s,e){const i=this.uf.jCt();i&&this._D(t,i.mZ(),s,e)}M3t(t,s,e){const i=this.uf.HCt();i&&this._D(t,i.mZ(),s,e)}XRt(t,s){return t.oPt()&&(!s||s.RO().XRt(t.xbt().get("solidTags")))}vD(t){const s=t.RO();this.x3t(s.AO(),s.a4(),r);for(const e of r)if(this.XRt(e,t)&&this.wD(t,e))return I.jh(r),e;return I.jh(r),null}T3t(t,s){this.x3t(null,t,r);for(const e of r)if(this.XRt(e,s)&&this.C3t(t,e))return I.jh(r),e;return I.jh(r),null}I3t(t,s){let e=null;s&&(e=h,I.jh(e));const i=t.RO();this.M3t(i.AO(),i.a4(),r);for(const n of r)if(n.lPt()&&this.wD(t,n)){if(!s)return I.jh(r),n;e.push(n)}return I.jh(r),e}G3t(s,e,i,n,r){n=n||50;const h=s.RO(),o=h.xv(),a=h.Cv();for(let t=0;t<n;++t)if(h.s4(o+e*t,a+i*t),h.t4(),!this.wD(s,r))return!0;return h.s4(o,a),h.t4(),!1}_3t(s,e,i,n,r,h){n=n||50;let o=s.RO(),a=o.xv(),l=o.Cv(),u=null,c=null;for(let t=0;t<n;++t)if(o.s4(a+e*t,l+i*t),o.t4(),!this.wD(s,u))if(u=this.vD(s))c=u;else if(r&&(u=h?this.wD(s,h)?h:null:this.I3t(s))&&(c=u),!u)return c&&this.P3t(s,e,i,c,16,!0),!0;return o.s4(a,l),o.t4(),!1}E3t(e,i,n,t){t=t||50;let r=e.RO(),h=r.xv(),o=r.Cv(),a=null,l=null;for(let s=0;s<t;++s)for(let t=0;t<2;++t){const u=2*t-1;if(r.s4(h+i*s*u,o+n*s*u),r.t4(),!this.wD(e,a)){if(!(a=this.vD(e)))return l&&this.P3t(e,i*u,n*u,l,16,!0),!0;l=a}}return r.s4(h,o),r.t4(),!1}P3t(t,s,e,i,n,r){let h=2,o=!1,a=!1,l=t.RO(),u=l.xv(),c=l.Cv();for(;h<=n;){const f=1/h;h*=2,l.n4(s*f*(o?1:-1),e*f*(o?1:-1)),l.t4(),this.wD(t,i)||r&&this.vD(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.xv(),c=l.Cv())}a&&(l.s4(u,c),l.t4())}R3t(e,t=100){let i=0,n=e.RO(),r=n.xv(),h=n.Cv(),o=0,a=this.vD(e);if(!a)return!0;for(;i<=t;){let t=0,s=0;switch(o){case 0:t=0,s=-1,i++;break;case 1:t=1,s=-1;break;case 2:t=1,s=0;break;case 3:t=1,s=1;break;case 4:t=0,s=1;break;case 5:t=-1,s=1;break;case 6:t=-1,s=0;break;case 7:t=-1,s=-1}if(o=(o+1)%8,n.s4(Math.floor(r+t*i),Math.floor(h+s*i)),n.t4(),!this.wD(e,a)&&!(a=this.vD(e)))return!0}return n.s4(r,h),n.t4(),!1}A3t(t,s,e,i){const n=t.RO(),r=n.xv(),h=n.Cv(),o=Math.max(10,I.Gr(s,e,r,h)),a=I.Pr(s,e,r,h),l=i||this.vD(t);if(!l)return I.vr(a+Math.PI);let u=l,c=0,f=0,d=I.Mr(5),p;for(p=1;p<36;++p){const T=a-p*d;if(n.s4(s+Math.cos(T)*o,e+Math.sin(T)*o),n.t4(),!this.wD(t,u)&&!(u=i?null:this.vD(t))){c=T;break}}for(36===p&&(c=I.vr(a+Math.PI)),u=l,p=1;p<36;++p){const C=a+p*d;if(n.s4(s+Math.cos(C)*o,e+Math.sin(C)*o),n.t4(),!this.wD(t,u)&&!(u=i?null:this.vD(t))){f=C;break}}if(36===p&&(f=I.vr(a+Math.PI)),n.s4(r,h),n.t4(),f===c)return f;let m=I.Er(f,c)/2,g;g=I.Ar(f,c)?I.vr(c+m+Math.PI):I.vr(f+m);const y=Math.cos(a),w=Math.sin(a),S=Math.cos(g),b=Math.sin(g),v=y*S+w*b,x=y-2*v*S,M=w-2*v*b;return I.Pr(0,0,x,M)}k3t(t,s,e,i,n){if(!n)return!1;const r=n.RO();if(!r.I4())return!1;if(this.h3t++,d.set(Math.min(t,e),Math.min(s,i),Math.max(t,e),Math.max(s,i)),!r.a4().$l(d))return!1;if(n.nPt())return this.F3t(t,s,e,i,n,r);if(this.a3t++,!r.u4().Iu(t,s,e,i))return!1;if(!r.lAt())return!0;const h=r.uAt();return h.Iu(r.xv(),r.Cv(),t,s,e,i)}F3t(e,i,n,r,t,s){const h=s.xv(),o=s.Cv(),a=t.IW(),l=b;p.set(e,i,n,r),p.normalize(),a.GetCollisionRectCandidates(p,l);for(let t=0,s=l.length;t<s;++t){const u=l[t],c=u.GetRect();if(this.h3t++,d.Yl(c,h,o)&&(x.xu(c),x.offset(h,o),x.Iu(e,i,n,r))){const f=u.GetPoly();if(!f)return I.jh(l),!0;if(this.a3t++,f.Iu(h+c.Cl(),o+c.Il(),e,i,n,r))return I.jh(l),!0}}return I.jh(l),!1}C3t(t,s){if(!s)return!1;const e=s.RO();if(!e.I4())return!1;if(this.h3t++,!e.a4().$l(t))return!1;if(s.nPt())return this.O3t(t,s,e);if(this.a3t++,x.xu(t),!e.u4().Gu(x))return!1;if(!e.lAt())return!0;const i=v,n=(i.xu(t,e.xv(),e.Cv()),e.uAt());return i.Xu(n,0,0)}O3t(e,t,s){const i=s.xv(),n=s.Cv(),r=t.IW(),h=b;r.GetCollisionRectCandidates(e,h);for(let t=0,s=h.length;t<s;++t){const o=h[t],a=o.GetRect();if(this.h3t++,e.Yl(a,i,n)){const l=o.GetPoly();if(!l)return I.jh(h),!0;if(this.a3t++,v.xu(e,0,0),l.Xu(v,-(i+a.Cl()),-(n+a.Il())))return I.jh(h),!0}}return I.jh(h),!1}D3t(t,s){if(t){const e=t.RO();e.I4()&&(this.h3t++,e.a4().$l(s.rect))&&(t.nPt()?this.L3t(t,e,s):(this.a3t++,e.lAt()?s.B3t(t,e.xv(),e.Cv(),e.uAt()):s.N3t(t,e.u4())))}}L3t(e,i,n){const r=i.xv(),h=i.Cv(),o=b;e.IW().GetCollisionRectCandidates(n.rect,o);for(let t=0,s=o.length;t<s;t++){const a=o[t],l=a.GetRect();if(this.h3t++,n.rect.Yl(l,r,h)){const u=a.GetPoly();this.a3t++,u?n.B3t(e,r+l.Cl(),h+l.Il(),u):n.W3t(e,i.xv(),i.Cv(),l)}}I.jh(o)}MD(t,s){if(t!==this.i3t||s!==this.n3t){this.i3t=t,this.n3t=s;const e=this.uf.sJ();for(const i of e)if(i.oL()){for(const n of i.WL())n.RO().JRt();i.S_t().V3t(t,s),i.b_t();for(const r of i.WL()){const h=r.RO();h.vAt(),h.x_t()}}}}CD(){return[this.i3t,this.n3t]}j3t(t,s){this.i3t=t,this.n3t=s}}}{const Ga=self.Bs;Ga.ZIt=class extends Ga.ur{constructor(t,s){super(),this.aU=t,this.lU=s,this.uU=Ga.dr(Ga.tc)}pr(){this.uU.pr(),this.uU=null}V3t(t,s){if(!this.uU.ic())throw new Error("grid not empty");this.aU=t,this.lU=s}cU(t,s,e){let i=this.uU.ne(t,s);return i||(e?(i=Ga.dr(Ga.H3t,this,t,s),this.uU.Set(t,s,i),i):null)}fU(t){const s=Math.floor(t/this.aU);return isFinite(s)?s:0}dU(t){const s=Math.floor(t/this.lU);return isFinite(s)?s:0}pU(i,n,r){if(n)for(let e=n.Cl(),t=n.Gl();e<=t;++e)for(let t=n.Il(),s=n._l();t<=s;++t)if(!r||!r.Zl(e,t)){const h=this.cU(e,t,!1);h&&(h.x0(i),h.ic())&&this.uU.nc(e,t)}if(r)for(let e=r.Cl(),t=r.Gl();e<=t;++e)for(let t=r.Il(),s=r._l();t<=s;++t)n&&n.Zl(e,t)||this.cU(e,t,!0).nU(i)}mU(t,s){let e=this.fU(t.Cl()),i=this.dU(t.Il()),n=this.fU(t.Gl()),r=this.dU(t._l());if(isFinite(n)&&isFinite(r))for(;e<=n;++e)for(let t=i;t<=r;++t){const h=this.cU(e,t,!1);h&&h.hU(s)}}}}{const _a=self.Bs;_a.H3t=class extends _a.ur{constructor(t,s,e){super(),this.Z7=t,this.el=s,this.il=e,this.K7=_a.dr(_a.ac)}pr(){this.K7.pr(),this.K7=null,this.Z7=null}ic(){return this.K7.ic()}nU(t){this.K7.fc(t)}x0(t){this.K7.nc(t)}hU(t){_a.Zn(t,this.K7.dc())}}}{const Pa=self.Bs;Pa.U3t=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new Pa.Rect,this.z3t=2,this.J3t=null,this.q3t=0,this.X3t=0,this.$3t=0,this.Y3t=0,this.Z3t=0,this.Rt=0,this.K3t=1,this.Q3t=0,this.tkt=1,this.skt=0}ekt(){return this.z3t<1+1e-6}u0(){this.z3t=2}Set(t,s,e,i){return this.x1=t,this.y1=s,this.x2=e,this.y2=i,this.dx=e-t,this.dy=i-s,this.rect.set(t,s,e,i),this.rect.normalize(),this.z3t=2,this.J3t=null,this.q3t=0,this.X3t=0,this.$3t=0,this.Y3t=0,this.Z3t=0,this.Rt=0,this.K3t=1,this.Q3t=0,this.tkt=1,this.skt=0,this}ikt(){if(!1!==this.ekt()){const t=this.dx*this.z3t,s=this.dy*this.z3t,e=Pa.Cr(t,s),i=t/e,n=s/e,r=(this.Rt=e-1e-6,this.Y3t=this.x1+i*this.Rt,this.Z3t=this.y1+n*this.Rt,this.q3t=Math.atan2(this.$3t,this.X3t)+Math.PI/2,this.K3t=Math.cos(this.q3t),this.Q3t=Math.sin(this.q3t),i*this.K3t+n*this.Q3t);if(this.tkt=i-2*this.K3t*r,this.skt=n-2*this.Q3t*r,0<r){const h=Math.PI;this.q3t=Pa.vr(this.q3t+h),this.K3t=-this.K3t,this.Q3t=-this.Q3t}}}nkt(t,s,e,i,n){const r=Pa.yh(this.x1,this.y1,this.x2,this.y2,s,e,i,n);0<=r&&r<this.z3t&&(this.z3t=r,this.J3t=t.Z5(),this.X3t=s-i,this.$3t=e-n)}W3t(t,s,e,i){const n=s+i.Cl(),r=s+i.Gl(),h=e+i.Il(),o=e+i._l();this.nkt(t,n,h,r,h),this.nkt(t,r,h,r,o),this.nkt(t,r,o,n,o),this.nkt(t,n,o,n,h)}N3t(t,s){const e=s.oh(),i=s.ah(),n=s.lh(),r=s.uh(),h=s.fh(),o=s.dh(),a=s.ph(),l=s.mh();this.nkt(t,e,i,n,r),this.nkt(t,n,r,h,o),this.nkt(t,h,o,a,l),this.nkt(t,a,l,e,i)}B3t(e,i,n,t){const r=t.Wu();for(let t=0,s=r.length;t<s;t+=2){const h=(t+2)%s,o=r[t]+i,a=r[t+1]+n,l=r[h]+i,u=r[1+h]+n;this.nkt(e,o,a,l,u)}}}}{const T=self.Bs,Ea=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),Ra=new Set(["high","low"]),Aa=self.vs,Tn=Aa.Cs,Cn=Aa.Ps,ka=Tn.create(),Fa=T.dr(T.su),C=T.dr(T.Rect);T.rkt=class extends T.ur{constructor(t){super(),this.uf=t,this.hkt=[],this.okt=!1,this.akt=null,this.lkt=null,this.ukt=null,this.ckt="high-performance",this.fkt=!1,this.dkt="auto",this.pkt=0,this.mkt=0,this.gkt="",this.ykt=0,this.wkt=0,this.Skt=0,this.bkt=0,this.vkt=0,this.xkt=0,this.Py="normalized",this.Mkt=0,this.Tkt=1,this.Ckt=1e4,this.aw=!0,this.Ikt=0,this.XA=0,this.$A=0,this.Gkt="letterbox-scale",this._kt="letterbox-scale",this.Pkt=0,this.Ekt=0,this.Rkt=Tn.create(),this.Akt="high",this.kkt=this.Akt,this.Fkt=!1,this.Okt=[],this.Dkt=new Set,this.Lkt=self.C3_Shaders,this.Bkt=T.dr(T.ty.KR,{qR:()=>[this.Lq(),this.Bq()],$R:()=>this.Nkt(),YR:t=>this.Wkt(t),getTime:()=>this.ZO().DF(),ZR:()=>this.ZO().BO()}),this.Vkt=0,this.jkt=0,this.Hkt=NaN,this.Ukt=null,this.zkt=new Map,this.Jkt=NaN,this.qkt=new Map,this.Xkt="",this.$kt=1,this.Ykt=T.dr(T.Rect),this.Zkt="",this.Kkt=null,this.Qkt=null,this.tFt=0,this.sFt=0,this.eFt=-1,this.iFt=0,this.nFt=t=>this.iFt=t.progress,this.rFt=null,this.hFt={oFt:null,aFt:null,lFt:null},this.uFt=0,this.cFt=0,this.fFt=0,this.dFt="fade-in",this.pFt=null,this.mFt=new Promise(t=>this.pFt=t)}gFt(t){this.ckt=t}yFt(t){this.okt=!!t}wFt(t){this.Py=t}SFt(){return this.Py}bFt(t){this.Mkt=t}vFt(t,s){this.Tkt=t,this.Ckt=s}xFt(t){this.fkt=!!t}MFt(t){this.dkt=t}async Oo(t){let s=t.canvas,e=(this.hkt.push({canvas:s,TFt:null}),this.uf._N("runtime","window-resize",t=>this.CFt(t)),this.uf._N("runtime","fullscreenchange",t=>this.IFt(t)),this.uf._N("runtime","fullscreenerror",t=>this.GFt(t)),s.addEventListener("webglcontextlost",t=>this._Ft(t)),s.addEventListener("webglcontextrestored",t=>this.PFt(t)),this.Fkt=!!t.isFullscreen,this.gkt=t.cssDisplayMode,navigator.gpu&&this.okt),i=!1;if(e)try{await this.EFt(!0)}catch(t){this.RFt("WebGPU",t),this.lkt=null}if(!this.jb())try{await this.AFt(!0)}catch(t){this.RFt("WebGL",t),this.akt=null}if(this.jb()||(i=!0),!this.jb()&&e)try{await this.EFt(!1)}catch(t){this.RFt("WebGPU",t),this.lkt=null}if(!this.jb())try{await this.AFt(!1)}catch(t){this.RFt("WebGL",t),this.akt=null}const n=this.jb();if(!n)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");n.ub(i),this.lkt&&(this.lkt.kFt=()=>this.FFt(),this.lkt.OFt=()=>this.DFt()),"normalized"===this.Py?n.Iw():(n.Gw(),n.Tw(this.Mkt)),this.n_(t.windowInnerWidth,t.windowInnerHeight,!0),await this.NAt()}RFt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async EFt(t){let s={xy:this.Tkt,My:this.Ckt},e=!0;"no"===this.dkt?e=!1:"auto"===this.dkt&&(e=T.ue.Se);const i={powerPreference:this.ckt,depth:this.uf.HJ(),failIfMajorPerformanceCaveat:t,LFt:this.uf.Jq(),BFt:this.uf.NFt(),pP:this.uf.WFt(),VFt:e};this.lkt=T.dr(T.ty.WebGPURenderer,s),await this.lkt.mM(this.hkt[0].canvas,i)}async AFt(t){const s={alpha:!0,powerPreference:this.ckt,dP:"xbox-uwp-webview2"!==this.uf.OD(),depth:this.uf.HJ(),pP:this.uf.WFt(),failIfMajorPerformanceCaveat:t,xy:this.Tkt,My:this.Ckt};this.fkt&&(s.mP=1),this.akt=T.dr(T.ty.wP,this.hkt[0].canvas,s),await this.akt.dw()}async jFt(){if(this.Lkt){const t=[];for(const[s,e]of Object.entries(this.Lkt)){e.src=e.HFt;const i=T.ty.WebGPUShaderProgram.FT();t.push(this.lkt.bE(Object.assign({fM:i,name:s},e)))}await Promise.all(t)}}async UFt(){if(this.Lkt){const s=[];for(const[e,i]of Object.entries(this.Lkt)){let t;if(i.zFt&&2<=this.akt.$x())i.src=i.zFt,t=T.ty.uM.OT();else{if(!i.JFt)throw new Error(`shader '${e}' does not support WebGL 1`);i.src=i.JFt,t=T.ty.uM.FT()}s.push(this.akt.bE(Object.assign({fM:t,name:e},i)))}await Promise.all(s),this.akt.vE(),this.akt.Bw()}this.akt.FR()&&(this.Ukt=T.dr(T.ty.iP,this.akt))}async NAt(){this.lkt?await this.jFt():this.akt&&await this.UFt();const t=this.jb();t.ab(this.aw),t.FR()&&(this.Hkt=0);for(const s of this.uf.qFt()){for(const e of s.sB())e.NAt(t);s.NAt(t),s.UW()}this.ukt=new self.o8(this.uf,t)}pr(){this.uf=null,this.akt=null,this.hkt.length=0}$k(){return this.uf.$k()}CFt(t){const s=this.uf;if(!s.XFt()){const e=t.devicePixelRatio,i=(this.$k()&&(self.devicePixelRatio=e),s.$Ft(e),this.Fkt=!!t.isFullscreen,this.gkt=t.cssDisplayMode,this.n_(t.innerWidth,t.innerHeight),s.BO(),new T.Event("window-resize")),n=(i.data=t,s.Hf().Qf(i),new T.Event("resize"));n.YFt=this.HD(),n.ZFt=this.zD(),n.KFt=this.qD(),n.QFt=this.$D(),s.X$(n),s.kN()&&(s.D1t()||self.C3Debugger.IsDebuggerPaused())&&s.I3()}}IFt(t){this.Fkt=!!t.isFullscreen,this.n_(t.innerWidth,t.innerHeight,!0),this.uf.BO()}GFt(t){this.Fkt=!!t.isFullscreen,this.n_(t.innerWidth,t.innerHeight,!0),this.uf.BO()}n_(t,s,e=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.pkt!==t||this.mkt!==s||e){this.pkt=t,this.mkt=s;const i=this.tOt();"letterbox-scale"===i?this.sOt(t,s):"letterbox-integer-scale"===i?this.eOt(t,s):"off"===i?this.iOt(t,s):this.nOt(t,s),this.rOt(i);for(const{canvas:h}of this.hkt)h.width=this.Skt,h.height=this.bkt;this.uf.df("canvas","update-size",{marginLeft:this.vkt,marginTop:this.xkt,styleWidth:this.ykt,styleHeight:this.wkt,displayScale:this.oj()});const n=this.jb();n.n_(this.Skt,this.bkt,!0);for(const o of this.Okt)n._R(o);T.jh(this.Okt),this.hOt();const r=this.uf.fO();r.yY(),r.wY()}}hOt(){this.jb().Pw(this.Rkt,this.Lq()/this.Bq())}Nq(){return this.Rkt}sOt(t,s){const e=this.uf.YD(),i=this.uf.Zk(),n=this.uf.Qk(),r=i/n,h=t/s;if(r<h){const o=s*r;this.ykt=Math.round(o),this.wkt=s,this.vkt=Math.floor((t-this.ykt)/2),this.xkt=0}else{const a=t/r;this.ykt=t,this.wkt=Math.round(a),this.vkt=0,this.xkt=Math.floor((s-this.wkt)/2)}this.Skt=Math.round(this.ykt*e),this.bkt=Math.round(this.wkt*e),this.uf.oOt(i,n)}eOt(t,s){let e=this.uf.YD(),i=(1!==e&&(t+=1,s+=1),this.uf.Zk()),n=this.uf.Qk(),r=i/n,h=t/s,o;if(r<h){const a=s*r;o=a*e/i}else{const l=t/r;o=l*e/n}1<o?o=Math.floor(o):o<1&&(o=1/Math.ceil(1/o)),this.Skt=Math.round(i*o),this.bkt=Math.round(n*o),this.ykt=this.Skt/e,this.wkt=this.bkt/e,this.vkt=Math.max(Math.floor((t-this.ykt)/2),0),this.xkt=Math.max(Math.floor((s-this.wkt)/2),0),this.uf.oOt(i,n)}nOt(t,s){const e=this.uf.YD(),i=(this.ykt=t,this.wkt=s,this.Skt=Math.round(this.ykt*e),this.bkt=Math.round(this.wkt*e),this.vkt=0,this.xkt=0,this.oj());this.uf.oOt(this.ykt/i,this.wkt/i)}iOt(t,s){const e=this.uf.YD();this.ykt=this.uf.kJ(),this.wkt=this.uf.FJ(),this.Skt=Math.round(this.ykt*e),this.bkt=Math.round(this.wkt*e),this.aOt()?(this.vkt=Math.floor((t-this.ykt)/2),this.xkt=Math.floor((s-this.wkt)/2)):(this.vkt=0,this.xkt=0),this.uf.oOt(this.uf.kJ(),this.uf.FJ())}rOt(e){if("high"===this.Akt)this.XA=this.Skt,this.$A=this.bkt,this.kkt="high";else{let t,s;if(s="off"===this.tOt()?(t=this.uf.kJ(),this.uf.FJ()):(t=this.uf.Zk(),this.uf.Qk()),this.Skt<t||this.bkt<s)this.XA=this.Skt,this.$A=this.bkt,this.kkt="high";else if(this.XA=t,this.$A=s,this.kkt="low","scale-inner"===e){const i=t/s,n=this.pkt/this.mkt;n<i?this.XA=this.$A*n:i<n&&(this.$A=this.XA/n)}else if("scale-outer"===e){const r=t/s,h=this.pkt/this.mkt;r<h?this.XA=this.$A*h:h<r&&(this.$A=this.XA/h)}}}ZO(){return this.uf}lOt(){return this.hkt[0].canvas}pz(){return this.Bkt}aOt(){return this.Fkt}uOt(){return this.gkt}cOt(t){if(!Ea.has(t))throw new Error("invalid fullscreen mode");this.Gkt=t;const s=this.uf.fO();s.yY(),s.wY()}rj(){return this.Gkt}fOt(t){if(!Ea.has(t))throw new Error("invalid fullscreen mode");this._kt=t;const s=this.uf.fO();s.yY(),s.wY()}dOt(){return this._kt}tOt(){return this.aOt()?this.dOt():this.rj()}pOt(t){if(!Ra.has(t))throw new Error("invalid fullscreen scaling quality");this.Akt=t,this.uf.fO().yY()}mOt(){return this.Akt}qq(){return this.kkt}static gOt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}JV(){return this.pkt}qV(){return this.mkt}Lq(){return this.XA}Bq(){return this.$A}ab(t){this.aw=!!t}yOt(t){this.Ikt=t}U7(){return this.Ikt}wOt(){return this.jb().k_()}_Ft(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.Okt=[],this.Dkt.clear(),this.Bkt.dv(),this.akt.dv(),this.uf.XX()}FFt(){console.log("[Construct] WebGPU device lost"),this.Okt=[],this.Dkt.clear(),this.Bkt.dv(),this.uf.XX()}async PFt(t){await this.akt.pv(),await this.NAt(),await this.uf.SOt(),console.log("[Construct] WebGL context restored")}async DFt(){await this.NAt(),await this.uf.SOt(),console.log("[Construct] WebGPU device restored")}bOt(){return this.akt}vOt(){return this.lkt}jb(){return this.lkt||this.akt}XGt(){return this.ukt}BD(){let t="";return t=this.uf.vOt()?"webgpu":"webgl"+this.uf.bOt().$x(),this.uf.jb().cb()&&(t+="-software"),t}VD(){return this.uf.vOt()?this.uf.vOt().GetAdapterInfoString():this.uf.bOt().HR()}k5(){return"low"===this.kkt?1/this.uf.YD():this.oj()}oj(){const t=this.tOt();if("off"===t||"crop"===t)return 1;const s=this.uf.Zk(),e=this.uf.Qk(),i=s/e,n=this.Skt/this.bkt;return"scale-inner"!==t&&i<n||"scale-inner"===t&&n<i?this.wkt/e:this.ykt/s}y9(){return"low"===this.qq()?1:this.oj()}m9(){return"low"===this.qq()?1:this.uf.YD()}xOt(t,s){this.Pkt=t,this.Ekt=s}q8(s,e,i,t=!0){e=e||this.XA,i=i||this.$A;const n=e/2+this.Pkt,r=i/2+this.Ekt;if(t){let t=this.Nq();e===this.XA&&i===this.$A||(s.Pw(ka,e/i),t=ka),s.ME(t)}const h=s.kw(n,r,s.mw(i),n,r,0,i);s.PE(h)}MOt(t,s=!0){const e=this.HD(),i=this.zD(),n=e/2,r=i/2,h=(s&&t.ME(this.Nq()),t.kw(n,r,t.mw(i),n,r,0,i));t.PE(h)}qD(){return this.Skt}$D(){return this.bkt}HD(){return this.ykt}zD(){return this.wkt}T5(){return this.vkt}C5(){return this.xkt}RX(){return this.hkt.length}TOt(){return"undefined"!=typeof OffscreenCanvas&&this.lOt()instanceof OffscreenCanvas&&("Chromium"!==T.ue.ye||124<=T.ue.ge)}async QX(i,n=!1){if(i<1)throw new Error("invalid HTML layer count");if(this.hkt.length!==i){let t=this.uf.fO().lO(),s={count:i,layersDomState:t.lJ().filter(t=>t.ZB()).map(t=>t.fq()),immediate:n,marginLeft:this.vkt,marginTop:this.xkt,styleWidth:this.ykt,styleHeight:this.wkt},e;if(e=this.$k()?await this.uf.WO("canvas","set-html-layer-count",s):self.c3_runtimeInterface._OnSetHTMLLayerCount(s),i<this.hkt.length)this.hkt.length=i;else for(const r of e.addedCanvases){r.width=this.Skt,r.height=this.bkt;const h=this.TOt()?"bitmaprenderer":"2d",o=r.getContext(h);if(!o)throw new Error(`failed to acquire '${h}' canvas context`);this.hkt.push({canvas:r,TFt:o})}this.uf.BO()}}z$(t){if(!(t>=this.hkt.length)){const s=this.lOt(),e=this.hkt[t].TFt;this.TOt()?e.transferFromImageBitmap(s.transferToImageBitmap()):(e.globalCompositeOperation="copy",e.drawImage(s,0,0))}}Xq(s){s.depth=this.uf.HJ();let t=this.Okt,e=t.findIndex(t=>t.nM(s)),i;return-1!==e?(i=t[e],t.splice(e,1)):i=this.jb().MR(s),this.Dkt.add(i),i}gz(t){if(!this.Dkt.has(t))throw new Error("render target not in use");this.Dkt.delete(t),this.Okt.push(t)}Nkt(){const t={Ex:this.uf.tF()};return"low"===this.qq()&&(t.width=this.Lq(),t.height=this.Bq()),this.Xq(t)}Wkt(t){this.gz(t)}*COt(){for(const t of this.uf.fO().pY())for(const s of t.yB()){const e=this.zkt.get(s);e&&(yield e)}}Hq(t){if(!this.jb().FR())return null;let s=this.zkt.get(t);return s||(s={QN:t,name:t.Qc(),IOt:T.dr(T.ty.iP,this.akt),GOt:0,_Ot:0,POt:0},this.zkt.set(t,s)),s.IOt}EOt(){const t=this.jb();if(t.FR()&&0===this.jkt){this.jkt=t.hb(),this.Jkt=NaN;for(const s of this.COt())s.GOt=NaN}}ROt(){this.akt&&this.akt.FR()&&this.AOt(),this.lkt&&this.lkt.FR()&&this.kOt()}AOt(){if(isNaN(this.Jkt)&&(this.Jkt=this.Ukt.uP(this.Vkt,this.jkt),!isNaN(this.Jkt))){if(this.uf.kN())for(const t of this.COt())if(t.GOt=t.IOt.uP(this.Vkt,this.jkt),isNaN(t.GOt))return;if(this.Ukt.cP(this.jkt),this.Hkt=Math.min(this.Jkt,1),this.uf.kN()){const e=new Map;for(const n of this.COt())n.IOt.cP(this.jkt),n._Ot=Math.min(n.GOt,1),e.set(n.QN,n._Ot);for(const r of this.COt()){const h=r.QN,o=e.get(h)||0,a=o-h.VB().reduce((t,s)=>t+(e.get(s)||0),0);r.POt=T.br(a,0,1)}const s=this.uf.lO(),i=this.Hkt-s.lJ().reduce((t,s)=>t+(e.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(T.br(i,0,1),this.Hkt,[...this.COt()])}this.Vkt=this.jkt,this.jkt=0}}FOt(){return this.Ukt}kOt(){if(0!==this.jkt){for(let t=this.Vkt;t<this.jkt;++t){const e=this.qkt.get(t);if(e&&!e.z_())return}let t=this.uf.lO(),h=T.Jo(t.CX()+1,0),s=0;for(let t=this.Vkt;t<this.jkt;++t){const o=this.qkt.get(t);if(o){let e=o.J_(),i=BigInt(0),n=BigInt(0),r=BigInt(0);for(let t=0,s=Math.min(h.length,e.length/2);t<s;++t){const u=e[2*t],c=e[2*t+1],f=(u!==r&&(i===r||u<i)&&(i=u),c>n&&(n=c),c-u),d=Number(f)/1e9;h[t]+=d}const a=n-i,l=Number(a)/1e9;s+=l}}if(this.Hkt=T.br(s,0,1),this.uf.kN()){const i=t.yB(),n=new Map;for(let t=0,s=Math.min(i.length,h.length-1);t<s;++t){const g=h[t+1];n.set(i[t],g)}const r=[],p=new Map;for(const[y,w]of n){const S=[...y.HB()].reduce((t,s)=>t+(n.get(s)||0),0);p.set(y,S),r.push({name:y.Qc(),POt:T.br(w,0,1),_Ot:T.br(S,0,1)})}const m=this.Hkt-t.lJ().reduce((t,s)=>t+(p.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(T.br(m,0,1),this.Hkt,r)}for(let t=this.Vkt;t<this.jkt;++t)this.qkt.delete(t);this.Vkt=this.jkt,this.jkt=0}}OOt(t){this.qkt.set(this.lkt.hb(),t)}XF(){return this.Hkt}DOt(t,s,e,i,n,r){return this.Xkt=t,this.$kt=s,this.Ykt.yl(e,i,n,r),this.Kkt||(this.Kkt=new Promise(t=>{this.Qkt=t})),this.Kkt}LOt(){if(this.Xkt){let t=this.lOt(),s=this.Ykt,e=T.br(Math.floor(s.Cl()),0,t.width),i=T.br(Math.floor(s.Il()),0,t.height),n=s.width(),r=(n=0===n?t.width-e:T.br(Math.floor(n),0,t.width-e),s.height());if(r=0===r?t.height-i:T.br(Math.floor(r),0,t.height-i),(0!==e||0!==i||n!==t.width||r!==t.height)&&0<n&&0<r){const h=T.Oo(n,r),o=h.getContext("2d");o.drawImage(t,e,i,n,r,0,0,n,r),t=h}T.Do(t,this.Xkt,this.$kt).then(t=>{this.Zkt&&URL.revokeObjectURL(this.Zkt),this.Zkt=URL.createObjectURL(t),this.Kkt=null,this.Qkt(this.Zkt)}),this.Xkt="",this.$kt=1}}BOt(){return this.Zkt}NOt(t){t?this.tFt++:this.tFt--}WOt(){return 0<this.tFt}VOt(t){const s=this.jb();if(2===t)this.rFt=T.dr(T.ty.Sb,this.jb()),this.rFt.FG("Arial"),this.rFt.OG(16),this.rFt.$G("center"),this.rFt.ZG("center"),this.rFt.n_(300,200);else if(0===t){const e=this.uf.jOt();e&&e.N8(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.HOt("splash-images/splash-logo.svg").then(t=>{"done"===this.dFt?s.j2(t):this.hFt.oFt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.UOt("splash-images/splash-poweredby-512.png").then(t=>{"done"===this.dFt?s.j2(t):this.hFt.aFt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.UOt("splash-images/splash-website-512.png").then(t=>{"done"===this.dFt?s.j2(t):this.hFt.lFt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async HOt(t){t=new URL(t,this.uf.zOt()).toString();const s=await T._o(t),e=await this.uf.JOt(s,2048,2048);return this.jb().xR(e,{Fx:"high"})}async UOt(t){t=new URL(t,this.uf.zOt()).toString();const s=await T._o(t);return this.jb().xR(s,{Fx:"high"})}qOt(){this.uf.df("runtime","hide-cordova-splash")}XOt(){this.sFt=Date.now(),this.uf.Hf().addEventListener("loadingprogress",this.nFt),this.eFt=requestAnimationFrame(()=>this.$Ot());const t=this.uf.YOt();3!==t&&this.qOt()}async ZOt(){const t=this.jb(),s=(this.iFt=1,this.uf.YOt());4===s&&await this.mFt,this.pFt=null,this.mFt=null,-1!==this.eFt&&(cancelAnimationFrame(this.eFt),this.eFt=-1),this.uf.Hf().removeEventListener("loadingprogress",this.nFt),this.nFt=null,this.rFt&&(this.rFt.pr(),this.rFt=null),this.uf.KOt(),t.fR(),this.hFt.oFt&&(t.j2(this.hFt.oFt),this.hFt.oFt=null),this.hFt.aFt&&(t.j2(this.hFt.aFt),this.hFt.aFt=null),this.hFt.lFt&&(t.j2(this.hFt.lFt),this.hFt.lFt=null),t.cR(0,0,0,0),t.nb(),this.dFt="done",this.Vkt=t.hb(),3===s&&this.qOt()}$Ot(){if(-1!==this.eFt){const t=this.jb(),s=(t.fR(),this.eFt=-1,this.uf.Dk().d7()),e=this.uf.YOt();if(3!==e&&(this.MOt(t),t.cR(0,0,0,0),t.LE(),t.Bw(),t.NE(null)),0===e)this.QOt(s);else if(1===e)this.tDt(s,120,0);else if(2===e)this.sDt(s);else if(3===e)T.Bh();else{if(4!==e)throw new Error("invalid loader style");this.eDt(s)}t.nb(),this.eFt=requestAnimationFrame(()=>this.$Ot())}}sDt(t){t?this.rFt.XG(1,0,0):this.rFt.XG(.6,.6,.6),this.rFt.pf(Math.round(100*this.iFt)+"%");const s=this.ykt/2,e=this.wkt/2,i=(Fa.uu(s-150,e-100,150+s,100+e),this.jb());i.NE(this.rFt.X2()),i.PS(Fa,this.rFt.O_())}tDt(t,s,e){const i=this.jb(),n=(i.Uw(),t?i.OE(1,0,0,1):i.OE(.118,.565,1,1),this.ykt/2),r=this.wkt/2,h=s/2;C.yl(n-h,r-4+e,Math.floor(s*this.iFt),8),i.Rect(C),C.yl(n-h,r-4+e,s,8),C.offset(-.5,-.5),C.Bl(.5,.5),i.OE(0,0,0,1),i.FS(C),C.Bl(1,1),i.OE(1,1,1,1),i.FS(C)}QOt(t){const s=this.jb(),e=this.uf.jOt();if(e){const i=e.X2();if(i){const n=i.am(),r=i.vm(),h=this.ykt/2,o=this.wkt/2,a=n/2,l=r/2;Fa.uu(h-a,o-l,h+a,o+l),s.NE(i),s.su(Fa),this.tDt(t,n,16+l)}else this.tDt(t,120,0)}else this.tDt(t,120,0)}eDt(t){let s=this.jb(),e=this.hFt.oFt,i=this.hFt.aFt,n=this.hFt.lFt,r=Date.now(),h=(0===this.uFt&&(this.sFt=r),this.uf.iDt()||this.uf.nDt()&&!this.uf.rDt()),o=h?0:200,a=h?0:3e3,l=1,u=("fade-in"===this.dFt?l=Math.min((r-this.sFt)/300,1):"fade-out"===this.dFt&&(l=Math.max(1-(r-this.fFt)/300,0)),s.Uw(),s.OE(.231*l,.251*l,.271*l,l),C.set(0,0,this.ykt,this.wkt),s.Rect(C),Math.ceil(this.ykt)),c=Math.ceil(this.wkt),f,d;256<this.wkt?(s.OE(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),C.yl(0,.8*c-d/2,f,d),s.Rect(C),t?s.OE(l,0,0,l):s.OE(.161*l,.953*l,.816*l,l),f=u*this.iFt,C.yl(.5*u-f/2,.8*c-d/2,f,d),s.Rect(C),s.OE(l,l,l,l),s.Bw(),i&&(f=1.5*T.br(.22*c,105,.6*u),d=f/8,C.yl(.5*u-f/2,.2*c-d/2,f,d),s.NE(i),s.Rect(C)),e&&(f=Math.min(.395*c,.95*u),d=f,C.yl(.5*u-f/2,.485*c-d/2,f,d),s.NE(e),s.Rect(C)),n&&(f=1.5*T.br(.22*c,105,.6*u),d=f/8,C.yl(.5*u-f/2,.868*c-d/2,f,d),s.NE(n),s.Rect(C))):(s.OE(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),C.yl(0,.85*c-d/2,f,d),s.Rect(C),t?s.OE(l,0,0,l):s.OE(.161*l,.953*l,.816*l,l),f=u*this.iFt,C.yl(.5*u-f/2,.85*c-d/2,f,d),s.Rect(C),s.OE(l,l,l,l),s.Bw(),e&&(f=.55*c,d=f,C.yl(.5*u-f/2,.45*c-d/2,f,d),s.NE(e),s.Rect(C))),this.uFt++,"fade-in"===this.dFt&&300<=r-this.sFt&&2<=this.uFt&&(this.dFt="wait",this.cFt=r),"wait"===this.dFt&&r-this.cFt>=a&&1<=this.iFt&&(this.dFt="fade-out",this.fFt=r),("fade-out"===this.dFt&&r-this.fFt>=300+o||h&&1<=this.iFt&&r-this.sFt<500)&&this.pFt()}}}{let j=self.Bs,H=self.C3Debugger,n=self.wj,e={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""},h=!0;j.hDt=class extends j.ur{constructor(t){t=Object.assign({},e,t),super(),this.oDt=t.messagePort,this.aDt=t.runtimeBaseUrl,this.lDt=t.previewUrl,this.uDt=!!t.headless,this.cDt=!!t.hasDom,this.fDt=!!t.isInWorker,h=t.ife,this.dDt=!!t.useAudio,this.pDt=t.exportType,this.mDt=t.isNWjs,this.gH=!!t.isiOSCordova,this.gDt=!!t.isiOSWebView,this.yDt=!!t.isWindowsWebView2,this.wDt=!!t.isAnyWebView2Wrapper,this.SDt=!!t.isFBInstantAvailable,this.bDt=!("preview"!==this.pDt||!t.isDebug),this.vDt=this.bDt,this.xDt=this.bDt,this.MDt=0,this.TDt=[],this.CDt=[],this.IDt=!1,this.GDt="",this._Dt="",this.PDt="",this.EDt="",this.RDt=0,this.ADt=0,this.kDt=0,this.i3=self.devicePixelRatio,this.FDt=0,this.ODt=0,this.DDt=0,this.LDt=0,this.BDt=0,this.NDt=!1,this.Dg=!0,this.WDt=!1,this.VDt=!1,this.jDt=!1,this.HDt=null,this.R7=j.dr(j.fH,this,t),this.k9=j.dr(j.Z$,this),this.r0t=j.dr(j.edt,this),this.UDt=j.dr(j.eL,this,t.wrapperComponentIds),this.zDt=j.dr(j.e3t,this),this.EQ=j.dr(j.SY,this),this.JDt=j.dr(j.Ult,this),this.qDt=j.dr(j.Jlt,this),this.hut=j.dr(j.tut,this),this.Rg=j.dr(j.Sg,{xg:t=>this.XDt(t),Tg:t=>this.$Dt(t)}),this.YDt=new Map,this.ZDt=[],this.KDt=new Map,this.QDt=new Map,this.tLt=0,this.sLt=[],this.eLt=new Set,this.iLt=[],this.nLt=[],this.rLt=new Map,this.hLt=!1,this.oLt=!1,this.aLt=0,this.lLt=0,this.uLt=new Map,this.cLt=new Set,this.fLt=new Set,this.dLt=[],this.pLt=[],this.mLt=null,this.gLt=!1,this.yLt="vsync",this.Vx="trilinear",this.wLt=!1,this.SLt=!0,this.bLt=!1,this.vLt=!1,this.xLt=null,this.MLt={TLt:t=>{this.eFt=-1,this.CLt=-1,this.jZ(t)},ILt:t=>{this.CLt=-1,this.jZ(t,!1,"skip-render")},GLt:()=>{this.eFt=-1,this.I3()}},this.eFt=-1,this.CLt=-1,this._Lt=0,this.PLt=0,this.ELt=!1,this.RLt=!1,this.ALt=!1,this.kLt=!0,this.FLt=!0,this.OLt=!1,this.DLt=0,this.LLt=new j.pd(1),this.BLt=()=>Math.random(),this.NLt=0,this.WLt=0,this.VLt=0,this.jLt=0,this.HLt=0,this.z_t=1,this.ULt=1/30,this.zLt=0,this.JLt=j.dr(j.T0),this.qLt=j.dr(j.T0),this.XLt=j.dr(j.T0),this.$Lt=new Map,this.YLt=-1,this.ZLt=0,this.KLt=0,this.QLt=-1,this.tBt=0,this.sBt=0,this.eBt=0,this.iBt=!1,this.nBt="",this.rBt=!1,this.hBt="",this.WN=null,this.oBt="",this.aBt=null,this.lBt=null,this.$It=j.dr(j.Event.Hf),this.uBt=new Map,this.cBt=new Map,this.fBt=0,this.dBt=!1,this.pBt=!1,this.mBt=!1,this.gBt=[],this.yBt={pretick:j.dr(j.Event,"pretick",!1),tick:j.dr(j.Event,"tick",!1),tick2:j.dr(j.Event,"tick2",!1),instancecreate:j.dr(j.Event,"instancecreate",!1),instancedestroy:j.dr(j.Event,"instancedestroy",!1),beforelayoutchange:j.dr(j.Event,"beforelayoutchange",!1),layoutchange:j.dr(j.Event,"layoutchange",!1)},this.yBt.instancecreate.LW=null,this.yBt.instancedestroy.LW=null,this.fX=j.dr(j.Event.Hf),this.wBt=null;const s=(t,s)=>j.H_t.IAt(this,t,s);this.SBt=j.dr(j.k0,s),this.bBt=j.dr(j.k0,s),this.vBt=j.dr(j.k0,s),this.xBt=j.dr(j.MBt,this,t.jobScheduler),t.canvas&&(this.mLt=j.dr(j.rkt,this)),this.oDt.onmessage=t=>this._OnMessageFromDOM(t.data),this._N("runtime","visibilitychange",t=>this.TBt(t)),this._N("runtime","wrapper-extension-message",t=>this.CBt(t)),this._N("runtime","get-remote-preview-status-info",()=>this.IBt()),this._N("runtime","js-invoke-function",t=>this.Edt(t)),this._N("runtime","go-to-last-error-script",self.goToLastErrorScript),this._N("runtime","offline-audio-render-completed",t=>this.GBt(t)),this.$It.addEventListener("window-blur",t=>this._Bt(t)),this.$It.addEventListener("window-focus",()=>this.PBt()),this.EQ.KY(),this.qDt.KY(),this.EBt=null,this.RBt=new WeakMap,this.ABt={keyboard:null,bO:null,vO:null,xO:null},this.kBt=new WeakMap,this.FBt=[]}static mM(t){return j.dr(j.hDt,t)}pr(){j.jh(this.ZDt),this.KDt.clear(),this.QDt.clear(),this.k9.pr(),this.k9=null,this.r0t.pr(),this.r0t=null,this.UDt.pr(),this.UDt=null,this.R7.pr(),this.R7=null,this.zDt.pr(),this.zDt=null,this.EQ.pr(),this.EQ=null,this.JDt.pr(),this.JDt=null,this.qDt.pr(),this.qDt=null,this.hut.pr(),this.hut=null,this.Rg.pr(),this.Rg=null,this.mLt&&(this.mLt.pr(),this.mLt=null),this.$It.pr(),this.$It=null,this.OBt=null}["_OnMessageFromDOM"](t){const s=t.type;if("event"===s)this.DBt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.LBt(t)}}DBt(t){if(this.mBt){const s=t.component,e=t.handler,i=t.data,n=t.dispatchOpts,r=!(!n||!n.dispatchRuntimeEvent),h=!(!n||!n.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const l=new j.Event(e);l.data=i,this.$It.Qf(l)}if(h){const u=new j.Event(e,!0);for(const[c,f]of Object.entries(i))u[c]=f;this.X$(u)}}const a=this.uBt.get(s);if(a){const d=a.get(e);if(d){let t=null;try{t=d(i)}catch(t){return console.error(`Exception in '${s}' handler '${e}':`,t),void(null!==o&&this.BBt(o,!1,""+t))}null!==o&&(t&&t.then?t.then(t=>this.BBt(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${e}':`,t),this.BBt(o,!1,""+t)}):this.BBt(o,!0,t))}else r||h||console.warn(`[Runtime] No DOM handler '${e}' for component '${s}'`)}else r||h||console.warn(`[Runtime] No DOM event handlers for component '${s}'`)}else this.gBt.push(t)}BBt(t,s,e){this.oDt.postMessage({type:"result",responseId:t,isOk:s,result:e})}LBt(t){const s=t.responseId,e=t.isOk,i=t.result,n=this.cBt.get(s);e?n.resolve(i):n.reject(i),this.cBt.delete(s)}_N(t,s,e){let i=this.uBt.get(t);if(i||(i=new Map,this.uBt.set(t,i)),i.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);i.set(s,e)}df(t,s,e,i){this.oDt.postMessage({type:"event",component:t,handler:s,data:e,responseId:null},i)}WO(t,s,e,i){const n=this.fBt++,r=new Promise((t,s)=>{this.cBt.set(n,{resolve:t,reject:s})});return this.oDt.postMessage({type:"event",component:t,handler:s,data:e,responseId:n},i),r}Ej(t,s,e,i=-1){this.df("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:e,asyncId:i})}Rj(t,s,e){const i=this.fBt++,n=new Promise((t,s)=>{this.cBt.set(i,{resolve:t,reject:s})});return this.Ej(t,s,e,i),n}CBt(t){if(-1!==t.asyncId){const s=t.asyncId,e=this.cBt.get(s);e.resolve(t.params),this.cBt.delete(s)}else this.DBt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}UN(t,s,e){this._N("wrapper-extension:"+t,s,e)}jN(t){return this.UDt.jN(t)}NBt(t){if(!this.kN())throw new Error("not in debug mode");this.df("runtime","post-to-debugger",t)}async X_t(t){j.Svt(this),this.kN()?await H.X_t(this):self.C3Debugger&&self.C3Debugger.InitPreview(this);const s=await this.R7.Go("data.json");if(await this.WBt(s),await this.VBt(t),this.iDt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.bOt()){const e=this.bOt();console.info(`[C3 runtime] Hosted in ${this.$k()?"worker":"DOM"}, rendering with WebGL ${e.$x()} [${e.HR()}]`)}else this.vOt()&&console.info(`[C3 runtime] Hosted in ${this.$k()?"worker":"DOM"}, rendering with WebGPU [${this.vOt().GetAdapterInfoString()}]`);this.jb().cb()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.mBt=!0;for(const i of this.gBt)this.DBt(i);j.jh(this.gBt),this.mLt&&this.mLt.XOt();for(const n of t.runOnStartupFunctions)this.TDt.push(this.jBt(n));if(await Promise.all([this.R7.c7(),...this.TDt]),j.jh(this.TDt),!this.R7.d7())return this.mLt&&await this.mLt.ZOt(),await this.$It.Zf(new j.Event("beforeruntimestart")),await this.fR(),this.oDt.postMessage({type:"runtime-ready"}),this;this.mLt&&this.mLt.qOt()}async jBt(t){try{await t(this.EBt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async WBt(t){const s=t.project,e=(this.GDt=s[0],this._Dt=s[16],this.PDt=s[31],this.EDt=s[38],this.RDt=s[36],s[39]||"loading-logo.png"),i=(this.wLt=!!s[9],this.ADt=this.DDt=s[10],this.kDt=this.LDt=s[11],this.zDt.j3t(this.ADt,this.kDt),this.FDt=this.ADt/2,this.ODt=this.kDt/2,this.yLt=s[37],this.gLt=!!s[40],this.Vx=s[14],this.WDt=s[15],this.VDt=s[42],this.jDt=s[17],this.NDt=!!s[18],this.BDt=s[19],this.lLt=s[21],this.bLt=s[22],this.R7);if(i.jH(s[45]),i.b7(s[7],s[25]),i.UH(s[8]),i.zH(s[32]),i.qH(s[28]),i.g7(s[29]),0===this.BDt){let t;(t="flat"===i.rD()?i.XH()+e:e)&&(this.HDt=i.n7({url:t}))}this.mLt&&(this.mLt.cOt(j.rkt.gOt(s[12])),this.mLt.pOt(s[23]?"high":"low"),this.mLt.ab(0!==s[24]),this.mLt.gFt(s[34]),this.mLt.yOt(s[41]),this.mLt.yFt(s[13]),this.mLt.wFt(s[30]),this.mLt.vFt(s[46],s[47]),this.mLt.bFt(s[26]),this.mLt.xFt(s[48]),this.mLt.MFt(s[50]));const n=s[43],r=(n&&await this.HBt(n),this.UBt(),this.UDt.DCt(),this.dLt=self.zBt(),s[2]);for(const l of r[1])this.UDt.LCt(l);for(const u of r[0])this.UDt.OCt(u);this.dLt=self.zBt(),this.JBt(),this.UDt.VCt();for(const c of s[3]){const f=j.Zlt.mM(this,this.ZDt.length,c);this.ZDt.push(f),this.KDt.set(f.Qc().toLowerCase(),f),this.QDt.set(f.uJ(),f)}for(const d of s[4]){const p=this.ZDt[d[0]];p.kGt(d)}for(const m of s[27]){const g=m.map(t=>this.ZDt[t]);this.sLt.push(j.dr(j.A_t,this,g))}this.qBt();for(const y of this.ZDt)y.OGt();for(const w of s[5])this.k9.mM(w);const h=s[1];if(h){const S=this.k9.lY(h);S&&this.k9.hY(S)}for(const b of s[35])this.JDt.mM(b);for(const v of s[33])this.EQ.mM(v);for(const x of s[44])this.qDt.mM(x);this.qDt.$lt()||(this.qDt.pr(),this.qDt=null);for(const M of s[49])this.hut.mM(M);this.hut.nut()||(this.hut.pr(),this.hut=null);for(const T of s[6])this.r0t.mM(T);this.r0t.kdt(),this.XBt(),j.jh(this.dLt),this.KL();let o="any",a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.df("runtime","set-target-orientation",{targetOrientation:o})}async HBt(t){const s=t.format;"image-sequence"===s?this.xLt=new self.C3ExportToImageSequence(this,t):"image-sequence-gif"===s?this.xLt=new self.C3ExportToGIF(this,t):"webm"===s?this.xLt=new self.C3ExportToWebMVideo(this,t):"mp4"===s&&(this.xLt=new self.C3ExportToMP4Video(this,t)),this.yLt="unlimited-frame",this.mLt.cOt("off"),this.i3=1,self.devicePixelRatio=1,await this.WO("runtime","set-exporting-to-video",{message:this.xLt.GetExportingMessageForPercent(0),duration:this.xLt.c6()})}YOt(){return this.BDt}XFt(){return null!==this.xLt}$Bt(){return this.xLt.c6()}YBt(){return this.xLt.GetFramerate()}ZBt(){return this.xLt.X_t({width:this.mLt.qD(),height:this.mLt.$D()})}KBt(){const t=this._Lt/this.YBt();return this.xLt.AddFrame(this.mLt.lOt(),t)}QBt(){this.xLt&&this.xLt.jet()}GBt(t){this.xLt.OnOfflineAudioRenderCompleted(t)}t5t(){return this.xLt.nb()}nDt(){return this.SDt}Vg(){return this.Dg}UO(t){this.TDt.push(t)}s$(t){this.IDt=!!t}s5t(t){this.IDt&&this.CDt.push(t)}o$(){return this.CDt}IGt(){return this.tLt++}LGt(){return this.tLt}OAt(t){this.eLt.add(t)}DAt(t){this.eLt.delete(t)}qFt(){return this.eLt}async VBt(t){this.mLt&&(await this.mLt.Oo(t),this.mLt.VOt(this.BDt))}async fR(){this.ELt=!0,this.NLt=Date.now();let s=null,t=new Promise(t=>s=t);if(this.NDt){for(const n of this.ZDt)n.eJ()||n.JGt()||!n.oL()||n.OMt();(async()=>{await this.R7.c7(),await t,this.Dg=!1,this.e5t()})()}else this.Dg=!1;this.R7.f7(),this.kN()&&H.RuntimeInit(h);for(const r of this.k9.mO())r.C$();this.XFt()&&await this.ZBt();const e=this.k9.aY(),i=(await e.NX(null,this.jb()),await e.$X(!0),this.ZLt=performance.now(),s(),this.NDt||this.e5t(),await this.WO("runtime","before-start-ticking"));i.isSuspended&&!this.XFt()?(this.DLt++,this.OLt=!0):this.jZ()}e5t(){this.TN(j.S$.w$.y$.i5t,null,null),this.df("runtime","register-sw")}Nyt(t){t=Math.floor(t);const s=this.dLt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}JBt(){for(const t of self.n5t){const s=j.first(Object.keys(t));this.pLt.push(s)}}i1t(t){t=Math.floor(t);const s=this.pLt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}r5t(){return this.cDt}h5t(){return this.uDt}$k(){return this.fDt}zOt(){return this.aDt}o5t(){return this.lDt}cF(){return this.r0t}TF(){return this.r0t.TF()}qdt(){return this.r0t.qdt()}yF(){return this.r0t.yF()}Xdt(){return this.r0t.Xdt()}yvt(){return 0===this.qdt().T0t()}Ydt(){return this.r0t.Ydt()}TAt(){return this.UDt}m7(){return this.UDt.m7()}Rz(t){if((t=Math.floor(t))<0||t>=this.ZDt.length)throw new RangeError("invalid index");return this.ZDt[t]}a5t(t){return this.KDt.get(t.toLowerCase())||null}Wj(t){return this.QDt.get(t)||null}rrt(t){const s=j.eL.xL(t);return s?s.IL():null}sJ(){return this.ZDt}*l5t(){for(const t of this.ZDt)t.eJ()||(yield*t.instances())}Hf(){return this.$It}oF(){return this.fX}X$(t){t.runtime=this.iL();const s=this.kN()&&!this.r0t.YL();s&&H.StartMeasuringScriptTime(),this.fX.dispatchEvent(t),s&&H.AddScriptTime()}p$(t){return t.runtime=this.iL(),this.fX.Zf(t)}Zk(){return this.ADt}Qk(){return this.kDt}u5t(t,s){if(this.ADt!==t||this.kDt!==s){this.ADt=t,this.kDt=s;const e=this.fO();e.yY(),e.wY()}}kJ(){return this.DDt}FJ(){return this.LDt}oOt(t,s){if(this.DDt!==t||this.LDt!==s){this.DDt=t,this.LDt=s;const e=this.fO();e.yY(),e.wY()}}$Ft(t){this.XFt()||(this.i3=t)}YD(){return this.i3}Eq(){return this.FDt}Rq(){return this.ODt}ND(){return this.mLt}Lq(){return this.mLt?this.mLt.Lq():this.DDt}Bq(){return this.mLt?this.mLt.Bq():this.LDt}k5(){return this.mLt?this.mLt.k5():1}oj(){return this.mLt?this.mLt.oj():1}y9(){return this.mLt?this.mLt.y9():1}m9(){return this.mLt?this.mLt.m9():1}T5(){return this.mLt?this.mLt.T5():0}C5(){return this.mLt?this.mLt.C5():0}c5t(){return this.mLt?this.mLt.HD():0}f5t(){return this.mLt?this.mLt.zD():0}rj(){return this.mLt?this.mLt.rj():"off"}Xq(t){return this.mLt?this.mLt.Xq(t):null}gz(t){this.mLt&&this.mLt.gz(t)}Jq(){return this.WDt}NFt(){return this.VDt}WFt(){return this.jDt}XF(){return this.mLt?this.mLt.XF():NaN}Z2(){return"nearest"!==this.tF()}YF(){return this.yLt}ZF(t){this.yLt!==t&&(this.yLt=t,-1!==this.eFt||-1!==this.CLt)&&(this.d5t(),this.p5t())}tF(){return this.Vx}EGt(){return this.NDt}jOt(){return this.HDt}KOt(){this.HDt&&(this.HDt.CG(),this.HDt.pr(),this.HDt=null)}fO(){return this.k9}lO(){return this.k9.lO()}mtt(){return this.EQ}m5t(){return this.JDt}TPt(){return this.qDt}_ut(){return this.hut}Dk(){return this.R7}n7(t){return this.R7.n7(t)}JL(t,s,e,i,n,r){if(r&&this.qDt){if(t instanceof j.Zlt&&t.eJ()){const o=t.xgt(),a=Math.floor(this.aO()*o.length);return this.JL(o[a],s,e,i,n,r)}const h=this.qDt.Ylt(t,r);if(h){const l=this.Wz(h,s,!1,e,i,!1,n,void 0,n);return this.qDt.Klt(l,r),l}}return this.Wz(t,s,!1,e,i,!1,n,void 0,n)}Wz(t,s,e,i,n,r,h,o,a){let l=null,u=null;if(t instanceof j.Zlt){if((u=t).eJ()){const b=u.xgt(),v=Math.floor(this.aO()*b.length);u=b[v]}l=u.kz()}else l=t,u=this.Rz(l[1]);const c=u.RL().oL();if(this.Dg&&c&&!u.JGt())return null;const f=s;c||(s=null);let d;d=e&&!r&&l&&!this.uLt.has(l[2])?l[2]:this.lLt++;const p=l?l[0]:null,m=j.dr(j.Instance,{runtime:this,O5:u,QN:s,q_t:p,Z_t:l?l[3]:null,uid:d,tags:l?l[6]:null});this.uLt.set(d,m);let g=null,y=(c&&(g=m.RO(),void 0!==i&&void 0!==n&&(g.Mv(i),g.Iv(n)),u.b_t(!0)),s&&(a||s.jz(m,!0),s.dO().VX(u)),this.aLt++,!0);if(o){const x=o.D5();if(x.X5()&&u.X5()){const M=u.LX(),T=x.LX();M===T&&(y=!1)}}if(u.X5()&&!e&&!r&&y){const C=new Set;for(const I of u.LX().x$())if(I!==u){const G=this.g5t(I,g,C);if(G){const _=this.Wz(G,f,!1,g?g.xv():i,g?g.Cv():n,!0,!1,void 0,a);m.M$(_)}else{const B=this.Wz(I,f,!1,g?g.xv():i,g?g.Cv():n,!0,!1,void 0,a);m.M$(B)}}for(const P of m.Y5()){P.M$(m);for(const E of m.Y5())P!==E&&P.M$(E)}}if(c&&!e&&h&&this.y5t(m,p,g,s,i,n,a),u.X5()&&!e&&!r&&h)for(const R of m.Y5()){const A=R.RO();if(A){const N=R.RL(),k=R.D5().kz()[0];N.oL()?this.y5t(R,k,A,s,A.xv(),A.Cv(),a):this.y5t(R,k,A,s,void 0,void 0,a)}}if(!r&&h){void 0===i&&(i=p[0]),void 0===n&&(n=p[1]);const F=g.R4(),W=i-g.xv()+F.xv(),V=n-g.Cv()+F.Cv();F.s4(W,V)}u.m_t();const D=l?j.eo(l[5]):null,L=l?l[4].map(t=>j.eo(t)):null,w=c&&p&&p[13];if(w&&m.iPt(),m.UGt(D,L),w){const O=p[13];m.IW().KMt(O[2],O[0],O[1])}this.nLt.push(m),this.hLt=!0,this.kN()&&H.InstanceCreated(m);const S=this.yBt.instancecreate;return S.LW=m,this.$It.dispatchEvent(S),m}vEt(t){const s=t[0],e=t[1],i=t[2],n=t[6];if(n)return n;const r=this.k9.uY(s),h=r.AO(e);return h.Dz(i)}g5t(t,s,e){const i=s?.MPt()??[];for(const n of i){const r=this.vEt(n),h=!!n[4],o=this.Rz(r[1]);if(!e.has(r)&&t===o&&h)return e.add(r),r}}y5t(a,t,s,l,u,c,f){const e=s.jRt(),i=s.MPt();if(a.RO().HRt(e),i){void 0===u&&(u=t[0]),void 0===c&&(c=t[1]);const d=new Set,p=t[0],m=t[1];for(const g of i){let t=g[0],s=g[1],e=g[2],i=g[3],n=!!g[4],r=g[5],h=g[6],o;if(h)o=h;else{const b=this.k9.uY(t),v=b.AO(s);o=v.Dz(e)}const y=this.Rz(o[1]),w=a.CPt(y),S=d.has(y);if(w&&!S&&n){const x=a.IPt(y),M=(x.RO().X_t(o[0]),u+o[0][0]-p),T=c+o[0][1]-m;x.RO().s4(M,T),x.RO().HRt(r),a.W4(x,{z4:!!(i>>0&1),q4:!!(i>>1&1),Y4:!!(i>>2&1),K4:!!(i>>3&1),tW:!!(i>>4&1),aW:!!(i>>5&1),eW:!!(i>>6&1),nW:!!(i>>7&1),hW:!!(i>>8&1)}),d.add(y)}else{const C=u+o[0][0]-p,I=c+o[0][1]-m,G=this.Wz(o,l,!1,C,I,!1,!0,a,f);G.RO().HRt(r),a.W4(G,{z4:!!(i>>0&1),q4:!!(i>>1&1),Y4:!!(i>>2&1),K4:!!(i>>3&1),tW:!!(i>>4&1),aW:!!(i>>5&1),eW:!!(i>>6&1),nW:!!(i>>7&1),hW:!!(i>>8&1)})}}}}H5(e){if(!this.cLt.has(e)){let t=e.D5(),s=this.rLt.get(t);if(s){if(s.has(e))return;s.add(e)}else(s=new Set).add(e),this.rLt.set(t,s);if(this.kN()&&H.InstanceDestroyed(e),e.rPt(),this.hLt=!0,e.X5())for(const i of e.Y5())this.H5(i);for(const n of e.children())n.lW()&&this.H5(n);if(!this.k9.ZL()&&!this.iBt){const r=this.cF();r.XL(!0),e.DPt(),r.XL(!1)}e.LPt(this.k9.ZL())}}KL(){this.hLt&&(this.oLt=!0,this.w5t(),this.S5t(),this.oLt=!1,this.hLt=!1,this.BO())}w5t(){for(const t of this.nLt){const s=t.D5();s.jz(t);for(const e of s.u1t())e.jz(t),e.m_t()}j.jh(this.nLt)}S5t(){this.$It.Df(!0);for(const[t,s]of this.rLt.entries())this.b5t(t,s),s.clear();this.rLt.clear(),this.$It.Df(!1)}b5t(t,s){for(const e of s){const i=this.yBt.instancedestroy,n=(i.LW=e,this.$It.dispatchEvent(i),this.uLt.delete(e.Z5()),this.$Lt.delete(e),e.RO());n&&(n.JRt(),n.qz(),n.rPt()),this.cLt.add(e),this.aLt--}j.Zh(t.VL(),s),t.m_t(),this.fLt.add(t);for(const r of t.u1t())j.Zh(r.VL(),s),r.m_t(),this.fLt.add(r);if(t.RL().oL()){const h=new Set([...s].map(t=>t.RO().AO()));for(const o of h)o.rq(s)}}y_t(){return this.nLt}*Mxt(t){for(const s of this.y_t())t.eJ()?s.D5().wvt(t)&&(yield s):s.D5()===t&&(yield s)}HGt(){return this.lLt++}zGt(t,s){this.uLt.set(t,s)}Oj(t){this.FLt!==(t=!!t)&&(this.FLt=!!t,this.FLt)&&this.OLt&&(this.Bj(!1),this.OLt=!1)}Dj(){return this.FLt}XX(){this.$It.dispatchEvent(j.dr(j.Event,"renderercontextlost")),this.Bj(!0);for(const s of this.ZDt)!s.eJ()&&s.qGt()&&s.JX();const t=this.lO();t&&t.XX(),j.UCt.H7(),j.h7.H7()}async SOt(){await this.lO().NX(null,this.jb()),this.$It.dispatchEvent(j.dr(j.Event,"renderercontextrestored")),this.Bj(!1),this.BO()}TBt(t){if(this.FLt){const s=t.hidden;this.Bj(s),(this.OLt=s)||this.BO()}}_Bt(t){this.iDt()&&this.bLt&&!j.ue.ve&&!t.data.parentHasFocus&&(this.Bj(!0),this.vLt=!0)}PBt(){this.vLt&&(this.Bj(!1),this.vLt=!1)}p5t(){const t=this.MLt;"vsync"===this.yLt?-1===this.eFt&&(this.eFt=self.requestAnimationFrame(t.TLt)):"unlimited-tick"===this.yLt?(-1===this.CLt&&(this.CLt=j.po(t.ILt)),-1===this.eFt&&(this.eFt=self.requestAnimationFrame(t.GLt))):-1===this.CLt&&(this.CLt=j.po(t.TLt))}d5t(){-1!==this.eFt&&(self.cancelAnimationFrame(this.eFt),this.eFt=-1),-1!==this.CLt&&(j.yo(this.CLt),this.CLt=-1)}RF(){return 0<this.DLt}Bj(t){if(!this.XFt()){const s=this.RF(),e=(this.DLt+=t?1:-1,this.DLt<0&&(this.DLt=0),this.RF());if(!s&&e)console.log("[Construct] Suspending"),this.d5t(),this.$It.dispatchEvent(j.dr(j.Event,"suspend")),this.TN(j.S$.w$.y$.v5t,null,null);else if(s&&!e){console.log("[Construct] Resuming");const i=performance.now();this.WLt=i,this.ZLt=i,this.YLt=0,this.KLt=0,this.QLt=0,this.tBt=0,this.eBt=0,this.sBt=0,this.$It.dispatchEvent(j.dr(j.Event,"resume")),this.TN(j.S$.w$.y$.x5t,null,null),this.D1t()||this.jZ(i)}}}xj(t){this.SBt.fc(t)}Ij(t){this.bBt.fc(t)}Tj(t){this.vBt.fc(t)}Mj(t){this.SBt.x0(t)}Gj(t){this.bBt.x0(t)}Cj(t){this.vBt.x0(t)}M5t(t,s){let e=s?performance.now():0,i;return t instanceof n?(i=t.FN(),s&&H.AddIndividualBehaviorTickTime(t.behavior,performance.now()-e)):(i=t.jZ(),s&&H.AddIndividualBehaviorTickTime(t.kW(),performance.now()-e)),i}T5t(){const t=this.kN();this.SBt.fd(!0);for(const s of this.SBt)this.M5t(s,t);this.SBt.fd(!1)}C5t(t,s){let e=s?performance.now():0,i;return t instanceof n?(i=t.Pj(),s&&H.AddIndividualBehaviorTickTime(t.behavior,performance.now()-e)):(i=t.TCt(),s&&H.AddIndividualBehaviorTickTime(t.kW(),performance.now()-e)),i}I5t(){const t=this.kN();this.bBt.fd(!0);for(const s of this.bBt)this.C5t(s,t);this.bBt.fd(!1)}G5t(t,s){let e=s?performance.now():0,i;return t instanceof n?(i=t.DN(),s&&H.AddIndividualBehaviorTickTime(t.behavior,performance.now()-e)):(i=t.STt(),s&&H.AddIndividualBehaviorTickTime(t.kW(),performance.now()-e)),i}_5t(){const t=this.kN();this.vBt.fd(!0);for(const s of this.vBt)this.G5t(s,t);this.vBt.fd(!1)}*P5t(){const t=this.kN();this.SBt.fd(!0);for(const s of this.SBt){const e=this.M5t(s,t);j.zo(e)&&(yield*e)}this.SBt.fd(!1)}*E5t(){const t=this.kN();this.bBt.fd(!0);for(const s of this.bBt){const e=this.C5t(s,t);j.zo(e)&&(yield*e)}this.bBt.fd(!1)}*R5t(){const t=this.kN();this.vBt.fd(!0);for(const s of this.vBt){const e=this.G5t(s,t);j.zo(e)&&(yield*e)}this.vBt.fd(!1)}async jZ(a,t,s){this.ALt=!0;const l="background-wake"===s,u="background-wake"!==s&&"skip-render"!==s,c=this.fO(),f=this.ND();if(this.ELt&&(!this.RF()||t||l)){let t=performance.now(),s=(this.RLt=!0,this.A5t(a||0),this.QLt++,this.k5t(),this.F5t()),e=(this.gxt()&&await s,this.$It.Kf(this.yBt.pretick)),i=(e instanceof Promise&&await e,this.X$(this.wBt.pretick),this.O5t()),n=(this.gxt()&&await i,this.D5t()&&await this.L5t(),c.yO()&&await this.B5t(),this.N5t()),r=(this.gxt()&&await n,c.lO()),h=r.AX(),o=!1;if(-1!==h&&(r.kX(),f.RX()!==h)){const d=this.ND().QX(h);this.$k()&&(o=!0,await d)}this.df("canvas","update-html-layer-dom-state",{layersDomState:r.lJ().filter(t=>t.ZB()).map(t=>t.fq())}),u&&this.I3(),o&&this.df("canvas","cleanup-html-layers"),this.XFt()&&(await this.KBt(),this.DF()>=this.$Bt())?this.t5t():(this.RF()||l||this.p5t(),this._Lt++,this.PLt++,this.RLt=!1,this.sBt+=performance.now()-t)}}async F5t(){const t=this.r0t,s=this.kN();this.KL(),t.XL(!0),this.T1t(this.lO()),s&&H.StartMeasuringTime(),this.gxt()?await t.ipt():t.K1t(),s&&H.AddEventsTime(),this.C1t(),t.XL(!1),this.KL(),t.XL(!0)}async O5t(){const t=this.r0t,s=this.kN(),e=this.gxt(),i=this.$It,n=this.yBt,r=this.wBt;s&&H.StartMeasuringTime(),e?await this.W5t(this.P5t()):this.T5t(),e?await this.W5t(this.E5t()):this.I5t(),s&&H.AddBehaviorTotalTickTime(),s&&H.StartMeasuringTime(),e?await this.V5t(n.tick):i.dispatchEvent(n.tick),s&&H.AddPluginTotalTickTime(),t.XL(!1),this.X$(r.tick)}async N5t(){const t=this.r0t,s=this.$It,e=this.yBt,i=this.wBt,n=this.kN(),r=this.gxt();n&&H.StartMeasuringTime(),r?await t.I1t(this.k9):t.M1t(this.k9),n&&H.AddEventsTime(),this.zDt.m3t(),this.k5t(),this.kLt=!1,t.XL(!0),n&&H.StartMeasuringTime(),r?await this.W5t(this.R5t()):this._5t(),n&&H.AddBehaviorTotalTickTime(),n&&H.StartMeasuringTime(),r?await this.V5t(e.tick2):s.dispatchEvent(e.tick2),n&&H.AddPluginTotalTickTime(),t.XL(!1),this.X$(i.tick2),r&&await t.L1t()}k5t(){if(0!==this.cLt.size){const t=this.$It;t.Df(!0);for(const s of this.fLt)s.J1t().Oft(this.cLt);this.fLt.clear(),this.r0t.rpt(this.cLt);for(const e of this.cLt)e.pr();this.cLt.clear(),t.Df(!1)}}async B5t(){let t=this.fO(),s=0;for(;t.yO()&&s++<10;)await this.j5t(t.gY())}A5t(t){let s=0;if(this.XFt())s=1/this.YBt(),this.VLt=s,this.jLt=s;else if(0!==this.WLt){const e=Math.max(t-this.WLt,0);.5<(s=e/1e3)&&(s=0),this.VLt=s,this.jLt=j.br(s,this.zLt,this.ULt)}this.WLt=t,this.HLt=this.jLt*this.z_t,this.JLt.fc(this.HLt),this.qLt.fc(s*this.z_t),this.XLt.fc(this.jLt);for(const[i,n]of this.$Lt)n.fc(this.jLt*i.WF());this.mLt&&this.mLt.ROt(),1e3<=t-this.ZLt&&(this.ZLt+=1e3,1e3<=t-this.ZLt&&(this.ZLt=t),this.KLt=this.YLt,this.YLt=0,this.tBt=this.QLt,this.QLt=0,this.eBt=Math.min(this.sBt/1e3,1),this.sBt=0,this.mLt&&this.mLt.EOt(),this.zDt.c3t(),this.kN())&&H.Update1sPerfStats()}sPt(t,s){if(s){if(!this.$Lt.has(t)){const e=j.dr(j.T0);e.P0(this.JLt),this.$Lt.set(t,e)}}else this.$Lt.delete(t)}ePt(t){const s=this.$Lt.get(t);return s?s.ne():this.DF()}async j5t(t){const s=this.$It,e=this.fO(),i=e.lO();await i.G$(),i.qX(t,this.jb()),i===t&&this.r0t.E$(),this.zDt.m3t(),this.k5t(),s.dispatchEvent(this.yBt.beforelayoutchange),j.Bf.s0(!0),await t.NX(i,this.jb()),j.Bf.s0(!1),await t.$X(!1),s.dispatchEvent(this.yBt.layoutchange),this.BO(),this.kLt=!0,this.KL(),this.QBt()}BO(){this.SLt=!0}bOt(){return this.mLt?this.mLt.bOt():null}vOt(){return this.mLt?this.mLt.vOt():null}jb(){return this.mLt?this.mLt.jb():null}I3(){const e=this.mLt;if(e&&!e.wOt()){const i=this.jb(),t=i.FR(),n=t&&i.fb(),r=t&&i.Ew();if(n&&i.bR(),this.SLt||this.XFt()){const h=this.k9.lO(),o=(this.YLt++,i.fR(),this.kN());o&&H.StartMeasuringTime(),this.SLt=!1;let t=null,s=(n&&(t=e.FOt().aP(),i.kR(t)),null);r&&(s=i.StartFrameTiming(2*(1+h.CX())),i.StartMeasuringRenderPassTime(0,1)),this.HJ()&&"low"===e.qq()?i.CE(e.Lq(),e.Bq()):i.IE(),this.H5t(this.jb(),h),t&&i.OR(t),r&&(i.StopMeasuringRenderPassTime(),this.mLt.OOt(s)),i.nb(),o&&(H.AddDrawCallsTime(),H.UpdateInspectHighlight()),e&&e.LOt()}else i.ob()}}W$(t){return"low"===this.ND().qq()||t.fb()&&(this.Jq()||this.HJ())}H5t(s,e){s.Bw(),s.HE(),s.OE(1,1,1,1),s.TR(null),s.NE(null),s.pR(this.HJ()),this.W$(s)&&e.B$(s);const i=e.RX();for(let t=1;t<i;++t)e.U$(s,t),s.Ew()&&s.Restart();this.W$(s)||e.B$(s),e.H$(s)}TN(t,s,e){if(!this.ELt)return!1;let i=!this.RLt&&!this.r0t.V1t(),n=0;i&&(n=performance.now());const r=this.kN(),h=(r&&this.Kj(!1),this.r0t.E1t(this.k9,t,s,e));if(i){const o=performance.now()-n;this.sBt+=o,r&&H.AddTriggersTime(o)}return r&&this.Kj(!0),h}oTt(t,s,e){if(!this.gxt())return this.TN(t,s,e);if(this.D1t())throw new Error("called DebugTrigger() while stopped on breakpoint");if(this.RLt||this.r0t.V1t())return this.r0t.k1t(this.k9,t,s,e);throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead")}async IN(t,s,e){if(!this.gxt())return this.TN(t,s,e);if(!this.ELt)return!1;if(this.D1t())return this.r0t.F1t(t,s,e);if(!this.lO())return this.r0t.R1t(t,s,e);let i=performance.now(),n=this.r0t.k1t(this.k9,t,s,e),r=n.next();for(;!r.done;)await this._1t(r.value),r=n.next();return this.RF()||this.r0t.V1t()||(await this.r0t.L1t(),this.ALt&&!this.RLt&&this.p5t()),this.sBt+=performance.now()-i,r.value}aTt(t,s,e){const i=this.kN(),n=(i&&this.Kj(!1),this.r0t.B1t(this.k9,t,s,e));return i&&this.Kj(!0),n}lTt(t,s,e){return this.r0t.N1t(this.k9,t,s,e)}uTt(t){return this.LLt.fc(t)}T1t(t){this.iLt.push(t)}C1t(){if(!this.iLt.length)throw new Error("layout stack empty");this.iLt.pop()}PO(){return this.iLt.length?this.iLt.at(-1):this.lO()}AF(t){return t&&-1!==t.WF()?this.jLt*t.WF():this.HLt}WZ(){return this.HLt}VZ(){return this.jLt}FF(){return this.VLt}WF(){return this.z_t}VF(t){(isNaN(t)||t<0)&&(t=0),this.z_t=t}tO(t){this.zLt=Math.max(t,0)}QF(){return this.zLt}iO(t){this.ULt=Math.max(t,0)}eO(){return this.ULt}jF(){return this.KLt}UF(){return this.tBt}JF(){return this.eBt}U5t(){return this.NLt}DF(){return this.JLt.ne()}z5t(){return this.qLt.ne()}BF(){return this.XLt.ne()}Ltt(){return this._Lt}J5t(){return this.PLt}q5t(){return this.aLt}Hk(){return this.GDt}zk(){return this._Dt}X5t(){return this.PDt}$5t(){return this.EDt}qk(){return this.RDt}IO(t){if(this.iBt)throw new Error("cannot call while loading state - wait until afterload event");return this.uLt.get(t)||null}v$(){this.uLt.clear();for(const t of this.ZDt)if(!t.eJ())for(const s of t.VL())this.uLt.set(s.Z5(),s)}iDt(){return"preview"===this.pDt}kN(){return this.bDt}OD(){return this.pDt}DD(){return"nwjs"===this.OD()||this.mDt}rDt(){return"cordova"===this.pDt}Y5t(){return"Android"===j.ue.fe&&("cordova"===this.pDt||"playable-ad-single-file"===this.pDt||"playable-ad-zip"===this.pDt||"instant-games"===this.pDt)}Z5t(){return this.gH}K5t(){return this.gDt}LD(){return this.yDt}Q5t(){return this.wDt}Nk(){return this.zDt}jCt(){return this.UDt.jCt()}HCt(){return this.UDt.HCt()}HJ(){return this.gLt}tNt(){return this.jb().ww(this.FJ())}mw(t){return this.jb().mw(t||this.FJ())}sNt(){return this.kLt}eNt(t){this.wLt!==(t=!!t)&&(this.wLt=t,this.fO().wY(),this.BO())}eF(){return this.wLt}iNt(t){if(!this.YDt.has(t)){const e=()=>this.nNt(t);this.YDt.set(t,e),t.Hf().addEventListener("animationframeimagechange",e)}const s=this.Rg.Cg(t);return s.Wg()||s.jg().then(()=>this.BO()),s}nNt(t){this.Rg.Pg(t)}XDt(t){const s=[];for(const e of t.r_t())for(const i of e.n6()){const n=i.u6();s.push({source:i,width:n.am(),height:n.vm(),tag:i.P6()})}return{Bg:s}}async $Dt(t){const s=j.dr(j.pd),e=[],n=new Map;for(const h of t.r_t())for(const o of h.n6()){const a=o.u6().uIt();n.has(a)||(n.set(a,null),e.push(s.fc(async()=>{const t=await a.q7();n.set(a,t)})))}await Promise.all(e);const i=[];for(const l of t.r_t())for(const u of l.n6())i.push(s.fc(async()=>{const t=u.u6(),s=n.get(t.uIt()),e=await t.cIt(s),i=await createImageBitmap(e);return{Ug:i}}));const r=await Promise.all(i);for(const c of n.values())c instanceof ImageBitmap&&c.close&&c.close();return{Bg:r}}rNt(t){this.nBt=t,this.rBt=!1}hNt(){this.nBt="",this.rBt=!0}oNt(t){this.hBt=t}c2t(t){this.WN=t}aNt(){return this.oBt}D5t(){return!!(this.nBt||this.rBt||this.hBt||null!==this.WN)}async L5t(){if(this.nBt&&(this.KL(),await this.lNt(this.nBt),this.uNt()),this.hBt&&(await this.cNt(this.hBt),this.uNt(),this.kN())&&H.StepIfPausedInDebugger(),this.rBt){const t=await this.fNt();this.oBt=t,await this.IN(j.S$.w$.y$.dNt,null),this.oBt="",this.uNt()}if(null!==this.WN){this.KL();try{await this.pNt(this.WN),this.oBt=this.WN,await this.IN(j.S$.w$.y$.mNt,null),this.oBt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.IN(j.S$.w$.y$.gNt,null)}this.uNt()}}uNt(){this.nBt="",this.rBt=!1,this.hBt="",this.WN=null}KD(){return this.aBt||(this.aBt=localforage.Be({name:"c3-localstorage-"+this.X5t(),description:this.Hk()})),this.aBt}yNt(){return this.lBt||(this.lBt=localforage.Be({name:"c3-savegames-"+this.X5t(),description:this.Hk()})),this.lBt}async lNt(t){const s=await this.fNt();try{await this.yNt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.oBt=s,await this.IN(j.S$.w$.y$.dNt,null),this.oBt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.IN(j.S$.w$.y$.wNt,null)}}async cNt(t){try{const s=await this.yNt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.pNt(s),this.oBt=s,await this.IN(j.S$.w$.y$.mNt,null),this.oBt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.IN(j.S$.w$.y$.gNt,null)}}async fNt(){const t={c3save:!0,version:1,rt:{time:this.DF(),timeRaw:this.z5t(),walltime:this.BF(),timescale:this.WF(),tickcount:this.Ltt(),next_uid:this.lLt,running_layout:this.lO().uJ(),start_time_offset:Date.now()-this.NLt},types:{},layouts:{},events:this.r0t.G9(),timelines:this.EQ.G9(),user_script_data:null};for(const e of this.ZDt)e.eJ()||e.G_t()||(t.types[e.uJ().toString()]=e.G9());for(const i of this.k9.mO())t.layouts[i.uJ().toString()]=i.G9();const s=this.SNt("save");return s.saveData=null,await this.p$(s),t.user_script_data=s.saveData,JSON.stringify(t)}a$(){return this.iBt}async pNt(t){const s=this.fO(),e=JSON.parse(t);if(e.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!e.c3save)throw new Error("not valid C3 save data");if(1<e.version)throw new Error("C3 save data from future version");this.f2t(),this.$It.dispatchEvent(j.dr(j.Event,"beforeload"));for(const a of this.l5t()){const l=a.D5();l.G_t()||a.UY()}let i=e.rt,n=(this.JLt.Set(i.time),i.hasOwnProperty("timeRaw")&&this.qLt.Set(i.timeRaw),this.XLt.Set(i.walltime),this.z_t=i.timescale,this._Lt=i.tickcount,this.NLt=Date.now()-i.start_time_offset,i.running_layout),r=!(this.iBt=!0);if(n!==this.lO().uJ()){const u=s.uY(n);if(!u)return;await this.j5t(u),r=!0}for(const[c,f]of Object.entries(e.layouts)){const d=parseInt(c,10),p=s.uY(d);p&&p._9(f)}const h=new Set;for(const[m,g]of Object.entries(e.types)){const y=parseInt(m,10),w=this.Wj(y);!w||w.eJ()||w.G_t()||w._9(g,h)}for(const S of this.k9.mO())for(const b of S.wB())b.P9();if(this.KL(),this.v$(),this.iBt=!1,r){for(const v of this.l5t())v.l$();for(const[x,M]of Object.entries(e.types)){const T=parseInt(x,10),C=this.Wj(T);!C||C.eJ()||C.G_t()||C.E_t(M)}}this.lLt=i.next_uid,this.r0t._9(e.events);for(const I of this.ZDt)if(!I.eJ()&&I.X5())for(const G of I.VL()){const _=G.Q5();for(const P of I.LX().x$())if(P!==I){const E=P.VL();if(_<0||_>=E.length)throw new Error("missing sibling instance");G.M$(E[_])}}this.EQ._9(e.timelines),s.yY(),s.wY();for(const R of h)R.OPt();this.d2t(),this.$It.dispatchEvent(j.dr(j.Event,"afterload")),this.X$(this.SNt("afterload"));for(const[A,k]of Object.entries(e.types)){const F=parseInt(A,10),O=this.Wj(F);O&&O.P_t()}const o=this.SNt("load");o.saveData=e.user_script_data,await this.p$(o),this.BO()}bNt(t,s){return t.RO().LRt()-s.RO().LRt()}MAt(t,s){t.RO()&&!this.kBt.has(t)&&(this.kBt.set(t,s),this.FBt.push(t))}f2t(){this.kBt=new WeakMap,j.jh(this.FBt)}d2t(t="full",s=null){this.FBt.sort(this.bNt);for(const e of this.FBt)e.JY(this.kBt.get(e),t,s);for(const i of this.FBt)i.WPt(this.kBt.get(i),t,s);this.f2t()}async vNt(t){const s=await Promise.all(t.map(async t=>{const s=this.rDt()&&this.R7.$H();if(s||"playable-ad-single-file"===this.OD()){const e=await this.R7._o(t);return URL.createObjectURL(e)}return new URL(t,location.href).toString()}));this.xBt.xNt(s)}MNt(t,s){this.xBt.TNt(t,s)}CNt(t,s){this.xBt.INt(t,s)}GNt(t,s,e,i){return this.xBt.GNt(t,s,e,null,null,i)}_Nt(t,s,e,i){return this.xBt._Nt(t,s,e,i)}PNt(){return this.xBt.ENt()}TO(t,s){this.df("runtime","invoke-download",{url:t,filename:s})}async JOt(t,s,e,i,n,r){if(i=i||s,n=n||e,this.$k()){const h=await this.WO("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:e,surfaceWidth:i,surfaceHeight:n,imageBitmapOpts:r});return h.imageBitmap}{const o=await self.C3_RasterSvgImageBlob(t,s,e,i,n);return r?self.createImageBitmap(o,r):o}}async RNt(t){return this.$k()?this.WO("runtime","get-svg-image-size",{blob:t}):self.C3_GetSvgImageSize(t)}ANt(){this.dBt||(this.dBt=!0,this.df("runtime","enable-device-orientation"))}kNt(){this.pBt||(this.pBt=!0,this.df("runtime","enable-device-motion"))}aO(){return this.BLt()}FNt(t){this.BLt=t}IBt(){const t=this.jb();return{fps:this.jF(),tps:this.UF(),cpu:this.JF(),gpu:this.XF(),layout:this.lO()?this.lO().Qc():"",renderer:t.fb()?t.HR():t.GetAdapterInfoString()}}D1t(){return!!this.kN()&&H.D1t()}_1t(t){return this.gxt()?H._1t(t):Promise.resolve()}uyt(){return!!this.gxt()&&H.BreakNext()}ONt(t){this.vDt=!!t,this.DNt()}LNt(){return this.vDt}gxt(){return this.xDt}Kj(t){t?this.MDt--:this.MDt++,this.DNt()}DNt(){this.xDt=this.kN()&&this.vDt&&0===this.MDt}_mt(){return this.kN()&&H._mt()}jq(){return this.kN()&&this.jb().FR()&&H.jq()}async W5t(t){if(t)for(const s of t)await this._1t(s)}V5t(t){return this.W5t(this.$It.t0(t))}Edt(t){return this.r0t.Edt(t.name,t.params)}jO(t){if(this.$k())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}iL(){return this.EBt}SNt(t){const s=j.dr(j.Event,t,!1);return s.runtime=this.EBt,s}UBt(){this.EBt=new self.kk(this),this.wBt={pretick:this.SNt("pretick"),tick:this.SNt("tick"),tick2:this.SNt("tick2")}}qBt(){const t={};for(const s of this.ZDt)t[s.i1t()]={value:s.CL(),enumerable:!0,writable:!1};this.EBt.aF(t)}XBt(){const t={};for(const s of this.cF().c1t())t[s.i1t()]=s.n1t();this.EBt.lF(t)}SO(){return this.ABt}bL(t,s){this.RBt.set(t,s)}vB(t){return this.RBt.get(t)}GD(t){if(!(t instanceof self.PL))throw new TypeError("expected IObjectClass");const s=this.vB(t);if(s&&s instanceof j.Zlt)return s;throw new Error("invalid IObjectClass")}BL(t){if(!(t instanceof self.F5))throw new TypeError("expected IInstance");const s=this.vB(t);if(s&&s instanceof j.Instance)return s;throw new Error("invalid IInstance")}EO(t){if(!(t instanceof self.bW))throw new TypeError("expected IWorldInstance");const s=this.vB(t);if(s&&s instanceof j.Instance)return s;throw new Error("invalid IInstance")}},self.C3_CreateRuntime=j.hDt.mM,self.C3_InitRuntime=(t,s)=>t.X_t(s)}{const Oa=self.Bs;Oa.MBt=class extends Oa.ur{constructor(t,s){super(),this.uf=t,this.BNt=new Map,this.NNt=0,this.WNt=s.inputPort,s.outputPort.onmessage=t=>this.VNt(t),this.jNt=s.maxNumWorkers,this.HNt=1,this.UNt=!1,this.zNt=!1}ENt(){return this.jNt}xNt(t){this.WNt.postMessage({type:"_import_scripts",scripts:t})}TNt(t,s){this.WNt.postMessage({type:"_send_blob",blob:t,id:s})}INt(t,s){this.WNt.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}GNt(t,s,e,i,n,r){if(e=e||[],"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const h=this.NNt++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:h,params:s,transferables:e},a=new Promise((t,s)=>{this.BNt.set(h,{resolve:t,progress:i,reject:s,JNt:!1,maxWorkerNum:r})});return n&&n.b0(()=>this.qNt(h)),this.WNt.postMessage(o,e),this.XNt(),a}_Nt(t,s,e,i){if(e=e||[],"number"==typeof i&&(i=Math.floor(i))<=0)throw new Error("invalid maxWorkerNum");const n=this.NNt++,r={type:t,isBroadcast:!0,maxWorkerNum:i,jobId:n,params:s,transferables:e};this.WNt.postMessage(r,e)}qNt(t){const s=this.BNt.get(t);s&&(s.JNt=!0,s.resolve=null,s.progress=null,s.reject=null,this.WNt.postMessage({type:"_cancel",jobId:t}))}VNt(t){const s=t.data,e=s.type,i=s.jobId;switch(e){case"result":this.$Nt(i,s.result);break;case"progress":this.YNt(i,s.progress);break;case"error":this.ZNt(i,s.error);break;case"ready":this.KNt();break;default:throw new Error(`unknown message from worker '${e}'`)}}$Nt(t,s){const e=this.BNt.get(t);if(!e)throw new Error("invalid job ID");e.JNt||e.resolve(s),this.BNt.delete(t)}YNt(t,s){const e=this.BNt.get(t);if(!e)throw new Error("invalid job ID");!e.JNt&&e.progress&&e.progress(s)}ZNt(t,s){const e=this.BNt.get(t);if(!e)throw new Error("invalid job ID");e.JNt||e.reject(s),this.BNt.delete(t)}KNt(){this.UNt&&(this.UNt=!1,this.HNt++,this.HNt<this.jNt?this.XNt():this.WNt.postMessage({type:"_no_more_workers"}))}QNt(){let t=0,s=[...this.BNt.values()].sort((t,s)=>{const e=t.maxWorkerNum||1/0,i=s.maxWorkerNum||1/0;return e-i});for(const e of s){const i=e.maxWorkerNum||1/0;t<i&&t++}return t}async XNt(){if(!(this.HNt>=this.jNt||this.UNt||this.zNt||this.QNt()<=this.HNt))try{this.UNt=!0;const t=await this.uf.WO("runtime","create-job-worker");t.outputPort.onmessage=t=>this.VNt(t)}catch(t){this.zNt=!0,this.UNt=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.HNt} so far)`,t)}}}}self.C3_Shaders={},self.C3_Shaders.pixellate={JFt:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcOriginStart;\nuniform mediump vec2 srcOriginEnd;\nuniform mediump vec2 pixelSize;\nuniform mediump float tilesize;\nvoid main(void)\n{\nmediump vec2 tile = pixelSize * tilesize;\nmediump vec2 halftile = tile / 2.0;\nmediump vec2 tex = floor(vTex / tile) * tile + halftile;\ntex = clamp(tex, min(srcOriginStart, srcOriginEnd), max(srcOriginStart, srcOriginEnd));\ngl_FragColor = texture2D(samplerFront, tex);\n}",zFt:"#version 300 es\nin mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nout lowp vec4 outColor;\nuniform mediump vec2 srcOriginStart;\nuniform mediump vec2 srcOriginEnd;\nuniform mediump vec2 pixelSize;\nuniform mediump float tilesize;\nvoid main(void)\n{\nmediump vec2 tile = pixelSize * tilesize;\nmediump vec2 halftile = tile / 2.0;\nmediump vec2 tex = floor(vTex / tile) * tile + halftile;\ntex = clamp(tex, min(srcOriginStart, srcOriginEnd), max(srcOriginStart, srcOriginEnd));\noutColor = textureGrad(samplerFront, tex, dFdx(vTex), dFdy(vTex));\n}",HFt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\ntilesize : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3PARAMS_STRUCT%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar tile : vec2<f32> = vec2<f32>(shaderParams.tilesize) / vec2<f32>(textureDimensions(textureFront));\nvar halftile : vec2<f32> = tile / 2.0;\nvar tex : vec2<f32> = floor(input.fragUV / tile) * tile + halftile;\ntex = c3_clampToSrcOrigin(tex);\nvar output : FragmentOutput;\noutput.color = textureSampleGrad(textureFront, samplerFront, tex, dpdx(input.fragUV), dpdy(input.fragUV));\nreturn output;\n}",Lb:!1,Nb:!1,Mb:0,Cb:0,Gb:!1,Pb:!1,Rb:!1,kb:!1,Ob:!1,parameters:[["tilesize",0,"float"]]};{let S=function(t,s){const e=t[1],i=s[1];if("number"==typeof e&&"number"==typeof i)return e-i;{const n=""+e,r=""+i;return n<r?-1:r<n?1:0}},b=(S,self.Bs),e=null,i="",n="",r=[],h="",o="",a="",v=b.dr(b.sdt);b.S$.w$=class extends b.fMt{constructor(t){super(t),this.Y0t=this.uf.cF().Yj(),this.Dft=this.uf.cF().TF(),this.t4t=0,this.s4t=0,this.e4t=new Map}pr(){super.pr()}BO(){this.uf.BO()}TN(t){this.uf.TN(t,null,null)}i4t(t,s){return e&&t===i&&s===n||(e=new RegExp(t,s),i=t,n=s),e.lastIndex=0,e}n4t(t,s,e){if(t!==h||s!==o||e!==a){const i=this.i4t(s,e);r=t.match(i),h=t,o=s,a=e}return r}async r4t(t,s){if(s.length){this.t4t+=s.length;const e=[];for(const i of s)e.push(t.VX(i));await b.co(e,()=>{this.s4t++}),this.s4t++,this.s4t===this.t4t&&(this.s4t=0,this.t4t=0,this.uf.TN(b.S$.w$.y$.h4t,null,null))}}p7(){return 0===this.t4t?1:this.s4t/this.t4t}o4t(t,s){for(const e of s)0===e.UL()&&t.zX(e)}a4t(){return v}l4t(s){const e=this.uf.cF(),t=e.TF(),i=t.Xj(),n=i.yF(),r=n.qj(),h=i.D0t(),o=t.$j(n),a=e.Yj(),l=a.$j();if(l.Q0t(s),h)for(let t=0;t<s&&!l.r8();++t)e.t8(r),l.i8(t),n.s8(i,o),e.e8(r);else for(let t=0;t<s&&!l.r8();++t)l.i8(t),n.s8(i,o);return t.h8(),a.h8(),!1}*u4t(s){const e=this.uf.cF(),t=e.TF(),i=t.Xj(),n=i.yF(),r=n.qj(),h=i.D0t(),o=t.$j(n),a=e.Yj(),l=a.$j();if(l.Q0t(s),h)for(let t=0;t<s&&!l.r8();++t)e.t8(r),l.i8(t),yield*n.vyt(i,o),e.e8(r);else for(let t=0;t<s&&!l.r8();++t)l.i8(t),yield*n.vyt(i,o);return t.h8(),a.h8(),!1}c4t(){const s=this.uf.cF(),t=s.TF(),e=t.Xj(),i=e.yF(),n=i.qj(),r=e.D0t(),h=t.$j(i),o=s.Yj(),a=o.$j();if(r)for(let t=0;!a.r8();++t)s.t8(n),a.i8(t),i.s8(e,h)||a.A6(),s.e8(n);else for(let t=0;!a.r8();++t)a.i8(t),i.s8(e,h)||a.A6();return t.h8(),o.h8(),!1}*f4t(){const s=this.uf.cF(),t=s.TF(),e=t.Xj(),i=e.yF(),n=i.qj(),r=e.D0t(),h=t.$j(i),o=s.Yj(),a=o.$j();if(r)for(let t=0;!a.r8();++t){s.t8(n),a.i8(t);const l=yield*i.vyt(e,h);l||a.A6(),s.e8(n)}else for(let t=0;!a.r8();++t){a.i8(t);const u=yield*i.vyt(e,h);u||a.A6()}return t.h8(),o.h8(),!1}d4t(t,s,e){const i=this.uf.cF(),n=i.TF(),r=n.Xj(),h=r.yF(),o=h.qj(),a=r.D0t(),l=n.$j(h),u=i.Yj(),c=u.$j();if(c.Zj(t),c.Q0t(e),e<s)if(a)for(let t=s;t>=e&&!c.r8();--t)i.t8(o),c.i8(t),h.s8(r,l),i.e8(o);else for(let t=s;t>=e&&!c.r8();--t)c.i8(t),h.s8(r,l);else if(a)for(let t=s;t<=e&&!c.r8();++t)i.t8(o),c.i8(t),h.s8(r,l),i.e8(o);else for(let t=s;t<=e&&!c.r8();++t)c.i8(t),h.s8(r,l);return n.h8(),u.h8(),!1}*p4t(t,s,e){const i=this.uf.cF(),n=i.TF(),r=n.Xj(),h=r.yF(),o=h.qj(),a=r.D0t(),l=n.$j(h),u=i.Yj(),c=u.$j();if(c.Zj(t),c.Q0t(e),e<s)if(a)for(let t=s;t>=e&&!c.r8();--t)i.t8(o),c.i8(t),yield*h.vyt(r,l),i.e8(o);else for(let t=s;t>=e&&!c.r8();--t)c.i8(t),yield*h.vyt(r,l);else if(a)for(let t=s;t<=e&&!c.r8();++t)i.t8(o),c.i8(t),yield*h.vyt(r,l),i.e8(o);else for(let t=s;t<=e&&!c.r8();++t)c.i8(t),yield*h.vyt(r,l);return n.h8(),u.h8(),!1}m4t(e){const t=e.jL(),s=t.VL();if(0!==s.length){const i=this.uf.cF(),n=i.TF(),r=n.Xj(),h=r.yF(),o=h.qj(),a=r.D0t(),l=n.$j(h),u=i.Yj(),c=u.$j(),f=e.X5(),d=v.$j();if(b.Jh(d,s),c.Q0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.r8();++t){i.t8(o);const p=d[t];e.jL().Yft(p),f&&p.Fmt(),c.i8(t),h.s8(r,l),i.e8(o)}else{t.qft(!1);const m=t.Xft();b.jh(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.r8();++t){const g=d[t];m[0]=g,f&&g.Fmt(),c.i8(t),h.s8(r,l)}}n.h8(),u.h8(),b.jh(d),v.h8()}return!1}*g4t(e){const t=e.jL(),s=t.VL();if(0!==s.length){const i=this.uf.cF(),n=i.TF(),r=n.Xj(),h=r.yF(),o=h.qj(),a=r.D0t(),l=n.$j(h),u=i.Yj(),c=u.$j(),f=e.X5(),d=v.$j();if(b.Jh(d,s),c.Q0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.r8();++t){i.t8(o);const p=d[t];e.jL().Yft(p),f&&p.Fmt(),c.i8(t),yield*h.vyt(r,l),i.e8(o)}else{t.qft(!1);const m=t.Xft();b.jh(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.r8();++t){const g=d[t];m[0]=g,f&&g.Fmt(),c.i8(t),yield*h.vyt(r,l)}}n.h8(),u.h8(),b.jh(d),v.h8()}return!1}y4t(e,t){const s=e.jL(),i=s.VL();if(0!==i.length){const n=this.uf.cF(),r=n.TF(),h=n.Xdt(),o=r.Xj(),a=o.yF(),l=a.qj(),u=o.D0t(),c=r.$j(a),f=n.Yj(),d=f.$j(),p=e.X5(),m=v.$j();b.jh(m),d.Q0t(i.length);for(let t=0,s=i.length;t<s;++t)m.push([i[t],h.Obt(1,t)]);if(m.sort(S),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.r8();++t){n.t8(l);const g=m[t][0];e.jL().Yft(g),p&&g.Fmt(),d.i8(t),a.s8(o,c),n.e8(l)}else{s.qft(!1);const y=s.Xft();b.jh(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.r8();++t){const w=m[t][0];y[0]=w,p&&w.Fmt(),d.i8(t),a.s8(o,c)}}r.h8(),f.h8(),b.jh(m),v.h8()}return!1}*w4t(e,t){const s=e.jL(),i=s.VL();if(0!==i.length){const n=this.uf.cF(),r=n.TF(),h=n.Xdt(),o=r.Xj(),a=o.yF(),l=a.qj(),u=o.D0t(),c=r.$j(a),f=n.Yj(),d=f.$j(),p=e.X5(),m=v.$j();b.jh(m),d.Q0t(i.length);for(let t=0,s=i.length;t<s;++t)m.push([i[t],h.Obt(1,t)]);if(m.sort(S),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.r8();++t){n.t8(l);const g=m[t][0];e.jL().Yft(g),p&&g.Fmt(),d.i8(t),yield*a.vyt(o,c),n.e8(l)}else{s.qft(!1);const y=s.Xft();b.jh(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.r8();++t){const w=m[t][0];y[0]=w,p&&w.Fmt(),d.i8(t),yield*a.vyt(o,c)}}r.h8(),f.h8(),b.jh(m),v.h8()}return!1}S4t(t,s){let e=this.e4t.get(t);if(!e){if(!s)return null;e={b4t:null,v4t:new Map},this.e4t.set(t,e)}return e}x4t(t,s,e,i,n){s.mF().Lyt(e,s.bF()),i&&t.e8(n)}*M4t(t,s,e,i,n){yield*s.mF().Byt(e,s.bF()),i&&t.e8(n)}}}{const Da=self.Bs;Da.S$.w$.GGt=class extends Da.ur{constructor(t){super(),this._ft=t,this.uf=t.ZO(),this.ZMt=t.RL()}OMt(){}pr(){this._ft=null,this.uf=null,this.ZMt=null}}}{const La=self.Bs;La.S$.w$.Instance=class extends La.ur{constructor(t,s){super(),this.Ie=t,this._ft=this.Ie.D5(),this.iTt=this._ft.fvt(),this.uf=this.Ie.ZO()}pr(){this.Ie=null,this._ft=null,this.iTt=null,this.uf=null}}}{const G=self.Bs,Ba=[];G.S$.w$.y$={T4t(){return!0},g$(){return!0},_$(){return!0},v5t(){return!0},x5t(){return!0},RF(){return this.uf.RF()},wgt(){const t=this.uf.qdt();return!t.R0t()&&!t.P0t()},C4t(){let t=this.uf.Xdt(),s=t.xbt(),e=s.get("TriggerOnce_lastTick");void 0===e&&(e=-1,s.set("TriggerOnce_lastTick",-1));const i=this.uf.Ltt();return s.set("TriggerOnce_lastTick",i),this.uf.sNt()||e!==i-1},I4t(t){const s=this.uf.Xdt(),e=s.xbt(),i=e.get("Every_lastTime")||0,n=this.uf.DF(),r=(e.has("Every_seconds")||e.set("Every_seconds",t),e.get("Every_seconds"));return i+r<=n?(e.set("Every_lastTime",i+r),n>=e.get("Every_lastTime")+.04&&e.set("Every_lastTime",n),e.set("Every_seconds",t),!0):(n<i-.1&&e.set("Every_lastTime",n),!1)},Fpt(t){const s=this.uf.cF().m1t(t);return s&&s.Fpt()},iDt(){return this.uf.iDt()},ve(){return G.ue.ve},i5t(){return!0},G4t(){return!0},_4t(){return!0},dNt(){return!0},wNt(){return!0},mNt(){return!0},gNt(){return!0},P4t(t){return!!this.uf.IO(t)},E4t(t){switch(t){case 0:return"browser"===G.ue.we;case 1:return"iOS"===G.ue.fe;case 2:return"Android"===G.ue.fe;case 8:return"cordova"===G.ue.we;case 9:return"scirra-arcade"===this.uf.OD();case 10:return"nwjs"===G.ue.we;case 13:return"windows-uwp"===this.uf.OD();default:return!1}},R4t(t,s,e){const i=this.i4t(s,e);return i.test(t)},A4t(t,s,e){return G.compare(t,s,e)},k4t(t,s,e){return s<=t&&t<=e},F4t(t,s,e){return G.compare(t.Ait(),s,e)},O4t(t){return!!t.Ait()},D4t(t,s){const e=this.uf.DF();if(0!==t)return G.compare(e,t,s);{const i=this.uf.Xdt(),n=i.xbt();return!n.get("CompareTime_executed")&&s<=e&&(n.set("CompareTime_executed",!0),!0)}},L4t(t){return isNaN(t)},k2t(t,s,e){return G.Er(G.Mr(t),G.Mr(e))<=G.Mr(s)},F2t(t,s){return G.Ar(G.Mr(t),G.Mr(s))},Hvt(t,s,e){let i=G.Mr(t),n=G.Mr(s),r=G.Mr(e),h=!G.Ar(r,n);return h?!(!G.Ar(i,n)&&G.Ar(i,r)):G.Ar(i,n)&&!G.Ar(i,r)},B4t(t,s){return"number"==typeof t?0===s:1===s},N4t(t){return!!t},fpt(t){return t.toLowerCase()===this.uf.cF().gpt()},W4t(t,e,i,n){if(!t)return!1;let s=this.a4t(),r=s.$j(),h=t.jL(),o=(G.Jh(r,h.VL()),h.Wft()&&G.jh(h.$ft()),this.uf.Xdt()),a=0;for(let t=0,s=r.length;t<s;++t){const u=r[t];r[a]=u,e=o.Obt(1,t),n=o.Obt(3,t),G.compare(e,i,n)?++a:h.Jft(u)}G.Vh(r,a),h.Zft(r);const l=!!r.length;return G.jh(r),s.h8(),t.Eyt(),l},V4t(t,s){if(!t)return!1;let e=this.a4t(),i=e.$j(),n=t.jL(),r=(G.Jh(i,n.VL()),n.Wft()&&G.jh(n.$ft()),this.uf.Xdt()),h=0;for(let t=0,s=i.length;t<s;++t){const a=i[t];i[h]=a,r.Obt(1,t)?++h:n.Jft(a)}G.Vh(i,h),n.Zft(i);const o=!!i.length;return G.jh(i),e.h8(),t.Eyt(),o},j4t(t,e,i){if(!t)return!1;const s=t.jL(),n=s.VL();if(0===n.length)return!1;let r=this.uf.Xdt(),h=null,o=0;for(let t=0,s=n.length;t<s;++t){const a=n[t];i=r.Obt(2,t),(null===h||0===e&&i<o||1===e&&i>o)&&(o=i,h=a)}return s.e0t(h),t.Eyt(),!0},H4t(t,s){if(!t)return!1;const e=t.jL(),i=e.VL();if((s=Math.floor(s))>=i.length)return!1;const n=i[s];return e.e0t(n),t.Eyt(),!0},U4t(t){if(!t)return!1;const s=t.jL(),e=s.VL(),i=Math.floor(this.uf.aO()*e.length);if(i>=e.length)return!1;const n=e[i];return s.e0t(n),t.Eyt(),!0},z4t(t){if(!t)return!1;if(!t.UL())return!1;const s=t.jL();return s.qft(!0),t.Eyt(),!0},J4t(t,e,i){if(!t)return!1;const n=t.jL(),s=n.VL(),r=this.uf.yF(),h=r.i0t(),o=this.uf.Xdt().ybt();n.Wft()?(G.Jh(Ba,s),n.Nft(),n.qft(!1)):h?(G.Jh(Ba,n.$ft()),G.jh(n.$ft())):(G.Jh(Ba,n.Xft()),G.jh(n.Xft()));for(let t=0,s=Ba.length;t<s;++t){const a=Ba[t];G.xor(a.RO()._4(e,i),o)?n.zft(a):n.Jft(a)}return t.Eyt(),G.xor(!!n.Xft().length,o)},q4t(s){if(!s)return!1;let e=s.eJ(),i=null,n=this.uf.y_t();for(let t=n.length-1;0<=t;--t){const r=n[t];if(e){if(r.D5().wvt(s)){i=r;break}}else if(r.D5()===s){i=r;break}}if(!i){const h=s.VL();h.length&&(i=h.at(-1))}if(!i)return!1;const t=s.jL();return t.e0t(i),s.Eyt(),!0},X4t(t){return this.uf.gxt()?this.u4t(t):this.l4t(t)},$4t(){return this.uf.gxt()?this.f4t():this.c4t()},Y4t(t,s,e){return this.uf.gxt()?this.p4t(t,s,e):this.d4t(t,s,e)},dd(t){return this.uf.gxt()?this.g4t(t):this.m4t(t)},Z4t(t,s,e){return this.uf.gxt()?this.w4t(t,e):this.y4t(t,e)},K4t(t){return!!t&&t.qB()},Q4t(t){return!!t&&t.t5()},tWt(t){return!!t&&t.ZB()},sWt(t){return!!t&&!t.UL()},eWt(t,s,e){return!!t&&G.compare(100*t.FE(),s,e)},iWt(t){const s=this.uf.lO();return!!s&&s.IX(t)},h4t(){return!0},nWt(){return 0<this.t4t},rWt(t,s){const e=this.uf.TPt();return!!e&&!!s&&!!e.Ylt(t,s)}}}{let m=function(t,s){const e=t[0],i=s[0],n=e-i;if(0!=n)return n;const r=t[1],h=s[1];return r-h},g=function(t,s){return t[1]-s[1]};m,g;const Na=self.Bs,Wa=[],Va=[],ja=Na.dr(Na.Rect),Ha=Na.dr(Na.qo),Ua=[];Na.S$.w$.hrt={hWt(t,s){t.pnt(s)},oWt(t,s){t.fi()&&"number"!=typeof s&&(s=parseFloat(s)),t.pnt(t.Ait()+s)},aWt(t,s){t.fi()&&t.pnt(t.Ait()-s)},lWt(t,s){t.pnt(!!s)},uWt(t){t.pnt(!t.Ait())},cWt(t){t.pnt(t.Jdt())},fWt(t){this.uf.cF().d1t(t)},dWt(t,s,e,i,n,r){if(t&&s){const h=this.uf.JL(t,s,e,i,n,r);if(h){n&&s.qL(h);const o=this.uf.cF(),a=(o.XL(!0),h.$L(),o.XL(!1),new Map);h.mPt(a,t,n);for(const[l,u]of a)l.jL().Kft(u)}}},pWt(t,s,e,i,n,r){if(t&&s){const h=this.uf.a5t(t);h&&Na.S$.w$.hrt.dWt.call(this,h,s,e,i,n,r)}},tJ(n,r,h,o,a,t,l,u,c,f,d){if(n){let s=this.uf.PO(),e=s;if(t){const p=this.uf.fO().lY(t);if(!p)return;e=p}let i=null;if(!("number"!=typeof l||0<=l)||(i=e.AO(l))){let t=null;if(!("number"!=typeof u||0<=u)||(t=s.AO(u))){ja.set(r,h,o,a);const m=e.tJ(n,ja,i,t,c,f,d);n.jL().Zft(m),n.Eyt()}}}},mWt(){const t=this.Y0t;t.J0t()&&t.U0t().A6()},Opt(t,s){const e=this.uf.cF().m1t(t);e&&(0===s?e.Opt(!1):1===s?e.Opt(!0):e.Opt(!e.Fpt()))},gWt(t){this.uf.VF(t)},yWt(t,s){if(s<0&&(s=0),t){const e=t.jL(),i=e.VL();for(const n of i)n.VF(s)}},wWt(t){if(t){const s=t.jL(),e=s.VL();for(const i of e)i.nN()}},Dh(t,s){if(!(t<0)){const e=this.uf.cF().$1t();return s?e.iMt(t):e.nMt(t),!0}},PF(t){return this.uf.cF().$1t().rMt(t),!0},SWt(){const t=this.uf.cF();return t.$1t().hMt(t.cpt()),!0},GF(t){this.uf.cF().GF(t)},async DOt(t,s,e,i,n,r){const h=this.uf.ND();h&&(this.BO(),await h.DOt(0===t?"image/png":"image/jpeg",s/100,e,i,n,r),await this.uf.IN(Na.S$.w$.y$.G4t,null))},bWt(t,s){if(!(t<=0||s<=0)){this.uf.oOt(t,s),this.uf.PO().S9();const e=this.uf.ND();e&&("off"!==e.tOt()&&this.uf.u5t(t,s),e.n_(e.JV(),e.qV(),!0),this.uf.BO())}},vWt(t){const s=this.uf.ND();s&&"off"!==s.tOt()&&(s.pOt(0!==t?"high":"low"),s.n_(s.JV(),s.qV(),!0))},$et(t){this.uf.rNt(t)},xWt(){this.uf.hNt()},MWt(t){this.uf.oNt(t)},TWt(t){this.uf.c2t(t)},CWt(t){},IWt(){for(const t of this.uf.fO().mO())t.L$()},GWt(t){this.uf.eNt(0!==t)},_Wt(t,s){this.uf.iO(1/t),this.uf.tO(1/s)},PWt(t,s){this.uf.tO(t),this.uf.iO(s)},EWt(t){this.uf.ZF(["vsync","unlimited-tick","unlimited-frame"][t])},RWt(t,e){if(t){const s=t.jL(),i=s.VL(),n=Wa,r=Va,h=this.uf.PO(),o=t.eJ(),a=t.Kwt();for(let t=0,s=i.length;t<s;++t){const l=i[t],u=l.RO();if(u){let t;t=o?l.$rt(e+l.D5().Zwt(a)):l.$rt(e),n.push([u.AO().Ak(),u.kO()]),r.push([l,t])}}if(n.length){n.sort(m),r.sort(g);let e=!1;for(let t=0,s=n.length;t<s;++t){const c=r[t][0],f=h.FO(n[t][0]),d=n[t][1],p=f.OO();p[d]!==c&&((p[d]=c).RO().DO(f,!0),f.LO(c),e=!0)}e&&this.uf.BO(),Na.jh(Wa),Na.jh(Va)}}},MD(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.uf.Nk().MD(t,s)},AWt(t){if(!this.uf.Vg()){const s=this.uf.fO();s.yO()||s.wO(t)}},kWt(t){if(!this.uf.Vg()){const s=this.uf.fO();if(!s.yO()){const e=s.lY(t);e&&s.wO(e)}}},FWt(t){if(!this.uf.Vg()){const s=this.uf.fO();if(!s.yO()){const e=s.mO(),i=e.indexOf(s.lO());if((!t||0!==i)&&(t||i!==e.length-1)){const n=e[i+(t?-1:1)];s.wO(n)}}}},OWt(){if(!this.uf.Vg()){const t=this.uf.fO();t.yO()||(t.wO(t.lO()),this.uf.cF().S1t())}},DWt(t,s){t&&t.zB(s)},LWt(t,s){t&&t.$B(s)},BWt(t,s){t&&t.KB(s)},NWt(t,s){t&&t.DE(s/100)},WWt(t,s){t&&t.s5(s)},VWt(t,s){t&&t.i5(s)},jWt(t,s){t&&t.oB(Na.Mr(+s))},HWt(t,s,e){t&&(t.S5(!0),t.lB(s),t.cB(e))},UWt(t){t&&t.S5(!1)},zWt(t,s,e){t&&t.OJ(s/100,e/100)},JWt(t,s){t&&t._v(+s)},qWt(t,s){if(t){Ha.Ia(s),Ha.br();const e=t.w5();e.ya(Ha)||(e.la(Ha),this.BO())}},XWt(t,s){t&&t.f5(s)},$Wt(t,s){t&&t.uv(s)},YWt(t,s,e){if(t){const i=t.tB(),n=i.Wnt(e);if(n){const r=1===s;n.Cmt()!==r&&(n.VAt(r),t.UW(),this.uf.BO())}}},ZWt(t,s,e,i){if(t){const n=t.tB(),r=n.Wnt(s);if(r){e=Math.floor(e);const h=r.pT().gT(e);if(h){"color"===h?(Ha.Ia(i),i=Ha):"percent"===h&&(i/=100);const o=n.JW(r.Ak(),e,i);o&&r.Cmt()&&this.uf.BO()}}}},KWt(t,s){t&&t.m5(s)},QWt(t){this.uf.PO().rB(+t)},t6t(t){this.uf.PO().oB(Na.Mr(+t))},s6t(t,s){const e=this.uf.PO(),i=e.tB(),n=i.Wnt(s);if(n){const r=1===t;n.Cmt()!==r&&(n.VAt(r),e.UW(),this.uf.BO())}},e6t(t,s,e){const i=this.uf.PO(),n=i.tB(),r=n.Wnt(t);if(r){s=Math.floor(s);const h=r.pT().gT(s);if(h){"color"===h?(Ha.Ia(e),e=Ha):"percent"===h&&(e/=100);const o=n.JW(r.Ak(),s,e);o&&r.Cmt()&&this.uf.BO()}}},i6t(t,s){const e=this.uf.PO();e.EB(t/100,s/100)},n6t(t){const s=this.uf.PO();0===t?s.kB():s.OB()},r6t(t){const s=this.uf.PO();s.lB(t)},h6t(t){const s=this.uf.PO();s.cB(t)},o6t(t,s){const e=this.uf.PO();e.lB(t),e.cB(s)},a6t(t){if(t){const s=t.hxt();if(s){const e=s.RO();if(e){const i=this.uf.PO();i.lB(e.xv()),i.cB(e.Cv())}}}},xB(t,s,e){const i=this.uf.PO();try{i.xB(t,s,e)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},TB(t,s,e){if(t){const i=this.uf.PO();try{i.TB(t,s,e)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}}},IB(t){if(t){const s=this.uf.PO();s.IB(t)}},_B(){this.uf.PO()._B()},async l6t(t){const s=this.uf.lO();if(s&&t&&!this.uf.Vg()){const e=t.eJ()?t.xgt():[t];await this.r4t(s,e)}},async u6t(t){await Na.S$.w$.hrt.l6t.call(this,this.uf.a5t(t))},c6t(t){const s=this.uf.lO();if(s&&t){const e=t.eJ()?t.xgt():[t];this.o4t(s,e)}},f6t(t){Na.S$.w$.hrt.c6t.call(this,this.uf.a5t(t))},d6t(){const t=this.uf.lO();if(t){const s=t.BX();this.o4t(t,s)}},async p6t(t){const s=this.uf.lO();t&&s&&!this.uf.Vg()&&await this.r4t(s,t.OX())},async m6t(t){const s=this.uf.lO(),e=this.uf.fO().lY(t);e&&s&&!this.uf.Vg()&&await this.r4t(s,e.OX())},IF(t){const s=this.Dft.MF();if(s)switch(s.CF()){case 1:"number"==typeof t&&s.IF(t);break;case 2:"string"==typeof t&&s.IF(t);break;case 3:s.IF(t)}},g6t(t,s,e){const i=this.S4t(t.toLowerCase(),!0),n=i.v4t,r=s.toLowerCase(),h=(n.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`),Na.first(n.values())||i.b4t);if(h){const o=0!==h.vF(),a=0!==e.vF();if(o!=a)return void console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`)}n.set(r,e)},y6t(t,s){const e=this.S4t(t.toLowerCase(),!0),i=(e.b4t&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`),Na.first(e.v4t.values())||e.b4t);if(i){const n=0!==i.vF(),r=0!==s.vF();if(n!=r)return void console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`)}e.b4t=s},w6t(t,s,e){const i=this.uf,n=i.gxt()?Ua:null,r=(e=Math.floor(e),this.S4t(t.toLowerCase(),!1));if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),n;let h=r.v4t.get(s.toLowerCase());if(!h){if(!r.b4t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),n;h=r.b4t,e=0}if(!h.Qu())return n;if(0!==h.vF())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),n;const o=i.cF(),a=o.yF(),l=a.gF(),u=0<l.length,c=(u&&(h.bF()?o.t8(l):o.q1t(l)),[]),f=o.Vpt(a);if(f){const p=f.Hpt();for(let t=e,s=p.length;t<s;++t)c.push(p[t].Ait())}const d=h.Hpt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].Jdt());return i.gxt()?this.M4t(o,h,c,u,l):this.x4t(o,h,c,u,l)}}}{const _=self.Bs;_.S$.w$.ort={S6t:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t))&&(t=0),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t))?0:t},L(t){return t.toString()},qt(t){return"string"==typeof t?t.length:0},random(t,s){return void 0===s?this.uf.aO()*t:this.uf.aO()*(s-t)+t},Dwt(...t){const s=Math.floor(this.uf.aO()*t.length);return t[s]},b6t(t,...s){return"number"!=typeof t&&(t=0),s[t=_.br(Math.floor(t),0,s.length-1)]},pi(){return Math.PI},v6t(){return 1/0},sqrt(t){return Math.sqrt(t)},abs(t){return Math.abs(t)},round(t){return Math.round(t)},x6t(t,s){s=Math.max(Math.floor(s),0);const e=Math.pow(10,s);return Math.round((t+Number.EPSILON)*e)/e},floor(t){return Math.floor(t)},ceil(t){return Math.ceil(t)},sign(t){return Math.sign(t)},sin(t){return Math.sin(_.Mr(t))},cos(t){return Math.cos(_.Mr(t))},tan(t){return Math.tan(_.Mr(t))},asin(t){return _.Tr(Math.asin(t))},acos(t){return _.Tr(Math.acos(t))},atan(t){return _.Tr(Math.atan(t))},exp(t){return Math.exp(t)},Qt(t){return Math.log(t)},log10(t){return Math.log10(t)},max(...e){let i=e[0];"number"!=typeof i&&(i=0);for(let s=1,t=e.length;s<t;++s){let t=e[s];"number"==typeof t&&i<t&&(i=t)}return i},min(...e){let i=e[0];"number"!=typeof i&&(i=0);for(let s=1,t=e.length;s<t;++s){let t=e[s];"number"==typeof t&&i>t&&(i=t)}return i},br(t,s,e){return _.br(t,s,e)},Rt(t,s,e,i){return _.Gr(t,s,e,i)},angle(t,s,e,i){return _.Tr(_.Pr(t,s,e,i))},Lt(t,s,e){return _.Lt(t,s,e)},Lr(t,s,e){return _.Lr(t,s,e)},Nr(t,s,e,i){return _.Nr(t,s,e,i)},Wr(t,s,e,i,n){return _.Wr(t,s,e,i,n)},Vr(t,s,e){return _.Vr(t,s,e)},M6t(t,s){return _.Tr(_.Er(_.Mr(t),_.Mr(s)))},T6t(t,s,e){return _.Tr(_.kr(_.Mr(t),_.Mr(s),e))},C6t(t,s,e){return _.Tr(_.Rr(_.Mr(t),_.Mr(s),_.Mr(e)))},I6t(t,s,e){return(t|=0)&~(1<<(s|=0))|(e=0!==e?1:0)<<s},G6t(t,s){return(t|=0)^1<<(0|s)},_6t(t,s){return(t|=0)&1<<(0|s)?1:0},P6t(){return"\n"},E6t(t){return"string"==typeof t?t.toUpperCase():""},R6t(t){return"string"==typeof t?t.toLowerCase():""},left(t,s){return"string"==typeof t?t.substr(0,s):""},mid(t,s,e){return"string"!=typeof t?"":e<0?t.substr(s):t.substr(s,e)},right(t,s){return"string"==typeof t?t.substr(Math.max(t.length-s,0)):""},trim(t){return"string"==typeof t?t.trim():""},A6t(t,s,e){if("string"!=typeof t||"string"!=typeof e)return"";let i=t.split(e);return(s=Math.floor(s))<0||s>=i.length?"":i[s]},k6t(t,s){return"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0},find(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(_.li(s),"i")):-1},F6t(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(_.li(s),"")):-1},replace(t,s,e){return"string"==typeof t&&"string"==typeof s&&"string"==typeof e?t.replace(new RegExp(_.li(s),"gi"),e):"string"==typeof t?t:""},O6t(t,...e){let i=t;for(let t=0,s=e.length;t<s;++t)i=i.replaceAll(`{${t}}`,e[t].toString());return i},D6t(t,s,e){const i=this.i4t(s,e);return t?t.search(i):-1},L6t(t,s,e,i){const n=this.i4t(s,e);return t?t.replace(n,i):""},B6t(t,s,e){const i=this.n4t(t.toString(),s,e);return i?i.length:0},N6t(t,s,e,i){i=Math.floor(i);const n=this.n4t(t.toString(),s,e);return!n||i<0||i>=n.length?"":n[i]},W6t(t,s){let e=t<0?"-":"",i=s-(t=t<0?-t:t).toString().length;return(e+="0".repeat(Math.max(i,0)))+t.toString()},V6t(t){return encodeURIComponent(t)},j6t(t){return decodeURIComponent(t)},dt(){return this.uf.WZ()},H6t(){return this.uf.VZ()},timescale(){return this.uf.WF()},U6t(){return(Date.now()-this.uf.U5t())/1e3},z6t(){return Date.now()},time(){return this.uf.DF()},tickcount(){return this.uf.Ltt()},J6t(){return this.uf.q5t()},fps(){return this.uf.jF()},q6t(){return this.uf.JF()},X6t(){return this.uf.XF()},$6t(){return this.uf.ND().qD()},Y6t(){return this.uf.ND().$D()},Z6t(){return this.uf.Zk()},K6t(){return this.uf.Qk()},Q6t(){return this.uf.Zk()},tVt(){return this.uf.Qk()},sVt(){return this.uf.PO().uB()},eVt(){return this.uf.PO().fB()},iVt(){return this.uf.PO().Qc()},nVt(){return this.uf.PO().hB()},rVt(){return _.Tr(this.uf.PO().aB())},hVt(){return this.uf.PO().am()},oVt(){return this.uf.PO().vm()},aVt(){return 100*this.uf.PO()._J()},lVt(){return 100*this.uf.PO().PJ()},uVt(t){const s=this.uf.PO().AO(t);return s?s.GJ().Cl():0},cVt(t){const s=this.uf.PO().AO(t);return s?s.GJ().Il():0},fVt(t){const s=this.uf.PO().AO(t);return s?s.GJ().Gl():0},dVt(t){const s=this.uf.PO().AO(t);return s?s.GJ()._l():0},pVt(t){const s=this.uf.PO().AO(t);return s?s.GJ().width():0},mVt(t){const s=this.uf.PO().AO(t);return s?s.GJ().height():0},gVt(t){const s=this.uf.PO().AO(t);if(s){const e=s.GJ();return(e.Cl()+e.Gl())/2}return 0},yVt(t){const s=this.uf.PO().AO(t);if(s){const e=s.GJ();return(e.Il()+e._l())/2}return 0},wVt(t,s,e){const i=this.uf.PO().AO(t);return i?i.M5(s,e)[0]:0},SVt(t,s,e){const i=this.uf.PO().AO(t);return i?i.M5(s,e)[1]:0},bVt(t,s,e){const i=this.uf.PO().AO(t);return i?i.G5(s,e)[0]:0},vVt(t,s,e){const i=this.uf.PO().AO(t);return i?i.G5(s,e)[1]:0},xVt(t,s,e,i){const n=this.uf.PO(),r=n.AO(t),h=n.AO(s);if(!r||!h||r===h)return e;const[o,a]=r.G5(e,i);return h.M5(o,a)[0]},MVt(t,s,e,i){const n=this.uf.PO(),r=n.AO(t),h=n.AO(s);if(!r||!h||r===h)return i;const[o,a]=r.G5(e,i);return h.M5(o,a)[1]},TVt(t){const s=this.uf.PO().AO(t);return s?s.e5():0},CVt(t){const s=this.uf.PO().AO(t);return s?_.Tr(s.r5()):0},IVt(t){const s=this.uf.PO().AO(t);return s?100*s.FE():0},GVt(t){const s=this.uf.PO().AO(t);return s?s.n5():0},_Vt(t){const s=this.uf.PO().AO(t);return s?s.uB():0},PVt(t){const s=this.uf.PO().AO(t);return s?s.fB():0},EVt(t){const s=this.uf.PO().AO(t);return s?100*s.o5():0},RVt(t){const s=this.uf.PO().AO(t);return s?100*s.l5():0},AVt(t){const s=this.uf.PO().AO(t);return s?s.Gv():0},kVt(t){const s=this.uf.PO().AO(t);return s?s.Ak():-1},FVt(){const t=this.uf.ND();return t?t.BOt():""},OVt(t){const s=this.Y0t;if(!s.J0t())return 0;if(t){const e=s.X0t(t);return e?e.Ak():0}return s.U0t().Ak()},DVt(){return this.uf.aNt()},LVt(t,s,...e){const i=this.S4t(t.toLowerCase(),!1);if(!i)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let n=i.v4t.get(s.toLowerCase());if(!n){if(!i.b4t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;n=i.b4t}const r=n.vF(),h=n.dF();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!n.Qu())return h;const o=this.uf,a=o.cF(),l=a.yF(),u=l.gF(),c=0<u.length,f=(c&&(n.bF()?a.t8(u):a.q1t(u)),n.Hpt());for(let t=e.length,s=f.length;t<s;++t)e.push(f[t].Jdt());const d=n.mF(),p=d.SF(d.gF(),n.bF(),r,h,...e);return c&&a.e8(u),p},BVt(){return this.uf.Dk().rO()},NVt(){return this.p7()},renderer(){return this.uf.vOt()?"webgpu":"webgl"},WVt(){return this.uf.vOt()?this.uf.vOt().GetAdapterInfoString():this.uf.bOt().HR()},VVt(){let t=this.uf.jb().gb();return Math.round(100*t/1048576)/100},jVt(t,s,e){return _.Xr(t,s,e)},HVt(t,s,e){return _.Yr(t/100,s/100,e/100)},UVt(t,s,e,i){return _.$r(t/100,s/100,e/100,i/100)},zVt(t,s,e){return _.Yr(t/255,s/255,e/255)},JVt(t,s,e,i){return _.$r(t/255,s/255,e/255,i/255)},qVt(){return this.uf.Hk()},XVt(){return this.uf.zk()},$Vt(){return this.uf.yF().TX().Qc()},YVt(){return this.uf.yF().Wgt()}}}{const za=self.Bs;za.S$.ZVt=class extends za.fMt{constructor(t){super(t)}pr(){super.pr()}}}{const Ja=self.Bs;Ja.S$.ZVt.GGt=class extends Ja.YMt{constructor(t){super(t),this.KVt=null,this.$g=null}pr(){this.JX(),super.pr()}OMt(){this.u6().YO(this.uf)}async WX(t){const s=this.u6();this.$g=await s.cIt()}QVt(t,s,e,i){!this.KVt&&this.$g&&(this.KVt=new self.tjt(this),this.KVt.sjt(this.$g,t,s,e,i))}JX(){this.KVt&&(this.KVt.pr(),this.KVt=null)}ejt(){return this.KVt}}}{const qa=self.Bs,Xa=qa.dr(qa.Rect),$a=qa.dr(qa.Rect),Ya=qa.dr(qa.su);qa.S$.ZVt.Instance=class extends qa.PTt{constructor(t,s){super(t),this.ijt=16,this.njt=16,this.rjt=16,this.hjt=16,this.ojt=1,this.ajt=1,this.ljt=!0,this.ujt=null,s&&(this.ijt=s[0],this.njt=s[1],this.rjt=s[2],this.hjt=s[3],this.ojt=s[4],this.ajt=s[5],this.ljt=!!s[8],this.RO().zB(!!s[6])),this.iTt.QVt(this.ijt,this.njt,this.rjt,this.hjt)}pr(){super.pr()}cjt(t){this.ujt=t}Sx(t){const s=this.RO(),e=s.u4();this.fjt(t,e.oh(),e.ah(),s.am(),s.vm())}fjt(t,s,e,i,n){let r=this.iTt.ejt();if(r||(this.iTt.QVt(this.ijt,this.njt,this.rjt,this.hjt),r=this.iTt.ejt())){const h=r.djt(),o=r.pjt(),a=Math.min(this.ijt,h),l=Math.min(this.njt,h),u=Math.min(this.rjt,o),c=Math.min(this.hjt,o),f=h-l,d=o-c,p=this.ljt?1:0,m=this.ojt,g=this.ajt;if(0<a&&0<u&&this.mjt(t,r.X2(),0,0,a+p,u+p,s,e,a+p,u+p),0<l&&0<u&&this.mjt(t,r.X2(),f-p,0,l+p,u+p,s+i-l-p,e,l+p,u+p),0<l&&0<c&&this.mjt(t,r.X2(),f-p,d-p,l+p,c+p,s+i-l-p,e+n-c-p,l+p,c+p),0<a&&0<c&&this.mjt(t,r.X2(),0,d-p,a+p,c+p,s,e+n-c-p,a+p,c+p),0===m){const y=2===g?0:p;0<a&&u<d&&this.gjt(t,r.yjt(),s,e+u,a+y,n-u-c,0,0),0<l&&u<d&&this.gjt(t,r.wjt(),s+i-l-y,e+u,l+y,n-u-c,y,0),0<u&&a<f&&this.gjt(t,r.Sjt(),s+a,e,i-a-l,u+y,0,0),0<c&&a<f&&this.gjt(t,r.bjt(),s+a,e+n-c-y,i-a-l,c+y,0,y)}else 1===m&&(0<a&&u<d&&this.mjt(t,r.X2(),0,u,a,d-u,s,e+u,a,n-u-c),0<l&&u<d&&this.mjt(t,r.X2(),f,u,l,d-u,s+i-l,e+u,l,n-u-c),0<u&&a<f&&this.mjt(t,r.X2(),a,0,f-a,u,s+a,e,i-a-l,u),0<c)&&a<f&&this.mjt(t,r.X2(),a,d,f-a,c,s+a,e+n-c,i-a-l,c);u<d&&a<f&&(0===g?this.gjt(t,r.vjt(),s+a,e+u,i-a-l,n-u-c,0,0):1===g&&this.mjt(t,r.X2(),a,u,f-a,d-u,s+a,e+u,i-a-l,n-u-c))}}mjt(t,s,e,i,n,r,h,o,a,l){const u=s.am(),c=s.vm();if(t.NE(s),Xa.set(h,o,h+a,o+l),$a.set(e/u,i/c,(e+n)/u,(i+r)/c),null===this.ujt){const f=this.RO(),d=f.u4(),p=d.oh(),m=d.ah();Xa.offset(-p,-m),Ya.Mu(Xa,f.aB()),Ya.offset(p,m),t.PS(Ya,$a)}else this.ujt(Xa,$a)}gjt(t,s,e,i,n,r,h,o){const a=s.am(),l=s.vm();if(t.NE(s),Xa.set(e,i,e+n,i+r),$a.set(-h/a,-o/l,(n-h)/a,(r-o)/l),null===this.ujt){const u=this.RO(),c=u.u4(),f=c.oh(),d=c.ah();Xa.offset(-f,-d),Ya.Mu(Xa,u.aB()),Ya.offset(f,d),t.PS(Ya,$a)}else this.ujt(Xa,$a)}LTt(){this._ft.u6()}Wrt(t){}Jrt(t,s){}}}{const Za=self.Bs;Za.S$.ZVt.y$={}}{const Ka=self.Bs;Ka.S$.ZVt.hrt={xjt(t){this.RO().uv(t),this.uf.BO()}}}{const Qa=self.Bs;Qa.S$.ZVt.ort={}}{let c=function(t){const s=tl.Oo(t.width,t.height),e=s.getContext("2d");return e.drawImage(t,0,0),s};c;const tl=self.Bs;self.tjt=class{constructor(t){this.iTt=t,this.uf=this.iTt.ZO(),this.Lx=null,this.Mjt=null,this.Tjt=null,this.Cjt=null,this.Ijt=null,this.Gjt=null,this.V7=0,this.j7=0,this.vb=this.uf.jb(),this.Dg=!1,this._G=!1}pr(){this.vb.k_()||(this.vb.j2(this.Lx),this.vb.j2(this.Mjt),this.vb.j2(this.Tjt),this.vb.j2(this.Cjt),this.vb.j2(this.Ijt),this.vb.j2(this.Gjt)),this.Lx=null,this.Mjt=null,this.Tjt=null,this.Cjt=null,this.Ijt=null,this.Gjt=null,this.iTt=null,this.vb=null,this._G=!0}mr(){return this._G}sjt(t,s,e,i,n){this._jt(t,s,e,i,n)}Pjt(){return!!this.Lx}_jt(t,s,e,i,n){if(!this._G){const r=t.width,h=t.height,o=(this.V7=r,this.j7=h,s=Math.min(Math.floor(s),r),e=Math.min(Math.floor(e),r),i=Math.min(Math.floor(i),h),r-e),a=h-(n=Math.min(Math.floor(n),h)),l=this.uf.tF(),u=this.uf.ND().U7();this.Lx=this.vb.vR(c(t),{Ex:l,Rx:u}),s<o&&i<a&&(this.Mjt=this.vb.vR(this.Ejt(c(t),s,i,o,a),{_x:"repeat",Px:"repeat",Ex:l,Rx:u})),0<s&&i<a&&(this.Tjt=this.vb.vR(this.Ejt(c(t),0,i,s,a),{Px:"repeat",Ex:l,Rx:u})),0<e&&i<a&&(this.Cjt=this.vb.vR(this.Ejt(c(t),o,i,r,a),{Px:"repeat",Ex:l,Rx:u})),0<i&&s<o&&(this.Ijt=this.vb.vR(this.Ejt(c(t),s,0,o,i),{_x:"repeat",Ex:l,Rx:u})),0<n&&s<o&&(this.Gjt=this.vb.vR(this.Ejt(c(t),s,a,o,h),{_x:"repeat",Ex:l,Rx:u}))}}Ejt(t,s,e,i,n){const r=i-s,h=n-e,o=tl.Oo(r,h),a=o.getContext("2d");return a.drawImage(t,s,e,r,h,0,0,r,h),o}djt(){return this.V7}pjt(){return this.j7}X2(){return this.Lx}vjt(){return this.Mjt}yjt(){return this.Tjt}wjt(){return this.Cjt}Sjt(){return this.Ijt}bjt(){return this.Gjt}}}{const sl=self.Bs;sl.S$.Hnt=class extends sl.fMt{constructor(t){super(t)}pr(){super.pr()}}}{const el=self.Bs,il=self.Xs,nl=[],rl=(el.S$.Hnt.GGt=class extends el.YMt{constructor(t){super(t),this.bGt=t.r_t()}pr(){el.jh(this.bGt),super.pr()}OMt(){for(const t of this.bGt)t.vIt(this.uf)}WX(s){const e={Ex:this.uf.tF()};return Promise.all(this.bGt.map(t=>t.xIt(s,e)))}JX(){for(const t of this.bGt)t.MIt()}HX(){this.Rjt()}Rjt(){for(const t of this._ft.WL())t.IW().Ajt()}_bt(t){el.S$.Hnt.U2t(this,t)}dvt(t){nl.push({tTt:null,kjt:!1,instances:[]})}Fjt(t,s,e){const i=nl.at(-1);i.tTt=t,i.kjt=e,i.instances.push(s)}pvt(t){const s=nl.pop(),e=s.tTt,i=s.kjt;if(e){const n=new Map;for(const r of s.instances)r.mPt(n,e,i);for(const[h,o]of n)h.jL().Kft(o)}}Ojt(t){const s=this.D5().u_t(t),e=this.ZO(),i=s.TIt(0);return i.u6().N8(e.jb(),{Ex:e.tF()}).then(()=>this.Rjt()),s}Djt(t){for(const s of this._ft.WL())s.IW().Ljt(t);this.D5().c_t(t)}Bjt(t,s){const e=this._ft.a_t(t);if(!e)throw new Error(`cannot find animation name '${t}'`);let i=e._It(s);i<0&&(i+=e.e6()+1);const n=el.wIt.bIt(this.ZO()),r=(e.CIt(n,i),this.ZO());n.u6().N8(r.jb(),{Ex:r.tF()}).then(()=>this.Rjt());for(const h of this._ft.WL())h.IW().Njt();return n}Wjt(t,s){const e=this._ft.a_t(t);if(!e)throw new Error(`cannot find animation name '${t}'`);if(1===e.e6())throw new Error(`cannot remove last frame from animation '${t}'`);let i=e._It(s);i<0&&(i+=e.e6()),e.IIt(i);for(const n of this._ft.WL())n.IW().Njt()}DMt(){return self.Vjt}},new WeakMap);self.Vjt=class extends self.PL{constructor(t){super(t),rl.set(this,t.fvt())}jjt(t){il.Ti(t);const s=rl.get(this).D5().a_t(t);return s?s.PIt():null}Hjt(){return rl.get(this).D5().o_t().map(t=>t.PIt())}Ujt(t){return il.Ti(t),rl.get(this).Ojt(t).PIt()}zjt(t){il.Ti(t),rl.get(this).Djt(t)}Jjt(t,s){if(il.Ti(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return rl.get(this).Bjt(t,s).r6()}qjt(t,s){if(il.Ti(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");rl.get(this).Wjt(t,s)}}}{const P=self.Bs,hl=self.Xs,ol=P.dr(P.Rect),al=P.dr(P.su),ll=P.dr(P.sl),E=(P.S$.Hnt.Instance=class extends P.PTt{constructor(t,s){super(t);let e=!0,i="",n=0,r=!0;s&&(e=!!s[0],i=s[1],n=s[2],r=s[3]),this.Xjt=this._ft.a_t(i)||this._ft.r_t()[0],this.$jt=P.br(n,0,this.Xjt.e6()-1),this.Yjt=this.Xjt.TIt(this.$jt);const h=this.Yjt.u6(),o=(this.Zjt=h.X2(),this.Kjt=h.O_(),this.Qjt=h.VTt(),this.kTt(),t.dPt(2,!0),t.dPt(1,0<=this.Xjt.XW()),this.t8t=Math.abs(this.Xjt.XW()),this.s8t=this.Xjt.QW(),this.e8t=P.dr(P.T0),this.i8t=0,this.n8t=0,this.r8t="",this.h8t=-1,this.o8t="",this.a8t=0,this.RO());this.l8t=o.u4(),o.zB(e),o.G4(r),o.Sht(this.Yjt.d6()),o.vht(this.Yjt.m6()),o.rAt(this.Yjt.C6()),o.t4(),1===this._ft.h_t()&&1===this._ft.r_t()[0].e6()||0===this.t8t||this.bTt()}pr(){this.Xjt=null,this.Yjt=null,this.Zjt=null,this.e8t=null,super.pr()}LTt(){return this.Yjt.u6()}Pet(){return!0}H7(){this.Zjt=null}DTt(){this.Ajt()}Sx(t){const s=this.Zjt;if(null!==s){t.NE(s);const e=this.RO();e.yW()?this.u8t(e,t):this.c8t(e,t)}}c8t(t,s){let e=this.l8t;this.uf.eF()&&(e=t.KRt(e)),s.$E(e,this.Qjt)}u8t(s,t){const e=s.gAt();if(s.wAt()){s.$Rt(ol,al,!1);let t=al;this.uf.eF()&&(t=s.KRt(t)),e.wx(s.wW(),t,this.Qjt),s.yAt(!1)}e.Sx(t)}f8t(){return this.e8t.ne()}d8t(){return this.Ie.pPt(2)}p8t(t){this.Ie.dPt(2,t)}m8t(){return this.Ie.pPt(1)}g8t(t){this.Ie.dPt(1,t)}y8t(){return this.Ie.pPt(4)}w8t(t){this.Ie.dPt(4,t)}jZ(){this.o8t&&this.S8t(),0<=this.h8t&&this.b8t();const t=this.t8t;if(this.d8t()&&0!==t){const s=this.uf.AF(this.Ie),e=(this.e8t.fc(s),this.f8t()),i=this.Yjt,n=i.c6()/t;if(!(e<this.i8t+n)){const r=this.Xjt,h=this.s8t,o=r.e6(),a=r.ZW(),l=r.YW(),u=r.s6(),c=(this.m8t()?this.$jt++:this.$jt--,this.i8t+=n,this.$jt>=o&&(u?(this.g8t(!1),this.$jt=o-2):!l&&(this.n8t++,this.n8t>=a)?this.v8t(!1):this.$jt=h),this.$jt<0&&(u?(this.$jt=1,this.g8t(!0),l||(this.n8t++,this.n8t>=a&&this.v8t(!0))):!l&&(this.n8t++,this.n8t>=a)?this.v8t(!0):this.$jt=h),this.$jt=P.br(this.$jt,0,o-1),r.TIt(this.$jt));e>this.i8t+c.c6()/t&&(this.i8t=e),this.x8t(i,c)}}else this.nTt()}v8t(t){this.$jt=t?0:this.Xjt.e6()-1,this.p8t(!1),this.r8t=this.Xjt.Qc(),this.w8t(!0),this.QMt("animationend",!1,{animationName:this.r8t}),this.TN(P.S$.Hnt.y$.M8t),this.TN(P.S$.Hnt.y$.T8t),this.w8t(!1),this.n8t=0}x8t(e,i,t){if(e!==i){const s=this.RO(),n=e.u6(),r=i.u6(),h=n.am(),o=n.vm(),a=r.am(),l=r.vm(),u=(t&&t.onFrameChange?t.onFrameChange(s,h,o,a,l):(h!==a&&s.ym(s.am()*(a/h)),o!==l&&s.lm(s.vm()*(l/o))),s.Sht(i.d6()),s.vht(i.m6()),s.rAt(i.C6()),s.t4(),this.Yjt=i,this.Zjt=r.X2(),this.Kjt=r.O_(),this.Qjt=r.VTt(),this.eV().Lnt());for(let t=0,s=u.length;t<s;++t)u[t].GCt(e,i);this.QMt("framechange",!1,{animationName:this.Xjt.Qc(),C8t:this.$jt}),this.TN(P.S$.Hnt.y$.I8t),this.uf.BO()}}G8t(t){this.p8t(!0),this.i8t=this.f8t(),1===t&&0!==this.$jt&&(this.h8t=0,this.y8t()||this.b8t()),this.bTt()}_8t(t,s,e){this.o8t=t,this.a8t=s,this.bTt(),!e&&this.y8t()||this.S8t()}P8t(){return this.Xjt}E8t(){return this.o8t||this.Xjt.Qc()}Ljt(t){P.wn(t,this.E8t())&&this._8t(this._ft.f_t().Qc(),1,!0)}R8t(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this._ft.a_t(this.E8t());if(!s)return;if(-1===(t=s.GIt(t)))return}isFinite(t)&&(this.h8t=t,this.y8t()||this.b8t())}Njt(){if(!this.o8t&&-1===this.h8t){const t=this.Yjt,s=this.Xjt.TIt(P.br(this.$jt,0,this.Xjt.e6()-1));t!==s&&this.x8t(t,s),1<this.Xjt.e6()&&0<this.t8t&&this.bTt()}}A8t(){return this.$jt}k8t(){return this.Yjt.P6()}F8t(t){this.t8t=Math.abs(t),this.g8t(0<=t),0<this.t8t&&this.bTt()}O8t(){return this.m8t()?this.t8t:-this.t8t}D8t(t){"string"==typeof t&&-1===(t=this.Xjt.GIt(t))||(t=P.br(Math.floor(t),0,this.Xjt.e6()-1),this.s8t=t)}L8t(){return this.s8t}S8t(t){const s=this.Yjt,e=this._ft.a_t(this.o8t);if(this.o8t="",e&&(e!==this.Xjt||!this.d8t())){this.Xjt=e,this.g8t(0<=e.XW()),this.t8t=Math.abs(e.XW()),this.s8t=e.QW(),this.$jt=P.br(this.$jt,0,this.Xjt.e6()-1),1===this.a8t&&(this.$jt=0),this.p8t(!0),this.i8t=this.f8t();const i=this.Xjt.TIt(this.$jt);this.x8t(s,i,t)}}b8t(t){const s=this.Yjt,e=this.$jt;if(this.$jt=P.br(Math.floor(this.h8t),0,this.Xjt.e6()-1),this.h8t=-1,t||e!==this.$jt){const i=this.Xjt.TIt(this.$jt);this.x8t(s,i),this.i8t=this.f8t()}}Ajt(){const t=this.Yjt.u6();this.Zjt=t.X2(),this.Kjt=t.O_(),this.Qjt=t.VTt(),this.RO().yAt(!0)}X2(){return this.Zjt}O_(){return this.Kjt}VTt(){return this.Qjt}w6(){return this.Yjt.w6()}_vt(t){let s=this.Yjt,e=this.RO(),i=null;if("string"==typeof t)i=s.M6(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");i=s.x6(t-1)}let n=e.h4();if(!i)return[e.xv(),e.Cv(),n];if(ll.G(i.WIt()),e.yW()){const[r,h,o]=e.wW().Cx(ll.hl(),ll.al());ll.set(r,h),n+=o}return ll.offset(-s.d6(),-s.m6()),ll.scale(e.am(),e.vm()),ll.rotate(e.aB()),ll.offset(e.xv(),e.Cv()),[ll.hl(),ll.al(),n]}B8t(){return this.RO().uAt().Vu()}N8t(t){t=Math.floor(t);const s=this.RO(),e=s.uAt(),i=e.Vu();if((t=t===i?0:t)<0||i<=t)return[0,0];const n=e.Wu();return[n[2*t+0]+s.xv(),n[2*t+1]+s.Cv()]}TTt(){const s=P.S$.Hnt.hrt,t="plugins.sprite.debugger.animation-properties";return[{title:t+".title",properties:[{name:t+".current-animation",value:this.Xjt.Qc(),W8t:t=>this.ITt(s.V8t,t,0)},{name:t+".current-frame",value:this.$jt,W8t:t=>this.ITt(s.j8t,t)},{name:t+".is-playing",value:this.d8t(),W8t:t=>t?this.ITt(s.H8t,0):this.ITt(s.U8t)},{name:t+".speed",value:this.t8t,W8t:t=>this.ITt(s.z8t,t)},{name:t+".repeats",value:this.n8t,W8t:t=>this.n8t=t}]}]}Ov(){const t={a:this.Xjt.uJ()},s=(0!==this.i8t&&(t.fs=this.i8t),this.f8t()),e=(0!==s&&(t.at=s),0!==this.$jt&&(t.f=this.$jt),0!==this.t8t&&(t.cas=this.t8t),1!==this.n8t&&(t.ar=this.n8t),0!==this.s8t&&(t.rt=this.s8t),this.d8t()||(t.ap=this.d8t()),this.m8t()||(t.af=this.m8t()),this.RO());return e.I4()&&(t.ce=e.I4()),t}Dv(t){const s=this.D5().l_t(t.a),e=(s&&(this.Xjt=s),this.i8t=t.hasOwnProperty("fs")?t.fs:0,this.e8t.Set(t.hasOwnProperty("at")?t.at:0),t.hasOwnProperty("f")?t.f:0),i=(this.$jt=P.br(e,0,this.Xjt.e6()-1),this.t8t=t.hasOwnProperty("cas")?t.cas:0,this.n8t=t.hasOwnProperty("ar")?t.ar:1,t.hasOwnProperty("rt")?t.rt:0),n=(this.s8t=P.br(i,0,this.Xjt.e6()-1),this.p8t(!t.hasOwnProperty("ap")||!!t.ap),this.g8t(!t.hasOwnProperty("af")||!!t.af),this.Xjt.TIt(this.$jt)),r=(this.Yjt=n,this.Ajt(),this.RO());r.Sht(n.d6()),r.vht(n.m6()),r.rAt(n.C6()),r.G4(!!t.ce),this.d8t()&&this.bTt()}Wrt(t){const s=this.RO();switch(t){case 3:return s.I4();case 2:return P.br(this.$jt,0,this.Xjt.e6()-1);case 1:return this.Xjt.Qc()}}Jrt(t,s,e){const i=this.RO();switch(t){case 3:i.G4(!!s);break;case 2:{this.p8t(!1);const n=this.Xjt.e6()-1,r=s=P.br(s,0,n),h=this.Xjt.TIt(this.$jt),o=this.Xjt.TIt(r);this.x8t(h,o,e),this.$jt=P.br(r,0,n);break}case 1:{this.o8t=s,this.S8t(e);const a=this.Xjt.e6();1<a&&0<this.Xjt.XW()?this.bTt():this.nTt();break}}}DMt(){return self.J8t}},new WeakMap),ul=new Map([["current-frame",0],["beginning",1]]);self.J8t=class extends self.bW{constructor(){super(),E.set(this,self.F5.N5().IW())}y6(){return E.get(this).w6()}S6(t){return this.b6(t)[0]}v6(t){return this.b6(t)[1]}q8t(t){return this.b6(t)[2]}b6(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return E.get(this)._vt(t)}T6(){return E.get(this).B8t()}I6(t){return hl.bi(t),E.get(this).N8t(t)[0]}_6(t){return hl.bi(t),E.get(this).N8t(t)[1]}G6(t){return hl.bi(t),E.get(this).N8t(t)}X8t(){E.get(this).p8t(!1)}$8t(t="current-frame"){hl.Ti(t);const s=ul.get(t);if(void 0===s)throw new Error("invalid mode");E.get(this).G8t(s)}Y8t(t,s="beginning"){hl.Ti(t),hl.Ti(s);const e=ul.get(s);if(void 0===e)throw new Error("invalid mode");const i=E.get(this);if(!i.D5().a_t(t))throw new Error(`animation name "${t}" does not exist`);i._8t(t,e)}jjt(t){hl.Ti(t);const s=E.get(this).D5().a_t(t);return s?s.PIt():null}get animation(){return E.get(this).P8t().PIt()}get animationName(){return E.get(this).E8t()}set C8t(t){hl.bi(t),E.get(this).R8t(t)}get C8t(){return E.get(this).A8t()}set Z8t(t){hl.Ti(t),E.get(this).R8t(t)}get Z8t(){return E.get(this).k8t()}set K8t(t){hl.bi(t),E.get(this).F8t(t)}get K8t(){return E.get(this).O8t()}set Q8t(t){hl.bi(t),E.get(this).D8t(t)}get Q8t(){return E.get(this).L8t()}get imageWidth(){return E.get(this).LTt().am()}get imageHeight(){return E.get(this).LTt().vm()}tHt(){const t=E.get(this).LTt();return[t.am(),t.vm()]}async sHt(t){hl.sn(t,Blob);const s=E.get(this),e=s.ZO(),i=s.LTt(),n=P.dr(P.UCt);if(n.nIt(e,t),await n.N8(e.jb(),{Ex:e.tF()}),s.mr())n.pr();else{i.rIt(n);const r=s.fvt();r.Rjt(),r.D5().Hf().dispatchEvent(new P.Event("animationframeimagechange")),e.BO()}}eHt(t,s){hl.Ti(s),E.get(this).RO().qRt(!!t,s)}}}{const cl=self.Bs;cl.S$.Hnt.y$={iHt(t){return cl.wn(this.E8t(),t)},nHt(t,s){return cl.compare(this.$jt,t,s)},rHt(t,s){if("string"!=typeof s)return!1;const e=this.Yjt.P6();return cl.compare(e.toLowerCase(),t,s.toLowerCase())},hHt(t,s){return cl.compare(this.O8t(),t,s)},T8t(t){return cl.wn(this.r8t,t)},M8t(){return!0},I8t(){return!0},oHt(){return this.RO().am()<0},aHt(){return this.RO().vm()<0},lHt(){return!0},uHt(){return!0},I4(){return this.RO().I4()}}}{const fl=self.Bs;fl.S$.Hnt.hrt={cHt(t,s,e,i,n){if(t&&s){const[r,h]=this._vt(e),o=this.uf.JL(t,s,r,h,i,n);if(o){if(i&&s.qL(o),t.RL().cL()){const l=o.RO();l.oB(this.RO().aB()),l.t4()}const a=this.uf.cF();a.XL(!0),o.$L(),a.XL(!1),t!==this.uf.Ydt().D5()&&this.iTt.Fjt(t,o,i)}}},U8t(){this.p8t(!1)},H8t(t){this.G8t(t)},V8t(t,s){this._8t(t,s)},j8t(t){this.R8t(t)},z8t(t){this.F8t(t)},fHt(t){this.D8t(t)},dHt(s,t){try{0===s?this.fvt().Ojt(t):this.fvt().Djt(t)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation: `,t)}},pHt(s,t,e){try{0===s?this.fvt().Bjt(t,e):this.fvt().Wjt(t,e)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation frame: `,t)}},mHt(t){const s=this.RO(),e=s.am(),i=Math.abs(e)*(0===t?-1:1);e!==i&&(s.ym(i),s.t4())},gHt(t){const s=this.RO(),e=s.vm(),i=Math.abs(e)*(0===t?-1:1);e!==i&&(s.lm(i),s.t4())},rB(t){const s=this.Yjt,e=s.u6(),i=this.RO(),n=i.am()<0?-1:1,r=i.vm()<0?-1:1,h=e.am()*t*n,o=e.vm()*t*r;i.am()===h&&i.vm()===o||(i.n_(h,o),i.t4())},async yHt(t,s,e){const i=this.Yjt,n=i.u6(),r=this.RO(),h=this.uf,o=this.iTt;if(n.o7()===t)0===s&&(r.n_(n.am(),n.vm()),r.t4()),this.TN(fl.S$.Hnt.y$.lHt);else{const a=fl.dr(fl.UCt);try{if(await a.iIt(h,t),!a.L7())throw new Error("image failed to load");if(this.mr())return void a.pr();await a.N8(h.jb(),{Ex:h.tF()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.mr()||this.TN(fl.S$.Hnt.y$.uHt))}this.mr()?a.pr():(n.rIt(a),o.Rjt(),o.D5().Hf().dispatchEvent(new fl.Event("animationframeimagechange")),h.BO(),0===s&&(r.n_(n.am(),n.vm()),r.t4()),await this.IN(fl.S$.Hnt.y$.lHt))}},wHt(t){this.RO().G4(t)},qRt(t,s){this.RO().qRt(0===t,s)},xjt(t){this.RO().uv(t),this.uf.BO()}}}{const dl=self.Bs;dl.S$.Hnt.ort={SHt(){return this.A8t()},bHt(){return this.k8t()},vHt(){return this.Xjt.e6()},xHt(){return this.Xjt.Qc()},MHt(){return this.O8t()},THt(){return this.Xjt.XW()},CHt(t){return this._vt(t)[0]},IHt(t){return this._vt(t)[1]},GHt(t){return this._vt(t)[2]},_Ht(){return this.w6()},PHt(){return this.LTt().am()},EHt(){return this.LTt().vm()},RHt(t){return this.N8t(t)[0]},AHt(t){return this.N8t(t)[1]},kHt(){return this.B8t()}}}{const pl=self.Bs;pl.S$.Text=class extends pl.fMt{constructor(t){super(t)}pr(){super.pr()}}}{const ml=self.Bs;ml.S$.Text.GGt=class extends ml.YMt{constructor(t){super(t)}pr(){super.pr()}OMt(){}WX(t){}JX(){}}}{const gl=self.Bs,yl=self.Xs,wl=[0,0,0],Sl=["left","center","right"],bl=["top","center","bottom"],vl=["ltr","rtl"],xl=["word","cjk","character"],Ml=new gl.Rect,Tl=new gl.su,Cl=new gl.qo,Il=gl.dr(gl.sl),Gl=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]),R=(gl.S$.Text.Instance=class extends gl.PTt{constructor(t,s){if(super(t),this.cf="",this.FHt=!0,this.OHt="Arial",this.DHt=12,this.LHt=0,this.jI=!1,this.HI=!1,this.ov=gl.dr(gl.qo),this.$I=0,this.YI=0,this.QI="word",this.tG=0,this.BHt="auto",this.NHt=1,this.WHt=null,this.VHt="",this.jHt=!1,this.HHt=!1,this.UHt=null,this.zHt=-1,this.JHt=-1,this.qHt=0,this.XHt=gl.dr(gl.ty.Sb,this.uf.jb(),{timeout:5}),this.XHt.GG=()=>this.uf.BO(),this.$Ht=()=>this.YHt(),this.ZHt=!1,s){this.cf=s[0],this.FHt=!!s[1],this.OHt=s[2],this.DHt=s[3],this.LHt=s[4],this.jI=!!s[5],this.HI=!!s[6],this.$I=s[8],this.YI=s[9],this.QI=xl[s[10]],this.tG=s[11],this.KHt(this.uf.Wj(s[12]));const e=s[7];this.ov.Qo(e[0],e[1],e[2]),this.RO().zB(s[13]),this.HHt=!!s[15]}this.QHt(),this.t7t()}pr(){this.KHt(null),this.s7t(),this.UHt&&(this.UHt.pr(),this.UHt=null),this.XHt.pr(),this.XHt=null,super.pr()}QHt(){const t=this.XHt;t.pf(this.cf),t.AG(this.FHt),this.XHt.OI()&&this.WHt?this.XHt.hm(this.ZO().iNt(this.WHt)):this.XHt.hm(null),t.kG("nearest"!==this.uf.tF()),t.FG(this.OHt),t.BG(this.LHt),t.WG(this.jI),t.jG(this.HI),t.cv(this.ov),t.$G(Sl[this.$I]),t.ZG(bl[this.YI]),t.QG(this.QI),t.s_(vl[this.tG])}e7t(){let t=this.RO(),s=(this.XHt.OG(this.DHt),this.XHt.LG(t.pRt()),t.AO()),e;"auto"===this.BHt?e=s.Tq(t.h4()):"fixed"===this.BHt&&(e=this.NHt),t.yW()&&e!==this.XHt.r_()&&t.yAt(!0),this.XHt.n_(t.am(),t.vm(),e)}KHt(t){t&&(t.eJ()||t.RL().constructor!==gl.S$.Hnt)||t!==this.WHt&&(this.WHt&&this.WHt.Hf().removeEventListener("animationframeimagechange",this.$Ht),this.WHt=t,this.WHt&&this.WHt.Hf().addEventListener("animationframeimagechange",this.$Ht),this.QHt(),this.jHt=!1,this.uf.BO())}YHt(){this.uf.nNt(this.WHt),this.uf.BO(),this.ZHt=!0}t7t(){if(this.HHt){let t=this.cf;this.FHt&&(t=gl.Rn.Kp(t)),this.UHt?this.UHt.pf(t):this.UHt=gl.dr(gl.lf,this.uf,t)}else this.UHt&&(this.UHt.pr(),this.UHt=null)}Sx(t){const s=this.RO(),e=(this.e7t(),this.ZHt&&(this.ZHt=!1,this.XHt.OI())&&this.WHt&&this.XHt.hm(this.ZO().iNt(this.WHt)),this.XHt.X2());if(e){const i=s.AO();if(0===s.aB()&&0===i.aB()&&0===s.h4()&&!s.yW()&&i.jJ()){const n=s.u4(),[r,h]=i.R5(n.oh(),n.ah()),[o,a]=i.R5(n.fh(),n.dh()),l=r-Math.round(r),u=h-Math.round(h),[c,f]=(Ml.set(r,h,o,a),Ml.offset(-l,-u),Tl.xu(Ml),t.QE(t.wR()));this.uf.ND().q8(t,c,f),t.NE(e),t.PS(Tl,this.XHt.O_()),i.Y8(t)}else t.NE(e),s.yW()?this.u8t(s,t):this.c8t(s,t)}}c8t(t,s){let e=t.u4();this.uf.eF()&&(e=this.i7t(e)),s.PS(e,this.XHt.O_())}u8t(s,t){const e=s.gAt();if(s.wAt()){s.$Rt(Ml,Tl,!1);let t=Tl;this.uf.eF()&&(t=this.i7t(t)),e.wx(s.wW(),t,this.XHt.O_()),s.yAt(!1)}e.Sx(t)}i7t(t){const s=t.oh()-Math.round(t.oh()),e=t.ah()-Math.round(t.ah());return 0==s&&0==e?t:(Tl.G(t),Tl.offset(-s,-e),Tl)}BTt(){const t=this.XHt.X2();return t?[t.am(),t.vm()]:[100,100]}NTt(){return this.XHt.O_()}jTt(){return!1}Ov(){const t={t:this.cf,c:this.ov.toJSON(),fn:this.OHt,ps:this.DHt};return this.FHt&&(t.bbc=this.FHt),0!==this.$I&&(t.ha=this.$I),0!==this.YI&&(t.va=this.YI),"word"!==this.QI&&(t.wr=this.QI),0!==this.LHt&&(t.lho=this.LHt),this.jI&&(t.b=this.jI),this.HI&&(t.i=this.HI),-1!==this.JHt&&(t.tw={st:this.zHt,en:this.JHt,l:this.qHt}),this.WHt&&(t.ioc=this.WHt.uJ()),"fixed"===this.BHt&&(t.fs=this.NHt),t}Dv(t){if(this.s7t(),this.cf=t.t,this.ov.za(t.c),this.OHt=t.fn,this.DHt=t.ps,this.FHt=!!t.hasOwnProperty("bbc")&&t.bbc,this.$I=t.hasOwnProperty("ha")?t.ha:0,this.YI=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.QI="boolean"==typeof s?s?"word":"character":s}else this.QI="word";if(this.LHt=t.hasOwnProperty("lho")?t.lho:0,this.jI=!!t.hasOwnProperty("b")&&t.b,this.HI=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const e=t.tw;this.zHt=e.st,this.JHt=e.en,this.qHt=e.l}if(t.hasOwnProperty("ioc")){const i=this.ZO().Wj(t.ioc);i&&this.KHt(i)}else this.KHt(null);t.hasOwnProperty("fs")?(this.BHt="fixed",this.NHt=t.fs):this.BHt="auto",this.QHt(),this.t7t(),this.jHt=!1,-1!==this.JHt&&this.bTt()}Wrt(t){switch(t){case 0:return this.i_();case 1:return this.FHt;case 2:return this.n7t();case 3:return this.r7t();case 4:return this.h7t();case 5:return this.o7t();case 6:return this.a7t();case 7:return wl[0]=this.ov.ua(),wl[1]=this.ov.ca(),wl[2]=this.ov.fa(),wl;case 8:return this.l7t();case 9:return this.u7t();case 10:return this.c7t();case 15:return this.f7t()}}Jrt(t,s){switch(t){case 0:this.d7t(s);break;case 1:this.FHt!==!!s&&(this.FHt=!!s,this.QHt());break;case 2:this.p7t(s);break;case 3:this.m7t(s);break;case 4:this.g7t(s);break;case 5:this.y7t(s);break;case 6:this.w7t(s);break;case 7:const e=this.ov,i=s;e.ua()===i[0]&&e.ca()===i[1]&&e.fa()===i[2]||(this.ov.Qo(i[0],i[1],i[2]),this.QHt());break;case 8:this.S7t(s);break;case 9:this.b7t(s);break;case 10:this.v7t(s)}}CTt(t,s,e,i){0===s&&0===e&&0===i||7===t&&(this.ov.ta(s,e,i),this.QHt())}d7t(t){this.cf!==t&&(this.cf=t,this.XHt.pf(t),this.t7t(),this.jHt=!1,this.uf.BO())}i_(){return this.cf}x7t(t,s){this.e7t(),this.d7t(t),this.zHt=this.uf.BF(),this.JHt=this.zHt+s/this.eV().eN(),this.qHt=this.XHt.l_(),this.XHt.UG(0),this.bTt()}s7t(){this.zHt=-1,this.JHt=-1,this.qHt=0,this.XHt.UG(-1),this.nTt()}M7t(){-1!==this.JHt&&(this.s7t(),this.TN(gl.S$.Text.y$.T7t),this.uf.BO())}p7t(t){this.OHt!==t&&(this.OHt=t,this.XHt.FG(t),this.uf.BO())}n7t(){return this.OHt}y7t(t){this.jI!==(t=!!t)&&(this.jI=t,this.XHt.WG(t),this.uf.BO())}o7t(){return this.jI}w7t(t){this.HI!==(t=!!t)&&(this.HI=t,this.XHt.jG(t),this.uf.BO())}a7t(){return this.HI}m7t(t){this.DHt!==t&&(this.DHt=t,this.uf.BO())}r7t(){return this.DHt}C7t(t){this.ov.ya(t)||(this.ov.la(t),this.XHt.cv(this.ov),this.uf.BO())}I7t(){return this.ov}g7t(t){this.LHt!==t&&(this.LHt=t,this.QHt(),this.uf.BO())}h7t(){return this.LHt}S7t(t){this.$I!==t&&(this.$I=t,this.QHt(),this.uf.BO())}l7t(){return this.$I}b7t(t){this.YI!==t&&(this.YI=t,this.QHt(),this.uf.BO())}u7t(){return this.YI}G7t(t){this.v7t(xl[t])}v7t(t){this.QI!==t&&(this.QI=t,this.QHt(),this.uf.BO())}c7t(){return this.QI}_7t(t){this.tG!==t&&(this.tG=t,this.QHt(),this.uf.BO())}P7t(){return this.tG}E7t(t){this.HHt=!!t,this.t7t()}f7t(){return this.HHt}R7t(t){this.BHt!==t&&(this.BHt=t,this.uf.BO())}A7t(){return this.BHt}k7t(t){this.NHt!==t&&(this.NHt=t,"fixed"===this.BHt)&&this.uf.BO()}F7t(){return this.NHt}O7t(){return this.e7t(),this.XHt.h_()}D7t(){return this.e7t(),this.XHt.a_()}L7t(t,s){this.e7t();const e=this.RO(),i=(Il.set(t-e.xv(),s-e.Cv()),Il.rotate(-e.aB()),Il.offset(e.am()*e.d6(),e.vm()*e.m6()),Il.Pt(e.am(),e.vm()),Il.scale(this.XHt.am(),this.XHt.vm()),this.XHt.c_(Il.hl(),Il.al()));if(i){const n=i.ag("tag");if(n)return n.Jp}return""}B7t(t,s,e){const i=this.L7t(s,e);return i&&gl.wn(t,i)}N7t(t,s){this.e7t(),s=Math.floor(s);const e=this.XHt.d_(t,s);if(!e)return null;const i=this.RO(),n=this.XHt.qG(),r=e.ig(),h=e.rg()-(e.vm()-e.Mm())*n,o=e.am()*n/this.XHt.am()*i.am(),a=e.vm()*n/this.XHt.vm()*i.vm();return Il.set(r,h),Il.Pt(this.XHt.am(),this.XHt.vm()),Il.scale(i.am(),i.vm()),Il.offset(-i.am()*i.d6(),-i.vm()*i.m6()),Il.rotate(i.aB()),Il.offset(i.xv(),i.Cv()),{x:Il.hl(),y:Il.al(),width:o,height:a}}W7t(t){return this.e7t(),this.XHt.p_(t)}V7t(t){let s=Gl.get(t);return null===s?"":`</${s||"span"||"span"}>`}j7t(t,s){let e=Gl.get(t);if(null===e)return"";switch(e=e||"span",t){case"color":return`<${e} style="color: ${s}">`;case"font":return`<${e} style="font-family: '${s}'">`;case"opacity":return`<${e} style="opacity: ${s}%">`;case"size":return`<${e} style="font-size: ${s}pt">`;case"background":return`<${e} style="background-color: ${s}">`;case"hide":return`<${e} style="visibility: hidden">`;case"class":return`<${e} class="${s}">`;case"tag":return`<${e} data-tag="${s}">`;default:return`<${e}>`}}async H7t(){if(!this.jHt){let t=new gl.Rn(this.cf,{kp:!0}).Up(),s=new Map,n='<span class="c3-text"',e=[],r=(e.push(`font-family: '${this.n7t()}';`),this.o7t()&&e.push("font-weight: bold;"),this.a7t()&&e.push("font-style: italic;"),"character"===this.c7t()&&e.push("word-break: break-all;"),n+=` style="${e.join(" ")}">`,this.WHt?this.ZO().iNt(this.WHt):null);if(this.WHt){const o=gl.dr(gl.pd),a=[],l=new Map;for(const c of t)if(c.wm()){const f=c.mg(r);if(f){const d=f.Yg(),p=d.u6().uIt();l.has(p)||(l.set(p,null),a.push(o.fc(async()=>{const t=await p.q7();l.set(p,t)})))}}await Promise.all(a);const u=[];for(const m of t)if(m.wm()){const g=m.mg(r);if(g){const y=g.Yg(),w=y.u6().uIt();u.push(o.fc(async()=>{const t=await y.u6().fIt(l.get(w));s.set(g,t)}))}}await Promise.all(u);for(const S of l.values())S instanceof ImageBitmap&&S.close&&S.close()}const h=new Map;for(const b of t){let i=b.ug(),t=[...h.keys()];t.reverse();for(const v of t)i.has(v)&&i.get(v)===h.get(v)||(h.delete(v),n+=this.V7t(v));for(const[x,M]of i)h.has(x)||(h.set(x,M),n+=this.j7t(x,M));if(b.gm()&&(n+=gl.Q1(gl.Z1(b.Om().join("")),"\n","<br>")),b.wm()&&r){const T=b.mg(r);if(T){const C=s.get(T);if(C){let t=[],s="0.2em",e=i.get("iconoffsety");if(e){let t=e.trim();s=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}t.push("top: "+s),"nearest"===this.uf.tF()&&t.push("image-rendering: pixelated"),n+=`<img class="c3-text-icon" data-icon="${b.pg()}" width="${T.am()}" height="${T.vm()}" style="${t.join(";")}" src="${C}">`}}}}const i=[...h.keys()];i.reverse();for(const I of i)n+=this.V7t(I);n+="</span>",this.VHt=n,this.jHt=!0}return this.VHt}jZ(){const s=this.uf.BF();if(s>=this.JHt)this.s7t(),this.TN(gl.S$.Text.y$.T7t),this.uf.BO();else{let t=gl.Br(this.zHt,this.JHt,s,0,this.qHt);(t=Math.floor(t))!==this.XHt.zG()&&(this.XHt.UG(t),this.uf.BO())}}TTt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.i_(),W8t:t=>this.d7t(t)},{name:t+".properties.font.name",value:this.n7t(),W8t:t=>this.p7t(t)},{name:t+".properties.size.name",value:this.r7t(),W8t:t=>this.m7t(t)},{name:t+".properties.line-height.name",value:this.h7t(),W8t:t=>this.g7t(t)},{name:t+".properties.bold.name",value:this.o7t(),W8t:t=>this.y7t(t)},{name:t+".properties.italic.name",value:this.a7t(),W8t:t=>this.w7t(t)}]}]}DMt(){return self.U7t}},new WeakMap),_l=new Map([["left",0],["center",1],["right",2]]),Pl=new Map([["top",0],["center",1],["bottom",2]]),El=["ltr","rtl"];new Set(["auto","fixed"]);self.U7t=class extends self.bW{constructor(){super(),R.set(this,self.F5.N5().IW())}get text(){return R.get(this).i_()}set text(t){yl.Ti(t);const s=R.get(this);s.s7t(),s.d7t(t)}z7t(t,s){yl.Ti(t),yl.bi(s);const e=R.get(this);e.s7t(),e.x7t(t,s)}J7t(){R.get(this).M7t()}set Q8(t){yl.Ti(t),R.get(this).p7t(t)}get Q8(){return R.get(this).n7t()}set sH(t){R.get(this).y7t(t)}get sH(){return R.get(this).o7t()}set eH(t){R.get(this).w7t(t)}get eH(){return R.get(this).a7t()}set tH(t){yl.bi(t),R.get(this).m7t(t)}get tH(){return R.get(this).r7t()}set q7t(t){if(yl.Ni(t),t.length<3)throw new Error("expected 3 elements");Cl.Qo(t[0],t[1],t[2]),R.get(this).C7t(Cl)}get q7t(){const t=R.get(this).I7t();return[t.ua(),t.ca(),t.fa()]}set lineHeight(t){yl.bi(t),R.get(this).g7t(t)}get lineHeight(){return R.get(this).h7t()}set rH(t){yl.Ti(t);const s=_l.get(t);if(void 0===s)throw new Error("invalid mode");R.get(this).S7t(s)}get rH(){return Sl[R.get(this).l7t()]}set verticalAlign(t){yl.Ti(t);const s=Pl.get(t);if(void 0===s)throw new Error("invalid mode");R.get(this).b7t(s)}get verticalAlign(){return bl[R.get(this).u7t()]}set hH(t){if(!xl.includes(t))throw new Error("invalid mode");R.get(this).v7t(t)}get hH(){return R.get(this).c7t()}set oH(t){yl.Ti(t);const s=El.indexOf(t);if(-1===s)throw new Error("invalid text direction");R.get(this)._7t(s)}get oH(){return El[R.get(this).P7t()]}set X7t(t){R.get(this).E7t(!!t)}get X7t(){return R.get(this).f7t()}$7t(t){yl.bi(t);const s=R.get(this);s.R7t("fixed"),s.k7t(t)}Y7t(){R.get(this).R7t("auto")}get uH(){return R.get(this).O7t()}get cH(){return R.get(this).D7t()}Z7t(){const t=R.get(this);return[t.O7t(),t.D7t()]}K7t(t,s,e){return yl.Ti(t),yl.bi(s),yl.bi(e),R.get(this).B7t(t,s,e)}Q7t(t,s){return yl.bi(t),yl.bi(s),R.get(this).L7t(t,s)}tUt(t,s=0){return yl.Ti(t),yl.bi(s),R.get(this).N7t(t,s)}sUt(t){return yl.Ti(t),R.get(this).W7t(t)}eUt(t){const s=R.get(this),e=s.ZO().GD(t);s.KHt(e)}iUt(){return R.get(this).H7t()}}}{const Rl=self.Bs;Rl.S$.Text.y$={nUt(t,s){return s?this.cf===t:Rl.wn(this.cf,t)},rUt(){return-1!==this.JHt},T7t(){return!0},hUt(t,s,e){return this.B7t(t,s,e)}}}{const Al=self.Bs,kl=Al.dr(Al.qo);Al.S$.Text.hrt={pf(t){this.s7t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.d7t(t.toString())},oUt(t){this.s7t(),(t=(t="number"==typeof t&&t<1e9?Math.round(1e10*t)/1e10:t).toString())&&this.d7t(this.cf+t)},aUt(t,s){this.s7t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.x7t(t.toString(),s)},lUt(t,s){let e=!1,i=!1;switch(s){case 1:e=!0;break;case 2:i=!0;break;case 3:e=!0,i=!0}t===this.OHt&&e===this.jI&&i===this.HI||(this.p7t(t),this.y7t(e),this.w7t(i))},OG(t){this.m7t(t)},uUt(t){kl.Ia(t),kl.br(),this.C7t(kl)},cUt(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},xjt(t){this.RO().uv(t),this.uf.BO()},fUt(){this.M7t()},BG(t){this.g7t(t)},dUt(t){this.S7t(t)},pUt(t){this.b7t(t)},mUt(t){this.G7t(t)},s_(t){this._7t(t)},gUt(t){this.KHt(t)},yUt(){return this.H7t()},wUt(t){this.E7t(t)},SUt(t,s){this.R7t(["auto","fixed"][t]),this.k7t(s)}}}{const Fl=self.Bs;Fl.S$.Text.ort={Text(){return this.cf},bUt(){return this.FHt?Fl.Rn.Kp(this.cf):this.cf},vUt(){return this.OHt},xUt(){return this.DHt},MUt(){return this.O7t()},TUt(){return this.D7t()},CUt(){return this.LHt},IUt(t,s){return this.L7t(t,s)},GUt(t){return this.W7t(t)},_Ut(t,s){const e=this.N7t(t,s);return e?e.x:0},PUt(t,s){const e=this.N7t(t,s);return e?e.y:0},EUt(t,s){const e=this.N7t(t,s);return e?e.width:0},RUt(t,s){const e=this.N7t(t,s);return e?e.height:0},AUt(){return this.VHt}}}{const Ol=self.Bs;Ol.S$.kUt=class extends Ol.VMt{constructor(t){super(t,"progress-bar"),this.zMt("click",(t,s)=>t.FUt(s))}pr(){super.pr()}}}{const Dl=self.Bs;Dl.S$.kUt.GGt=class extends Dl.YMt{constructor(t){super(t)}pr(){super.pr()}OMt(){}}}{const Ll=self.Bs,Bl=self.Xs,Nl=(Ll.S$.kUt.Instance=class extends Ll.zTt{constructor(t,s){super(t,"progress-bar"),this.Unt=0,this.Not=100,this.OUt="",this.ff="",this.DUt="",s&&(this.Unt=s[0],this.Not=s[1],this.OUt=s[2],this.RO().zB(s[3]),this.ff=s[4],this.DUt=s[5]),this.hCt({id:this.ff,className:this.DUt})}pr(){super.pr()}oCt(){return{value:this.Unt,max:this.Not,title:this.OUt}}async FUt(t){this.QMt("click"),await this.IN(Ll.S$.kUt.y$.LUt)}BUt(t){this.OUt!==t&&(this.OUt=t,this.uCt())}NUt(){return this.OUt}WUt(t){this.Unt!==t&&(this.Unt=t,this.uCt())}VUt(){return this.Unt}jUt(t){this.Not!==t&&(this.Not=t,this.uCt())}HUt(){return this.Not}UUt(){this.Not=0,this.Unt=0,this.uCt()}Sx(t){}Ov(){return{v:this.Unt,m:this.Not,t:this.OUt,id:this.ff}}Dv(t){this.Unt=t.v,this.Not=t.m,this.OUt=t.t,this.ff=t.id,this.uCt()}Wrt(t){switch(t){case 0:return this.VUt();case 1:return this.HUt();case 2:return this.NUt()}}Jrt(t,s){switch(t){case 0:this.WUt(s);break;case 1:this.jUt(s);break;case 2:this.BUt(s)}}TTt(){const t="plugins.progressbar";return[{title:t+".name",properties:[{name:t+".properties.value.name",value:this.VUt(),W8t:t=>this.WUt(t)},{name:t+".properties.maximum.name",value:this.HUt(),W8t:t=>this.jUt(t)}]}]}DMt(){return self.zUt}},new WeakMap);self.zUt=class extends self.xW{constructor(){super(),Nl.set(this,self.F5.N5().IW())}set progress(t){Bl.bi(t),Nl.get(this).WUt(t)}get progress(){return Nl.get(this).VUt()}set JUt(t){Bl.bi(t),Nl.get(this).jUt(t)}get JUt(){return Nl.get(this).HUt()}set qUt(t){Bl.Ti(t),Nl.get(this).BUt(t)}get qUt(){return Nl.get(this).NUt()}XUt(){Nl.get(this).UUt()}}}{const Wl=self.Bs;Wl.S$.kUt.y$={LUt(){return!0},$Ut(t,s){return Wl.compare(this.VUt(),t,s)}}}{const Vl=self.Bs;Vl.S$.kUt.hrt={YUt(t){this.BUt(t)},ZUt(t){this.WUt(t)},KUt(t){this.jUt(t)},QUt(){this.UUt()}}}{const jl=self.Bs;jl.S$.kUt.ort={tzt(){return this.VUt()},szt(){return this.HUt()}}}{const Hl=self.Bs;Hl.S$.ezt=class extends Hl.VMt{constructor(t){super(t,"button"),this.zMt("click",(t,s)=>t.FUt(s))}pr(){super.pr()}}}{const Ul=self.Bs;Ul.S$.ezt.GGt=class extends Ul.YMt{constructor(t){super(t)}pr(){super.pr()}OMt(){}}}{const zl=self.Bs,Jl=self.Xs,ql=(zl.S$.ezt.Instance=class extends zl.zTt{constructor(t,s){super(t,"button"),this.cf="OK",this.izt=!1,this.nzt=!1,this.OUt="",this.ff="",this.DUt="",this.Xyt=!0,this.$Tt=!0,s&&(this.izt=1===s[0],this.cf=s[1],this.OUt=s[2],this.RO().zB(s[3]),this.Xyt=s[4],this.$Tt=s[5],this.nzt=s[6],this.ff=s[7],this.DUt=s[8]),this.hCt({id:this.ff,className:this.DUt})}pr(){super.pr()}oCt(){return{text:this.cf,isCheckbox:this.izt,isChecked:this.nzt,title:this.OUt,isVisible:this.RO().qB(),isEnabled:this.Xyt}}async FUt(t){this.nzt=t.isChecked,this.QMt("click",!0),await this.IN(zl.S$.ezt.y$.LUt)}d7t(t){this.cf!==t&&(this.cf=t,this.uCt())}rzt(){return this.cf}BUt(t){this.OUt!==t&&(this.OUt=t,this.uCt())}NUt(){return this.OUt}Uxt(t){this.Xyt!==(t=!!t)&&(this.Xyt=t,this.uCt())}Jxt(){return this.Xyt}hzt(t){this.izt&&this.nzt!==(t=!!t)&&(this.nzt=t,this.uCt())}ozt(){return this.nzt}Sx(t){}Ov(){return{text:this.cf,checked:this.nzt,title:this.OUt,enabled:this.Xyt}}Dv(t){this.cf=t.text,this.nzt=t.checked,this.OUt=t.title,this.Xyt=t.enabled,this.uCt()}Wrt(t){switch(t){case 1:return this.rzt();case 2:return this.NUt();case 4:return this.Jxt();case 5:return this.$Tt;case 6:return this.ozt()}}Jrt(t,s){switch(t){case 1:this.d7t(s);break;case 2:this.BUt(s);break;case 4:this.Uxt(!!s);break;case 5:this.$Tt=!!s;break;case 6:this.hzt(!!s)}}TTt(){const t="plugins.button";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.rzt(),W8t:t=>this.d7t(t)},{name:t+".properties.enabled.name",value:this.Jxt(),W8t:t=>this.Uxt(t)},{name:t+".properties.checked.name",value:this.ozt(),W8t:t=>this.hzt(t)}]}]}DMt(){return self.azt}},new WeakMap);self.azt=class extends self.xW{constructor(){super(),ql.set(this,self.F5.N5().IW())}set text(t){Jl.Ti(t),ql.get(this).d7t(t)}get text(){return ql.get(this).rzt()}set qUt(t){Jl.Ti(t),ql.get(this).BUt(t)}get qUt(){return ql.get(this).NUt()}set isEnabled(t){ql.get(this).Uxt(t)}get isEnabled(){return ql.get(this).Jxt()}set isChecked(t){ql.get(this).hzt(t)}get isChecked(){return ql.get(this).ozt()}}}{const Xl=self.Bs;Xl.S$.ezt.y$={LUt(){return!0},lzt(){return this.nzt},nUt(t,s){return s?this.cf===t:Xl.wn(this.cf,t)}}}{const $l=self.Bs;$l.S$.ezt.hrt={pf(t){this.d7t(t)},YUt(t){this.BUt(t)},uzt(t){this.hzt(0!==t)},czt(){this.izt&&(this.nzt=!this.nzt,this.uCt())}}}{const Yl=self.Bs;Yl.S$.ezt.ort={Text(){return this.cf}}}{const Zl=self.Bs;Zl.S$.fzt=class extends Zl.fMt{constructor(t){super(t)}pr(){super.pr()}}}{let e=function(t){switch(t){case 0:return"clamp-to-edge";case 1:return"repeat";case 2:return"mirror-repeat"}return"repeat"};e;const Kl=self.Bs;Kl.S$.fzt.GGt=class extends Kl.YMt{constructor(t,s){super(t),this.Nx="repeat",this.Wx="repeat",s&&(this.Nx=e(s[0]),this.Wx=e(s[1]))}pr(){super.pr()}OMt(){this.u6().YO(this.uf)}WX(t){return this.u6().N8(t,{Ex:this.uf.tF(),_x:this.Nx,Px:this.Wx})}JX(){this.u6().CG()}dzt(){return this.Nx}pzt(){return this.Wx}}}{const Ql=self.Bs,tu=self.Xs,su=Ql.dr(Ql.Rect),eu=Ql.dr(Ql.su),iu=Ql.dr(Ql.Rect),nu=Ql.dr(Ql.su),A=(Ql.S$.fzt.Instance=class extends Ql.PTt{constructor(t,s){super(t),this.mzt=0,this.gzt=0,this.yzt=1,this.wzt=1,this.Szt=0,this.bzt=!1,this.vzt=0,this.xzt=0,this.Mzt=0,this.Tzt=0,this.Czt=0,this.Izt=null,s&&(this.RO().zB(!!s[0]),this.mzt=s[4],this.gzt=s[5],this.yzt=s[6],this.wzt=s[7],this.Szt=Ql.Mr(s[8]),this.bzt=!!s[9],this.vzt=s[10],this.xzt=s[11],this.Mzt=s[12],this.Tzt=s[13],this.Czt=s[14])}pr(){this.Gzt(),super.pr()}Gzt(){this.Izt&&(this.Izt.pr(),this.Izt=null)}_zt(t,s,e){const i=this.LTt(),n=i.am(),r=i.vm(),h=this.mzt/n,o=this.gzt/r,a=this.Szt;iu.set(0,0,t/(n*this.yzt),s/(r*this.wzt)),iu.offset(-h,-o),0===a?e.xu(iu):e.Mu(iu,-a)}Pzt(t,s=!0){if(this.bzt){const e=this.LTt();t.Hw(),t.aR(e.am()*this.yzt,e.vm()*this.wzt,this.vzt,this.xzt,this.Mzt,this.Tzt,this.Czt)}else s&&t.Bw()}Sx(t){const s=this.LTt(),e=s.X2();if(null!==e){this.Pzt(t),t.NE(e);const i=s.am(),n=s.vm(),r=this.mzt/i,h=this.gzt/n,o=this.RO();iu.set(0,0,o.am()/(i*this.yzt),o.vm()/(n*this.wzt)),iu.offset(-r,-h),o.yW()?this.u8t(o,t):this.c8t(o,t)}}c8t(t,s){let e=t.u4();this.uf.eF()&&(e=t.KRt(e)),0===this.Szt?s.PS(e,iu):(nu.Mu(iu,-this.Szt),s.$E(e,nu))}u8t(e,t){const i=e.gAt();if(e.wAt()){e.$Rt(su,eu,!1);let t=eu,s=(this.uf.eF()&&(t=e.KRt(t)),iu);0!==this.Szt&&(nu.Mu(iu,-this.Szt),s=nu),i.wx(e.wW(),t,s),e.yAt(!1)}i.Sx(t)}LTt(){return this.Izt||this._ft.u6()}Pet(){return!0}X2(){return this.LTt().X2()}Ezt(){this.RO().yAt(!0)}Rzt(t){this.mzt!==t&&(this.mzt=t,this.uf.BO(),this.Ezt())}Azt(){return this.mzt}kzt(t){this.gzt!==t&&(this.gzt=t,this.uf.BO(),this.Ezt())}Fzt(){return this.gzt}Ozt(t){this.yzt!==t&&(this.yzt=t,this.uf.BO(),this.Ezt())}Dzt(){return this.yzt}Lzt(t){this.wzt!==t&&(this.wzt=t,this.uf.BO(),this.Ezt())}Bzt(){return this.wzt}Nzt(t){this.Szt!==t&&(this.Szt=t,this.uf.BO(),this.Ezt())}Wzt(){return this.Szt}Vzt(t){this.bzt!==(t=!!t)&&(this.bzt=t,this.uf.BO())}jzt(){return this.bzt}Hzt(t){this.vzt!==t&&(this.vzt=t,this.jzt())&&this.uf.BO()}Uzt(){return this.vzt}zzt(t){this.xzt!==t&&(this.xzt=t,this.jzt())&&this.uf.BO()}Jzt(){return this.xzt}qzt(t){this.Mzt!==t&&(this.Mzt=t,this.jzt())&&this.uf.BO()}Xzt(){return this.Mzt}$zt(t){this.Tzt!==t&&(this.Tzt=t,this.jzt())&&this.uf.BO()}Yzt(){return this.Tzt}Zzt(t){this.Czt!==t&&(this.Czt=t,this.jzt())&&this.uf.BO()}Kzt(){return this.Czt}Ov(){const t={};return 0!==this.mzt&&(t.iox=this.mzt),0!==this.gzt&&(t.ioy=this.gzt),1!==this.yzt&&(t.isx=this.yzt),1!==this.wzt&&(t.isy=this.wzt),0!==this.Szt&&(t.ia=this.Szt),this.bzt&&(t.tr=!0),1!==this.vzt&&(t.trx=this.vzt),1!==this.xzt&&(t.try=this.xzt),1!==this.Mzt&&(t.tra=this.Mzt),.1!==this.Tzt&&(t.trbmx=this.Tzt),.1!==this.Czt&&(t.trbmy=this.Czt),t}Dv(t){this.mzt=t.iox||0,this.gzt=t.ioy||0,this.yzt=t.hasOwnProperty("isx")?t.isx:1,this.wzt=t.hasOwnProperty("isy")?t.isy:1,this.Szt=t.ia||0,this.bzt=!!t.tr,this.vzt=t.hasOwnProperty("trx")?t.trx:1,this.xzt=t.hasOwnProperty("try")?t.try:1,this.Mzt=t.hasOwnProperty("tra")?t.tra:1,this.Tzt=t.hasOwnProperty("trbmx")?t.trbmx:.1,this.Czt=t.hasOwnProperty("trbmy")?t.trbmy:.1}TTt(){const t="plugins.tiledbg.properties";return[{title:t+".image-transform.name",properties:[{name:t+".image-offset-x.name",value:this.Azt(),W8t:t=>this.Rzt(t)},{name:t+".image-offset-y.name",value:this.Fzt(),W8t:t=>this.kzt(t)},{name:t+".image-scale-x.name",value:100*this.Dzt(),W8t:t=>this.Ozt(t/100)},{name:t+".image-scale-y.name",value:100*this.Bzt(),W8t:t=>this.Lzt(t/100)},{name:t+".image-angle.name",value:Ql.Tr(this.Wzt()),W8t:t=>this.Nzt(Ql.Mr(t))}]},{title:t+".tile-randomization.name",properties:[{name:t+".enable-tile-randomization.name",value:this.jzt(),W8t:t=>this.Vzt(t)},{name:t+".x-random.name",value:100*this.Uzt(),W8t:t=>this.Hzt(t/100)},{name:t+".y-random.name",value:100*this.Jzt(),W8t:t=>this.zzt(t/100)},{name:t+".angle-random.name",value:100*this.Xzt(),W8t:t=>this.qzt(t/100)},{name:t+".blend-margin-x.name",value:100*this.Yzt(),W8t:t=>this.$zt(t/100)},{name:t+".blend-margin-y.name",value:100*this.Kzt(),W8t:t=>this.Zzt(t/100)}]}]}Wrt(t){switch(t){case 4:return this.Azt();case 5:return this.Fzt();case 6:return this.Dzt();case 7:return this.Bzt();case 8:return this.Wzt();case 9:return this.jzt();case 10:return this.Uzt();case 11:return this.Jzt();case 12:return this.Xzt();case 13:return this.Yzt();case 14:return this.Kzt()}}Jrt(t,s){switch(t){case 4:this.Rzt(s);break;case 5:this.kzt(s);break;case 6:this.Ozt(s);break;case 7:this.Lzt(s);break;case 8:this.Nzt(s);break;case 9:this.Vzt(!!s);break;case 10:this.Hzt(s);break;case 11:this.zzt(s);break;case 12:this.qzt(s);break;case 13:this.$zt(s);break;case 14:this.Zzt(s)}}DMt(){return self.Qzt}},new WeakMap);self.Qzt=class extends self.bW{constructor(){super(),A.set(this,self.F5.N5().IW())}set tJt(t){tu.bi(t),A.get(this).Rzt(t)}get tJt(){return A.get(this).Azt()}set sJt(t){tu.bi(t),A.get(this).kzt(t)}get sJt(){return A.get(this).Fzt()}eJt(t,s){tu.bi(t),tu.bi(s);const e=A.get(this);e.Rzt(t),e.kzt(s)}iJt(){const t=A.get(this);return[t.Azt(),t.Fzt()]}set nJt(t){tu.bi(t),A.get(this).Ozt(t)}get nJt(){return A.get(this).Dzt()}set rJt(t){tu.bi(t),A.get(this).Lzt(t)}get rJt(){return A.get(this).Bzt()}hJt(t,s){tu.bi(t),tu.bi(s);const e=A.get(this);e.Ozt(t),e.Lzt(s)}oJt(){const t=A.get(this);return[t.Dzt(),t.Bzt()]}set aJt(t){tu.bi(t),A.get(this).Nzt(t)}get aJt(){return A.get(this).Wzt()}set lJt(t){tu.bi(t),A.get(this).Nzt(Ql.Mr(t))}get lJt(){return Ql.Tr(A.get(this).Wzt())}get imageWidth(){return A.get(this).LTt().am()}get imageHeight(){return A.get(this).LTt().vm()}tHt(){const t=A.get(this).LTt();return[t.am(),t.vm()]}set uJt(t){A.get(this).Vzt(!!t)}get uJt(){return A.get(this).jzt()}set cJt(t){tu.bi(t),A.get(this).Hzt(t)}get cJt(){return A.get(this).Uzt()}set fJt(t){tu.bi(t),A.get(this).zzt(t)}get fJt(){return A.get(this).Jzt()}dJt(t,s){tu.bi(t),tu.bi(s);const e=A.get(this);e.Hzt(t),e.zzt(s)}pJt(){const t=A.get(this);return[t.Uzt(),t.Jzt()]}set mJt(t){tu.bi(t),A.get(this).qzt(t)}get mJt(){return A.get(this).Xzt()}set gJt(t){tu.bi(t),A.get(this).$zt(t)}get gJt(){return A.get(this).Yzt()}set yJt(t){tu.bi(t),A.get(this).Zzt(t)}get yJt(){return A.get(this).Kzt()}wJt(t,s){tu.bi(t),tu.bi(s);const e=A.get(this);e.$zt(t),e.Zzt(s)}SJt(){const t=A.get(this);return[t.Yzt(),t.Kzt()]}async bJt(t){tu.sn(t,Blob);const s=A.get(this),e=s.ZO(),i=Ql.dr(Ql.UCt);i.nIt(e,t),await i.N8(e.jb(),{Ex:e.tF(),_x:s.fvt().dzt(),Px:s.fvt().pzt()}),s.mr()?i.pr():(s.Gzt(),s.Izt=i,e.BO())}}}{const ru=self.Bs;ru.S$.fzt.y$={lHt(){return!0},uHt(){return!0},vJt(){return this.jzt()}}}{const hu=self.Bs;hu.S$.fzt.hrt={xJt(t){this.Rzt(t)},MJt(t){this.kzt(t)},TJt(t){this.Ozt(t/100)},CJt(t){this.Lzt(t/100)},IJt(t){this.Nzt(hu.Mr(t))},GJt(t){this.Vzt(t)},_Jt(t,s){this.Hzt(t/100),this.zzt(s/100)},PJt(t){this.qzt(t/100)},EJt(t,s){this.$zt(t/100),this.Zzt(s/100)},xjt(t){this.RO().uv(t),this.uf.BO()},async yHt(t,s){if(!this.Izt||this.Izt.o7()!==t){const e=this.uf,i=hu.dr(hu.UCt);try{if(await i.iIt(e,t),!i.L7())throw new Error("image failed to load");if(this.mr())return i.pr(),null;const n=await i.N8(e.jb(),{Ex:e.tF(),_x:this.fvt().dzt(),Px:this.fvt().pzt()});if(!n)return}catch(t){return console.error("Load image from URL failed: ",t),void(this.mr()||this.TN(hu.S$.fzt.y$.uHt))}this.mr()?i.pr():(this.Gzt(),this.Izt=i,e.BO(),await this.IN(hu.S$.fzt.y$.lHt))}}}}{const ou=self.Bs;ou.S$.fzt.ort={PHt(){return this.LTt().am()},EHt(){return this.LTt().vm()},RJt(){return this.mzt},AJt(){return this.gzt},kJt(){return 100*this.yzt},FJt(){return 100*this.wzt},OJt(){return ou.Tr(this.Szt)},DJt(){return 100*this.Uzt()},LJt(){return 100*this.Jzt()},BJt(){return 100*this.Xzt()},NJt(){return 100*this.Yzt()},WJt(){return 100*this.Kzt()}}}{const au=self.Bs;au.S$.VJt=class extends au.fMt{constructor(t){super(t)}pr(){super.pr()}}}{const lu=self.Bs;lu.S$.VJt.GGt=class extends lu.YMt{constructor(t){super(t)}pr(){super.pr()}OMt(){}}}{let r=function(s,e,i){if(e<s.length)uu.Vh(s,e);else if(e>s.length)if("function"==typeof i)for(let t=s.length;t<e;++t)s.push(i());else for(let t=s.length;t<e;++t)s.push(i)};r;const uu=self.Bs,cu=self.Xs,fu=self.F5,du=(uu.S$.VJt.Instance=class extends uu.sTt{constructor(t,s){super(t),this.jJt=10,this.HJt=1,this.UJt=1,this.uc=null,this.zJt=[],this.JJt=[],this.qJt=[],this.XJt=-1,s&&(this.jJt=s[0],this.HJt=s[1],this.UJt=s[2]),this.uc=uu.Jo(this.jJt,()=>uu.Jo(this.HJt,()=>uu.Jo(this.UJt,0)))}pr(){this.uc=null,super.pr()}$Jt(t,s,e){return t=Math.floor(t),s=Math.floor(s),e=Math.floor(e),0<=t&&t<this.jJt&&0<=s&&s<this.HJt&&0<=e&&e<this.UJt?this.uc[t][s][e]:0}Set(t,s,e,i){t=Math.floor(t),s=Math.floor(s),e=Math.floor(e),0<=t&&t<this.jJt&&0<=s&&s<this.HJt&&0<=e&&e<this.UJt&&(this.uc[t][s][e]=i)}n_(t,e,i){if(t=Math.floor(t),e=Math.floor(e),i=Math.floor(i),e<0&&(e=0),i<0&&(i=0),this.jJt!==(t=t<0?0:t)||this.HJt!==e||this.UJt!==i){this.jJt=t,this.HJt=e,this.UJt=i;const n=this.uc;r(n,t,()=>uu.Jo(e,()=>uu.Jo(i,0)));for(let s=0;s<t;++s){r(n[s],e,()=>uu.Jo(i,0));for(let t=0;t<e;++t)r(n[s][t],i,0)}}}am(){return this.jJt}vm(){return this.HJt}h9(){return this.UJt}YJt(t,s,e,i,n){for(;0<s;){const r=Math.floor(this.uf.aO()*s);if(--s,0===t){const h=this.$Jt(s,i,n),o=this.$Jt(r,i,n);this.Set(s,i,n,o),this.Set(r,i,n,h)}else if(1===t){const a=this.$Jt(e,s,n),l=this.$Jt(e,r,n);this.Set(e,s,n,l),this.Set(e,r,n,a)}else if(2===t){const u=this.$Jt(e,i,s),c=this.$Jt(e,i,r);this.Set(e,i,s,c),this.Set(e,i,r,u)}}}TTt(){const t="plugins.arr.debugger",s="plugins.arr.properties",e=[{title:t+".array-properties.title",properties:[{name:s+".width.name",value:this.jJt,W8t:t=>this.n_(t,this.HJt,this.UJt)},{name:s+".height.name",value:this.HJt,W8t:t=>this.n_(this.jJt,t,this.UJt)},{name:s+".depth.name",value:this.UJt,W8t:t=>this.n_(this.jJt,this.HJt,t)},{name:s+".elements.name",value:this.jJt*this.HJt*this.UJt}]}],i=[];if(1===this.HJt&&1===this.UJt)for(let s=0;s<this.jJt;++s)i.push({name:"$"+s,value:this.uc[s][0][0],W8t:t=>this.uc[s][0][0]=t});else for(let t=0;t<this.jJt;++t)i.push({name:"$"+t,value:this.uc[t].toString()});return i.length&&e.push({title:t+".array-data.title",properties:i}),e}ZJt(){return JSON.stringify({c2array:!0,size:[this.jJt,this.HJt,this.UJt],data:this.uc})}Ov(){return{size:[this.jJt,this.HJt,this.UJt],data:this.uc}}Dv(t){const s=t.size;this.jJt=s[0],this.HJt=s[1],this.UJt=s[2],this.uc=t.data}KJt(){return 0<=this.XJt&&this.XJt<this.zJt.length?this.zJt[this.XJt]:0}QJt(){return 0<=this.XJt&&this.XJt<this.JJt.length?this.JJt[this.XJt]:0}tqt(){return 0<=this.XJt&&this.XJt<this.qJt.length?this.qJt[this.XJt]:0}DMt(){return self.sqt}},new WeakMap);self.sqt=class extends fu{constructor(){super(),du.set(this,fu.N5().IW())}get width(){return du.get(this).am()}get height(){return du.get(this).vm()}get depth(){return du.get(this).h9()}nB(t,s=1,e=1){cu.bi(t),cu.bi(s),cu.bi(e),du.get(this).n_(t,s,e)}eqt(t,s=0,e=0){return cu.bi(t),cu.bi(s),cu.bi(e),du.get(this).$Jt(t,s,e)}iqt(t,s,e=0,i=0){if(cu.bi(s),cu.bi(e),cu.bi(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid type");du.get(this).Set(s,e,i,t)}}}{let m=function(t,s,e,i,n,r){t.t8(e);const h=r.D5().jL();h.e0t(r.eV()),s.s8(i,n),t.e8(e)};m;const pu=self.Bs;pu.S$.VJt.y$={bvt(t,s,e){return pu.compare(this.$Jt(t,0,0),s,e)},nqt(t,s,e,i){return pu.compare(this.$Jt(t,s,0),e,i)},rqt(t,s,e,i,n){return pu.compare(this.$Jt(t,s,e),i,n)},hqt(t){const s=this.uf,i=s.cF(),n=s.yF(),r=n.qj(),e=s.TF(),h=e.Xj(),o=e.$j(n),a=++this.XJt,l=this.zJt,u=this.JJt,c=this.qJt,f=this.jJt,d=this.HJt,p=this.UJt;if(a===this.zJt.length?(l.push(0),u.push(0),c.push(0)):(l[a]=0,u[a]=0,c[a]=0),s.Kj(!1),0===t)for(let e=0;e<f;++e)for(let s=0;s<d;++s)for(let t=0;t<p;++t)l[a]=e,u[a]=s,c[a]=t,m(i,n,r,h,o,this);else if(1===t)for(let s=0;s<f;++s)for(let t=0;t<d;++t)l[a]=s,u[a]=t,m(i,n,r,h,o,this);else for(let t=0;t<f;++t)l[a]=t,m(i,n,r,h,o,this);return s.Kj(!0),this.XJt--,e.h8(),!1},oqt(t,s){return pu.compare(this.$Jt(this.KJt(),this.QJt(),this.tqt()),t,s)},aqt(i){const t=this.jJt,n=this.HJt,r=this.UJt,h=this.uc;for(let e=0;e<t;++e)for(let s=0;s<n;++s)for(let t=0;t<r;++t)if(h[e][s][t]===i)return!0;return!1},ic(){return 0===this.jJt||0===this.HJt||0===this.UJt},lqt(t,s,e){let i=0;switch(t){case 0:i=this.jJt;break;case 1:i=this.HJt;break;case 2:i=this.UJt}return pu.compare(i,s,e)}}}{let a=function(t,s){if("number"==typeof t&&"number"==typeof s)return t-s;{const e=t.toString(),i=s.toString();return e<i?-1:i<e?1:0}};a;const mu=self.Bs;mu.S$.VJt.hrt={ec(i){const t=this.jJt,n=this.HJt,r=this.UJt,h=this.uc;for(let e=0;e<t;++e)for(let s=0;s<n;++s)for(let t=0;t<r;++t)h[e][s][t]=i},n_(t,s,e){this.n_(t,s,e)},Mv(t,s){this.Set(t,0,0,s)},s4(t,s,e){this.Set(t,s,0,e)},uqt(t,s,e,i){this.Set(t,s,e,i)},$j(e,i,t){const n=this.jJt,r=this.HJt,s=this.UJt,h=this.uc;if(0===t){const o=mu.Jo(r,()=>mu.Jo(s,i));0===e?h.push(o):h.unshift(o),this.jJt++}else if(1===t){for(let t=0;t<n;++t){const a=mu.Jo(s,i);0===e?h[t].push(a):h[t].unshift(a)}this.HJt++}else{for(let s=0;s<n;++s)for(let t=0;t<r;++t)0===e?h[s][t].push(i):h[s][t].unshift(i);this.UJt++}},h8(e,t){const i=this.jJt,n=this.HJt,s=this.UJt,r=this.uc;if(0===t)0!==i&&(0===e?r.pop():r.shift(),this.jJt--);else if(1===t){if(0!==n){for(let t=0;t<i;++t)0===e?r[t].pop():r[t].shift();this.HJt--}}else if(0!==s){for(let s=0;s<i;++s)for(let t=0;t<n;++t)0===e?r[s][t].pop():r[s][t].shift();this.UJt--}},cqt(t){const e=this.jJt,i=this.HJt,s=this.UJt,n=this.uc;if(0!==e&&0!==i&&0!==s)if(0===t)n.reverse();else if(1===t)for(let t=0;t<e;++t)n[t].reverse();else for(let s=0;s<e;++s)for(let t=0;t<i;++t)n[s][t].reverse()},fqt(t){const e=this.jJt,i=this.HJt,s=this.UJt,n=this.uc;if(0!==e&&0!==i&&0!==s)if(0===t)n.sort((t,s)=>a(t[0][0],s[0][0]));else if(1===t)for(let t=0;t<e;++t)n[t].sort((t,s)=>a(t[0],s[0]));else for(let s=0;s<e;++s)for(let t=0;t<i;++t)n[s][t].sort(a)},dqt(t){const n=this.jJt,r=this.HJt,s=this.UJt,h=this.uc;if(0!==n&&0!==r&&0!==s)if(0===t)h.sort((s,e)=>{for(let t=0;t<r;++t){const i=a(s[t][0],e[t][0]);if(0!==i)return i}return 0});else if(1===t)for(let s=0;s<r;++s){const e=[];for(let t=0;t<n;++t)e.push(h[t][s]);e.sort((t,s)=>a(t[0],s[0]));for(let t=0;t<n;++t)h[t][s]=e[t]}else if(2===t){const i=[];for(let t=0;t<r;++t)i.push(t);i.sort((s,e)=>{for(let t=0;t<n;++t){const i=a(h[t][s],h[t][e]);if(0!==i)return i}return 0});for(let s=0;s<n;++s){let t=[];for(const o of i)t.push(h[s][o]);h[s]=t}}else if(3===t)for(let t=0;t<n;++t)h[t].sort((t,s)=>a(t[0],s[0]));else for(let s=0;s<n;++s)for(let t=0;t<r;++t)h[s][t].sort(a)},pqt(e){const i=this.jJt,n=this.HJt,r=this.UJt;if(0!==i&&0!==n&&0!==r)if(0===e)for(let s=0;s<n;++s)for(let t=0;t<r;++t)this.YJt(e,i,0,s,t);else if(1===e)for(let s=0;s<i;++s)for(let t=0;t<r;++t)this.YJt(e,n,s,0,t);else for(let s=0;s<i;++s)for(let t=0;t<n;++t)this.YJt(e,r,s,t,0)},nc(e,t){if(!((e=Math.floor(e))<0)){const i=this.jJt,n=this.HJt,s=this.UJt,r=this.uc;if(0===t)i<=e||(r.splice(e,1),this.jJt--);else if(1===t){if(!(n<=e)){for(let t=0;t<i;++t)r[t].splice(e,1);this.HJt--}}else if(!(s<=e)){for(let s=0;s<i;++s)for(let t=0;t<n;++t)r[s][t].splice(e,1);this.UJt--}}},nU(e,i,t){if(!((i=Math.floor(i))<0)){const n=this.jJt,r=this.HJt,s=this.UJt,h=this.uc;if(0===t)n<i||(h.splice(i,0,mu.Jo(r,()=>mu.Jo(s,e))),this.jJt++);else if(1===t){if(!(r<i)){for(let t=0;t<n;++t)h[t].splice(i,0,mu.Jo(s,e));this.HJt++}}else if(!(i>s)){for(let s=0;s<n;++s)for(let t=0;t<r;++t)h[s][t].splice(i,0,e);this.UJt++}}},mqt(t,s,e){const i=t.split(s);this.n_(i.length,1,1);for(let s=0,t=i.length;s<t;++s){let t=i[s];0===e?String(Number(t))===t&&(t=Number(t)):2===e&&(t=Number(t)),this.Set(s,0,0,t)}},gqt(t){let s=null;try{s=JSON.parse(t)}catch(t){return void console.error("[Construct] Failed to parse JSON: ",t)}if(s.c2array){const e=s.size;this.jJt=e[0],this.HJt=e[1],this.UJt=e[2],this.uc=s.data}},yqt(t){const s=URL.createObjectURL(new Blob([this.ZJt()],{type:"application/json"}));this.uf.TO(s,t)}}}{const gu=self.Bs;gu.S$.VJt.ort={$Jt(t,s,e){return this.$Jt(t,s||0,e||0)},C2t(){return this.jJt},I2t(){return this.HJt},wqt(){return this.UJt},Sqt(){return this.KJt()},bqt(){return this.QJt()},vqt(){return this.tqt()},xqt(){return this.$Jt(this.KJt(),this.QJt(),this.tqt())},ld(){return this.$Jt(0,0,0)},Mqt(){return this.$Jt(this.jJt-1,0,0)},Tqt(e){const i=this.uc;for(let t=0,s=this.jJt;t<s;++t)if(i[t][0][0]===e)return t;return-1},Cqt(s){const e=this.uc;for(let t=this.jJt-1;0<=t;--t)if(e[t][0][0]===s)return t;return-1},Iqt(t){let s=[];for(let t=0;t<this.jJt;++t)s.push(this.$Jt(t,0,0));return s.join(t)},m2t(){return this.ZJt()}}}{const yu=self.Bs;yu.S$.Gqt=class extends yu.fMt{constructor(t){super(t)}pr(){super.pr()}}}{const wu=self.Bs;wu.S$.Gqt.GGt=class extends wu.YMt{constructor(t){super(t)}pr(){super.pr()}OMt(){}}}{const Su=self.Bs;Su.S$.Gqt.Instance=class extends Su.sTt{constructor(t,s){if(super(t),this._qt="",this.Pqt=0,this.Eqt="",this.Rqt=0,this.o0=-1,this.Aqt=new Map,this.kqt=null,this.Fqt="",this.Oqt=!1,this.Dqt=null,this.Lqt=null,this.Bqt=null,this.mDt=this.uf.DD(),this.mDt){this.Dqt=B("fs"),this.Lqt=B("path");const e=self.process||nw.process;this.Bqt=this.Lqt.dirname(e.execPath)+"\\"}}pr(){super.pr()}async Nqt(t,s,e){console.error(`[Construct] AJAX request to '${s}' (tag '${t}') failed: `,e),this.Eqt=t,await this.IN(Su.S$.Gqt.y$.Wqt),this.Eqt=t,await this.IN(Su.S$.Gqt.y$.Vqt)}async jqt(t){this.Eqt=t,await this.IN(Su.S$.Gqt.y$.Hqt),this.Eqt=t,await this.IN(Su.S$.Gqt.y$.Uqt)}async zqt(t,s){s.lengthComputable&&(this.Rqt=s.loaded/s.total,this.Eqt=t,await this.IN(Su.S$.Gqt.y$.Jqt))}async qqt(t,s){s.lengthComputable&&(this.Rqt=s.loaded/s.total,this.Eqt=t,await this.IN(Su.S$.Gqt.y$.Xqt))}$qt(e,i,t){if(this.mDt){const s=this.Dqt,n=this.Bqt+i;s.existsSync(n)?s.readFile(n,{encoding:"utf8"},(t,s)=>{t?this.Nqt(e,i,t):(this._qt=s.replace(/\r\n/g,"\n"),this.jqt(e))}):this.Nqt(e,i,t)}else this.Nqt(e,i,t)}async Yqt(s,e){const t=this.uf.Dk(),i=this.kqt;this.kqt=null;try{if(i){const n=await t.ZH(e);i.SetArrayBufferTransfer(n),this._qt=""}else{const r=await t.KH(e);this._qt=r.replace(/\r\n/g,"\n")}this.Pqt=0,this.jqt(s)}catch(t){this.Nqt(s,e,t)}}Zqt(o,a,t,l){return new Promise(s=>{const e=t=>{this.$qt(o,a,t),s()},i=this.kqt;this.kqt=null;try{const n=new XMLHttpRequest;n.onreadystatechange=()=>{if(4===n.readyState){if(i?this._qt="":this._qt=(n.responseText||"").replace(/\r\n/g,"\n"),this.Pqt=n.status,400<=n.status)this.Nqt(o,a,n.status+n.statusText);else{const t=this._qt.length||i&&n.response instanceof ArrayBuffer;this.mDt&&!t||!this.mDt&&0===n.status&&!t||(i&&i.SetArrayBufferTransfer(n.response),this.jqt(o))}s()}},n.onerror=e,n.ontimeout=e,n.onabort=e,n.onprogress=t=>this.zqt(o,t),n.upload.onprogress=t=>this.qqt(o,t),n.open(t,a),0<=this.o0&&void 0!==n.timeout&&(n.timeout=this.o0),n.responseType=i?"arraybuffer":"text",l&&!this.Aqt.has("Content-Type")&&("string"!=typeof l?n.setRequestHeader("Content-Type","application/octet-stream"):n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));for(const[r,h]of this.Aqt)try{n.setRequestHeader(r,h)}catch(t){console.error(`[Construct] AJAX: Failed to set header '${r}: ${h}': `,t)}if(this.Aqt.clear(),this.Fqt){try{n.overrideMimeType(this.Fqt)}catch(t){console.error("[Construct] AJAX: failed to override MIME type: ",t)}this.Fqt=""}this.Oqt&&(n.withCredentials=!0,this.Oqt=!1),l?n.send(l):n.send()}catch(t){e(t)}})}TTt(){const t="plugins.ajax.debugger";return[{title:t+".title",properties:[{name:t+".last-status-code",value:this.Pqt},{name:t+".last-data",value:this._qt}]}]}Ov(){return{lastData:this._qt,lastStatusCode:this.Pqt}}Dv(t){this._qt=t.lastData,this.Pqt=t.hasOwnProperty("lastStatusCode")?t.lastStatusCode:0,this.Eqt="",this.Rqt=0}}}{const bu=self.Bs;bu.S$.Gqt.y$={Uqt(t){return bu.wn(this.Eqt,t)},Hqt(){return!0},Vqt(t){return bu.wn(this.Eqt,t)},Wqt(){return!0},Jqt(t){return bu.wn(this.Eqt,t)},Xqt(t){return bu.wn(this.Eqt,t)}}}{const vu=self.Bs;vu.S$.Gqt.hrt={async Request(t,s){this.uf.rDt()&&vu.Mo(s)&&this.uf.Dk().$H()?await this.Yqt(t,s):await this.Zqt(t,s,"GET",null)},async Kqt(t,s){this.uf.rDt()&&this.uf.Dk().$H()?await this.Yqt(t,s):await this.Zqt(t,s,"GET",null)},async Qqt(t,s,e,i){await this.Zqt(t,s,i,e)},async t9t(t,s,e,i){if(e){const n=e.hxt(this.Ie);if(n){const r=n.IW(),h=r.GetArrayBufferReadOnly();await this.Zqt(t,s,i,h)}}},s9t(t){this.o0=1e3*t},e9t(t,s){this.Aqt.set(t,s)},i9t(t){if(t){const s=t.hxt(this.Ie);s&&(this.kqt=s.IW())}},n9t(t){this.Fqt=t},r9t(t){this.Oqt=!!t}}}{const xu=self.Bs;xu.S$.Gqt.ort={h9t(){return this._qt},o9t(){return this.Pqt},tzt(){return this.Rqt},Tag(){return this.Eqt}}}{const Mu=self.Bs;Mu.S$.a9t=class extends Mu.fMt{constructor(t){super(t)}pr(){super.pr()}}}{let n=function(){return s._L().IW()};n;const Tu=self.Bs,Cu=self.Xs;Tu.S$.a9t.GGt=class extends Tu.YMt{constructor(t){super(t)}pr(){super.pr()}OMt(){}DMt(){return self.l9t}};let s=null;self.l9t=class extends self.PL{constructor(t){super(t),(s=t).ZO().SO().bO=this}u9t(t){return n().c9t(t)[0]}f9t(t){return n().c9t(t)[1]}d9t(t){return n().c9t(t)}p9t(t){return n().m9t(t)}g9t(t){Cu.Ti(t),n().y9t(t)}w9t(t){const s=n(),e=s.ZO(),i=e.GD(t);s.S9t(i)}}}{let h=self.Bs,o=null;h.S$.a9t.Instance=class extends h.sTt{constructor(t,s){super(t,"mouse"),this.b9t=[!1,!1,!1,!1,!1],this.v9t=0,this.x9t=0,this.M9t=0,this.T9t=0,this.C9t=0,this.I9t=0,this.G9t=0,this._9t=0,this.P9t=!1,this.E9t=0,this.R9t=0,this.fTt([["pointer-lock-change",t=>this.A9t(t)],["pointer-lock-error",t=>this.k9t(t)]]);const e=this.ZO().Hf();this.v0=new h.w0(h.f0.y0(e,"pointermove",t=>this.F9t(t.data)),h.f0.y0(e,"pointerdown",t=>this.O9t(t.data)),h.f0.y0(e,"pointerup",t=>this.D9t(t.data)),h.f0.y0(e,"dblclick",t=>this.L9t(t.data)),h.f0.y0(e,"wheel",t=>this.B9t(t.data)),h.f0.y0(e,"window-blur",()=>this._Bt()))}pr(){super.pr()}O9t(t){"mouse"===t.pointerType&&(this.v9t=t.pageX-this.uf.T5(),this.x9t=t.pageY-this.uf.C5(),this.N9t(t.lastButtons,t.buttons))}F9t(t){this.E9t=t.movementX,this.R9t=t.movementY,this.TN(h.S$.a9t.y$.W9t),this.E9t=0,this.R9t=0,"mouse"===t.pointerType&&(this.v9t=t.pageX-this.uf.T5(),this.x9t=t.pageY-this.uf.C5(),this.N9t(t.lastButtons,t.buttons))}D9t(t){"mouse"===t.pointerType&&this.N9t(t.lastButtons,t.buttons)}N9t(t,s){this.V9t(t,s,1,0),this.V9t(t,s,4,1),this.V9t(t,s,2,2),this.V9t(t,s,8,3),this.V9t(t,s,16,4)}V9t(t,s,e,i){!(t&e)&&s&e?this.j9t(i):t&e&&!(s&e)&&this.H9t(i)}j9t(t){this.b9t[t]=!0,this.TN(h.S$.a9t.y$.U9t),this.M9t=t,this.T9t=0,this.TN(h.S$.a9t.y$.z9t),this.TN(h.S$.a9t.y$.J9t)}H9t(t){this.b9t[t]&&(this.b9t[t]=!1,this.M9t=t,this.TN(h.S$.a9t.y$.q9t))}L9t(t){this.M9t=t.button,this.T9t=1,this.TN(h.S$.a9t.y$.z9t),this.TN(h.S$.a9t.y$.J9t)}B9t(t){this.C9t=t.deltaY<0?1:0,this.I9t=t.deltaX,this.G9t=t.deltaY,this._9t=t.deltaZ,this.TN(h.S$.a9t.y$.X9t)}_Bt(){for(let t=0,s=this.b9t.length;t<s;++t){if(!this.b9t[t])return;this.b9t[t]=!1,this.M9t=t,this.TN(h.S$.a9t.y$.q9t)}}c9t(t){const s=this.uf.lO(),e=this.v9t,i=this.x9t;if(void 0===t){const n=s.FO(0);return n.x9(e,i)}{const r=s.AO(t);return r?r.M5(e,i):[0,0]}}m9t(t){return t=Math.floor(t),!!this.b9t[t]}$9t(){return 0<=this.v9t&&0<=this.x9t&&this.v9t<this.uf.c5t()&&this.x9t<this.uf.f5t()}y9t(t){o!==t&&(o=t,this.dTt("cursor",t))}async S9t(t){if(!h.ue.ve&&t){const s=t.hxt();if(s){const e=s.RO(),i=s.LTt();if(e&&i&&o!==i){const n=await(o=i).fIt(),r=`url(${n}) ${Math.round(e.d6()*i.am())} ${Math.round(e.m6()*i.vm())}, auto`;this.dTt("cursor",r)}}}}A9t(t){this.Y9t(t["has-pointer-lock"])}k9t(t){this.Y9t(t["has-pointer-lock"]),this.TN(h.S$.a9t.y$.Z9t)}Y9t(t){this.P9t!==t&&(this.P9t=t,this.P9t?this.TN(h.S$.a9t.y$.K9t):this.TN(h.S$.a9t.y$.Q9t))}TTt(){const t="plugins.mouse";return[{title:t+".name",properties:[{name:t+".debugger.absolute-position",value:this.v9t+","+this.x9t},{name:t+".debugger.left-button",value:this.b9t[0]},{name:t+".debugger.middle-button",value:this.b9t[1]},{name:t+".debugger.right-button",value:this.b9t[2]},{name:t+".debugger.button-4",value:this.b9t[3]},{name:t+".debugger.button-5",value:this.b9t[4]}]},{title:t+".debugger.position-on-each-layer",properties:this.uf.lO().yB().map(t=>({name:"$"+t.Qc(),value:t.M5(this.v9t,this.x9t).join(", ")}))}]}}}{const Iu=self.Bs;Iu.S$.a9t.y$={z9t(t,s){return this.M9t===t&&this.T9t===s},U9t(){return!0},tXt(t){return this.b9t[t]},q9t(t){return this.M9t===t},sXt(t){const s=this.uf.Xdt(),e=s.ybt(),i=[];return this.$9t()&&i.push([this.v9t,this.x9t]),Iu.xor(this.uf.Nk().b3t(t,i,e),e)},J9t(t,s,e){if(t!==this.M9t||s!==this.T9t)return!1;if(!this.$9t())return!1;const i=this.v9t,n=this.x9t;return this.uf.Nk().b3t(e,[[i,n]],!1)},X9t(t){return 2===t||this.C9t===t},K9t(){return!0},Q9t(){return!0},Z9t(){return!0},eXt(){return this.P9t},W9t(){return!0}}}{const Gu=self.Bs,_u=["auto","pointer","text","crosshair","move","help","wait","none"],Pu=["auto","all-scroll","none","help","pointer","progress","wait","cell","crosshair","text","vertical-text","alias","copy","move","not-allowed","grab","grabbing","col-resize","row-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out"];Gu.S$.a9t.hrt={iXt(t){this.y9t(_u[t])},nXt(t){this.y9t(Pu[t])},rXt(t){this.S9t(t)},hXt(t){this.mTt("request-pointer-lock",{unadjustedMovement:t})},oXt(){this.dTt("release-pointer-lock")}}}{const Eu=self.Bs;Eu.S$.a9t.ort={M2t(t){return this.c9t(t)[0]},T2t(t){return this.c9t(t)[1]},aXt(){return this.v9t},lXt(){return this.x9t},uXt(){return this.E9t},cXt(){return this.R9t},fXt(){return this.I9t},dXt(){return this.G9t},pXt(){return this._9t}}}{const Ru=self.Bs;Ru.S$.Touch=class extends Ru.fMt{constructor(t){super(t)}pr(){super.pr()}}}{let e=function(){return s._L().IW()};e;const Au=self.Bs,ku=self.Xs;Au.S$.Touch.GGt=class extends Au.YMt{constructor(t){super(t)}pr(){super.pr()}OMt(){}DMt(){return self.mXt}};let s=null;self.mXt=class extends self.PL{constructor(t){super(t),(s=t).ZO().SO().vO=this}requestPermission(t){ku.Ti(t);const s=e();if("orientation"===t)return s.gXt(0);if("motion"===t)return s.gXt(1);throw new Error("invalid type")}}}{const k=self.Bs;k.S$.Touch.Instance=class extends k.sTt{constructor(t,s){super(t,"touch"),this.yXt=new Map,this.wXt=!1,this.SXt=!1,this.bXt=0,this.vXt=0,this.xXt=0,this.MXt=0,this.TXt=0,this.CXt=0,this.IXt=0,this.GXt=0,this._Xt=0,this.PXt=0,this.EXt=0,this.RXt=0,this.AXt=0,this.kXt=0,this.FXt=0,this.OXt=0,this.T9t=0,this.DXt=[],s&&(this.wXt=s[0]),this.cTt("permission-result",t=>this.LXt(t));const e=this.ZO().Hf();this.v0=new k.w0(k.f0.y0(e,"pointerdown",t=>this.O9t(t.data)),k.f0.y0(e,"pointermove",t=>this.F9t(t.data)),k.f0.y0(e,"pointerup",t=>this.D9t(t.data,!1)),k.f0.y0(e,"pointercancel",t=>this.D9t(t.data,!0)),k.f0.y0(e,"deviceorientation",t=>this.BXt(t.data)),k.f0.y0(e,"deviceorientationabsolute",t=>this.NXt(t.data)),k.f0.y0(e,"devicemotion",t=>this.WXt(t.data)),k.f0.y0(e,"tick2",t=>this.DY()))}pr(){this.yXt.clear(),super.pr()}O9t(t){if("mouse"===t.pointerType){if(!this.wXt)return;this.SXt=!0}const s=t.pointerId;if(!this.yXt.has(s)){const e=t.pageX-this.uf.T5(),i=t.pageY-this.uf.C5(),n=performance.now(),r=this.yXt.size,h=(this.EXt=r,this.RXt=s,k.dr(k.S$.Touch.VXt));h.X_t(n,e,i,s,r),this.yXt.set(s,h),this.TN(k.S$.Touch.y$.jXt),this.TN(k.S$.Touch.y$.HXt),this.kXt=e,this.FXt=i,this.T9t=0,this.TN(k.S$.Touch.y$.UXt)}}F9t(t){if("mouse"!==t.pointerType||this.SXt){const s=this.yXt.get(t.pointerId);if(s){const e=performance.now();if(!(e-s.uA()<2)){const i=t.pageX-this.uf.T5(),n=t.pageY-this.uf.C5();s.pU(e,i,n,t.width,t.height,t.pressure)}}}}D9t(t,s){if("mouse"===t.pointerType){if(!this.SXt)return;this.SXt=!1}const e=performance.now(),i=t.pointerId,n=this.yXt.get(i);if(n){if(this.EXt=n.zXt(),this.RXt=n.hV(),!s){const r=t.pageX-this.uf.T5(),h=t.pageY-this.uf.C5();this.kXt=r,this.FXt=h,this.T9t=1,this.TN(k.S$.Touch.y$.UXt)}if(this.TN(k.S$.Touch.y$.JXt),this.TN(k.S$.Touch.y$.qXt),!s){const o=n.XXt(e);"single-tap"===o?(this.TN(k.S$.Touch.y$.$Xt),this.kXt=n.xv(),this.FXt=n.Cv(),this.TN(k.S$.Touch.y$.YXt)):"double-tap"===o&&(this.TN(k.S$.Touch.y$.ZXt),this.kXt=n.xv(),this.FXt=n.Cv(),this.TN(k.S$.Touch.y$.KXt))}n.pr(),this.yXt.delete(i)}}gXt(e){return this.mTt("request-permission",{type:e}),new Promise((t,s)=>{this.DXt.push({type:e,resolve:t,reject:s})})}LXt(t){const s=t.result,e=t.type,i=(this.AXt=e,this.DXt.filter(t=>t.type===e));for(const n of i)n.resolve(s?"granted":"denied");this.DXt=this.DXt.filter(t=>t.type!==e),s?(this.TN(k.S$.Touch.y$.QXt),0===e?this.uf.ANt():this.uf.kNt()):this.TN(k.S$.Touch.y$.t$t)}BXt(t){"number"==typeof t.webkitCompassHeading?this.bXt=t.webkitCompassHeading:t.absolute&&(this.bXt=t.alpha),this.vXt=t.alpha,this.xXt=t.beta,this.MXt=t.gamma}NXt(t){this.bXt=t.alpha}WXt(t){const s=t.acceleration,e=(s&&(this.TXt=s.x,this.CXt=s.y,this.IXt=s.z),t.accelerationIncludingGravity);e&&(this.GXt=e.x,this._Xt=e.y,this.PXt=e.z)}DY(){let t=performance.now(),s=0;for(const e of this.yXt.values())e.uA()<=t-50&&e.s$t(t),e.e$t(t)&&(this.EXt=e.zXt(),this.RXt=e.hV(),this.OXt=s,this.TN(k.S$.Touch.y$.i$t),this.kXt=e.xv(),this.FXt=e.Cv(),this.TN(k.S$.Touch.y$.n$t),this.OXt=0),++s}r$t(t){t=Math.floor(t);for(const s of this.yXt.values()){if(0===t)return s;--t}return null}h$t(t,s){return 0<=t&&0<=s&&t<this.uf.c5t()&&s<this.uf.f5t()}TTt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.yXt.values()].map(t=>({name:"$"+t.hV(),value:t.xv()+", "+t.Cv()}))}]}}}{const Fu=self.Bs;Fu.S$.Touch.y$={HXt(){return!0},qXt(){return!0},o$t(){return 0<this.yXt.size},UXt(t,s){return!!t&&s===this.T9t&&!!this.h$t(this.kXt,this.FXt)&&this.uf.Nk().b3t(t,[[this.kXt,this.FXt]],!1)},a$t(t){if(!t)return!1;const s=this.uf.Xdt(),e=s.ybt(),i=[...this.yXt.values()].filter(t=>this.h$t(t.xv(),t.Cv())).map(t=>[t.xv(),t.Cv()]);return Fu.xor(this.uf.Nk().b3t(t,i,e),e)},l$t(t,s,e){const i=this.r$t(t);return!!i&&Fu.compare(i.XW(),s,e)},u$t(){return!0},c$t(){return!0},f$t(t,s,e){this.uf.ANt();let i;return i=0===t?this.vXt:1===t?this.xXt:this.MXt,Fu.compare(i,s,e)},d$t(t,s,e){this.uf.kNt();let i;return i=0===t?this.GXt:1===t?this._Xt:2===t?this.PXt:3===t?this.TXt:4===t?this.CXt:this.IXt,Fu.compare(i,s,e)},jXt(t){return(t=Math.floor(t))===this.EXt},JXt(t){return(t=Math.floor(t))===this.EXt},p$t(t){return t=Math.floor(t),this.yXt.size>=t+1},i$t(){return!0},$Xt(){return!0},ZXt(){return!0},n$t(t){return!!t&&!!this.h$t(this.kXt,this.FXt)&&this.uf.Nk().b3t(t,[[this.kXt,this.FXt]],!1)},YXt(t){return!!t&&!!this.h$t(this.kXt,this.FXt)&&this.uf.Nk().b3t(t,[[this.kXt,this.FXt]],!1)},KXt(t){return!!t&&!!this.h$t(this.kXt,this.FXt)&&this.uf.Nk().b3t(t,[[this.kXt,this.FXt]],!1)},QXt(t){return this.AXt===t},t$t(t){return this.AXt===t}}}{const Ou=self.Bs;Ou.S$.Touch.hrt={m$t(t){this.gXt(t)}}}{const Du=self.Bs;Du.S$.Touch.ort={g$t(){return this.yXt.size},M2t(t){const s=this.r$t(this.OXt);return s?s.y$t(this.uf.PO(),t,!0):0},T2t(t){const s=this.r$t(this.OXt);return s?s.y$t(this.uf.PO(),t,!1):0},w$t(t,s){const e=this.r$t(t);return e?e.y$t(this.uf.PO(),s,!0):0},S$t(t,s){const e=this.r$t(t);return e?e.y$t(this.uf.PO(),s,!1):0},b$t(t,s){const e=this.yXt.get(t);return e?e.y$t(this.uf.PO(),s,!0):0},v$t(t,s){const e=this.yXt.get(t);return e?e.y$t(this.uf.PO(),s,!1):0},aXt(){const t=this.r$t(0);return t?t.xv():0},lXt(){const t=this.r$t(0);return t?t.Cv():0},x$t(t){const s=this.r$t(t);return s?s.xv():0},M$t(t){const s=this.r$t(t);return s?s.Cv():0},T$t(t){const s=this.yXt.get(t);return s?s.xv():0},C$t(t){const s=this.yXt.get(t);return s?s.Cv():0},I$t(t){const s=this.r$t(t);return s?s.XW():0},G$t(t){const s=this.yXt.get(t);return s?s.XW():0},_$t(t){const s=this.r$t(t);return s?Du.Tr(s.aB()):0},P$t(t){const s=this.yXt.get(t);return s?Du.Tr(s.aB()):0},E$t(){return this.uf.ANt(),this.bXt},R$t(){return this.uf.ANt(),this.vXt},A$t(){return this.uf.ANt(),this.xXt},k$t(){return this.uf.ANt(),this.MXt},F$t(){return this.uf.kNt(),this.GXt},O$t(){return this.uf.kNt(),this._Xt},D$t(){return this.uf.kNt(),this.PXt},L$t(){return this.uf.kNt(),this.TXt},B$t(){return this.uf.kNt(),this.CXt},N$t(){return this.uf.kNt(),this.IXt},W$t(){return this.EXt},V$t(){return this.RXt},j$t(t){const s=this.yXt.get(t);return s?s.am():0},H$t(t){const s=this.yXt.get(t);return s?s.vm():0},U$t(t){const s=this.yXt.get(t);return s?s.z$t():0}}}{let h=self.Bs,s=-1e3,e=-1e3,i=-1e4;h.S$.Touch.VXt=class extends h.ur{constructor(){super(),this.J$t=0,this.wC=0,this.NLt=0,this.h3=0,this.q$t=0,this.X$t=0,this.$$t=0,this.el=0,this.il=0,this.Y$t=0,this.Z$t=0,this.qm=0,this.Xm=0,this.K$t=0,this.Q$t=!1,this.tYt=!1}pr(){}X_t(t,s,e,i,n){this.J$t=i,this.wC=n,this.h3=t,this.q$t=t,this.NLt=t,this.X$t=s,this.$$t=e,this.el=s,this.il=e,this.Y$t=s,this.Z$t=e}pU(t,s,e,i,n,r){this.q$t=this.h3,this.h3=t,this.Y$t=this.el,this.Z$t=this.il,this.el=s,this.il=e,this.qm=i,this.Xm=n,this.K$t=r,!this.tYt&&15<=h.Gr(this.X$t,this.$$t,this.el,this.il)&&(this.tYt=!0)}hV(){return this.J$t}zXt(){return this.wC}uA(){return this.h3}s$t(t){this.q$t=t}xv(){return this.el}Cv(){return this.il}XW(){const t=h.Gr(this.el,this.il,this.Y$t,this.Z$t),s=(this.h3-this.q$t)/1e3;return 0<s?t/s:0}aB(){return h.Pr(this.Y$t,this.Z$t,this.el,this.il)}am(){return this.qm}vm(){return this.Xm}z$t(){return this.K$t}e$t(t){return!this.Q$t&&500<=t-this.NLt&&!this.tYt&&h.Gr(this.X$t,this.$$t,this.el,this.il)<15&&(this.Q$t=!0)}XXt(t){return!this.Q$t&&t-this.NLt<=333&&!this.tYt&&h.Gr(this.X$t,this.$$t,this.el,this.il)<15?t-i<=666&&h.Gr(s,e,this.el,this.il)<25?(s=-1e3,e=-1e3,i=-1e4,"double-tap"):(s=this.el,e=this.il,i=t,"single-tap"):""}y$t(t,s,e){if(void 0===s){const i=t.FO(0);return i.x9(this.el,this.il)[e?0:1]}{const n=t.AO(s);return n?n.M5(this.el,this.il)[e?0:1]:0}}}}{const Lu=self.Bs;Lu.S$.sYt=class extends Lu.fMt{constructor(t){super(t)}pr(){super.pr()}}}{const Bu=self.Bs;Bu.S$.sYt.GGt=class extends Bu.YMt{constructor(t){super(t)}pr(){super.pr()}OMt(){}}}{const Nu=self.Bs;Nu.S$.sYt.Instance=class extends Nu.sTt{constructor(t,s){super(t,"platform-info"),this.eYt=0,this.iYt=0,this.nYt=0,this.rYt=0,this.hYt=[0,0,0,0],this.oYt=!1,this.aYt=!1,this.fTt([["window-resize",t=>this.CFt(t)],["wake-lock-acquired",t=>this.lYt(t)],["wake-lock-error",t=>this.uYt(t)],["wake-lock-released",t=>this.cYt(t)]]),navigator.connection&&navigator.connection.addEventListener("change",()=>this.fYt()),this.uf.UO(this.pTt("get-initial-state").then(t=>{this.eYt=t.screenWidth,this.iYt=t.screenHeight,this.nYt=t.windowOuterWidth,this.rYt=t.windowOuterHeight,this.hYt=t.safeAreaInset,this.oYt=t.supportsWakeLock}))}pr(){super.pr()}CFt(t){this.nYt=t.windowOuterWidth,this.rYt=t.windowOuterHeight,this.hYt=t.safeAreaInset}async fYt(){await this.IN(Nu.S$.sYt.y$.dYt)}async lYt(){this.aYt=!0,await this.IN(Nu.S$.sYt.y$.pYt)}async uYt(){this.aYt=!1,await this.IN(Nu.S$.sYt.y$.mYt)}async cYt(){this.aYt=!1,await this.IN(Nu.S$.sYt.y$.gYt)}}}{const Wu=self.Bs;Wu.S$.sYt.y$={yYt(){return Wu.ue.ve},wYt(){return"Windows"===Wu.ue.fe},SYt(){return"macOS"===Wu.ue.fe},bYt(){return"Linux"===Wu.ue.fe},vYt(){return"Chrome OS"===Wu.ue.fe},xYt(){return"Android"===Wu.ue.fe},MYt(){return"iOS"===Wu.ue.fe},TYt(){const t=this.uf.OD();return"html5"===t||"scirra-arcade"===t||"preview"===t||"instant-games"===t},CYt(){return this.uf.rDt()},IYt(){return this.uf.DD()},GYt(){return"windows-uwp"===this.uf.OD()},_Yt(){return this.uf.LD()},PYt(){return"macos-wkwebview"===this.uf.OD()},EYt(){return"linux-cef"===this.uf.OD()},dYt(){return!0},pYt(){return!0},mYt(){return!0},gYt(){return!0},RYt(){return this.aYt},AYt(){return this.oYt}}}{const Vu=self.Bs;Vu.S$.sYt.hrt={kYt(){this.oYt&&this.mTt("request-wake-lock")},FYt(){this.oYt&&(this.aYt=!1,this.dTt("release-wake-lock"))}}}{const ju=self.Bs;ju.S$.sYt.ort={OYt(){return this.uf.ND().BD()},DYt(){return this.uf.ND().VD()},LYt(){return this.uf.YD()},BYt(){return this.eYt},NYt(){return this.iYt},WYt(){return this.uf.ND().JV()},VYt(){return this.uf.ND().qV()},jYt(){return this.nYt},HYt(){return this.rYt},UYt(){return this.uf.ND().HD()},zYt(){return this.uf.ND().zD()},JYt(){return this.uf.ND().qD()},qYt(){return this.uf.ND().$D()},XYt(){return navigator.connection&&navigator.connection.downlink||0},$Yt(){return navigator.connection&&navigator.connection.downlinkMax||0},ConnectionType(){return navigator.connection&&navigator.connection.type||"unknown"},YYt(){return navigator.connection&&navigator.connection.effectiveType||"unknown"},ZYt(){return navigator.connection&&navigator.connection.rtt||0},KYt(){return navigator.hardwareConcurrency||0},QYt(){return navigator.deviceMemory||0},tZt(){return this.hYt[0]},sZt(){return this.hYt[1]},eZt(){return this.hYt[2]},iZt(){return this.hYt[3]},nZt(){return this.uf.jF()},rZt(){return this.uf.UF()}}}{const Hu=self.Bs;Hu.S$.hZt=class extends Hu.fMt{constructor(t){super(t)}pr(){super.pr()}}}{const Uu=self.Bs;Uu.S$.hZt.GGt=class extends Uu.YMt{constructor(t){super(t)}pr(){super.pr()}OMt(){}}}{const zu=self.Bs;zu.S$.hZt.Instance=class extends zu.sTt{constructor(t,s){super(t,"localstorage"),this.oZt="",this.rC="",this.aZt=[],this.lZt="",this.uZt=!1,this.cZt=0,this.fZt=0,this.dZt=!1,s&&(this.dZt=s[0]);const e=this.uf.KD();this.ZD=null,this.dZt?this.ZD=e.Be({Ne:!0}):this.ZD=e,this.pZt=new Map,this.mZt=!1,this.uf.UO(this.vv())}async vv(){const t=await Promise.race([this.pTt("init"),zu.Dh(3e3)]);t&&(this.uZt=t.isPersistent)}pr(){super.pr()}async gZt(t){this.lZt=this.yZt(t),await this.IN(zu.S$.hZt.y$.Vqt)}yZt(t){return t?"string"==typeof t?t:"string"==typeof t.message?t.message:"string"==typeof t.name?t.name:"string"==typeof t.data?t.data:"unknown error":"unknown error"}TTt(){return this.mZt||this.wZt(),[{title:"plugins.localstorage.name",properties:[...this.pZt.entries()].map(s=>({name:"$"+s[0],value:s[1],W8t:t=>this.ZD.setItem(s[0],t)}))}]}async wZt(){this.mZt=!0;try{const e=await this.ZD.keys(),i=(e.sort((t,s)=>{const e=t.toLowerCase(),i=s.toLowerCase();return e<i?-1:i<e?1:0}),await Promise.all(e.map(t=>this.ZD.getItem(t))));this.pZt.clear();for(let t=0,s=e.length;t<s;++t)this.pZt.set(e[t],i[t])}catch(t){console.warn("[C3 debugger] Error displaying local storage: ",t)}finally{this.mZt=!1}}}}{const Ju=self.Bs;Ju.S$.hZt.y$={SZt(t){return this.oZt===t},bZt(){return!0},vZt(t){return this.oZt===t},xZt(){return!0},MZt(t){return this.oZt===t},TZt(){return!0},CZt(){return!0},IZt(){return!0},Vqt(){return!0},GZt(t){return this.oZt===t},_Zt(t){return this.oZt===t},PZt(t,s){return Ju.compare(this.oZt,t,s)},EZt(t,s){return Ju.compare(this.rC,t,s)},RZt(){return 0<this.fZt},AZt(){return 0<this.cZt},kZt(){return!0},FZt(){return!0},OZt(){return this.uZt}}}{let e=function(t){return"string"==typeof t||"number"==typeof t};e;const qu=self.Bs;qu.S$.hZt.hrt={async DZt(t,s){this.fZt++;try{const e=await this.ZD.setItem(t,s);await this.uTt(async()=>{this.oZt=t,this.rC=e,await this.IN(qu.S$.hZt.y$.bZt),await this.IN(qu.S$.hZt.y$.SZt)})}catch(t){await this.gZt(t)}finally{this.fZt--,0===this.fZt&&await this.IN(qu.S$.hZt.y$.kZt)}},async LZt(t,s){if(s){const e=s.hxt(this.Ie);if(e){const i=e.IW();if(i){const n=i.GetArrayBufferReadOnly();this.fZt++;try{await this.ZD.setItem(t,n),await this.uTt(async()=>{this.oZt=t,this.rC="",await this.IN(qu.S$.hZt.y$.bZt),await this.IN(qu.S$.hZt.y$.SZt)})}catch(t){await this.gZt(t)}finally{this.fZt--,0===this.fZt&&await this.IN(qu.S$.hZt.y$.kZt)}}}}},async BZt(t){this.cZt++;try{const s=await this.ZD.getItem(t);await this.uTt(async()=>{this.oZt=t,this.rC=e(s)?s:"",await this.IN(qu.S$.hZt.y$.xZt),await this.IN(qu.S$.hZt.y$.vZt)})}catch(t){await this.gZt(t)}finally{this.cZt--,0===this.cZt&&await this.IN(qu.S$.hZt.y$.FZt)}},async NZt(s,t){if(t){const e=t.hxt(this.Ie);if(e){const i=e.IW();this.cZt++;try{let t=await this.ZD.getItem(s);t=t instanceof ArrayBuffer?t:new ArrayBuffer(0),await this.uTt(async()=>{this.rC="",this.oZt=s,i.SetArrayBufferTransfer(t),await this.IN(qu.S$.hZt.y$.xZt),await this.IN(qu.S$.hZt.y$.vZt)})}catch(t){await this.gZt(t)}finally{this.cZt--,0===this.cZt&&await this.IN(qu.S$.hZt.y$.FZt)}}}},async WZt(t){try{const s=await this.ZD.getItem(t);await this.uTt(async()=>{this.oZt=t,null==s?(this.rC="",await this.IN(qu.S$.hZt.y$._Zt)):(this.rC=e(s)?s:"",await this.IN(qu.S$.hZt.y$.GZt))})}catch(t){await this.gZt(t)}},async nf(t){try{await this.ZD.removeItem(t),await this.uTt(async()=>{this.oZt=t,this.rC="",await this.IN(qu.S$.hZt.y$.TZt),await this.IN(qu.S$.hZt.y$.MZt)})}catch(t){await this.gZt(t)}},async VZt(){try{await this.ZD.clear(),await this.uTt(async()=>{this.oZt="",this.rC="",qu.jh(this.aZt),await this.IN(qu.S$.hZt.y$.CZt)})}catch(t){await this.gZt(t)}},async jZt(){try{const t=await this.ZD.keys();await this.uTt(async()=>{this.aZt=t,await this.IN(qu.S$.hZt.y$.IZt)})}catch(t){await this.gZt(t)}},async HZt(){const t=await this.pTt("request-persistent");t.isOk&&(this.uZt=t.isPersistent)},UZt(s){if(this.dZt){let t;try{t=JSON.parse(s)}catch(t){return void console.error("[Local Storage] Failed to parse memory storage JSON: ",t)}t&&t["is-c3-storage"]&&Array.isArray(t.items)||console.error("[Local Storage] Failed to load memory storage JSON: invalid data"),this.ZD.Le(new Map(t.items))}}}}{const Xu=self.Bs;Xu.S$.hZt.ort={zZt(){return this.rC},Key(){return this.oZt},JZt(){return this.aZt.length},qZt(t){return(t=Math.floor(t))<0||t>=this.aZt.length?"":this.aZt[t]},XZt(){return this.lZt},$Zt(){return this.dZt?JSON.stringify({"is-c3-storage":!0,items:[...this.ZD.De()]}):""}}}{const $u=self.Bs;$u.Zat.YZt=class extends $u.fCt{constructor(t){super(t)}pr(){super.pr()}}}{const Yu=self.Bs;Yu.Zat.YZt.GGt=class extends Yu.yCt{constructor(t){super(t)}pr(){super.pr()}OMt(){}}}{const Zu=self.Bs,Ku=self.Xs,Qu=self.RW,tc=(Zu.Zat.YZt.Instance=class extends Zu.SCt{constructor(t,s){super(t),this.pIt=0,this.ZZt=0,this.Xyt=!0,s&&(this.pIt=Zu.Mr(s[0]),this.ZZt=Zu.Mr(s[1]),this.Xyt=s[2]),this.Xyt&&this.bTt()}pr(){super.pr()}KZt(t){this.pIt=t}QZt(){return this.pIt}tKt(t){this.ZZt=t}sKt(){return this.ZZt}Ov(){return{s:this.pIt,a:this.ZZt,e:this.Xyt}}Dv(t){this.pIt=t.s,this.ZZt=t.a,this.Uxt(t.e)}jZ(){if(this.Xyt){const t=this.uf.AF(this.Ie);if(0!==t&&(0!==this.ZZt&&(this.pIt+=this.ZZt*t),0!==this.pIt)){const s=this.Ie.RO();s.oB(s.aB()+this.pIt*t),s.t4()}}}Wrt(t){switch(t){case 0:return Zu.Tr(this.QZt());case 1:return Zu.Tr(this.sKt());case 2:return this.Jxt()}}Jrt(t,s){switch(t){case 0:this.KZt(Zu.Mr(s));break;case 1:this.tKt(Zu.Mr(s));break;case 2:this.Uxt(s)}}Uxt(t){this.Xyt=!!t,this.Xyt?this.bTt():this.nTt()}Jxt(){return this.Xyt}TTt(){const t="behaviors.rotate";return[{title:"$"+this.DW().Qc(),properties:[{name:t+".properties.speed.name",value:Zu.Tr(this.QZt()),W8t:t=>this.KZt(Zu.Mr(t))},{name:t+".properties.acceleration.name",value:Zu.Tr(this.sKt()),W8t:t=>this.tKt(Zu.Mr(t))},{name:t+".properties.enabled.name",value:this.Jxt(),W8t:t=>this.Uxt(t)}]}]}DMt(){return self.eKt}},new WeakMap);self.eKt=class extends Qu{constructor(){super(),tc.set(this,Qu.N5().IW())}set speed(t){Ku.bi(t),tc.get(this).KZt(t)}get speed(){return tc.get(this).QZt()}set acceleration(t){Ku.bi(t),tc.get(this).tKt(t)}get acceleration(){return tc.get(this).sKt()}get isEnabled(){return tc.get(this).Jxt()}set isEnabled(t){tc.get(this).Uxt(t)}}}{const sc=self.Bs;sc.Zat.YZt.y$={Qu(){return this.Jxt()}}}{const ec=self.Bs;ec.Zat.YZt.hrt={iKt(t){this.KZt(ec.Mr(t))},nKt(t){this.tKt(ec.Mr(t))},H2t(t){this.Uxt(t)}}}{const ic=self.Bs;ic.Zat.YZt.ort={rKt(){return ic.Tr(this.QZt())},hKt(){return ic.Tr(this.sKt())}}}{const nc=self.Bs;nc.Zat.Yat=class extends nc.fCt{constructor(t){super(t)}pr(){super.pr()}}}{const rc=self.Bs;rc.Zat.Yat.GGt=class extends rc.yCt{constructor(t){super(t)}pr(){super.pr()}OMt(){}}}{const hc=self.Bs,oc=hc.Zat.Yat;oc.Instance=class extends hc.SCt{constructor(t,s){super(t),this.oKt=!1,this.Nu=!0,s&&(this.oKt=!1,this.Nu=!!s[0]),this.aKt=new Map,this.lKt=[],this.uKt=new Map,this.cKt=null,this.fKt=null,this.dKt=null,this.pKt=null,this.mKt="",this.gKt=[],this.zY=t=>this.JY(),this.ZO().Hf().addEventListener("afterload",this.zY)}pr(){this.ZO().Hf().removeEventListener("afterload",this.zY),this.zY=null,this.cKt&&(this.yKt(this.cKt),this.cKt=null),this.wKt(),this.SKt=null,this.bKt(),this.lKt=null,this.vKt(),this.uKt=null,this.gKt=null,super.pr()}elt(t){this.gKt.push(t)}ilt(){this.gKt.pop()}xKt(){return this.gKt[this.gKt.length-1]}H2t(t){this.Nu=!!t,t?this.uKt&&this.uKt.size&&this.xTt():this.rTt();for(const s of this.MKt())t?this.TKt(s)&&s.k6():((s.IsPlaying()||s.Ntt())&&this.CKt(s),s.A6());t&&this.bKt()}Qu(){return this.Nu}CKt(t){this.lKt.push(t)}TKt(t){return this.lKt.includes(t)}bKt(){hc.jh(this.lKt)}IKt(){return this.cKt}tet(){const t=this.BW();return!!t&&!t.hj()}GKt(t,s,e=!1){const i=s?this._Kt(s,e):this.MKt(e);if(i&&i.length)for(const n of i)if(n.F6(t))return n}PKt(t,s){for(const e of this.aKt.values())for(const i of e)if(!i.E6()&&i.F6(t)&&s(i))return!0;for(const n of this.uKt.values())for(const r of n)if(!r.E6()&&r.F6(t)&&s(r))return!0;return!1}EKt(t){for(const s of this.aKt.values())for(const e of s)if(!e.E6()&&t(e))return!0;for(const i of this.uKt.values())for(const n of i)if(!n.E6()&&t(n))return!0;return!1}RKt(t,s){return this.GKt(t,s,!0)}*AKt(t,s,e=!1){const i=s?this._Kt(s,e):this.MKt(e);if(i&&i.length)for(const n of i)n.F6(t)&&(yield n)}*kKt(t,s){yield*this.AKt(t,s,!0)}_Kt(e,t){if(t){let t=this.aKt.get(e),s=this.uKt.get(e);return(t=t||[]).concat(s||[]).filter(t=>t).filter(t=>!t.E6())}{let t=this.aKt.get(e);return(t=t||[]).filter(t=>t).filter(t=>!t.E6())}}MKt(t){if(t){const s=[...this.aKt.values()].flat(),e=[...this.uKt.values()].flat();return s.concat(e).filter(t=>t).filter(t=>!t.E6())}{const i=[...this.aKt.values()].flat();return i.filter(t=>t).filter(t=>!t.E6())}}FKt(){return this.MKt(!0)}Ov(t=0){return{s:!1,e:!!this.Nu,at:this.OKt(),dt:this.DKt(),wt:this.LKt(),ft:this.BKt()}}Dv(t,s="full"){t&&(this.fKt=t.at,this.dKt=t.dt,this.pKt=t.wt,this.mKt=t.ft,this.oKt=!1,this.Nu=!!t.e,"state"===s)&&this.JY()}JY(){const t=this.ZO().mtt();if(this.NKt(this.fKt,this.aKt,t),this.dKt){hc.jh(this.lKt);for(const s of this.dKt)this.WKt(this.lKt,s,t)}this.NKt(this.pKt,this.uKt,t),this.cKt=this.VKt(this.mKt,t),this.Nu?this.uKt&&this.uKt.size&&this.xTt():this.rTt()}NKt(s,e,i){if(s)for(const n in s){let t=e.get(n);t?hc.jh(t):t=[];const r=s[n];for(const h of r){const o=this.WKt(t,h.name,i);if(o)this.jKt(h.name,h,i);else{const a=hc.Oht.hlt({runtime:this.ZO(),json:h});hc.Oht.vet(a,this.BW().Z5()),a.Lat(t=>this.HKt(t)),i.MZ(a),this.WKt(t,a,i)}}e.set(n,t)}}VKt(t,s){return s.bZ(t)}WKt(t,s,e){if("string"!=typeof s)return!!t.push(s);{const i=this.VKt(s,e);if(i)return!!t.push(i)}return!1}jKt(t,s,e){if("string"==typeof t){const i=this.VKt(t,e);i&&(i._9(s),hc.Oht.vet(i,this.BW().Z5()))}else t._9(s),hc.Oht.vet(t,this.BW().Z5())}OKt(){const t={};for(const[s,e]of this.aKt)t[s]=e.filter(t=>!t.E6()).map(t=>t.G9());return t}DKt(){return this.lKt.filter(t=>!t.E6()).map(t=>t.Qc())}LKt(){const t={};for(const[s,e]of this.uKt)t[s]=e.map(t=>t.G9());return t}BKt(){return this.cKt?this.cKt.Qc():""}STt(){this.vKt()}UKt(t){const s=oc.JKt.zKt(t.property,t.flt,t.dlt,t.ease,t.resultMode,this.BW()),e=oc.XKt.qKt(t.property),i=(oc.XKt.$Kt(e)||this.YKt(t.property),hc.Oht.hlt({runtime:this.ZO(),id:e,tags:t.tags,time:t.time,LW:this.BW(),llt:!!t.llt,loop:!!t.loop,pingPong:!!t.pingPong,repeatCount:t.repeatCount,initialValueMode:t.initialValueMode,olt:s}));return i.Lat(t=>this.HKt(t)),this.ZKt(i,t.property),i}KKt(t){const s=t.hV();if(this.aKt.has(s)){const e=this.aKt.get(s);if(e){const i=e.indexOf(t);-1!==i&&e.splice(i,1)}}}Q6(t,s=!1){this.KKt(t),t.E6()||this.QKt(t)||(t.A6(s),this.tQt(t))}YKt(t,s=!1){if(hc.di(t)){const e=oc.XKt.qKt(t);if(this.aKt.has(e)){const i=this.aKt.get(e),n=this.IKt();for(const r of i)r===n||r.E6()||this.QKt(r)||(r.A6(s),r.pr());hc.jh(i)}}else{const h=this.IKt();for(const o of this.MKt())o===h||o.E6()||this.QKt(o)||(o.A6(s),o.pr());for(const a of this.aKt.keys())hc.jh(this.aKt.get(a)),this.aKt.delete(a);this.aKt.clear()}}yKt(t){this.Q6(t,!0)}wKt(){this.YKt(NaN,!0)}Wrt(t){if(0===t)return this.Nu}Jrt(t,s){0===t&&(this.Nu=!!s)}sQt(t){const s=t.eV(),e=s.Lnt();for(const i of e){const n=i.DW();if(n.$Gt()===this.constructor)return n}}TN(t,s,e,i){return this.uf?super.TN(t):s.TN(t,e,i)}HKt(t){this.cKt=t,oc.y$.eQt(t);let s,e;if(this.ZO())s=this.Ie,e=this.uf,this.TN(oc.y$.iQt),this.TN(oc.y$.nQt),this.Q6(t);else{if(!(s=t.eV()))return;if(s&&s.hj())return;e=s.ZO();const i=this.sQt(t);this.TN(oc.y$.iQt,e,s,i),this.TN(oc.y$.nQt,e,s,i),t.A6()}this.cKt=null,oc.y$.eQt(null),t.nV()&&e.H5(s)}ZKt(t,s){const e=oc.XKt.qKt(s),i=(this.aKt.has(e)||this.aKt.set(e,[]),this.aKt.get(e));i.push(t)}tQt(t){const s=t.hV();this.uKt.has(s)||this.uKt.set(s,[]),this.uKt.get(s).push(t),this.MTt()||this.xTt()}QKt(t){const s=t.hV();return!!this.uKt.has(s)&&this.uKt.get(s).includes(t)}vKt(){if(this.uKt.size){for(const t of this.uKt.values()){for(const s of t)s.E6()||s.pr();hc.jh(t)}this.uKt.clear(),this.MTt()&&this.rTt()}}TTt(){return[{title:"$"+this.DW().Qc(),properties:[{name:"behaviors.tween.properties.enabled.name",value:this.Qu(),W8t:t=>this.H2t(t)}]}]}DMt(){return self.rQt}}}{let e=self.Bs,s=null;e.Zat.Yat.y$={$at(){return!0},Kat(t){const s=this.xKt();return!!s&&s.F6(t)},Qat(t){const s=this.xKt();return!!s&&(s.Ptt()===t||2===t)},tlt(t,s){const e=this.xKt();return!!e&&(e.Ptt()===s||2===s)&&e.F6(t)},eQt(t){s=t},iQt(t){return s.F6(t)},nQt(){return!0},IsPlaying(t){return this.PKt(t,e.Oht.IsPlaying)},hQt(){return this.EKt(e.Oht.IsPlaying)},q6(t){return this.PKt(t,e.Oht.q6)},oQt(){return this.EKt(e.Oht.q6)},s6(t,s){return 0===s?this.PKt(t,e.Oht.nlt):1===s&&this.PKt(t,e.Oht.rlt)},aQt(t){return 0===t?this.EKt(e.Oht.nlt):1===t&&this.EKt(e.Oht.rlt)}}}{const ac=self.Bs,lc=self.yc,uc=ac.Zat.Yat;uc.hrt={H2t(t){this.H2t(!!t)},async lQt(...t){if(this.Qu()&&this.tet()){const s=this.UKt(uc.cQt.uQt(this,...t));s.Play()&&await s.z6()}},async fQt(...t){if(this.Qu()&&this.tet()){const s=this.UKt(uc.cQt.dQt(this,...t));s.Play()&&await s.z6()}},async pQt(...t){if(this.Qu()&&this.tet()){const s=this.UKt(uc.cQt.mQt(this,...t));s.Play()&&await s.z6()}},gQt(t){if(this.Qu()&&this.tet())for(const s of this.AKt(t))s.A6()},yQt(){if(this.Qu()&&this.tet())for(const t of this.MKt())t.A6()},wQt(t){if(this.Qu()&&this.tet())for(const s of this.AKt(t))s.k6()},SQt(){if(this.Qu()&&this.tet())for(const t of this.MKt())t.k6()},bQt(t){if(this.Qu()&&this.tet())for(const s of this.AKt(t))this.Q6(s)},vQt(){if(this.Qu()&&this.tet())for(const t of this.MKt())this.Q6(t)},xQt(t,s,e){if(this.Qu()&&this.tet()){const i=ac.Zat.Yat.XKt.MQt(s);for(const n of this.AKt(t))n.jat([i]),n.Hat(e,i)}},TQt(t,s,e,i){if(this.Qu()&&this.tet()){const n=ac.Zat.Yat.XKt.CQt(s);for(const r of this.AKt(t))r.jat(n),r.Hat(e,n[0]),r.Hat(i,n[1])}},IQt(t,s){if(this.Qu()&&this.tet())for(const e of this.AKt(t,"value"))e.Wat(s,"value")},GQt(t,s){if(this.Qu()&&this.tet())for(const e of this.AKt(t,"value"))e.jat(["value"]),e.Hat(s,"value")},_Qt(t,s){if(this.Qu()&&this.tet()){const e=lc.Oc(s);for(const i of this.AKt(t))i.sV(e)}},PQt(t){if(this.Qu()&&this.tet()){const s=lc.Oc(t);for(const e of this.MKt())e.sV(s)}},EQt(t,s){if(this.Qu()&&this.tet())for(const e of this.AKt(t))e.O6(s)},RQt(t){if(this.Qu()&&this.tet())for(const s of this.MKt())s.O6(t)},AQt(t,s){if(this.Qu()&&this.tet())for(const e of this.AKt(t))e.j6(s)},kQt(t){if(this.Qu()&&this.tet())for(const s of this.MKt())s.j6(t)},FQt(t,s){if(this.Qu()&&this.tet())for(const e of this.AKt(t))e.rV(!!s)},OQt(t){if(this.Qu()&&this.tet())for(const s of this.MKt())s.rV(!!t)}}}{const cc=self.Bs;cc.Zat.Yat.ort={DQt(t){const s=this.RKt(t);return s?s.uA():0},tzt(t){const s=this.RKt(t);return s?s.uA()/s.L6():0},drt(t){const s=this.RKt(t);return s?s.H6():0},LQt(t){const s=this.RKt(t,"value");return s?s.aV("value").oV():0},Zxt(){let t=this.IKt();return(t=t||this.xKt())?t.ktt():""}}}{const fc=self.Bs,dc=self.yc,pc=["position","size","scale"],mc=["offsetX","offsetY","offsetWidth","offsetHeight","offsetAngle","offsetOpacity","offsetColor","offsetZElevation","offsetScaleX","offsetScaleY"],gc=["value"],yc=[].concat(pc).concat(mc).concat(gc),wc={position:["offsetX","offsetY"],size:["offsetWidth","offsetHeight"],scale:["offsetScaleX","offsetScaleY"]},Sc=Object.assign({},yc.reduce((t,s)=>Object.assign({},t,{[s]:[s]}),{}),wc);fc.Zat.Yat.XKt=class{constructor(){}static BQt(){return[...dc.Cc()]}static Oc(t){return[...dc.Cc()][t]}static qKt(t){return yc[t]}static NQt(t){return yc.indexOf(t)}static WQt(t){return pc[t]}static MQt(t){return mc[t]}static VQt(t){return gc[t]}static jQt(t){return wc[t]}static CQt(t){return fc.Mi(t)?Sc[t]:Sc[yc[t]]}static HQt(t){return!!wc[t]}static UQt(t){return"offsetColor"===t}static zQt(t){return"offsetAngle"===t}static JQt(t){return"offsetOpacity"===t}static $Kt(t){return"value"===t}}}{const bc=self.Bs,vc=bc.Zat.Yat,xc=new Map;vc.JKt=class{constructor(){}static zKt(t,s,e,i,n,r){0===xc.size&&this.qQt();let h=vc.$Qt.XQt(t),o=xc.get(h);return bc.di(t)&&(t=vc.XKt.qKt(t)),this.YQt(o,t,s,e,i,n,r)}static ZQt(t,s){const e=bc.Zat.Yat.zKt(t);return e.KQt(s)}static qQt(){const t=vc.$Qt,s=vc.QQt;this.tts(t.sts,this.ets,s.its),this.tts(t.COLOR,this.nts,s.rts),this.tts(t.hts,this.ots,s.ats),this.tts(t.lts,this.uts,s.its),this.tts(t.cts,this.fts,s.its)}static tts(t,s,e){xc.set(t,this.dts(t,s,e))}static dts(t,s,e){return{name:t,pts:s,KQt:e}}static YQt(t,s,e,i,n,r,h){return t.pts(s,t.KQt(e),t.KQt(i),n,r,h)}static ets(t,e,i,n,r,s){const h=vc.XKt.jQt(t);return h.map((t,s)=>({ult:"world-instance",property:t,type:"float",valueType:"numeric",flt:e[s],dlt:i[s],ease:vc.XKt.Oc(n),resultMode:r}))}static nts(t,s,e,i,n,r){return bc.S$.Text&&r.RL()instanceof bc.S$.Text?{ult:"plugin",clt:[7],property:"color",type:"color",valueType:"color",flt:s,dlt:e,ease:vc.XKt.Oc(i),resultMode:n}:{ult:"world-instance",property:t,type:"color",valueType:"color",flt:s,dlt:e,ease:vc.XKt.Oc(i),resultMode:n}}static ots(t,s,e,i,n,r){return{ult:"world-instance",property:t,type:"angle",valueType:"angle",flt:s,dlt:e,ease:vc.XKt.Oc(i),resultMode:n}}static fts(t,s,e,i,n,r){return{ult:"world-instance",property:t,type:"float",valueType:"numeric",flt:s,dlt:e,ease:vc.XKt.Oc(i),resultMode:n}}static uts(t,s,e,i,n,r){return{ult:"value",property:t,type:"float",valueType:"numeric",flt:s,dlt:e,ease:vc.XKt.Oc(i),resultMode:n}}}}{const Mc=self.Bs,Tc=Mc.Zat.Yat,Cc={resultMode:"absolute"},Ic=Object.assign({},Cc,{tags:"",property:"",time:0,ease:0,llt:0,loop:!1,pingPong:!1,repeatCount:1}),Gc=Object.assign({},Ic,{initialValueMode:"current-state",flt:0,dlt:0}),_c=Object.assign({},Ic,{initialValueMode:"current-state",flt:[0,0],dlt:[0,0]}),Pc=Object.assign({},Ic,{initialValueMode:"current-state",flt:[0,0,0],dlt:[0,0,0]}),Ec=Object.assign({},Gc,{initialValueMode:"start-value"});Tc.cQt=class{constructor(){}static gts(t,s,e,i,n,r,h,o){t.tags=s,t.time=e,t.ease=i,t.llt=n,t.loop=r,t.pingPong=h,t.repeatCount=o}static uQt(t,s,e,i,n,r,h,o,a,l){const u="string"==typeof e?e:Tc.XKt.MQt(e),c=Tc.XKt.UQt(u)?Pc:Gc;return this.gts(c,s,n,r,h,o,a,l),Tc.XKt.UQt(u)?(Pc.dlt[0]=Mc.Zr(i),Pc.dlt[1]=Mc.Kr(i),Pc.dlt[2]=Mc.Qr(i),Pc.property=Tc.XKt.NQt(u)):Tc.XKt.JQt(u)?Gc.dlt=i/100:Gc.dlt=i,c.property=Tc.XKt.NQt(u),c}static dQt(t,s,e,i,n,r,h,o,a,l,u){this.gts(_c,s,r,h,o,a,l,u);const c="string"==typeof e?e:Tc.XKt.WQt(e);return _c.dlt[0]=i,_c.dlt[1]=n,_c.property=Tc.XKt.NQt(c),_c}static mQt(t,s,e,i,n,r,h,o,a,l){return this.gts(Ec,s,n,r,h,o,a,l),Ec.flt=e,Ec.dlt=i,Ec.property=Tc.XKt.NQt("value"),Ec}}}{const Rc=self.Bs,Ac=Rc.Zat.Yat,kc=[];Ac.$Qt=class{constructor(){}static XQt(t){if(0===kc.length){const s=kc;s.push({fP:Ac.XKt.HQt,result:this.sts}),s.push({fP:Ac.XKt.UQt,result:this.COLOR}),s.push({fP:Ac.XKt.zQt,result:this.hts}),s.push({fP:Ac.XKt.$Kt,result:this.lts}),s.push({fP:()=>!0,result:this.cts})}Rc.di(t)&&(t=Rc.Zat.Yat.XKt.qKt(t));for(const e of kc)if(e.fP(t))return e.result}static get sts(){return"pair"}static get COLOR(){return"color"}static get hts(){return"angle"}static get lts(){return"value"}static get cts(){return"other"}}}{const Fc=self.Bs,Oc=Fc.Zat.Yat;Oc.QQt=class{constructor(){}static ats(t){const s=Fc.Mr(parseFloat(t));return Fc.vr(s)}static rts(t){return t.slice(0)}static its(t){return t}}}{let l=function(t){Lc.Ti(t);let s=Nc.vc(t),e;if(-1===(e=s?Nc.Dc(s,null):Nc.Dc(t,null)))throw new Error(`invalid ease name '${t}'`);return e},u=function(t,s=!1){if(!(s&&null==t||"string"==typeof t||Array.isArray(t)))throw new Error("invalid tags")};l,u;const Dc=self.Bs,Lc=self.Xs,Bc=self.RW,Nc=self.yc,Wc=Dc.Zat.Yat,Vc=new WeakMap,jc=new Map([["x",{name:"offsetX",type:"one"}],["y",{name:"offsetY",type:"one"}],["width",{name:"offsetWidth",type:"one"}],["height",{name:"offsetHeight",type:"one"}],["angle",{name:"offsetAngle",type:"one"}],["opacity",{name:"offsetOpacity",type:"one"}],["color",{name:"offsetColor",type:"color"}],["z-elevation",{name:"offsetZElevation",type:"one"}],["x-scale",{name:"offsetScaleX",type:"one"}],["y-scale",{name:"offsetScaleY",type:"one"}],["position",{name:"position",type:"two"}],["size",{name:"size",type:"two"}],["scale",{name:"scale",type:"two"}],["value",{name:"value",type:"value"}]]),Hc={tags:"",yts:!1,loop:!1,pingPong:!1,repeatCount:1,flt:0},Uc={K6:l};self.rQt=class extends Bc{constructor(){super(),Vc.set(this,Bc.N5().IW())}wts(t,s,e,i,n){const r=Vc.get(this);if(!r.Qu()||!r.tet())return null;const h=jc.get(t);if(!h)throw new Error("invalid tween property");"one"===h.type||"value"===h.type?Lc.mi(s):(Lc.Ni(s),"two"===h.type?(Lc.mi(s[0]),Lc.mi(s[1])):"color"===h.type&&(Lc.mi(s[0]),Lc.mi(s[1]),Lc.mi(s[2]))),"angle"===t?s=Dc.Tr(s):"opacity"===t?s*=100:"color"===t&&(s=Dc.Yr(s[0],s[1],s[2]));const o=l(i);Lc.bi(e),n=Object.assign({},Hc,n),"value"===h.type&&Lc.mi(n.flt),u(n.tags,!0);let a;if("one"===h.type||"color"===h.type?a=r.UKt(Wc.cQt.uQt(r,n.tags,h.name,s,e,o,!!n.yts,!!n.loop,!!n.pingPong,n.repeatCount)):"two"===h.type?a=r.UKt(Wc.cQt.dQt(r,n.tags,h.name,s[0],s[1],e,o,!!n.yts,!!n.loop,!!n.pingPong,n.repeatCount)):"value"===h.type&&(a=r.UKt(Wc.cQt.mQt(r,n.tags,n.flt,s,e,o,!!n.yts,!!n.loop,!!n.pingPong,n.repeatCount))),a.Play())return a.plt(r,Uc);throw new Error("failed to start tween")}*Sts(){const t=Vc.get(this);for(const s of t.MKt())yield s.plt(t,Uc)}*bts(t){u(t);const s=Vc.get(this);for(const e of s.AKt(t))yield e.plt(s,Uc)}get isEnabled(){return Vc.get(this).Qu()}set isEnabled(t){Vc.get(this).H2t(t)}}}{const zc=self.Bs;zc.Zat.vts=class extends zc.fCt{constructor(t){super(t)}pr(){super.pr()}}}{const Jc=self.Bs;Jc.Zat.vts.GGt=class extends Jc.yCt{constructor(t){super(t)}pr(){super.pr()}OMt(){}}}{const qc=self.Bs,Xc=self.Xs,$c=self.RW,Yc=(qc.Zat.vts.Instance=class extends qc.SCt{constructor(t,s){super(t);const e=this.RO(),i=(this.pIt=0,this.xts=0,this.$o=0,this.Mts=!1,this.Tts=!1,this.Cts=!1,this.Xyt=!0,this.Its=0,this.Gts=0,this.Y$t=e.xv(),this.Z$t=e.Cv(),this._ts=e.aB(),this.Pts=0,this.Ets=Math.min(Math.abs(e.am()),Math.abs(e.vm())/2),this.Rts=!1,s&&(this.pIt=s[0],this.xts=s[1],this.$o=s[2],this.Mts=!!s[3],this.Tts=!!s[4],this.Cts=!!s[5],this.Xyt=!!s[6]),e.aB());this.Its=Math.cos(i)*this.pIt,this.Gts=Math.sin(i)*this.pIt,this.Xyt&&(this.bTt(),this.Mts)&&this.CCt()}pr(){super.pr()}Ov(){const t={dx:this.Its,dy:this.Gts,lx:this.Y$t,ly:this.Z$t,lka:this._ts,t:this.Pts};return 0!==this.xts&&(t.acc=this.xts),0!==this.$o&&(t.g=this.$o),this.Cts&&(t.st=this.Cts),this.Xyt||(t.e=this.Xyt),this.Mts&&(t.bos=this.Mts),this.Tts&&(t.sa=this.Tts),t}Dv(t){this.Its=t.dx,this.Gts=t.dy,this.Y$t=t.lx,this.Z$t=t.ly,this._ts=t.lka,this.Pts=t.t,this.xts=t.hasOwnProperty("acc")?t.acc:0,this.$o=t.hasOwnProperty("g")?t.g:0,this.Cts=!!t.hasOwnProperty("st")&&t.st,this.Mts=!!t.hasOwnProperty("bos")&&t.bos,this.Tts=!!t.hasOwnProperty("sa")&&t.sa,this.Uxt(!t.hasOwnProperty("e")||t.e)}jZ(){if(this.Xyt){const n=this.uf.AF(this.Ie),r=this.Ie.RO();if(r.aB()!==this._ts){const t=r.aB();if(this.Tts){const s=qc.Gr(0,0,this.Its,this.Gts);this.Its=Math.cos(t)*s,this.Gts=Math.sin(t)*s}this._ts=t}let e=0,i=0;if(0!==this.xts){let t=qc.Gr(0,0,this.Its,this.Gts),s;s=0===this.Its&&0===this.Gts?r.aB():qc.Pr(0,0,this.Its,this.Gts),t+=this.xts*n,e=Math.cos(s)*this.xts,i=Math.sin(s)*this.xts,t<0&&(t=0,e=0,i=0),this.Its=Math.cos(s)*t,this.Gts=Math.sin(s)*t}if(0!==this.$o&&(this.Gts+=this.$o*n,i+=this.$o),this.Y$t=r.xv(),this.Z$t=r.Cv(),0!==this.Its||0!==this.Gts){const h=this.Its*n+.5*e*n*n,o=this.Gts*n+.5*i*n*n,a=qc.Gr(0,0,h,o);if(this.Ats(h,o,a),this.Pts+=a,this.Tts&&(0!=h||0!=o)){const l=qc.Pr(0,0,h,o);r.oB(l),this._ts=r.aB()}r.t4()}}}Ats(t,s,e){const i=this.RO();if(!this.Cts||e<=this.Ets)i.n4(t,s),i.t4(),this.Cts&&this.TN(qc.Zat.vts.y$.kts);else{this.Rts=!1;const n=i.xv(),r=i.Cv(),h=n+t,o=r+s,a=qc.Pr(0,0,t,s),l=Math.cos(a)*this.Ets,u=Math.sin(a)*this.Ets,c=Math.floor(e/this.Ets);for(let t=1;t<=c;++t)if(i.s4(n+l*t,r+u*t),i.t4(),this.TN(qc.Zat.vts.y$.kts),this.Ie.hj()||this.Rts)return;i.s4(h,o),i.t4(),this.TN(qc.Zat.vts.y$.kts)}}TCt(){if(this.Xyt&&this.Mts&&(0!==this.Its||0!==this.Gts)){const t=this.uf.AF(this.Ie),s=this.Ie.RO(),e=this.uf.Nk(),i=e.vD(this.Ie);if(i){e.p3t(this.Ie,i);const n=qc.Gr(0,0,this.Its,this.Gts),r=e.A3t(this.Ie,this.Y$t,this.Z$t);this.Its=Math.cos(r)*n,this.Gts=Math.sin(r)*n,s.n4(this.Its*t,this.Gts*t),s.t4(),this.Tts&&(s.oB(r),this._ts=s.aB(),s.t4()),e._3t(this.Ie,this.Its/n,this.Gts/n,Math.max(2.5*n*t,30))||e.R3t(this.Ie,100)}}}Wrt(t){switch(t){case 0:return this.QZt();case 1:return this.sKt();case 2:return this.Fts();case 4:return this.Tts;case 5:return this.Cts;case 6:return this.Jxt()}}Jrt(t,s){switch(t){case 0:this.KZt(s);break;case 1:this.xts=s;break;case 2:this.$o=s;break;case 4:this.Tts=!!s;break;case 5:this.Cts=!!s;break;case 6:this.Uxt(!!s)}}KZt(t){const s=qc.Pr(0,0,this.Its,this.Gts);this.Its=Math.cos(s)*t,this.Gts=Math.sin(s)*t}QZt(){return qc.Jr(qc.Gr(0,0,this.Its,this.Gts),6)}tKt(t){this.xts=t}sKt(){return this.xts}Ots(t){this.$o=t}Fts(){return this.$o}Dts(t){const s=qc.Gr(0,0,this.Its,this.Gts);this.Its=Math.cos(t)*s,this.Gts=Math.sin(t)*s}Lts(){return qc.Pr(0,0,this.Its,this.Gts)}Bts(t){this.Mts!==(t=!!t)&&(this.Mts=t,this.Xyt)&&(this.Mts?this.CCt():this.vCt())}Nts(){return this.Mts}Wts(t){this.Pts=t}Vts(){return this.Pts}Uxt(t){this.Xyt=!!t,this.Xyt?(this.bTt(),this.Mts&&this.CCt()):(this.nTt(),this.vCt())}Jxt(){return this.Xyt}TTt(){const t="behaviors.bullet";return[{title:"$"+this.DW().Qc(),properties:[{name:t+".debugger.vector-x",value:this.Its,W8t:t=>this.Its=t},{name:t+".debugger.vector-y",value:this.Gts,W8t:t=>this.Gts=t},{name:t+".properties.speed.name",value:this.QZt(),W8t:t=>this.KZt(t)},{name:t+".debugger.angle-of-motion",value:qc.Tr(this.Lts())},{name:t+".properties.gravity.name",value:this.Fts(),W8t:t=>this.Ots(t)},{name:t+".properties.acceleration.name",value:this.sKt(),W8t:t=>this.tKt(t)},{name:t+".debugger.distance-travelled",value:this.Vts()},{name:t+".properties.enabled.name",value:this.Jxt(),W8t:t=>this.Uxt(t)}]}]}DMt(){return self.jts}},new WeakMap);self.jts=class extends $c{constructor(){super(),Yc.set(this,$c.N5().IW())}get speed(){return Yc.get(this).QZt()}set speed(t){Xc.bi(t),Yc.get(this).KZt(t)}get acceleration(){return Yc.get(this).sKt()}set acceleration(t){Xc.bi(t),Yc.get(this).tKt(t)}get Hts(){return Yc.get(this).Fts()}set Hts(t){Xc.bi(t),Yc.get(this).Ots(t)}get Uts(){return Yc.get(this).Lts()}set Uts(t){Xc.bi(t),Yc.get(this).Dts(t)}get zts(){return Yc.get(this).Nts()}set zts(t){Yc.get(this).Bts(!!t)}get Jts(){return Yc.get(this).Vts()}set Jts(t){Xc.bi(t),Yc.get(this).Wts(t)}get isEnabled(){return Yc.get(this).Jxt()}set isEnabled(t){Yc.get(this).Uxt(t)}}}{const Zc=self.Bs;Zc.Zat.vts.y$={qts(t,s){const e=Math.hypot(this.Its,this.Gts);return Zc.compare(e,t,s)},Xts(t,s){return Zc.compare(this.Vts(),t,s)},kts(){return!0},Qu(){return this.Jxt()}}}{const Kc=self.Bs;Kc.Zat.vts.hrt={iKt(t){this.KZt(t)},nKt(t){this.tKt(t)},$ts(t){this.Ots(t)},Yts(t){this.Dts(Kc.Mr(t))},x3(t){if(t){const s=t.hxt(this.Ie);if(s){const e=this.Ie.RO(),i=this.uf.Nk(),n=this.uf.AF(this.Ie),r=Kc.Gr(0,0,this.Its,this.Gts),h=i.A3t(this.Ie,this.Y$t,this.Z$t,s);this.Its=Math.cos(h)*r,this.Gts=Math.sin(h)*r,e.n4(this.Its*n,this.Gts*n),e.t4(),this.Tts&&(e.oB(h),this._ts=e.aB(),e.t4()),0!==r&&(this.Mts?i._3t(this.Ie,this.Its/r,this.Gts/r,Math.max(2.5*r*n,30))||i.R3t(this.Ie,100):i.G3t(this.Ie,this.Its/r,this.Gts/r,Math.max(2.5*r*n,30),s))}}},Zts(t){this.Bts(t)},Kts(t){this.Wts(t)},H2t(t){this.Uxt(t)},Qts(){this.Rts=!0}}}{const Qc=self.Bs;Qc.Zat.vts.ort={rKt(){return this.QZt()},hKt(){return this.sKt()},tss(){return Qc.Tr(this.Lts())},sss(){return this.Vts()},ess(){return this.Fts()}}}{const tf=self.Bs;tf.Zat.iss=class extends tf.fCt{constructor(t){super(t)}pr(){super.pr()}}}{const sf=self.Bs;sf.Zat.iss.GGt=class extends sf.yCt{constructor(t){super(t)}pr(){super.pr()}OMt(){}}}{const ef=self.Bs,nf=self.Xs,rf=self.RW,hf=(ef.Zat.iss.Instance=class extends ef.SCt{constructor(t,s){super(t),this.nss=0,this.rss=0,this.hss=0,this.oss=!0,this.ass=!0,this.lss=!1,this.uss=0,this.css=ef.dr(ef.T0),this.fss=this.Ie.RO().FE()||1,s&&(this.nss=s[0],this.rss=s[1],this.hss=s[2],this.oss=!!s[3],this.ass=!!s[4],this.uss=this.ass?0:3),this.ass&&(0===this.nss?(this.uss=1,0===this.rss&&(this.uss=2)):(this.Ie.RO().DE(0),this.uf.BO())),this.bTt()}pr(){super.pr()}Ov(){return{fit:this.nss,wt:this.rss,fot:this.hss,d:this.oss,s:this.uss,st:this.css.ne(),mo:this.fss}}Dv(t){this.nss=t.fit,this.rss=t.wt,this.hss=t.fot,this.oss=t.d,this.uss=t.s,this.css.Set(t.st),this.fss=t.mo,3===this.uss?this.nTt():this.bTt()}jZ(){const t=this.uf.AF(this.Ie),s=(this.css.fc(t),this.Ie.RO());0===this.uss&&(s.DE(this.css.ne()/this.nss*this.fss),this.uf.BO(),s.FE()>=this.fss)&&(s.DE(this.fss),this.uss=1,this.css.u0(),this.QMt("fadeinend"),this.TN(ef.Zat.iss.y$.dss)),1===this.uss&&this.css.ne()>=this.rss&&(this.uss=2,this.css.u0(),this.QMt("waitend"),this.TN(ef.Zat.iss.y$.pss)),2===this.uss&&(0!==this.hss?(s.DE(this.fss-this.css.ne()/this.hss*this.fss),this.uf.BO(),s.FE()<=0&&(this.uss=3,this.css.u0(),this.QMt("fadeoutend"),this.TN(ef.Zat.iss.y$.mss),this.oss)&&this.uf.H5(this.Ie)):(this.uss=3,this.css.u0())),3===this.uss&&this.nTt()}gss(){this.ass||this.lss||(this.fss=this.Ie.RO().FE()||1,this.lss=!0),3===this.uss&&this.fR()}yss(){this.fR()}fR(){this.uss=0,this.css.u0(),0===this.nss?(this.uss=1,0===this.rss&&(this.uss=2)):(this.Ie.RO().DE(0),this.uf.BO()),this.bTt()}wss(t){this.nss=Math.max(t,0)}Sss(){return this.nss}bss(t){this.rss=Math.max(t,0)}vss(){return this.rss}xss(t){this.hss=Math.max(t,0)}Mss(){return this.hss}Wrt(t){switch(t){case 0:return this.Sss();case 1:return this.vss();case 2:return this.Mss();case 3:return this.oss}}Jrt(t,s){switch(t){case 0:this.wss(s);break;case 1:this.bss(s);break;case 2:this.xss(s);break;case 3:this.oss=!!s}}TTt(){const t="behaviors.fade";return[{title:"$"+this.DW().Qc(),properties:[{name:t+".properties.fade-in-time.name",value:this.Sss(),W8t:t=>this.wss(t)},{name:t+".properties.wait-time.name",value:this.vss(),W8t:t=>this.bss(t)},{name:t+".properties.fade-out-time.name",value:this.Mss(),W8t:t=>this.xss(t)},{name:t+".debugger.stage",value:[t+".debugger."+["fade-in","wait","fade-out","done"][this.uss]]}]}]}DMt(){return self.Tss}},new WeakMap);self.Tss=class extends rf{constructor(){super(),hf.set(this,rf.N5().IW())}Css(){hf.get(this).gss()}Iss(){hf.get(this).yss()}set Gss(t){nf.bi(t),hf.get(this).wss(t)}get Gss(){return hf.get(this).Sss()}set _ss(t){nf.bi(t),hf.get(this).bss(t)}get _ss(){return hf.get(this).vss()}set Pss(t){nf.bi(t),hf.get(this).xss(t)}get Pss(){return hf.get(this).Mss()}}}{const of=self.Bs;of.Zat.iss.y$={mss(){return!0},dss(){return!0},pss(){return!0}}}{const af=self.Bs;af.Zat.iss.hrt={Ess(){this.gss()},Rss(){this.yss()},Ass(t){this.wss(t)},kss(t){this.bss(t)},Fss(t){this.xss(t)}}}{const lf=self.Bs;lf.Zat.iss.ort={Oss(){return this.Sss()},Dss(){return this.vss()},Lss(){return this.Mss()}}}{let e=function(t,s){return"number"==typeof t&&"number"==typeof s},r=function(t,s){return e(t,s)?t+s:t},h=function(t,s){return e(t,s)?t*s:t},n=function(e,i){if("string"!=typeof e&&"string"!=typeof i)return e&&i?1:0;{let t,s;return t="number"==typeof e?(Math.round(1e10*e)/1e10).toString():e,s="number"==typeof i?(Math.round(1e10*i)/1e10).toString():i,t+s}};e,r,h,n,0;self.aSt=[()=>1,()=>1.5,()=>16,()=>.5,()=>"ShopItems",()=>30,()=>"Money",t=>{const s=t.wSt(0).oSt();return()=>s.Ait()},()=>"ClickPower",()=>"BaseCoinIncome",()=>"Progress",()=>"Dollars",()=>"X2CoinsCoeff",()=>"x2CoinsBoostLevel",()=>"IsAutomationTrue",()=>"AutomationCoeff",()=>"AutomationLevel",()=>"RottenPlanks",()=>"Planks",()=>"GoodPlanks",()=>"ExcellentPlanks",()=>"RustyNails",()=>"Nails",()=>"SteelNails",()=>"GoldenNails",()=>"Gears",()=>"Wires",()=>"Electronics",()=>"CarbonFiber",()=>"QuantumLock",()=>"Diamonds",()=>"Chest1",()=>"Chest2",()=>"Chest3",()=>"Chest4",()=>"Chest5",()=>"IsJunkmanAcquired",()=>"IsCarpenterAcquired",()=>"IsBlacksmithAcquired",()=>"IsEngineerAcquired",()=>"IsScientistAcquired",()=>"IsTier1CraftAcquired",()=>"IsTier2CraftAcquired",()=>"IsTier3CraftAcquired",()=>"SaveExists",()=>"",()=>"Game saved",()=>2,t=>{const s=t.wSt(0).Bwt();return()=>s()},()=>-.1,()=>4,()=>3,()=>5,()=>6,()=>7,()=>8,()=>9,()=>10,()=>11,()=>12,()=>13,()=>14,()=>15,t=>{const s=t.wSt(0).Bwt(),e=t.wSt(1).oSt();return()=>s(e.Ait(),2)},t=>{const s=t.wSt(0).Bwt(),e=t.wSt(1).oSt();return()=>s(e.Ait(),1)},t=>{const s=t.wSt(0),e=t.wSt(1);return()=>s.Uwt(2,e.Xwt(),3)},t=>{const s=t.wSt(0).oSt();return()=>n("Is it mobile: ",s.Ait())},()=>"Shop button",()=>0,()=>.1,()=>.2,()=>"Cheats",()=>"Checks",()=>56,()=>330,()=>88,()=>356,()=>352,()=>18,()=>388,()=>66,()=>344,()=>620,()=>372,()=>652,()=>364,()=>350,t=>{const s=t.wSt(0);return()=>s.Xwt()},()=>"Main logic",()=>-25,()=>25,()=>-35,()=>-45,()=>45,()=>-55,()=>55,()=>-65,()=>65,()=>-75,()=>75,()=>-85,()=>85,()=>-95,()=>95,()=>-105,()=>105,()=>-150,()=>150,()=>-200,()=>200,()=>100,t=>{const s=t.wSt(0);return()=>s.Uwt()},t=>{const s=t.wSt(0);return()=>-s.Uwt()},()=>"MainButton",()=>"Workshop",()=>"Craft",()=>"Dirty chest",()=>"Texts DC",t=>{const s=t.wSt(0);return()=>s.Uwt(1,1,4)},t=>{const s=t.wSt(0).oSt(),e=t.wSt(1),i=t.wSt(2);return()=>n(n(s.Ait(),"/"),e.Uwt(i.Xwt(),1,4))},()=>"Craft logic DC",t=>{const s=t.wSt(0);return()=>s.Uwt(3,1,4)},t=>{const s=t.wSt(0);return()=>s.Uwt(2,1,4)},()=>"Simple chest",()=>"Texts SC",t=>{const s=t.wSt(0);return()=>s.Uwt(1,2,4)},t=>{const s=t.wSt(0).oSt(),e=t.wSt(1),i=t.wSt(2);return()=>n(n(s.Ait(),"/"),e.Uwt(i.Xwt(),2,4))},()=>"Craft logic SC",t=>{const s=t.wSt(0);return()=>s.Uwt(4,2,4)},t=>{const s=t.wSt(0);return()=>s.Uwt(5,2,4)},()=>"Good chest",()=>"Texts GC",t=>{const s=t.wSt(0);return()=>s.Uwt(1,3,4)},t=>{const s=t.wSt(0).oSt(),e=t.wSt(1),i=t.wSt(2);return()=>n(n(s.Ait(),"/"),e.Uwt(i.Xwt(),3,4))},()=>"Craft logic GC",t=>{const s=t.wSt(0);return()=>s.Uwt(7,3,4)},t=>{const s=t.wSt(0);return()=>s.Uwt(6,3,4)},()=>"Excellent chest",()=>"Texts EC",t=>{const s=t.wSt(0);return()=>s.Uwt(1,4,4)},t=>{const s=t.wSt(0).oSt(),e=t.wSt(1),i=t.wSt(2);return()=>n(n(s.Ait(),"/"),e.Uwt(i.Xwt(),4,4))},()=>"Craft logic EC",t=>{const s=t.wSt(0);return()=>s.Uwt(8,4,4)},t=>{const s=t.wSt(0);return()=>s.Uwt(9,4,4)},()=>"Chest beyond human possibilities",()=>"Texts CBHP",t=>{const s=t.wSt(0);return()=>s.Uwt(1,5,4)},t=>{const s=t.wSt(0).oSt(),e=t.wSt(1),i=t.wSt(2);return()=>n(n(s.Ait(),"/"),e.Uwt(i.Xwt(),5,4))},()=>"Craft logic CBHP",t=>{const s=t.wSt(0);return()=>s.Uwt(10,5,4)},t=>{const s=t.wSt(0);return()=>s.Uwt(13,5,4)},t=>{const s=t.wSt(0);return()=>s.Uwt(11,5,4)},t=>{const s=t.wSt(0);return()=>s.Uwt(12,5,4)},t=>{const s=t.wSt(0);return()=>s.Uwt(14,5,4)},t=>{const s=t.wSt(0);return()=>s.Uwt(15,5,4)},()=>"Inventory texts",()=>"Inventory buttons logic",()=>"Inventory menu",()=>"Settings",()=>-.2,()=>-.3,()=>"Workbench",()=>-.4,()=>"Inventory1",()=>"Inventiory2",()=>"Workbench menu",()=>"Side menu",()=>"Junkman menu",()=>"Carpenter menu",()=>"Blacksmith menu",()=>"Engineer menu",()=>"Scientist menu",()=>"Workshop merchants",()=>"Junkman",()=>"JunkmanTexts",t=>{const s=t.wSt(0),e=t.wSt(1);return()=>s.Uwt(2,e.Xwt(),0)},t=>{const s=t.wSt(0),e=t.wSt(1);return()=>s.Uwt(3,e.Xwt(),0)},t=>{const s=t.wSt(0),e=t.wSt(1);return()=>n(n("[b][color=Lawngreen]+",s.Uwt(3,1,5))+"[/color][/b] Dollars & [b][color=Lawngreen]+",e.Uwt(2,1,5))+"[/color][/b] Click Power / Chest"},t=>{const s=t.wSt(0).oSt();return()=>n("SELL ALL (",s.Ait())+")"},()=>"JunkmanButtons",t=>{const s=t.wSt(0);return()=>s.Uwt(3,1,0)},t=>{const s=t.wSt(0);return()=>s.Uwt(3,2,0)},()=>"Rotten planks",()=>"Rusty nails",()=>"Sell 1st chest",t=>{const s=t.wSt(0),e=t.wSt(1).oSt();return()=>h(s.Uwt(2,1,5),e.Ait())},t=>{const s=t.wSt(0),e=t.wSt(1).oSt();return()=>h(s.Uwt(3,1,5),e.Ait())},()=>"Carpenter",()=>"CarpenterTexts",t=>{const s=t.wSt(0),e=t.wSt(1);return()=>n(n("[b][color=Lawngreen]+",s.Uwt(3,2,5))+"[/color][/b] Dollars & [b][color=Lawngreen]+",e.Uwt(2,2,5))+"[/color][/b] Click Power / Chest"},()=>"CarpenterButtons",t=>{const s=t.wSt(0);return()=>s.Uwt(3,3,0)},t=>{const s=t.wSt(0);return()=>s.Uwt(3,5,0)},t=>{const s=t.wSt(0);return()=>s.Uwt(3,7,0)},()=>"Good planks",()=>"Excellent planks",()=>"Sell 2nd chest",t=>{const s=t.wSt(0),e=t.wSt(1).oSt();return()=>h(s.Uwt(2,2,5),e.Ait())},t=>{const s=t.wSt(0),e=t.wSt(1).oSt();return()=>h(s.Uwt(3,2,5),e.Ait())},()=>"Blacksmith",()=>"BlacksmithTexts",t=>{const s=t.wSt(0),e=t.wSt(1);return()=>n(n("[b][color=Lawngreen]+",s.Uwt(3,3,5))+"[/color][/b] Dollars & [b][color=Lawngreen]+",e.Uwt(2,3,5))+"[/color][/b] Click Power / Chest"},()=>"BlacksmithButtons",t=>{const s=t.wSt(0);return()=>s.Uwt(3,4,0)},t=>{const s=t.wSt(0);return()=>s.Uwt(3,6,0)},t=>{const s=t.wSt(0);return()=>s.Uwt(3,8,0)},()=>"Steel nails",()=>"Golden nails",()=>"Sell 3rd chest",t=>{const s=t.wSt(0),e=t.wSt(1).oSt();return()=>h(s.Uwt(2,3,5),e.Ait())},t=>{const s=t.wSt(0),e=t.wSt(1).oSt();return()=>h(s.Uwt(3,3,5),e.Ait())},()=>"Engineer",()=>"EngineerTexts",t=>{const s=t.wSt(0),e=t.wSt(1);return()=>n(n("[b][color=Lawngreen]+",s.Uwt(3,4,5))+"[/color][/b] Dollars & [b][color=Lawngreen]+",e.Uwt(2,4,5))+"[/color][/b] Click Power / Chest"},()=>"EngineerButtons",t=>{const s=t.wSt(0);return()=>s.Uwt(3,9,0)},t=>{const s=t.wSt(0);return()=>s.Uwt(3,10,0)},t=>{const s=t.wSt(0);return()=>s.Uwt(3,11,0)},()=>"Sell 4th chest",t=>{const s=t.wSt(0),e=t.wSt(1).oSt();return()=>h(s.Uwt(2,4,5),e.Ait())},t=>{const s=t.wSt(0),e=t.wSt(1).oSt();return()=>h(s.Uwt(3,4,5),e.Ait())},()=>"Scientist",()=>"ScientistTexts",t=>{const s=t.wSt(0),e=t.wSt(1);return()=>n(n("[b][color=Lawngreen]+",s.Uwt(3,5,5))+"[/color][/b] Dollars & [b][color=Lawngreen]+",e.Uwt(2,5,5))+"[/color][/b] Click Power / Chest"},()=>"ScientistButtons",t=>{const s=t.wSt(0);return()=>s.Uwt(3,12,0)},t=>{const s=t.wSt(0);return()=>s.Uwt(3,13,0)},t=>{const s=t.wSt(0);return()=>s.Uwt(3,14,0)},()=>"Carbon fiber sheets",()=>"Quantum lock",()=>"Artificial diamonds",()=>"Sell 5th chest",t=>{const s=t.wSt(0),e=t.wSt(1).oSt();return()=>h(s.Uwt(2,5,5),e.Ait())},t=>{const s=t.wSt(0),e=t.wSt(1).oSt();return()=>h(s.Uwt(3,5,5),e.Ait())},()=>"Main screen functions",()=>"Other",()=>"Shop text update",t=>{const s=t.wSt(0),e=t.wSt(1).oSt();return()=>s.Uwt(2,e.Ait(),2)},t=>{const s=t.wSt(0),e=t.wSt(1).oSt();return()=>n("+",s.Uwt(6,e.Ait(),2))+"% coins"},t=>{const s=t.wSt(0),e=t.wSt(1).oSt();return()=>s.Uwt(2,e.Ait(),1)},t=>{const s=t.wSt(0),e=t.wSt(1).oSt();return()=>n("+",s.Uwt(5,e.Ait(),1))+"/sec fill progess bar"},t=>{const s=t.wSt(0),e=t.wSt(1);return()=>s.Uwt(2,e.Xwt()+1,3)},t=>{const s=t.wSt(0),e=t.wSt(1);return()=>s.Uwt(6,e.Xwt()+1,3)},t=>{const s=t.wSt(0),e=t.wSt(1).oSt();return()=>s.Uwt(3,e.Ait(),2)},t=>{const s=t.wSt(0),e=t.wSt(1).oSt();return()=>s.Uwt(3,e.Ait(),1)},t=>{const s=t.wSt(0);return()=>s.Uwt(3,5,3)},t=>{const s=t.wSt(0),e=t.wSt(1);return()=>s.Uwt(3,e.Xwt(),3)},()=>"Shop buttons functional",t=>{const s=t.wSt(0),e=t.wSt(1).oSt();return()=>s.Uwt(5,e.Ait(),2)},t=>{const s=t.wSt(0).oSt(),e=t.wSt(1).oSt(),i=t.wSt(2),n=t.wSt(3).oSt();return()=>r(s.Ait(),h(e.Ait(),i.Uwt(5,n.Ait(),2)))},t=>{const s=t.wSt(0),e=t.wSt(1).oSt();return()=>n("x",s.Uwt(6,e.Ait(),2))+" coins"},t=>{const s=t.wSt(0),e=t.wSt(1).oSt();return()=>s.Uwt(5,e.Ait(),1)},t=>{const s=t.wSt(0);return()=>s.Uwt(3,1,3)},t=>{const s=t.wSt(0);return()=>s.Uwt(3,2,3)},t=>{const s=t.wSt(0);return()=>s.Uwt(3,3,3)},t=>{const s=t.wSt(0);return()=>s.Uwt(3,4,3)},()=>"Shop merchant button disabler",()=>"Maximum reached",()=>"More money lv10",()=>"Authomation lv12",()=>"Functions shop screen",()=>1.05,()=>31,()=>"Save load logic",t=>{const s=t.wSt(0).Bwt();return()=>n(Math.round(100*s()),"%")},t=>{const s=t.wSt(0).Bwt();return()=>555*s()}]}var t=self.Bs;self.zBt=function(){return[t.S$.ZVt,t.S$.Hnt,t.S$.Text,t.S$.kUt,t.Zat.YZt,t.S$.ezt,t.Zat.Yat,t.S$.fzt,t.Zat.vts,t.S$.VJt,t.S$.Gqt,t.S$.a9t,t.Zat.iss,t.S$.Touch,t.S$.sYt,t.S$.hZt,t.S$.w$.y$.g$,t.S$.sYt.y$.yYt,t.S$.w$.hrt.hWt,t.S$.Hnt.hrt.rB,t.S$.w$.hrt.DWt,t.Zat.iss.hrt.Fss,t.Zat.iss.hrt.Ess,t.S$.w$.hrt.Dh,t.S$.Gqt.hrt.Kqt,t.S$.w$.y$.I4t,t.S$.hZt.hrt.DZt,t.S$.Text.hrt.pf,t.S$.Text.hrt.zB,t.S$.Gqt.y$.Uqt,t.S$.VJt.hrt.gqt,t.S$.Gqt.ort.h9t,t.S$.Hnt.hrt.j8t,t.S$.Hnt.hrt._v,t.S$.Text.hrt._v,t.S$.w$.hrt.LWt,t.S$.w$.y$.F4t,t.S$.w$.y$.T4t,t.S$.w$.ort.x6t,t.S$.kUt.hrt.ZUt,t.S$.VJt.ort.$Jt,t.S$.w$.y$.Fpt,t.S$.a9t.y$.sXt,t.S$.a9t.y$.tXt,t.Zat.iss.hrt.Ass,t.S$.w$.hrt.AWt,t.S$.Touch.y$.UXt,t.S$.ezt.y$.LUt,t.S$.w$.hrt.oWt,t.S$.Hnt.hrt.zB,t.S$.Hnt.hrt.wHt,t.S$.Hnt.hrt.Cvt,t.S$.Text.hrt.Cvt,t.S$.w$.y$.dd,t.S$.w$.y$.A4t,t.Zat.YZt.hrt.H2t,t.S$.kUt.hrt.zB,t.Zat.YZt.hrt.iKt,t.S$.Hnt.ort.M2t,t.S$.w$.ort.hVt,t.S$.Hnt.hrt.Mv,t.S$.Hnt.ort.C2t,t.S$.a9t.y$.J9t,t.S$.Hnt.y$.qB,t.S$.w$.hrt.aWt,t.S$.Touch.y$.YXt,t.S$.a9t.y$.z9t,t.S$.Hnt.hrt.Iv,t.S$.Hnt.ort.T2t,t.S$.w$.y$.K4t,t.S$.w$.y$.C4t,t.S$.w$.y$.wgt,t.S$.w$.hrt.dWt,t.S$.Text.hrt.sxt,t.S$.Hnt.y$.nHt,t.S$.Touch.y$.a$t,t.S$.hZt.hrt.WZt,t.S$.hZt.y$.GZt,t.S$.hZt.hrt.BZt,t.S$.Text.hrt.OG,t.S$.hZt.y$.vZt,t.S$.hZt.ort.zZt,t.S$.hZt.hrt.VZt,t.S$.w$.hrt.fWt,t.S$.w$.ort.BVt,t.S$.ZVt.hrt.ym,t.S$.w$.y$.i5t]},self.n5t=[{Bss:0},{Nss:0},{Wss:0},{Vss:0},{jss:0},{Hss:0},{Uss:0},{zss:0},{Jss:0},{qss:0},{Xss:0},{$ss:0},{Yss:0},{Zss:0},{Kss:0},{Qss:0},{tes:0},{ses:0},{YZt:0},{ees:0},{ies:0},{nes:0},{res:0},{hes:0},{oes:0},{aes:0},{Yat:0},{les:0},{ues:0},{ces:0},{fes:0},{des:0},{pes:0},{mes:0},{ges:0},{yes:0},{wes:0},{Ses:0},{bes:0},{ves:0},{xes:0},{Mes:0},{Tes:0},{Ces:0},{Ies:0},{Ges:0},{_es:0},{Pes:0},{Ees:0},{Res:0},{Aes:0},{kes:0},{Fes:0},{Oes:0},{Des:0},{Les:0},{Bes:0},{Nes:0},{Wes:0},{Ves:0},{jes:0},{Hes:0},{Ues:0},{zes:0},{Jes:0},{qes:0},{Xes:0},{$es:0},{Yes:0},{Zes:0},{Kes:0},{Qes:0},{tis:0},{sis:0},{eis:0},{iis:0},{nis:0},{ris:0},{his:0},{ois:0},{ais:0},{lis:0},{uis:0},{cis:0},{fis:0},{dis:0},{pis:0},{mis:0},{gis:0},{yis:0},{wis:0},{Sis:0},{bis:0},{vis:0},{xis:0},{Mis:0},{Tis:0},{Cis:0},{Iis:0},{Gis:0},{_is:0},{Pis:0},{Eis:0},{Ris:0},{Ais:0},{kis:0},{Fis:0},{Ois:0},{Dis:0},{Lis:0},{Bis:0},{Nis:0},{Wis:0},{Vis:0},{jis:0},{His:0},{Uis:0},{zis:0},{Jis:0},{qis:0},{Xis:0},{$is:0},{Yis:0},{Zis:0},{Kis:0},{Qis:0},{tns:0},{sns:0},{ens:0},{ins:0},{nns:0},{rns:0},{hns:0},{ons:0},{"1stChestCraftButton":0},{"1stChestCraftButtonDisabled":0},{"1stChestCraftButtonText":0},{"1stChestCounter":0},{ans:0},{lns:0},{uns:0},{cns:0},{fns:0},{dns:0},{pns:0},{mns:0},{"2ndChestCounter":0},{"2ndChestCraftButtonText":0},{gns:0},{yns:0},{wns:0},{Sns:0},{bns:0},{"2ndChestCraftButton":0},{"2ndChestCraftButtonDisabled":0},{vns:0},{"3rdChestCounter":0},{"3rdChestCraftButtonText":0},{xns:0},{Mns:0},{Tns:0},{Cns:0},{Ins:0},{"3rdChestCraftButton":0},{"3rdChestCraftButtonDisabled":0},{"4thChestCraftButton":0},{"4thChestCraftButtonDisabled":0},{Gns:0},{_ns:0},{Pns:0},{"4thChestCounter":0},{"4thChestCraftButtonText":0},{Ens:0},{Rns:0},{Ans:0},{kns:0},{"5thChestCraftButton":0},{"5thChestCraftButtonDisabled":0},{Fns:0},{Ons:0},{Dns:0},{Lns:0},{Bns:0},{Nns:0},{"5thChestCounter":0},{"5thChestCraftButtonText":0},{Wns:0},{Vns:0},{jns:0},{Hns:0},{Uns:0},{zns:0},{Jns:0},{qns:0},{Xns:0},{$ns:0},{Yns:0},{Zns:0},{Kns:0},{Qns:0},{trs:0},{srs:0},{vts:0},{ers:0},{irs:0},{nrs:0},{yYt:0},{rrs:0},{hrs:0},{ors:0},{ars:0},{lrs:0},{urs:0},{crs:0},{frs:0},{drs:0},{prs:0},{mrs:0},{grs:0},{yrs:0},{wrs:0},{Srs:0},{brs:0},{vrs:0},{xrs:0},{Mrs:0},{Trs:0},{Crs:0},{Irs:0},{Grs:0},{_rs:0},{Prs:0},{Ers:0},{Rrs:0},{Ars:0},{krs:0},{Frs:0},{Ors:0},{Gqt:0},{a9t:0},{iss:0},{Drs:0},{Touch:0},{sYt:0},{Lrs:0},{Brs:0},{Nrs:0},{hZt:0},{Wrs:0},{Vrs:0},{jrs:0},{Hrs:0},{Urs:0},{zrs:0},{Jrs:0},{qrs:0},{Xrs:0},{$rs:0},{Yrs:0},{Zrs:0},{Krs:0},{Qrs:0},{ths:0},{shs:0},{ehs:0},{ihs:0},{nhs:0},{rhs:0},{hhs:0},{ohs:0},{ahs:0},{lhs:0},{uhs:0},{chs:0},{fhs:0},{dhs:0},{phs:0},{mhs:0},{ghs:0},{yhs:0},{whs:0},{Shs:0},{bhs:0},{vhs:0},{xhs:0},{Mhs:0},{Ths:0},{Chs:0},{Ihs:0},{Ghs:0},{_hs:0}],self.Phs={Bss:class extends self.bW{},Nss:class extends self.bW{},Wss:class extends self.J8t{},Vss:class extends self.J8t{},jss:class extends self.J8t{},Hss:class extends self.U7t{},Uss:class extends self.U7t{},zss:class extends self.U7t{},Jss:class extends self.U7t{},qss:class extends self.U7t{},Xss:class extends self.U7t{},$ss:class extends self.J8t{},Yss:class extends self.zUt{},Zss:class extends self.U7t{},Kss:class extends self.J8t{},Qss:class extends self.U7t{},tes:class extends self.U7t{},ses:class extends self.J8t{},ees:class extends self.J8t{},ies:class extends self.J8t{},res:class extends self.J8t{},hes:class extends self.J8t{},oes:class extends self.J8t{},aes:class extends self.azt{},les:class extends self.J8t{},ues:class extends self.U7t{},ces:class extends self.azt{},fes:class extends self.J8t{},des:class extends self.J8t{},pes:class extends self.J8t{},mes:class extends self.J8t{},ges:class extends self.J8t{},yes:class extends self.U7t{},wes:class extends self.J8t{},Ses:class extends self.U7t{},bes:class extends self.J8t{},ves:class extends self.U7t{},xes:class extends self.U7t{},Mes:class extends self.J8t{},Tes:class extends self.U7t{},Ces:class extends self.J8t{},Ies:class extends self.J8t{},Ges:class extends self.J8t{},_es:class extends self.J8t{},Pes:class extends self.J8t{},Ees:class extends self.J8t{},Res:class extends self.J8t{},Aes:class extends self.J8t{},kes:class extends self.J8t{},Fes:class extends self.U7t{},Oes:class extends self.U7t{},Des:class extends self.J8t{},Les:class extends self.U7t{},Bes:class extends self.U7t{},Nes:class extends self.U7t{},Wes:class extends self.J8t{},Ves:class extends self.J8t{},jes:class extends self.J8t{},Hes:class extends self.J8t{},Ues:class extends self.J8t{},zes:class extends self.J8t{},Jes:class extends self.J8t{},qes:class extends self.J8t{},Xes:class extends self.J8t{},$es:class extends self.U7t{},Yes:class extends self.U7t{},Zes:class extends self.J8t{},Kes:class extends self.U7t{},Qes:class extends self.U7t{},tis:class extends self.U7t{},sis:class extends self.J8t{},eis:class extends self.J8t{},iis:class extends self.J8t{},nis:class extends self.J8t{},ris:class extends self.U7t{},his:class extends self.U7t{},ois:class extends self.J8t{},ais:class extends self.J8t{},lis:class extends self.J8t{},uis:class extends self.J8t{},cis:class extends self.J8t{},fis:class extends self.J8t{},dis:class extends self.U7t{},pis:class extends self.U7t{},mis:class extends self.U7t{},gis:class extends self.J8t{},yis:class extends self.J8t{},wis:class extends self.J8t{},Sis:class extends self.J8t{},bis:class extends self.J8t{},vis:class extends self.J8t{},xis:class extends self.J8t{},Mis:class extends self.J8t{},Tis:class extends self.U7t{},Cis:class extends self.U7t{},Iis:class extends self.J8t{},Gis:class extends self.U7t{},_is:class extends self.U7t{},Pis:class extends self.U7t{},Eis:class extends self.J8t{},Ris:class extends self.J8t{},Ais:class extends self.J8t{},kis:class extends self.J8t{},Fis:class extends self.J8t{},Ois:class extends self.J8t{},Dis:class extends self.J8t{},Lis:class extends self.J8t{},Bis:class extends self.J8t{},Nis:class extends self.U7t{},Wis:class extends self.U7t{},Vis:class extends self.J8t{},jis:class extends self.J8t{},His:class extends self.J8t{},Uis:class extends self.J8t{},zis:class extends self.J8t{},Jis:class extends self.J8t{},qis:class extends self.J8t{},Xis:class extends self.U7t{},$is:class extends self.U7t{},Yis:class extends self.U7t{},Zis:class extends self.J8t{},Kis:class extends self.J8t{},Qis:class extends self.J8t{},tns:class extends self.U7t{},sns:class extends self.U7t{},ens:class extends self.J8t{},ins:class extends self.U7t{},nns:class extends self.U7t{},rns:class extends self.J8t{},hns:class extends self.J8t{},ons:class extends self.U7t{},Ehs:class extends self.J8t{},Rhs:class extends self.J8t{},Ahs:class extends self.U7t{},khs:class extends self.U7t{},ans:class extends self.J8t{},lns:class extends self.J8t{},uns:class extends self.J8t{},cns:class extends self.J8t{},fns:class extends self.J8t{},dns:class extends self.J8t{},pns:class extends self.J8t{},mns:class extends self.J8t{},Fhs:class extends self.U7t{},Ohs:class extends self.U7t{},gns:class extends self.U7t{},yns:class extends self.U7t{},wns:class extends self.U7t{},Sns:class extends self.J8t{},bns:class extends self.J8t{},Dhs:class extends self.J8t{},Lhs:class extends self.J8t{},vns:class extends self.J8t{},Bhs:class extends self.U7t{},Nhs:class extends self.U7t{},xns:class extends self.U7t{},Mns:class extends self.U7t{},Tns:class extends self.U7t{},Cns:class extends self.J8t{},Ins:class extends self.J8t{},Whs:class extends self.J8t{},Vhs:class extends self.J8t{},jhs:class extends self.J8t{},Hhs:class extends self.J8t{},Gns:class extends self.J8t{},_ns:class extends self.J8t{},Pns:class extends self.J8t{},Uhs:class extends self.U7t{},zhs:class extends self.U7t{},Ens:class extends self.U7t{},Rns:class extends self.U7t{},Ans:class extends self.U7t{},kns:class extends self.J8t{},Jhs:class extends self.J8t{},qhs:class extends self.J8t{},Fns:class extends self.J8t{},Ons:class extends self.J8t{},Dns:class extends self.J8t{},Lns:class extends self.J8t{},Bns:class extends self.J8t{},Nns:class extends self.J8t{},Xhs:class extends self.U7t{},$hs:class extends self.U7t{},Wns:class extends self.U7t{},Vns:class extends self.U7t{},jns:class extends self.U7t{},Hns:class extends self.J8t{},Uns:class extends self.J8t{},zns:class extends self.U7t{},Jns:class extends self.U7t{},qns:class extends self.U7t{},Xns:class extends self.J8t{},Yns:class extends self.J8t{},Kns:class extends self.U7t{},Qns:class extends self.U7t{},trs:class extends self.Qzt{},srs:class extends self.Qzt{},ers:class extends self.J8t{},irs:class extends self.J8t{},nrs:class extends self.J8t{},yYt:class extends self.U7t{},rrs:class extends self.U7t{},hrs:class extends self.U7t{},ors:class extends self.U7t{},ars:class extends self.U7t{},lrs:class extends self.U7t{},urs:class extends self.U7t{},crs:class extends self.U7t{},frs:class extends self.U7t{},prs:class extends self.U7t{},mrs:class extends self.U7t{},grs:class extends self.U7t{},yrs:class extends self.U7t{},wrs:class extends self.J8t{},Srs:class extends self.J8t{},brs:class extends self.J8t{},vrs:class extends self.J8t{},xrs:class extends self.J8t{},Mrs:class extends self.J8t{},Trs:class extends self.J8t{},Crs:class extends self.J8t{},Irs:class extends self.J8t{},Grs:class extends self.J8t{},_rs:class extends self.J8t{},Prs:class extends self.J8t{},Ers:class extends self.U7t{},Rrs:class extends self.U7t{},Ars:class extends self.J8t{},krs:class extends self.bW{},Frs:class extends self.U7t{},Ors:class extends self.sqt{},Gqt:class extends self.F5{},a9t:class extends self.F5{},Drs:class extends self.J8t{},Touch:class extends self.F5{},sYt:class extends self.F5{},Lrs:class extends self.azt{},Brs:class extends self.azt{},Nrs:class extends self.U7t{},hZt:class extends self.F5{}};